!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var n=[],r=Object.getPrototypeOf,o=n.slice,i=n.flat?function(e){return n.flat.call(e)}:function(e){return n.concat.apply([],e)},a=n.push,s=n.indexOf,u={},l=u.toString,c=u.hasOwnProperty,f=c.toString,d=f.call(Object),p={},h=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},g=function(e){return null!=e&&e===e.window},m=e.document,v={type:!0,src:!0,nonce:!0,noModule:!0};function y(e,t,n){var r,o,i=(n=n||m).createElement("script");if(i.text=e,t)for(r in v)(o=t[r]||t.getAttribute&&t.getAttribute(r))&&i.setAttribute(r,o);n.head.appendChild(i).parentNode.removeChild(i)}function b(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[l.call(e)]||"object":typeof e}var w="3.6.0",x=function(e,t){return new x.fn.init(e,t)};function _(e){var t=!!e&&"length"in e&&e.length,n=b(e);return!h(e)&&!g(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}x.fn=x.prototype={jquery:w,constructor:x,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return x.each(this,e)},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(x.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},x.extend=x.fn.extend=function(){var e,t,n,r,o,i,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||h(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(x.isPlainObject(r)||(o=Array.isArray(r)))?(n=a[t],i=o&&!Array.isArray(n)?[]:o||x.isPlainObject(n)?n:{},o=!1,a[t]=x.extend(l,i,r)):void 0!==r&&(a[t]=r));return a},x.extend({expando:"jQuery"+(w+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==l.call(e)||(t=r(e))&&("function"!=typeof(n=c.call(t,"constructor")&&t.constructor)||f.call(n)!==d))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){y(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(_(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(_(Object(e))?x.merge(n,"string"==typeof e?[e]:e):a.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:s.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;r<n;r++)e[o++]=t[r];return e.length=o,e},grep:function(e,t,n){for(var r=[],o=0,i=e.length,a=!n;o<i;o++)!t(e[o],o)!==a&&r.push(e[o]);return r},map:function(e,t,n){var r,o,a=0,s=[];if(_(e))for(r=e.length;a<r;a++)null!=(o=t(e[a],a,n))&&s.push(o);else for(a in e)null!=(o=t(e[a],a,n))&&s.push(o);return i(s)},guid:1,support:p}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=n[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){u["[object "+t+"]"]=t.toLowerCase()});var C=function(e){var t,n,r,o,i,a,s,u,l,c,f,d,p,h,g,m,v,y,b,w="sizzle"+1*new Date,x=e.document,_=0,C=0,S=ue(),E=ue(),k=ue(),T=ue(),A=function(e,t){return e===t&&(f=!0),0},L={}.hasOwnProperty,O=[],j=O.pop,M=O.push,P=O.push,D=O.slice,R=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",q="(?:\\\\[\\da-fA-F]{1,6}"+I+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",F="\\["+I+"*("+q+")(?:"+I+"*([*^$|!~]?=)"+I+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+q+"))|)"+I+"*\\]",U=":("+q+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",H=new RegExp(I+"+","g"),$=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),B=new RegExp("^"+I+"*,"+I+"*"),W=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),z=new RegExp(I+"|>"),G=new RegExp(U),K=new RegExp("^"+q+"$"),J={ID:new RegExp("^#("+q+")"),CLASS:new RegExp("^\\.("+q+")"),TAG:new RegExp("^("+q+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,V=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+I+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ie=function(){d()},ae=we(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{P.apply(O=D.call(x.childNodes),x.childNodes),O[x.childNodes.length].nodeType}catch(t){P={apply:O.length?function(e,t){M.apply(e,D.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,o){var i,s,l,c,f,h,v,y=t&&t.ownerDocument,x=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==x&&9!==x&&11!==x)return r;if(!o&&(d(t),t=t||p,g)){if(11!==x&&(f=Q.exec(e)))if(i=f[1]){if(9===x){if(!(l=t.getElementById(i)))return r;if(l.id===i)return r.push(l),r}else if(y&&(l=y.getElementById(i))&&b(t,l)&&l.id===i)return r.push(l),r}else{if(f[2])return P.apply(r,t.getElementsByTagName(e)),r;if((i=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return P.apply(r,t.getElementsByClassName(i)),r}if(n.qsa&&!T[e+" "]&&(!m||!m.test(e))&&(1!==x||"object"!==t.nodeName.toLowerCase())){if(v=e,y=t,1===x&&(z.test(e)||W.test(e))){for((y=ee.test(e)&&ve(t.parentNode)||t)===t&&n.scope||((c=t.getAttribute("id"))?c=c.replace(re,oe):t.setAttribute("id",c=w)),s=(h=a(e)).length;s--;)h[s]=(c?"#"+c:":scope")+" "+be(h[s]);v=h.join(",")}try{return P.apply(r,y.querySelectorAll(v)),r}catch(t){T(e,!0)}finally{c===w&&t.removeAttribute("id")}}}return u(e.replace($,"$1"),t,r,o)}function ue(){var e=[];return function t(n,o){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=o}}function le(e){return e[w]=!0,e}function ce(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){for(var n=e.split("|"),o=n.length;o--;)r.attrHandle[n[o]]=t}function de(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return le(function(t){return t=+t,le(function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))})})}function ve(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!X.test(t||n&&n.nodeName||"HTML")},d=se.setDocument=function(e){var t,o,a=e?e.ownerDocument||e:x;return a!=p&&9===a.nodeType&&a.documentElement&&(h=(p=a).documentElement,g=!i(p),x!=p&&(o=p.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",ie,!1):o.attachEvent&&o.attachEvent("onunload",ie)),n.scope=ce(function(e){return h.appendChild(e).appendChild(p.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),n.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ce(function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Z.test(p.getElementsByClassName),n.getById=ce(function(e){return h.appendChild(e).id=w,!p.getElementsByName||!p.getElementsByName(w).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,r,o,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(o=t.getElementsByName(e),r=0;i=o[r++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[o++];)1===n.nodeType&&r.push(n);return r}return i},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],m=[],(n.qsa=Z.test(p.querySelectorAll))&&(ce(function(e){var t;h.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+I+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+I+"*(?:value|"+N+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),(t=p.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\["+I+"*name"+I+"*="+I+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+I+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Z.test(y=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ce(function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",U)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=Z.test(h.compareDocumentPosition),b=t||Z.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==p||e.ownerDocument==x&&b(x,e)?-1:t==p||t.ownerDocument==x&&b(x,t)?1:c?R(c,e)-R(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,o=e.parentNode,i=t.parentNode,a=[e],s=[t];if(!o||!i)return e==p?-1:t==p?1:o?-1:i?1:c?R(c,e)-R(c,t):0;if(o===i)return de(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?de(a[r],s[r]):a[r]==x?-1:s[r]==x?1:0}),p},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(d(e),n.matchesSelector&&g&&!T[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){T(t,!0)}return 0<se(t,p,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=p&&d(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=p&&d(e);var o=r.attrHandle[t.toLowerCase()],i=o&&L.call(r.attrHandle,t.toLowerCase())?o(e,t,!g):void 0;return void 0!==i?i:n.attributes||!g?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},se.escape=function(e){return(e+"").replace(re,oe)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],o=0,i=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(A),f){for(;t=e[i++];)t===e[i]&&(o=r.push(i));for(;o--;)e.splice(r[o],1)}return c=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=o(t);return n},(r=se.selectors={cacheLength:50,createPseudo:le,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return J.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&G.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&S(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var o=se.attr(r,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&-1<o.indexOf(n):"$="===t?n&&o.slice(-n.length)===n:"~="===t?-1<(" "+o.replace(H," ")+" ").indexOf(n):"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,d,p,h,g=i!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!u&&!s,b=!1;if(m){if(i){for(;g;){for(d=t;d=d[g];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&y){for(b=(p=(l=(c=(f=(d=m)[w]||(d[w]={}))[d.uniqueID]||(f[d.uniqueID]={}))[e]||[])[0]===_&&l[1])&&l[2],d=p&&m.childNodes[p];d=++p&&d&&d[g]||(b=p=0)||h.pop();)if(1===d.nodeType&&++b&&d===t){c[e]=[_,p,b];break}}else if(y&&(b=p=(l=(c=(f=(d=t)[w]||(d[w]={}))[d.uniqueID]||(f[d.uniqueID]={}))[e]||[])[0]===_&&l[1]),!1===b)for(;(d=++p&&d&&d[g]||(b=p=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&((c=(f=d[w]||(d[w]={}))[d.uniqueID]||(f[d.uniqueID]={}))[e]=[_,b]),d!==t)););return(b-=o)===r||b%r==0&&0<=b/r}}},PSEUDO:function(e,t){var n,o=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return o[w]?o(t):1<o.length?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,n){for(var r,i=o(e,t),a=i.length;a--;)e[r=R(e,i[a])]=!(n[r]=i[a])}):function(e){return o(e,0,n)}):o}},pseudos:{not:le(function(e){var t=[],n=[],r=s(e.replace($,"$1"));return r[w]?le(function(e,t,n,o){for(var i,a=r(e,null,o,[]),s=e.length;s--;)(i=a[s])&&(e[s]=!(t[s]=i))}):function(e,o,i){return t[0]=e,r(t,null,i,n),t[0]=null,!n.pop()}}),has:le(function(e){return function(t){return 0<se(e,t).length}}),contains:le(function(e){return e=e.replace(te,ne),function(t){return-1<(t.textContent||o(t)).indexOf(e)}}),lang:le(function(e){return K.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return V.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me(function(){return[0]}),last:me(function(e,t){return[t-1]}),eq:me(function(e,t,n){return[n<0?n+t:n]}),even:me(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:me(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:me(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:me(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=he(t);function ye(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function we(e,t,n){var r=t.dir,o=t.next,i=o||r,a=n&&"parentNode"===i,s=C++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,o);return!1}:function(t,n,u){var l,c,f,d=[_,s];if(u){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(c=(f=t[w]||(t[w]={}))[t.uniqueID]||(f[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[i])&&l[0]===_&&l[1]===s)return d[2]=l[2];if((c[i]=d)[2]=e(t,n,u))return!0}return!1}}function xe(e){return 1<e.length?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function _e(e,t,n,r,o){for(var i,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(i=e[s])&&(n&&!n(i,r,o)||(a.push(i),l&&t.push(s)));return a}function Ce(e,t,n,r,o,i){return r&&!r[w]&&(r=Ce(r)),o&&!o[w]&&(o=Ce(o,i)),le(function(i,a,s,u){var l,c,f,d=[],p=[],h=a.length,g=i||function(e,t,n){for(var r=0,o=t.length;r<o;r++)se(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!i&&t?g:_e(g,d,e,s,u),v=n?o||(i?e:h||r)?[]:a:m;if(n&&n(m,v,s,u),r)for(l=_e(v,p),r(l,[],s,u),c=l.length;c--;)(f=l[c])&&(v[p[c]]=!(m[p[c]]=f));if(i){if(o||e){if(o){for(l=[],c=v.length;c--;)(f=v[c])&&l.push(m[c]=f);o(null,v=[],l,u)}for(c=v.length;c--;)(f=v[c])&&-1<(l=o?R(i,f):d[c])&&(i[l]=!(a[l]=f))}}else v=_e(v===a?v.splice(h,v.length):v),o?o(null,a,v,u):P.apply(a,v)})}function Se(e){for(var t,n,o,i=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,c=we(function(e){return e===t},s,!0),f=we(function(e){return-1<R(t,e)},s,!0),d=[function(e,n,r){var o=!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,o}];u<i;u++)if(n=r.relative[e[u].type])d=[we(xe(d),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[w]){for(o=++u;o<i&&!r.relative[e[o].type];o++);return Ce(1<u&&xe(d),1<u&&be(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace($,"$1"),n,u<o&&Se(e.slice(u,o)),o<i&&Se(e=e.slice(o)),o<i&&be(e))}d.push(n)}return xe(d)}return ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,a=se.tokenize=function(e,t){var n,o,i,a,s,u,l,c=E[e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],l=r.preFilter;s;){for(a in n&&!(o=B.exec(s))||(o&&(s=s.slice(o[0].length)||s),u.push(i=[])),n=!1,(o=W.exec(s))&&(n=o.shift(),i.push({value:n,type:o[0].replace($," ")}),s=s.slice(n.length)),r.filter)!(o=J[a].exec(s))||l[a]&&!(o=l[a](o))||(n=o.shift(),i.push({value:n,type:a,matches:o}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):E(e,u).slice(0)},s=se.compile=function(e,t){var n,o,i,s,u,c,f=[],h=[],m=k[e+" "];if(!m){for(t||(t=a(e)),n=t.length;n--;)(m=Se(t[n]))[w]?f.push(m):h.push(m);(m=k(e,(o=h,s=0<(i=f).length,u=0<o.length,c=function(e,t,n,a,c){var f,h,m,v=0,y="0",b=e&&[],w=[],x=l,C=e||u&&r.find.TAG("*",c),S=_+=null==x?1:Math.random()||.1,E=C.length;for(c&&(l=t==p||t||c);y!==E&&null!=(f=C[y]);y++){if(u&&f){for(h=0,t||f.ownerDocument==p||(d(f),n=!g);m=o[h++];)if(m(f,t||p,n)){a.push(f);break}c&&(_=S)}s&&((f=!m&&f)&&v--,e&&b.push(f))}if(v+=y,s&&y!==v){for(h=0;m=i[h++];)m(b,w,t,n);if(e){if(0<v)for(;y--;)b[y]||w[y]||(w[y]=j.call(a));w=_e(w)}P.apply(a,w),c&&!e&&0<w.length&&1<v+i.length&&se.uniqueSort(a)}return c&&(_=S,l=x),b},s?le(c):c))).selector=e}return m},u=se.select=function(e,t,n,o){var i,u,l,c,f,d="function"==typeof e&&e,p=!o&&a(e=d.selector||e);if(n=n||[],1===p.length){if(2<(u=p[0]=p[0].slice(0)).length&&"ID"===(l=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(te,ne),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(i=J.needsContext.test(e)?0:u.length;i--&&(l=u[i],!r.relative[c=l.type]);)if((f=r.find[c])&&(o=f(l.matches[0].replace(te,ne),ee.test(u[0].type)&&ve(t.parentNode)||t))){if(u.splice(i,1),!(e=o.length&&be(u)))return P.apply(n,o),n;break}}return(d||s(e,p))(o,t,!g,n,!t||ee.test(e)&&ve(t.parentNode)||t),n},n.sortStable=w.split("").sort(A).join("")===w,n.detectDuplicates=!!f,d(),n.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(N,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(e);x.find=C,x.expr=C.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=C.uniqueSort,x.text=C.getText,x.isXMLDoc=C.isXML,x.contains=C.contains,x.escapeSelector=C.escape;var S=function(e,t,n){for(var r=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&x(e).is(n))break;r.push(e)}return r},E=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=x.expr.match.needsContext;function T(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function L(e,t,n){return h(t)?x.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?x.grep(e,function(e){return e===t!==n}):"string"!=typeof t?x.grep(e,function(e){return-1<s.call(t,e)!==n}):x.filter(t,e,n)}x.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},x.fn.extend({find:function(e){var t,n,r=this.length,o=this;if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;t<r;t++)if(x.contains(o[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)x.find(e,o[t],n);return 1<r?x.uniqueSort(n):n},filter:function(e){return this.pushStack(L(this,e||[],!1))},not:function(e){return this.pushStack(L(this,e||[],!0))},is:function(e){return!!L(this,"string"==typeof e&&k.test(e)?x(e):e||[],!1).length}});var O,j=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(e,t,n){var r,o;if(!e)return this;if(n=n||O,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:j.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof x?t[0]:t,x.merge(this,x.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:m,!0)),A.test(r[1])&&x.isPlainObject(t))for(r in t)h(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(o=m.getElementById(r[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):h(e)?void 0!==n.ready?n.ready(e):e(x):x.makeArray(e,this)}).prototype=x.fn,O=x(m);var M=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function D(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}x.fn.extend({has:function(e){var t=x(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(x.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,o=this.length,i=[],a="string"!=typeof e&&x(e);if(!k.test(e))for(;r<o;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&x.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(1<i.length?x.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?s.call(x(e),this[0]):s.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return S(e,"parentNode")},parentsUntil:function(e,t,n){return S(e,"parentNode",n)},next:function(e){return D(e,"nextSibling")},prev:function(e){return D(e,"previousSibling")},nextAll:function(e){return S(e,"nextSibling")},prevAll:function(e){return S(e,"previousSibling")},nextUntil:function(e,t,n){return S(e,"nextSibling",n)},prevUntil:function(e,t,n){return S(e,"previousSibling",n)},siblings:function(e){return E((e.parentNode||{}).firstChild,e)},children:function(e){return E(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(T(e,"template")&&(e=e.content||e),x.merge([],e.childNodes))}},function(e,t){x.fn[e]=function(n,r){var o=x.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=x.filter(r,o)),1<this.length&&(P[e]||x.uniqueSort(o),M.test(e)&&o.reverse()),this.pushStack(o)}});var R=/[^\x20\t\r\n\f]+/g;function N(e){return e}function I(e){throw e}function q(e,t,n,r){var o;try{e&&h(o=e.promise)?o.call(e).done(t).fail(n):e&&h(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}x.Callbacks=function(e){var t,n;e="string"==typeof e?(t=e,n={},x.each(t.match(R)||[],function(e,t){n[t]=!0}),n):x.extend({},e);var r,o,i,a,s=[],u=[],l=-1,c=function(){for(a=a||e.once,i=r=!0;u.length;l=-1)for(o=u.shift();++l<s.length;)!1===s[l].apply(o[0],o[1])&&e.stopOnFalse&&(l=s.length,o=!1);e.memory||(o=!1),r=!1,a&&(s=o?[]:"")},f={add:function(){return s&&(o&&!r&&(l=s.length-1,u.push(o)),function t(n){x.each(n,function(n,r){h(r)?e.unique&&f.has(r)||s.push(r):r&&r.length&&"string"!==b(r)&&t(r)})}(arguments),o&&!r&&c()),this},remove:function(){return x.each(arguments,function(e,t){for(var n;-1<(n=x.inArray(t,s,n));)s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<x.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=o="",this},disabled:function(){return!s},lock:function(){return a=u=[],o||r||(s=o=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),r||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!i}};return f},x.extend({Deferred:function(t){var n=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],r="pending",o={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return x.Deferred(function(t){x.each(n,function(n,r){var o=h(e[r[4]])&&e[r[4]];i[r[1]](function(){var e=o&&o.apply(this,arguments);e&&h(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,o?[e]:arguments)})}),e=null}).promise()},then:function(t,r,o){var i=0;function a(t,n,r,o){return function(){var s=this,u=arguments,l=function(){var e,l;if(!(t<i)){if((e=r.apply(s,u))===n.promise())throw new TypeError("Thenable self-resolution");l=e&&("object"==typeof e||"function"==typeof e)&&e.then,h(l)?o?l.call(e,a(i,n,N,o),a(i,n,I,o)):(i++,l.call(e,a(i,n,N,o),a(i,n,I,o),a(i,n,N,n.notifyWith))):(r!==N&&(s=void 0,u=[e]),(o||n.resolveWith)(s,u))}},c=o?l:function(){try{l()}catch(e){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(e,c.stackTrace),i<=t+1&&(r!==I&&(s=void 0,u=[e]),n.rejectWith(s,u))}};t?c():(x.Deferred.getStackHook&&(c.stackTrace=x.Deferred.getStackHook()),e.setTimeout(c))}}return x.Deferred(function(e){n[0][3].add(a(0,e,h(o)?o:N,e.notifyWith)),n[1][3].add(a(0,e,h(t)?t:N)),n[2][3].add(a(0,e,h(r)?r:I))}).promise()},promise:function(e){return null!=e?x.extend(e,o):o}},i={};return x.each(n,function(e,t){var a=t[2],s=t[5];o[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),i[t[0]]=function(){return i[t[0]+"With"](this===i?void 0:this,arguments),this},i[t[0]+"With"]=a.fireWith}),o.promise(i),t&&t.call(i,i),i},when:function(e){var t=arguments.length,n=t,r=Array(n),i=o.call(arguments),a=x.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=1<arguments.length?o.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&(q(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||h(i[n]&&i[n].then)))return a.then();for(;n--;)q(i[n],s(n),a.reject);return a.promise()}});var F=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&F.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},x.readyException=function(t){e.setTimeout(function(){throw t})};var U=x.Deferred();function H(){m.removeEventListener("DOMContentLoaded",H),e.removeEventListener("load",H),x.ready()}x.fn.ready=function(e){return U.then(e).catch(function(e){x.readyException(e)}),this},x.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--x.readyWait:x.isReady)||(x.isReady=!0)!==e&&0<--x.readyWait||U.resolveWith(m,[x])}}),x.ready.then=U.then,"complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll?e.setTimeout(x.ready):(m.addEventListener("DOMContentLoaded",H),e.addEventListener("load",H));var $=function(e,t,n,r,o,i,a){var s=0,u=e.length,l=null==n;if("object"===b(n))for(s in o=!0,n)$(e,t,s,n[s],!0,i,a);else if(void 0!==r&&(o=!0,h(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(x(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return o?e:l?t.call(e):u?t(e[0],n):i},B=/^-ms-/,W=/-([a-z])/g;function z(e,t){return t.toUpperCase()}function G(e){return e.replace(B,"ms-").replace(W,z)}var K=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function J(){this.expando=x.expando+J.uid++}J.uid=1,J.prototype={cache:function(e){var t=e[this.expando];return t||(t={},K(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,o=this.cache(e);if("string"==typeof t)o[G(t)]=n;else for(r in t)o[G(r)]=t[r];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][G(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(G):(t=G(t))in r?[t]:t.match(R)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||x.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!x.isEmptyObject(t)}};var X=new J,V=new J,Y=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function Q(e,t,n){var r,o;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Z,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(o=n)||"false"!==o&&("null"===o?null:o===+o+""?+o:Y.test(o)?JSON.parse(o):o)}catch(e){}V.set(e,t,n)}else n=void 0;return n}x.extend({hasData:function(e){return V.hasData(e)||X.hasData(e)},data:function(e,t,n){return V.access(e,t,n)},removeData:function(e,t){V.remove(e,t)},_data:function(e,t,n){return X.access(e,t,n)},_removeData:function(e,t){X.remove(e,t)}}),x.fn.extend({data:function(e,t){var n,r,o,i=this[0],a=i&&i.attributes;if(void 0===e){if(this.length&&(o=V.get(i),1===i.nodeType&&!X.get(i,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=G(r.slice(5)),Q(i,r,o[r]));X.set(i,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){V.set(this,e)}):$(this,function(t){var n;if(i&&void 0===t)return void 0!==(n=V.get(i,e))?n:void 0!==(n=Q(i,e))?n:void 0;this.each(function(){V.set(this,e,t)})},null,t,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){V.remove(this,e)})}}),x.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=X.get(e,t),n&&(!r||Array.isArray(n)?r=X.access(e,t,x.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),r=n.length,o=n.shift(),i=x._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete i.stop,o.call(e,function(){x.dequeue(e,t)},i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return X.get(e,n)||X.access(e,n,{empty:x.Callbacks("once memory").add(function(){X.remove(e,[t+"queue",n])})})}}),x.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?x.queue(this[0],e):void 0===t?this:this.each(function(){var n=x.queue(this,e,t);x._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=x.Deferred(),i=this,a=this.length,s=function(){--r||o.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=X.get(i[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),o.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=m.documentElement,oe=function(e){return x.contains(e.ownerDocument,e)},ie={composed:!0};re.getRootNode&&(oe=function(e){return x.contains(e.ownerDocument,e)||e.getRootNode(ie)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===x.css(e,"display")};function se(e,t,n,r){var o,i,a=20,s=r?function(){return r.cur()}:function(){return x.css(e,t,"")},u=s(),l=n&&n[3]||(x.cssNumber[t]?"":"px"),c=e.nodeType&&(x.cssNumber[t]||"px"!==l&&+u)&&te.exec(x.css(e,t));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;a--;)x.style(e,t,c+l),(1-i)*(1-(i=s()/u||.5))<=0&&(a=0),c/=i;c*=2,x.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,o=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=o)),o}var ue={};function le(e,t){for(var n,r,o,i,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=X.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=i=void 0,a=(o=r).ownerDocument,s=o.nodeName,(u=ue[s])||(i=a.body.appendChild(a.createElement(s)),u=x.css(i,"display"),i.parentNode.removeChild(i),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",X.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}x.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?x(this).show():x(this).hide()})}});var ce,fe,de=/^(?:checkbox|radio)$/i,pe=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=m.createDocumentFragment().appendChild(m.createElement("div")),(fe=m.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),p.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",p.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function me(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&T(e,t)?x.merge([e],n):n}function ve(e,t){for(var n=0,r=e.length;n<r;n++)X.set(e[n],"globalEval",!t||X.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,p.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var ye=/<|&#?\w+;/;function be(e,t,n,r,o){for(var i,a,s,u,l,c,f=t.createDocumentFragment(),d=[],p=0,h=e.length;p<h;p++)if((i=e[p])||0===i)if("object"===b(i))x.merge(d,i.nodeType?[i]:i);else if(ye.test(i)){for(a=a||f.appendChild(t.createElement("div")),s=(pe.exec(i)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+x.htmlPrefilter(i)+u[2],c=u[0];c--;)a=a.lastChild;x.merge(d,a.childNodes),(a=f.firstChild).textContent=""}else d.push(t.createTextNode(i));for(f.textContent="",p=0;i=d[p++];)if(r&&-1<x.inArray(i,r))o&&o.push(i);else if(l=oe(i),a=me(f.appendChild(i),"script"),l&&ve(a),n)for(c=0;i=a[c++];)he.test(i.type||"")&&n.push(i);return f}var we=/^([^.]*)(?:\.(.+)|)/;function xe(){return!0}function _e(){return!1}function Ce(e,t){return e===function(){try{return m.activeElement}catch(e){}}()==("focus"===t)}function Se(e,t,n,r,o,i){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Se(e,s,n,r,t[s],i);return e}if(null==r&&null==o?(o=n,r=n=void 0):null==o&&("string"==typeof n?(o=r,r=void 0):(o=r,r=n,n=void 0)),!1===o)o=_e;else if(!o)return e;return 1===i&&(a=o,(o=function(e){return x().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=x.guid++)),e.each(function(){x.event.add(this,t,o,r,n)})}function Ee(e,t,n){n?(X.set(e,t,!1),x.event.add(e,t,{namespace:!1,handler:function(e){var r,i,a=X.get(this,t);if(1&e.isTrigger&&this[t]){if(a.length)(x.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=o.call(arguments),X.set(this,t,a),r=n(this,t),this[t](),a!==(i=X.get(this,t))||r?X.set(this,t,!1):i={},a!==i)return e.stopImmediatePropagation(),e.preventDefault(),i&&i.value}else a.length&&(X.set(this,t,{value:x.event.trigger(x.extend(a[0],x.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===X.get(e,t)&&x.event.add(e,t,xe)}x.event={global:{},add:function(e,t,n,r,o){var i,a,s,u,l,c,f,d,p,h,g,m=X.get(e);if(K(e))for(n.handler&&(n=(i=n).handler,o=i.selector),o&&x.find.matchesSelector(re,o),n.guid||(n.guid=x.guid++),(u=m.events)||(u=m.events=Object.create(null)),(a=m.handle)||(a=m.handle=function(t){return void 0!==x&&x.event.triggered!==t.type?x.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(R)||[""]).length;l--;)p=g=(s=we.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),p&&(f=x.event.special[p]||{},p=(o?f.delegateType:f.bindType)||p,f=x.event.special[p]||{},c=x.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&x.expr.match.needsContext.test(o),namespace:h.join(".")},i),(d=u[p])||((d=u[p]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(p,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),o?d.splice(d.delegateCount++,0,c):d.push(c),x.event.global[p]=!0)},remove:function(e,t,n,r,o){var i,a,s,u,l,c,f,d,p,h,g,m=X.hasData(e)&&X.get(e);if(m&&(u=m.events)){for(l=(t=(t||"").match(R)||[""]).length;l--;)if(p=g=(s=we.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),p){for(f=x.event.special[p]||{},d=u[p=(r?f.delegateType:f.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=i=d.length;i--;)c=d[i],!o&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(i,1),c.selector&&d.delegateCount--,f.remove&&f.remove.call(e,c));a&&!d.length&&(f.teardown&&!1!==f.teardown.call(e,h,m.handle)||x.removeEvent(e,p,m.handle),delete u[p])}else for(p in u)x.event.remove(e,p+t[l],n,r,!0);x.isEmptyObject(u)&&X.remove(e,"handle events")}},dispatch:function(e){var t,n,r,o,i,a,s=new Array(arguments.length),u=x.event.fix(e),l=(X.get(this,"events")||Object.create(null))[u.type]||[],c=x.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){for(a=x.event.handlers.call(this,u,l),t=0;(o=a[t++])&&!u.isPropagationStopped();)for(u.currentTarget=o.elem,n=0;(i=o.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==i.namespace&&!u.rnamespace.test(i.namespace)||(u.handleObj=i,u.data=i.data,void 0!==(r=((x.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,o,i,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(i=[],a={},n=0;n<u;n++)void 0===a[o=(r=t[n]).selector+" "]&&(a[o]=r.needsContext?-1<x(o,this).index(l):x.find(o,this,null,[l]).length),a[o]&&i.push(r);i.length&&s.push({elem:l,handlers:i})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(x.Event.prototype,e,{enumerable:!0,configurable:!0,get:h(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[x.expando]?e:new x.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return de.test(t.type)&&t.click&&T(t,"input")&&Ee(t,"click",xe),!1},trigger:function(e){var t=this||e;return de.test(t.type)&&t.click&&T(t,"input")&&Ee(t,"click"),!0},_default:function(e){var t=e.target;return de.test(t.type)&&t.click&&T(t,"input")&&X.get(t,"click")||T(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},x.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},x.Event=function(e,t){if(!(this instanceof x.Event))return new x.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?xe:_e,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&x.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:_e,isPropagationStopped:_e,isImmediatePropagationStopped:_e,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(e,t){x.event.special[e]={setup:function(){return Ee(this,e,Ce),!1},trigger:function(){return Ee(this,e),!0},_default:function(){return!0},delegateType:t}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,o=e.handleObj;return r&&(r===this||x.contains(this,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),x.fn.extend({on:function(e,t,n,r){return Se(this,e,t,n,r)},one:function(e,t,n,r){return Se(this,e,t,n,r,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,x(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=_e),this.each(function(){x.event.remove(this,e,n,t)})}});var ke=/<script|<style|<link/i,Te=/checked\s*(?:[^=]|=\s*.checked.)/i,Ae=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Le(e,t){return T(e,"table")&&T(11!==t.nodeType?t:t.firstChild,"tr")&&x(e).children("tbody")[0]||e}function Oe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function je(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Me(e,t){var n,r,o,i,a,s;if(1===t.nodeType){if(X.hasData(e)&&(s=X.get(e).events))for(o in X.remove(t,"handle events"),s)for(n=0,r=s[o].length;n<r;n++)x.event.add(t,o,s[o][n]);V.hasData(e)&&(i=V.access(e),a=x.extend({},i),V.set(t,a))}}function Pe(e,t,n,r){t=i(t);var o,a,s,u,l,c,f=0,d=e.length,g=d-1,m=t[0],v=h(m);if(v||1<d&&"string"==typeof m&&!p.checkClone&&Te.test(m))return e.each(function(o){var i=e.eq(o);v&&(t[0]=m.call(this,o,i.html())),Pe(i,t,n,r)});if(d&&(a=(o=be(t,e[0].ownerDocument,!1,e,r)).firstChild,1===o.childNodes.length&&(o=a),a||r)){for(u=(s=x.map(me(o,"script"),Oe)).length;f<d;f++)l=o,f!==g&&(l=x.clone(l,!0,!0),u&&x.merge(s,me(l,"script"))),n.call(e[f],l,f);if(u)for(c=s[s.length-1].ownerDocument,x.map(s,je),f=0;f<u;f++)l=s[f],he.test(l.type||"")&&!X.access(l,"globalEval")&&x.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?x._evalUrl&&!l.noModule&&x._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):y(l.textContent.replace(Ae,""),l,c))}return e}function De(e,t,n){for(var r,o=t?x.filter(t,e):e,i=0;null!=(r=o[i]);i++)n||1!==r.nodeType||x.cleanData(me(r)),r.parentNode&&(n&&oe(r)&&ve(me(r,"script")),r.parentNode.removeChild(r));return e}x.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,o,i,a,s,u,l,c=e.cloneNode(!0),f=oe(e);if(!(p.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(a=me(c),r=0,o=(i=me(e)).length;r<o;r++)s=i[r],"input"===(l=(u=a[r]).nodeName.toLowerCase())&&de.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(i=i||me(e),a=a||me(c),r=0,o=i.length;r<o;r++)Me(i[r],a[r]);else Me(e,c);return 0<(a=me(c,"script")).length&&ve(a,!f&&me(e,"script")),c},cleanData:function(e){for(var t,n,r,o=x.event.special,i=0;void 0!==(n=e[i]);i++)if(K(n)){if(t=n[X.expando]){if(t.events)for(r in t.events)o[r]?x.event.remove(n,r):x.removeEvent(n,r,t.handle);n[X.expando]=void 0}n[V.expando]&&(n[V.expando]=void 0)}}}),x.fn.extend({detach:function(e){return De(this,e,!0)},remove:function(e){return De(this,e)},text:function(e){return $(this,function(e){return void 0===e?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Pe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Le(this,e).appendChild(e)})},prepend:function(){return Pe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Le(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(x.cleanData(me(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ke.test(e)&&!ge[(pe.exec(e)||["",""])[1].toLowerCase()]){e=x.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(x.cleanData(me(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Pe(this,arguments,function(t){var n=this.parentNode;x.inArray(this,e)<0&&(x.cleanData(me(this)),n&&n.replaceChild(t,this))},e)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){for(var n,r=[],o=x(e),i=o.length-1,s=0;s<=i;s++)n=s===i?this:this.clone(!0),x(o[s])[t](n),a.apply(r,n.get());return this.pushStack(r)}});var Re=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Ne=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Ie=function(e,t,n){var r,o,i={};for(o in t)i[o]=e.style[o],e.style[o]=t[o];for(o in r=n.call(e),t)e.style[o]=i[o];return r},qe=new RegExp(ne.join("|"),"i");function Fe(e,t,n){var r,o,i,a,s=e.style;return(n=n||Ne(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||oe(e)||(a=x.style(e,t)),!p.pixelBoxStyles()&&Re.test(a)&&qe.test(t)&&(r=s.width,o=s.minWidth,i=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=o,s.maxWidth=i)),void 0!==a?a+"":a}function Ue(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(l).appendChild(c);var t=e.getComputedStyle(c);r="1%"!==t.top,u=12===n(t.marginLeft),c.style.right="60%",a=36===n(t.right),o=36===n(t.width),c.style.position="absolute",i=12===n(c.offsetWidth/3),re.removeChild(l),c=null}}function n(e){return Math.round(parseFloat(e))}var r,o,i,a,s,u,l=m.createElement("div"),c=m.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===c.style.backgroundClip,x.extend(p,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),i},reliableTrDimensions:function(){var t,n,r,o;return null==s&&(t=m.createElement("table"),n=m.createElement("tr"),r=m.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="border:1px solid",n.style.height="1px",r.style.height="9px",r.style.display="block",re.appendChild(t).appendChild(n).appendChild(r),o=e.getComputedStyle(n),s=parseInt(o.height,10)+parseInt(o.borderTopWidth,10)+parseInt(o.borderBottomWidth,10)===n.offsetHeight,re.removeChild(t)),s}}))}();var He=["Webkit","Moz","ms"],$e=m.createElement("div").style,Be={};function We(e){return x.cssProps[e]||Be[e]||(e in $e?e:Be[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=He.length;n--;)if((e=He[n]+t)in $e)return e}(e)||e)}var ze=/^(none|table(?!-c[ea]).+)/,Ge=/^--/,Ke={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:"0",fontWeight:"400"};function Xe(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ve(e,t,n,r,o,i){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=x.css(e,n+ne[a],!0,o)),r?("content"===n&&(u-=x.css(e,"padding"+ne[a],!0,o)),"margin"!==n&&(u-=x.css(e,"border"+ne[a]+"Width",!0,o))):(u+=x.css(e,"padding"+ne[a],!0,o),"padding"!==n?u+=x.css(e,"border"+ne[a]+"Width",!0,o):s+=x.css(e,"border"+ne[a]+"Width",!0,o));return!r&&0<=i&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-u-s-.5))||0),u}function Ye(e,t,n){var r=Ne(e),o=(!p.boxSizingReliable()||n)&&"border-box"===x.css(e,"boxSizing",!1,r),i=o,a=Fe(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Re.test(a)){if(!n)return a;a="auto"}return(!p.boxSizingReliable()&&o||!p.reliableTrDimensions()&&T(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===x.css(e,"display",!1,r))&&e.getClientRects().length&&(o="border-box"===x.css(e,"boxSizing",!1,r),(i=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Ve(e,t,n||(o?"border":"content"),i,r,a)+"px"}function Ze(e,t,n,r,o){return new Ze.prototype.init(e,t,n,r,o)}x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Fe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,i,a,s=G(t),u=Ge.test(t),l=e.style;if(u||(t=We(s)),a=x.cssHooks[t]||x.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(e,!1,r))?o:l[t];"string"==(i=typeof n)&&(o=te.exec(n))&&o[1]&&(n=se(e,t,o),i="number"),null!=n&&n==n&&("number"!==i||u||(n+=o&&o[3]||(x.cssNumber[s]?"":"px")),p.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var o,i,a,s=G(t);return Ge.test(t)||(t=We(s)),(a=x.cssHooks[t]||x.cssHooks[s])&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=Fe(e,t,r)),"normal"===o&&t in Je&&(o=Je[t]),""===n||n?(i=parseFloat(o),!0===n||isFinite(i)?i||0:o):o}}),x.each(["height","width"],function(e,t){x.cssHooks[t]={get:function(e,n,r){if(n)return!ze.test(x.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ye(e,t,r):Ie(e,Ke,function(){return Ye(e,t,r)})},set:function(e,n,r){var o,i=Ne(e),a=!p.scrollboxSize()&&"absolute"===i.position,s=(a||r)&&"border-box"===x.css(e,"boxSizing",!1,i),u=r?Ve(e,t,r,s,i):0;return s&&a&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-Ve(e,t,"border",!1,i)-.5)),u&&(o=te.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=x.css(e,t)),Xe(0,n,u)}}}),x.cssHooks.marginLeft=Ue(p.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Fe(e,"marginLeft"))||e.getBoundingClientRect().left-Ie(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(n){for(var r=0,o={},i="string"==typeof n?n.split(" "):[n];r<4;r++)o[e+ne[r]+t]=i[r]||i[r-2]||i[0];return o}},"margin"!==e&&(x.cssHooks[e+t].set=Xe)}),x.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,o,i={},a=0;if(Array.isArray(t)){for(r=Ne(e),o=t.length;a<o;a++)i[t[a]]=x.css(e,t[a],!1,r);return i}return void 0!==n?x.style(e,t,n):x.css(e,t)},e,t,1<arguments.length)}}),((x.Tween=Ze).prototype={constructor:Ze,init:function(e,t,n,r,o,i){this.elem=e,this.prop=n,this.easing=o||x.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(x.cssNumber[n]?"":"px")},cur:function(){var e=Ze.propHooks[this.prop];return e&&e.get?e.get(this):Ze.propHooks._default.get(this)},run:function(e){var t,n=Ze.propHooks[this.prop];return this.options.duration?this.pos=t=x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ze.propHooks._default.set(this),this}}).init.prototype=Ze.prototype,(Ze.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=x.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):1!==e.elem.nodeType||!x.cssHooks[e.prop]&&null==e.elem.style[We(e.prop)]?e.elem[e.prop]=e.now:x.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ze.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},x.fx=Ze.prototype.init,x.fx.step={};var Qe,et,tt,nt,rt=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function it(){et&&(!1===m.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(it):e.setTimeout(it,x.fx.interval),x.fx.tick())}function at(){return e.setTimeout(function(){Qe=void 0}),Qe=Date.now()}function st(e,t){var n,r=0,o={height:e};for(t=t?1:0;r<4;r+=2-t)o["margin"+(n=ne[r])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function ut(e,t,n){for(var r,o=(lt.tweeners[t]||[]).concat(lt.tweeners["*"]),i=0,a=o.length;i<a;i++)if(r=o[i].call(n,t,e))return r}function lt(e,t,n){var r,o,i=0,a=lt.prefilters.length,s=x.Deferred().always(function(){delete u.elem}),u=function(){if(o)return!1;for(var t=Qe||at(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),i=0,a=l.tweens.length;i<a;i++)l.tweens[i].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(a||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},n),originalProperties:t,originalOptions:n,startTime:Qe||at(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(o)return this;for(o=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(function(e,t){var n,r,o,i,a;for(n in e)if(o=t[r=G(n)],i=e[n],Array.isArray(i)&&(o=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(a=x.cssHooks[r])&&"expand"in a)for(n in i=a.expand(i),delete e[r],i)n in e||(e[n]=i[n],t[n]=o);else t[r]=o}(c,l.opts.specialEasing);i<a;i++)if(r=lt.prefilters[i].call(l,e,c,l.opts))return h(r.stop)&&(x._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return x.map(c,ut,l),h(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),x.fx.timer(x.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}x.Animation=x.extend(lt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){h(e)?(t=e,e=["*"]):e=e.match(R);for(var n,r=0,o=e.length;r<o;r++)n=e[r],lt.tweeners[n]=lt.tweeners[n]||[],lt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,o,i,a,s,u,l,c,f="width"in t||"height"in t,d=this,p={},h=e.style,g=e.nodeType&&ae(e),m=X.get(e,"fxshow");for(r in n.queue||(null==(a=x._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,x.queue(e,"fx").length||a.empty.fire()})})),t)if(o=t[r],rt.test(o)){if(delete t[r],i=i||"toggle"===o,o===(g?"hide":"show")){if("show"!==o||!m||void 0===m[r])continue;g=!0}p[r]=m&&m[r]||x.style(e,r)}if((u=!x.isEmptyObject(t))||!x.isEmptyObject(p))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=m&&m.display)&&(l=X.get(e,"display")),"none"===(c=x.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=x.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===x.css(e,"float")&&(u||(d.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",d.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,p)u||(m?"hidden"in m&&(g=m.hidden):m=X.access(e,"fxshow",{display:l}),i&&(m.hidden=!g),g&&le([e],!0),d.done(function(){for(r in g||le([e]),X.remove(e,"fxshow"),p)x.style(e,r,p[r])})),u=ut(g?m[r]:0,r,d),r in m||(m[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||h(e)&&e,duration:e,easing:n&&t||t&&!h(t)&&t};return x.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in x.fx.speeds?r.duration=x.fx.speeds[r.duration]:r.duration=x.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){h(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=x.isEmptyObject(e),i=x.speed(t,n,r),a=function(){var t=lt(this,x.extend({},e),i);(o||X.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||!1===i.queue?this.each(a):this.queue(i.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",i=x.timers,a=X.get(this);if(o)a[o]&&a[o].stop&&r(a[o]);else for(o in a)a[o]&&a[o].stop&&ot.test(o)&&r(a[o]);for(o=i.length;o--;)i[o].elem!==this||null!=e&&i[o].queue!==e||(i[o].anim.stop(n),t=!1,i.splice(o,1));!t&&n||x.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=X.get(this),r=n[e+"queue"],o=n[e+"queueHooks"],i=x.timers,a=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),x.each(["toggle","show","hide"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(st(t,!0),e,r,o)}}),x.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),x.timers=[],x.fx.tick=function(){var e,t=0,n=x.timers;for(Qe=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||x.fx.stop(),Qe=void 0},x.fx.timer=function(e){x.timers.push(e),x.fx.start()},x.fx.interval=13,x.fx.start=function(){et||(et=!0,it())},x.fx.stop=function(){et=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(t,n){return t=x.fx&&x.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,r){var o=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(o)}})},tt=m.createElement("input"),nt=m.createElement("select").appendChild(m.createElement("option")),tt.type="checkbox",p.checkOn=""!==tt.value,p.optSelected=nt.selected,(tt=m.createElement("input")).value="t",tt.type="radio",p.radioValue="t"===tt.value;var ct,ft=x.expr.attrHandle;x.fn.extend({attr:function(e,t){return $(this,x.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})}}),x.extend({attr:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?x.prop(e,t,n):(1===i&&x.isXMLDoc(e)||(o=x.attrHooks[t.toLowerCase()]||(x.expr.match.bool.test(t)?ct:void 0)),void 0!==n?null===n?void x.removeAttr(e,t):o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(r=o.get(e,t))?r:null==(r=x.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&"radio"===t&&T(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,o=t&&t.match(R);if(o&&1===e.nodeType)for(;n=o[r++];)e.removeAttribute(n)}}),ct={set:function(e,t,n){return!1===t?x.removeAttr(e,n):e.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ft[t]||x.find.attr;ft[t]=function(e,t,r){var o,i,a=t.toLowerCase();return r||(i=ft[a],ft[a]=o,o=null!=n(e,t,r)?a:null,ft[a]=i),o}});var dt=/^(?:input|select|textarea|button)$/i,pt=/^(?:a|area)$/i;function ht(e){return(e.match(R)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(R)||[]}x.fn.extend({prop:function(e,t){return $(this,x.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[x.propFix[e]||e]})}}),x.extend({prop:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&x.isXMLDoc(e)||(t=x.propFix[t]||t,o=x.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");return t?parseInt(t,10):dt.test(e.nodeName)||pt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(e){var t,n,r,o,i,a,s,u=0;if(h(e))return this.each(function(t){x(this).addClass(e.call(this,t,gt(this)))});if((t=mt(e)).length)for(;n=this[u++];)if(o=gt(n),r=1===n.nodeType&&" "+ht(o)+" "){for(a=0;i=t[a++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");o!==(s=ht(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,o,i,a,s,u=0;if(h(e))return this.each(function(t){x(this).removeClass(e.call(this,t,gt(this)))});if(!arguments.length)return this.attr("class","");if((t=mt(e)).length)for(;n=this[u++];)if(o=gt(n),r=1===n.nodeType&&" "+ht(o)+" "){for(a=0;i=t[a++];)for(;-1<r.indexOf(" "+i+" ");)r=r.replace(" "+i+" "," ");o!==(s=ht(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):h(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,gt(this),t),t)}):this.each(function(){var t,o,i,a;if(r)for(o=0,i=x(this),a=mt(e);t=a[o++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||((t=gt(this))&&X.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":X.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&-1<(" "+ht(gt(n))+" ").indexOf(t))return!0;return!1}});var vt=/\r/g;x.fn.extend({val:function(e){var t,n,r,o=this[0];return arguments.length?(r=h(e),this.each(function(n){var o;1===this.nodeType&&(null==(o=r?e.call(this,n,x(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=x.map(o,function(e){return null==e?"":e+""})),(t=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))})):o?(t=x.valHooks[o.type]||x.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(vt,""):null==n?"":n:void 0}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return null!=t?t:ht(x.text(e))}},select:{get:function(e){var t,n,r,o=e.options,i=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?i+1:o.length;for(r=i<0?u:a?i:0;r<u;r++)if(((n=o[r]).selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||!T(n.parentNode,"optgroup"))){if(t=x(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,o=e.options,i=x.makeArray(t),a=o.length;a--;)((r=o[a]).selected=-1<x.inArray(x.valHooks.option.get(r),i))&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<x.inArray(x(e).val(),t)}},p.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),p.focusin="onfocusin"in e;var yt=/^(?:focusinfocus|focusoutblur)$/,bt=function(e){e.stopPropagation()};x.extend(x.event,{trigger:function(t,n,r,o){var i,a,s,u,l,f,d,p,v=[r||m],y=c.call(t,"type")?t.type:t,b=c.call(t,"namespace")?t.namespace.split("."):[];if(a=p=s=r=r||m,3!==r.nodeType&&8!==r.nodeType&&!yt.test(y+x.event.triggered)&&(-1<y.indexOf(".")&&(y=(b=y.split(".")).shift(),b.sort()),l=y.indexOf(":")<0&&"on"+y,(t=t[x.expando]?t:new x.Event(y,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=b.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:x.makeArray(n,[t]),d=x.event.special[y]||{},o||!d.trigger||!1!==d.trigger.apply(r,n))){if(!o&&!d.noBubble&&!g(r)){for(u=d.delegateType||y,yt.test(u+y)||(a=a.parentNode);a;a=a.parentNode)v.push(a),s=a;s===(r.ownerDocument||m)&&v.push(s.defaultView||s.parentWindow||e)}for(i=0;(a=v[i++])&&!t.isPropagationStopped();)p=a,t.type=1<i?u:d.bindType||y,(f=(X.get(a,"events")||Object.create(null))[t.type]&&X.get(a,"handle"))&&f.apply(a,n),(f=l&&a[l])&&f.apply&&K(a)&&(t.result=f.apply(a,n),!1===t.result&&t.preventDefault());return t.type=y,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(v.pop(),n)||!K(r)||l&&h(r[y])&&!g(r)&&((s=r[l])&&(r[l]=null),x.event.triggered=y,t.isPropagationStopped()&&p.addEventListener(y,bt),r[y](),t.isPropagationStopped()&&p.removeEventListener(y,bt),x.event.triggered=void 0,s&&(r[l]=s)),t.result}},simulate:function(e,t,n){var r=x.extend(new x.Event,n,{type:e,isSimulated:!0});x.event.trigger(r,null,t)}}),x.fn.extend({trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return x.event.trigger(e,t,n,!0)}}),p.focusin||x.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){x.event.simulate(t,e.target,x.event.fix(e))};x.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,o=X.access(r,t);o||r.addEventListener(e,n,!0),X.access(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,o=X.access(r,t)-1;o?X.access(r,t,o):(r.removeEventListener(e,n,!0),X.remove(r,t))}}});var wt=e.location,xt={guid:Date.now()},_t=/\?/;x.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(t){}return r=n&&n.getElementsByTagName("parsererror")[0],n&&!r||x.error("Invalid XML: "+(r?x.map(r.childNodes,function(e){return e.textContent}).join("\n"):t)),n};var Ct=/\[\]$/,St=/\r?\n/g,Et=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function Tt(e,t,n,r){var o;if(Array.isArray(t))x.each(t,function(t,o){n||Ct.test(e)?r(e,o):Tt(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,r)});else if(n||"object"!==b(t))r(e,t);else for(o in t)Tt(e+"["+o+"]",t[o],n,r)}x.param=function(e,t){var n,r=[],o=function(e,t){var n=h(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){o(this.name,this.value)});else for(n in e)Tt(n,e[n],t,o);return r.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&kt.test(this.nodeName)&&!Et.test(e)&&(this.checked||!de.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:Array.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(St,"\r\n")}}):{name:t.name,value:n.replace(St,"\r\n")}}).get()}});var At=/%20/g,Lt=/#.*$/,Ot=/([?&])_=[^&]*/,jt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Mt=/^(?:GET|HEAD)$/,Pt=/^\/\//,Dt={},Rt={},Nt="*/".concat("*"),It=m.createElement("a");function qt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,o=0,i=t.toLowerCase().match(R)||[];if(h(n))for(;r=i[o++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Ft(e,t,n,r){var o={},i=e===Rt;function a(s){var u;return o[s]=!0,x.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||i||o[l]?i?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!o["*"]&&a("*")}function Ut(e,t){var n,r,o=x.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:r||(r={}))[n]=t[n]);return r&&x.extend(!0,e,r),e}It.href=wt.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Nt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ut(Ut(e,x.ajaxSettings),t):Ut(x.ajaxSettings,e)},ajaxPrefilter:qt(Dt),ajaxTransport:qt(Rt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var r,o,i,a,s,u,l,c,f,d,p=x.ajaxSetup({},n),h=p.context||p,g=p.context&&(h.nodeType||h.jquery)?x(h):x.event,v=x.Deferred(),y=x.Callbacks("once memory"),b=p.statusCode||{},w={},_={},C="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(l){if(!a)for(a={};t=jt.exec(i);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?i:null},setRequestHeader:function(e,t){return null==l&&(e=_[e.toLowerCase()]=_[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==l&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)S.always(e[S.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||C;return r&&r.abort(t),E(0,t),this}};if(v.promise(S),p.url=((t||p.url||wt.href)+"").replace(Pt,wt.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(R)||[""],null==p.crossDomain){u=m.createElement("a");try{u.href=p.url,u.href=u.href,p.crossDomain=It.protocol+"//"+It.host!=u.protocol+"//"+u.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),Ft(Dt,p,n,S),l)return S;for(f in(c=x.event&&p.global)&&0==x.active++&&x.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Mt.test(p.type),o=p.url.replace(Lt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(At,"+")):(d=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(_t.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Ot,"$1"),d=(_t.test(o)?"&":"?")+"_="+xt.guid+++d),p.url=o+d),p.ifModified&&(x.lastModified[o]&&S.setRequestHeader("If-Modified-Since",x.lastModified[o]),x.etag[o]&&S.setRequestHeader("If-None-Match",x.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Nt+"; q=0.01":""):p.accepts["*"]),p.headers)S.setRequestHeader(f,p.headers[f]);if(p.beforeSend&&(!1===p.beforeSend.call(h,S,p)||l))return S.abort();if(C="abort",y.add(p.complete),S.done(p.success),S.fail(p.error),r=Ft(Rt,p,n,S)){if(S.readyState=1,c&&g.trigger("ajaxSend",[S,p]),l)return S;p.async&&0<p.timeout&&(s=e.setTimeout(function(){S.abort("timeout")},p.timeout));try{l=!1,r.send(w,E)}catch(t){if(l)throw t;E(-1,t)}}else E(-1,"No Transport");function E(t,n,a,u){var f,d,m,w,_,C=n;l||(l=!0,s&&e.clearTimeout(s),r=void 0,i=u||"",S.readyState=0<t?4:0,f=200<=t&&t<300||304===t,a&&(w=function(e,t,n){for(var r,o,i,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(o in s)if(s[o]&&s[o].test(r)){u.unshift(o);break}if(u[0]in n)i=u[0];else{for(o in n){if(!u[0]||e.converters[o+" "+u[0]]){i=o;break}a||(a=o)}i=i||a}if(i)return i!==u[0]&&u.unshift(i),n[i]}(p,S,a)),!f&&-1<x.inArray("script",p.dataTypes)&&x.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),w=function(e,t,n,r){var o,i,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(i=c.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=i,i=c.shift())if("*"===i)i=u;else if("*"!==u&&u!==i){if(!(a=l[u+" "+i]||l["* "+i]))for(o in l)if((s=o.split(" "))[1]===i&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[o]:!0!==l[o]&&(i=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+i}}}return{state:"success",data:t}}(p,w,S,f),f?(p.ifModified&&((_=S.getResponseHeader("Last-Modified"))&&(x.lastModified[o]=_),(_=S.getResponseHeader("etag"))&&(x.etag[o]=_)),204===t||"HEAD"===p.type?C="nocontent":304===t?C="notmodified":(C=w.state,d=w.data,f=!(m=w.error))):(m=C,!t&&C||(C="error",t<0&&(t=0))),S.status=t,S.statusText=(n||C)+"",f?v.resolveWith(h,[d,C,S]):v.rejectWith(h,[S,C,m]),S.statusCode(b),b=void 0,c&&g.trigger(f?"ajaxSuccess":"ajaxError",[S,p,f?d:m]),y.fireWith(h,[S,C]),c&&(g.trigger("ajaxComplete",[S,p]),--x.active||x.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,t){return x.get(e,void 0,t,"script")}}),x.each(["get","post"],function(e,t){x[t]=function(e,n,r,o){return h(n)&&(o=o||r,r=n,n=void 0),x.ajax(x.extend({url:e,type:t,dataType:o,data:n,success:r},x.isPlainObject(e)&&e))}}),x.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),x._evalUrl=function(e,t,n){return x.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){x.globalEval(e,t,n)}})},x.fn.extend({wrapAll:function(e){var t;return this[0]&&(h(e)&&(e=e.call(this[0])),t=x(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return h(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=h(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(e){return!x.expr.pseudos.visible(e)},x.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Ht={0:200,1223:204},$t=x.ajaxSettings.xhr();p.cors=!!$t&&"withCredentials"in $t,p.ajax=$t=!!$t,x.ajaxTransport(function(t){var n,r;if(p.cors||$t&&!t.crossDomain)return{send:function(o,i){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)s.setRequestHeader(a,o[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Ht[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(o){if(n)throw o}},abort:function(){n&&n()}}}),x.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),x.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,o){t=x("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),m.head.appendChild(t[0])},abort:function(){n&&n()}}});var Bt,Wt=[],zt=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Wt.pop()||x.expando+"_"+xt.guid++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",function(t,n,r){var o,i,a,s=!1!==t.jsonp&&(zt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&zt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=h(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(zt,"$1"+o):!1!==t.jsonp&&(t.url+=(_t.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return a||x.error(o+" was not called"),a[0]},t.dataTypes[0]="json",i=e[o],e[o]=function(){a=arguments},r.always(function(){void 0===i?x(e).removeProp(o):e[o]=i,t[o]&&(t.jsonpCallback=n.jsonpCallback,Wt.push(o)),a&&h(i)&&i(a[0]),a=i=void 0}),"script"}),p.createHTMLDocument=((Bt=m.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Bt.childNodes.length),x.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(p.createHTMLDocument?((r=(t=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,t.head.appendChild(r)):t=m),i=!n&&[],(o=A.exec(e))?[t.createElement(o[1])]:(o=be([e],t,i),i&&i.length&&x(i).remove(),x.merge([],o.childNodes)));var r,o,i},x.fn.load=function(e,t,n){var r,o,i,a=this,s=e.indexOf(" ");return-1<s&&(r=ht(e.slice(s)),e=e.slice(0,s)),h(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),0<a.length&&x.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){i=arguments,a.html(r?x("<div>").append(x.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,i||[e.responseText,t,e])})}),this},x.expr.pseudos.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length},x.offset={setOffset:function(e,t,n){var r,o,i,a,s,u,l=x.css(e,"position"),c=x(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),i=x.css(e,"top"),u=x.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(i+u).indexOf("auto")?(a=(r=c.position()).top,o=r.left):(a=parseFloat(i)||0,o=parseFloat(u)||0),h(t)&&(t=t.call(e,n,x.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+o),"using"in t?t.using.call(e,f):c.css(f)}},x.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){x.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],o={top:0,left:0};if("fixed"===x.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===x.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((o=x(e).offset()).top+=x.css(e,"borderTopWidth",!0),o.left+=x.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-x.css(r,"marginTop",!0),left:t.left-o.left-x.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===x.css(e,"position");)e=e.offsetParent;return e||re})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;x.fn[e]=function(r){return $(this,function(e,r,o){var i;if(g(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===o)return i?i[t]:e[r];i?i.scrollTo(n?i.pageXOffset:o,n?o:i.pageYOffset):e[r]=o},e,r,arguments.length)}}),x.each(["top","left"],function(e,t){x.cssHooks[t]=Ue(p.pixelPosition,function(e,n){if(n)return n=Fe(e,t),Re.test(n)?x(e).position()[t]+"px":n})}),x.each({Height:"height",Width:"width"},function(e,t){x.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){x.fn[r]=function(o,i){var a=arguments.length&&(n||"boolean"!=typeof o),s=n||(!0===o||!0===i?"margin":"border");return $(this,function(t,n,o){var i;return g(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===o?x.css(t,n,s):x.style(t,n,o,s)},t,a?o:void 0,a)}})}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){x.fn[t]=function(e,n){return 0<arguments.length?this.on(t,null,e,n):this.trigger(t)}});var Gt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;x.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),h(e))return r=o.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(o.call(arguments)))}).guid=e.guid=e.guid||x.guid++,i},x.holdReady=function(e){e?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=T,x.isFunction=h,x.isWindow=g,x.camelCase=G,x.type=b,x.now=Date.now,x.isNumeric=function(e){var t=x.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},x.trim=function(e){return null==e?"":(e+"").replace(Gt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return x});var Kt=e.jQuery,Jt=e.$;return x.noConflict=function(t){return e.$===x&&(e.$=Jt),t&&e.jQuery===x&&(e.jQuery=Kt),x},void 0===t&&(e.jQuery=e.$=x),x}),function(e,t){var n={version:"2.12.0",areas:{},apis:{},inherit:function(e,t){for(var n in e)t.hasOwnProperty(n)||Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n));return t},stringify:function(e){return void 0===e||"function"==typeof e?e+"":JSON.stringify(e)},parse:function(e,t){try{return JSON.parse(e,t||n.revive)}catch(t){return e}},fn:function(e,t){for(var r in n.storeAPI[e]=t,n.apis)n.apis[r][e]=t},get:function(e,t){return e.getItem(t)},set:function(e,t,n){e.setItem(t,n)},remove:function(e,t){e.removeItem(t)},key:function(e,t){return e.key(t)},length:function(e){return e.length},clear:function(e){e.clear()},Store:function(e,t,r){var o=n.inherit(n.storeAPI,function(e,t,n){return 0===arguments.length?o.getAll():"function"==typeof t?o.transact(e,t,n):void 0!==t?o.set(e,t,n):"string"==typeof e||"number"==typeof e?o.get(e):"function"==typeof e?o.each(e):e?o.setAll(e,t):o.clear()});o._id=e;try{t.setItem("__store2_test","ok"),o._area=t,t.removeItem("__store2_test")}catch(e){o._area=n.storage("fake")}return o._ns=r||"",n.areas[e]||(n.areas[e]=o._area),n.apis[o._ns+o._id]||(n.apis[o._ns+o._id]=o),o},storeAPI:{area:function(e,t){var r=this[e];return r&&r.area||(r=n.Store(e,t,this._ns),this[e]||(this[e]=r)),r},namespace:function(e,t){if(!e)return this._ns?this._ns.substring(0,this._ns.length-1):"";var r=e,o=this[r];if(!(o&&o.namespace||(o=n.Store(this._id,this._area,this._ns+r+"."),this[r]||(this[r]=o),t)))for(var i in n.areas)o.area(i,n.areas[i]);return o},isFake:function(){return"fake"===this._area.name},toString:function(){return"store"+(this._ns?"."+this.namespace():"")+"["+this._id+"]"},has:function(e){return this._area.has?this._area.has(this._in(e)):!!(this._in(e)in this._area)},size:function(){return this.keys().length},each:function(e,t){for(var r=0,o=n.length(this._area);r<o;r++){var i=this._out(n.key(this._area,r));if(void 0!==i&&!1===e.call(this,i,this.get(i),t))break;o>n.length(this._area)&&(o--,r--)}return t||this},keys:function(e){return this.each(function(e,t,n){n.push(e)},e||[])},get:function(e,t){var r,o=n.get(this._area,this._in(e));return"function"==typeof t&&(r=t,t=null),null!==o?n.parse(o,r):null!=t?t:o},getAll:function(e){return this.each(function(e,t,n){n[e]=t},e||{})},transact:function(e,t,n){var r=this.get(e,n),o=t(r);return this.set(e,void 0===o?r:o),this},set:function(e,t,r){var o=this.get(e);return null!=o&&!1===r?t:n.set(this._area,this._in(e),n.stringify(t),r)||o},setAll:function(e,t){var n,r;for(var o in e)r=e[o],this.set(o,r,t)!==r&&(n=!0);return n},add:function(e,t){var r=this.get(e);if(r instanceof Array)t=r.concat(t);else if(null!==r){var o=typeof r;if(o===typeof t&&"object"===o){for(var i in t)r[i]=t[i];t=r}else t=r+t}return n.set(this._area,this._in(e),n.stringify(t)),t},remove:function(e,t){var r=this.get(e,t);return n.remove(this._area,this._in(e)),r},clear:function(){return this._ns?this.each(function(e){n.remove(this._area,this._in(e))},1):n.clear(this._area),this},clearAll:function(){var e=this._area;for(var t in n.areas)n.areas.hasOwnProperty(t)&&(this._area=n.areas[t],this.clear());return this._area=e,this},_in:function(e){return"string"!=typeof e&&(e=n.stringify(e)),this._ns?this._ns+e:e},_out:function(e){return this._ns?e&&0===e.indexOf(this._ns)?e.substring(this._ns.length):void 0:e}},storage:function(e){return n.inherit(n.storageAPI,{items:{},name:e})},storageAPI:{length:0,has:function(e){return this.items.hasOwnProperty(e)},key:function(e){var t=0;for(var n in this.items)if(this.has(n)&&e===t++)return n},setItem:function(e,t){this.has(e)||this.length++,this.items[e]=t},removeItem:function(e){this.has(e)&&(delete this.items[e],this.length--)},getItem:function(e){return this.has(e)?this.items[e]:null},clear:function(){for(var e in this.items)this.removeItem(e)}}},r=n.Store("local",function(){try{return localStorage}catch(e){}}());r.local=r,r._=n,r.area("session",function(){try{return sessionStorage}catch(e){}}()),r.area("page",n.storage("page")),"function"==typeof t&&void 0!==t.amd?t("store2",[],function(){return r}):"undefined"!=typeof module&&module.exports?module.exports=r:(e.store&&(n.conflict=e.store),e.store=r)}(this,this&&this.define),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.devtoolsDetector=t():e.devtoolsDetector=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";(function(e){t.b=function(e){void 0===e&&(e={});for(var t=e.includes,n=void 0===t?[]:t,r=e.excludes,o=void 0===r?[]:r,i=!1,a=!1,s=0,u=n;s<u.length;s++){if(!0===u[s]){i=!0;break}}for(var l=0,c=o;l<c.length;l++){if(!0===c[l]){a=!0;break}}return i&&!a},t.c=function(e,t,n){var i=o.a[e];return void 0!==i&&Object(r.compare)(i,t,n)},t.a=function(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:this};var r=n(11),o=(n.n(r),n(4))}).call(t,n(10))},function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"d",function(){return c}),n.d(t,"b",function(){return f}),n.d(t,"f",function(){return d}),n.d(t,"a",function(){return p}),n.d(t,"e",function(){return h});var r,o,i,a=n(3),s=n(0),u=Object(s.a)(),l="InstallTrigger"in((null===u||void 0===u?void 0:u.window)||{})||/firefox/i.test(a.b),c=/trident/i.test(a.b)||/msie/i.test(a.b),f=/edge/i.test(a.b),d=/webkit/i.test(a.b)&&!f,p=void 0!==(null===(r=null===u||void 0===u?void 0:u.window)||void 0===r?void 0:r.chrome)||/chrome/i.test(a.b),h="[object SafariRemoteNotification]"===((null===(i=null===(o=null===u||void 0===u?void 0:u.window)||void 0===o?void 0:o.safari)||void 0===i?void 0:i.pushNotification)||!1).toString()||/safari/i.test(a.b)&&!p},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return s});var r=n(1);function o(e){if(console){if(!r.d&&!r.b)return console[e];if("log"===e||"clear"===e)return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];console[e].apply(console,t)}}return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}}var i=o("log"),a=o("table"),s=o("clear")},function(e,t,n){"use strict";t.a=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(null===i||void 0===i?void 0:i.document)?(e=i.document).createElement.apply(e,t):{}},n.d(t,"b",function(){return a});var r,o=n(0),i=Object(o.a)(),a=(null===(r=null===i||void 0===i?void 0:i.navigator)||void 0===r?void 0:r.userAgent)||"xxxxx"},function(e,t,n){"use strict";n.d(t,"a",function(){return r});for(var r={},o=0,i=(n(3).b||"").match(/\w+\/(\d|\.)+(\s|$)/gi)||[];o<i.length;o++){var a=i[o].split("/"),s=a[0],u=a[1];r[s]=u}},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"e",function(){return u});var r=n(3),o=/ipad/i.test(r.b),i=/macintosh/i.test(r.b),a=/iphone/i.test(r.b),s=/android/i.test(r.b),u=/windows/i.test(r.b)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addListener=function(e){f.addListener(e)},t.removeListener=function(e){f.removeListener(e)},t.isLaunch=function(){return f.isLaunch()},t.launch=function(){f.launch()},t.stop=function(){f.stop()},t.setDetectDelay=function(e){f.setDetectDelay(e)};var r=n(7),o=n(8);n.d(t,"DevtoolsDetector",function(){return r.a}),n.d(t,"checkers",function(){return o});var i=n(0);n.d(t,"match",function(){return i.b}),n.d(t,"specificVersionMatch",function(){return i.c});var a=n(1);n.d(t,"isFirefox",function(){return a.c}),n.d(t,"isIE",function(){return a.d}),n.d(t,"isEdge",function(){return a.b}),n.d(t,"isWebkit",function(){return a.f}),n.d(t,"isChrome",function(){return a.a}),n.d(t,"isSafari",function(){return a.e});var s=n(2);n.d(t,"log",function(){return s.b}),n.d(t,"table",function(){return s.c}),n.d(t,"clear",function(){return s.a});var u=n(17);n.d(t,"isMobile",function(){return u.a});var l=n(4);n.d(t,"versionMap",function(){return l.a});var c=n(5);n.d(t,"isIpad",function(){return c.b}),n.d(t,"isMac",function(){return c.d}),n.d(t,"isIphone",function(){return c.c}),n.d(t,"isAndroid",function(){return c.a}),n.d(t,"isWindows",function(){return c.e});var f=new r.a({checkers:[o.elementIdChecker,o.regToStringChecker,o.functionToStringChecker,o.depRegToStringChecker,o.dateToStringChecker,o.debuggerChecker]});t.default=f},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=function(){function e(e){var t=e.checkers;this._listeners=[],this._isOpen=!1,this._detectLoopStopped=!0,this._detectLoopDelay=500,this._checkers=t.slice()}return e.prototype.launch=function(){this._detectLoopDelay<=0&&this.setDetectDelay(500),this._detectLoopStopped&&(this._detectLoopStopped=!1,this._detectLoop())},e.prototype.stop=function(){this._detectLoopStopped||(this._detectLoopStopped=!0,clearTimeout(this._timer))},e.prototype.isLaunch=function(){return!this._detectLoopStopped},e.prototype.setDetectDelay=function(e){this._detectLoopDelay=e},e.prototype.addListener=function(e){this._listeners.push(e)},e.prototype.removeListener=function(e){this._listeners=this._listeners.filter(function(t){return t!==e})},e.prototype._broadcast=function(e){for(var t=0,n=this._listeners;t<n.length;t++){var r=n[t];try{r(e.isOpen,e)}catch(e){}}},e.prototype._detectLoop=function(){return r(this,void 0,void 0,function(){var e,t,n,r,i,a=this;return o(this,function(o){switch(o.label){case 0:e=!1,t="",n=0,r=this._checkers,o.label=1;case 1:return n<r.length?[4,(i=r[n]).isEnable()]:[3,6];case 2:return o.sent()?(t=i.name,[4,i.isOpen()]):[3,4];case 3:e=o.sent(),o.label=4;case 4:if(e)return[3,6];o.label=5;case 5:return n++,[3,1];case 6:return e!=this._isOpen&&(this._isOpen=e,this._broadcast({isOpen:e,checkerName:t})),this._detectLoopDelay>0?this._timer=setTimeout(function(){return a._detectLoop()},this._detectLoopDelay):this.stop(),[2]}})})},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9);n.d(t,"depRegToStringChecker",function(){return r.a});var o=n(12);n.d(t,"elementIdChecker",function(){return o.a});var i=n(13);n.d(t,"functionToStringChecker",function(){return i.a});var a=n(14);n.d(t,"regToStringChecker",function(){return a.a});var s=n(15);n.d(t,"debuggerChecker",function(){return s.a});var u=n(16);n.d(t,"dateToStringChecker",function(){return u.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(1),o=n(2),i=n(0),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=/ /,l=!1;u.toString=function(){return l=!0,c.name};var c={name:"dep-reg-to-string",isOpen:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return l=!1,Object(o.c)({dep:u}),Object(o.a)(),[2,l]})})},isEnable:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,Object(i.b)({includes:[!0],excludes:[r.c,r.d]})]})})}}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r,o,i;o=[],void 0===(i="function"==typeof(r=function(){var e=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function t(e){var t=e.replace(/^v/,"").replace(/\+.*$/,""),n=function(e,t){return-1===e.indexOf("-")?e.length:e.indexOf("-")}(t),r=t.substring(0,n).split(".");return r.push(t.substring(n+1)),r}function n(e){return isNaN(Number(e))?e:Number(e)}function r(t){if("string"!=typeof t)throw new TypeError("Invalid argument expected string");if(!e.test(t))throw new Error("Invalid argument not valid semver ('"+t+"' received)")}function o(e,o){[e,o].forEach(r);for(var i=t(e),a=t(o),s=0;s<Math.max(i.length-1,a.length-1);s++){var u=parseInt(i[s]||0,10),l=parseInt(a[s]||0,10);if(u>l)return 1;if(l>u)return-1}var c=i[i.length-1],f=a[a.length-1];if(c&&f){var d=c.split(".").map(n),p=f.split(".").map(n);for(s=0;s<Math.max(d.length,p.length);s++){if(void 0===d[s]||"string"==typeof p[s]&&"number"==typeof d[s])return-1;if(void 0===p[s]||"string"==typeof d[s]&&"number"==typeof p[s])return 1;if(d[s]>p[s])return 1;if(p[s]>d[s])return-1}}else if(c||f)return c?-1:1;return 0}var i=[">",">=","=","<","<="],a={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};return o.validate=function(t){return"string"==typeof t&&e.test(t)},o.compare=function(e,t,n){!function(e){if("string"!=typeof e)throw new TypeError("Invalid operator type, expected string but got "+typeof e);if(-1===i.indexOf(e))throw new TypeError("Invalid operator, expected one of "+i.join("|"))}(n);var r=o(e,t);return a[n].indexOf(r)>-1},o})?r.apply(t,o):r)||(e.exports=i)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(1),o=n(2),i=n(0),a=n(3),s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},l=Object(a.a)("div"),c=!1;Object.defineProperty(l,"id",{get:function(){return c=!0,f.name},configurable:!0});var f={name:"element-id",isOpen:function(){return s(this,void 0,void 0,function(){return u(this,function(e){return c=!1,Object(o.b)(l),Object(o.a)(),[2,c]})})},isEnable:function(){return s(this,void 0,void 0,function(){return u(this,function(e){return[2,Object(i.b)({includes:[!0],excludes:[r.d,r.b,r.c]})]})})}}},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(1),o=n(2),i=n(5),a=n(0),s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function l(){}var c=0;l.toString=function(){return c++,""};var f={name:"function-to-string",isOpen:function(){return s(this,void 0,void 0,function(){return u(this,function(e){return c=0,Object(o.b)(l),Object(o.a)(),[2,2===c]})})},isEnable:function(){return s(this,void 0,void 0,function(){return u(this,function(e){return[2,Object(a.b)({includes:[!0],excludes:[r.c,(i.b||i.c)&&r.a]})]})})}}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(2),o=n(1),i=n(0),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=/ /,l=!1;u.toString=function(){return l=!0,c.name};var c={name:"reg-to-string",isOpen:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return l=!1,Object(r.b)(u),Object(r.a)(),[2,l]})})},isEnable:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,Object(i.b)({includes:[!0],excludes:[o.f]})]})})}}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function i(){return performance?performance.now():Date.now()}var a={name:"debugger-checker",isOpen:function(){return r(this,void 0,void 0,function(){var e;return o(this,function(t){return e=i(),function(){}.constructor("debugger")(),[2,i()-e>100]})})},isEnable:function(){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,!0]})})}}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(1),o=n(2),i=n(0),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=new Date,l=0;u.toString=function(){return l++,""};var c={name:"date-to-string",isOpen:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return l=0,Object(o.b)(u),Object(o.a)(),[2,2===l]})})},isEnable:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,Object(i.b)({includes:[r.a],excludes:[]})]})})}}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3),o=/mobile/i.test(r.b)}])}),function(e){e.loadLibrary=function(t,n){return e.getScript(t,n)};var t=e.getScript;e.getScript=function(n,r){return e.ajaxSetup({cache:!0}),t(n,function(){e.ajaxSetup({cache:!1}),r&&r()})}}($),function(e){var t,n,r,o,i=e.CgLibs=e.CgLibs||{},a=e.CgUtils=e.CgUtils||{},s=i.modules=i.modules||{},u=0,l=[];function c(){var e=$("body");e.hasClass("user-preload")||(e.removeClass("pre-fadein"),e.addClass("preload"),e.addClass("pre-fadeout"),setTimeout(function(){e.hasClass("user-preload")||(e.removeClass("preload"),e.removeClass("pre-fadeout"),e.addClass("loaded"),e.hasClass("engine-loaded")||(e.addClass("engine-loaded"),$("body>.preload-cover .preload-bg").remove(),$("body>.preload-cover .poweredby").remove()))},700))}function f(e,t){var n=SystemJS.resolveSync("./"+t),r=SystemJS.get(n);nslist=t.split("/");for(var o=e;nslist.length;){var i=nslist.shift();if(!nslist.length)break;o=o[i]=o[i]||{}}for(var a in r)o[a]=r[a]}function d(n){s[n]&&s[n].boot?s[n].boot(t):e.CG=t,delete s[n]}function p(e,t){for(var n=0;n<e.length;++n)if(e[n].id==t)return n;return e.length}function h(e){l=e,t=t||{}}a.showPreloader=function(t){var n=$("body");n.hasClass("loaded")&&(n.addClass("pre-fadein"),n.removeClass("loaded"),e.Pace&&Pace.restart()),n.removeClass("pre-fadeout"),n.addClass("preload"),n.addClass("user-preload");var r=$("body>.preload-cover");t?r.addClass("cg-hidden"):r.removeClass("cg-hidden")},a.hidePreloader=function(){$("body").removeClass("user-preload"),c()},i.emitBootComplete=function(){o=1,i.progress.endPreload(),delete i.emitBootComplete,delete i.boot,delete i.bootModule,delete i.bootSystemJs,delete i.initBoots,delete i.loadAppLibs,delete i.systemBooter,document.body.dispatchEvent(new Event("cgBootComplete")),setTimeout(c,10)},i.bootLib=function e(i,s){if((new Date).getTime()<u)setTimeout(e,30,i,s);else{var c=i.match(/^([^\/]+)\//)[1],d=l[0];c==d.meta.pcode?o||System.import(i).then(function(e){!function(e){for(var n=0;n<e.length;++n)f(t,e[n])}(s),l.shift();var o=r.js.length+r.cg.length,i=r.js.length+r.cg.length-l.length;a.cgSystemLog(": loading > installed ("+i+"/"+o+")","CG."+d.meta.pcode+".v"+d.meta.ver,{appendHistory:100}),0==l.length&&(n&&n(),n=null,r=null)},console.error.bind(console)):setTimeout(e,1,i,s)}},i.bootModule=d,i.loadAppLibs=function(o,s,l){t=i.bootSystemJs?System._tempcg_={}:{};var c=function(e){var t=e.appResourcePack.resourceMap,n={},r=e.appLibs,o=[];for(var i in e.appResourcePack.aliasMap){var a=e.appResourcePack.aliasMap[i];if(-1==o.indexOf(a.resourceId)){var s=t[a.resourceId];s.name=s.name.replace(/_delete[a-z0-9]+$/,"");var u=n[s.type]=n[s.type]||[];"jslib"==s.type?u.push({resource:s,url:s.url+("dev"==e.env&&s.meta.devJs||s.meta.main),order1:p(r,a.refr&&a.refr.id),order2:a.time,pmeta:a.pmeta}):u.push(s)}}return n.jslib&&n.jslib.sort(function(e,t){return e.order1==t.order1?e.order2-t.order2:e.order1-t.order1}),n}(o);!function(e){if(e.length){var t=$('<div id="cg-fonts-preloader" style="visibility:hidden;position:absolute;z-index:-100"></div>');$("body").append(t);var n=document.head||document.getElementsByTagName("head")[0],r=[];e.forEach(function(e){if("css"==e.meta.main.split(".").pop()){var o=document.createElement("link");o.rel="stylesheet",o.href=e.url+e.meta.main,n.appendChild(o)}else r.push(e);e.meta.info.fontName?t.append("<div style=\"font-family:'"+e.meta.info.fontName+"'\">a</div>"):e.meta.info.fontNames&&e.meta.info.fontNames.length&&t.append("<div style=\"font-family:'"+e.meta.info.fontNames[0]+"'\">a</div>")});var o=r.map(function(e){return"@font-face {font-family: '"+e.meta.info.fontName+"'; src: url('"+e.url+e.meta.main+"') format('"+e.meta.info.format+"'); font-weight: '"+e.meta.info.weight+"'}"}).join("\n"),i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=o:i.appendChild(document.createTextNode(o)),n.appendChild(i)}}(c.font||[]),r={cg:o.appLibs||[],js:c.jslib||[]},i.progress.total+=r.cg.length+r.js.length,function e(t,n,r){if(n.length){i.progress.load();var o=t.js.length+t.cg.length,s=n.shift();s.pmeta&&0===s.pmeta.autoload?e(t,n,r):(a.cgSystemLog(": loading... ("+(t.js.length-n.length)+"/"+o+")",s.resource.name,{appendHistory:100}),$.loadLibrary(s.url,function(){a.cgSystemLog(": loading > installed ("+(t.js.length-n.length)+"/"+o+")",s.resource.name,{appendHistory:100}),e(t,n,r)}))}else r()}(r,r.js.slice(),function(){o.appLibs&&o.appLibs.length?(s&&(u=s),n=l,h(o.appLibs.slice()),function e(t,n){if(n.length){var r=n.shift();t.js.length,t.cg.length,a.cgSystemLog(": loading...","CG."+r.meta.pcode+".v"+r.meta.ver,{appendHistory:100}),i.progress.load(),$.loadLibrary(r.url+r.meta.main,function(){d(r.meta.pcode)}),e(t,n)}}(r,o.appLibs.slice())):(o.mute&&(e.PIXI&&(PIXI.sound&&(PIXI.sound.close(),PIXI.sound.utils.extensions=[]),PIXI.loaders&&(PIXI.loaders.Loader.prototype.load=function(){})),e.alert=function(){throw new Error("cg.ignore.alert")},e.prompt=function(){throw new Error("cg.ignore.prompt")}),l())})},i.initBoots=h}(window),function(e,t,n){var r,o,i=e.CgLibs=e.CgLibs||{},a=i.inits=i.inits||[],s=e.navigator,u=e.store,l=!0,c=!1,f=atob("L3JlY29yZC9wbGF5Lw=="),d=atob("c3R1bjpzdHVuLmwuZ29vZ2xlLmNvbToxOTMwMj90cmFuc3BvcnQ9dWRw");var p=function(){for(var e="a".charCodeAt(0),t="A".charCodeAt(0),n="0123456789",r=0;r<26;++r)n+=String.fromCharCode(e+r,t+r);return n}();var h=function(e){for(var t="",n=p.len;t.length<e;)t+=p.charAt(Math.floor(Math.random()*n));return t}(16);function g(e,t){return e=(e=(e=e.replace(new RegExp(t[0],"g"),"#")).replace(new RegExp(t[1],"g"),t[0])).replace(/#/g,t[1])}var m=function(e){return g(g(g(g(g(btoa(JSON.stringify(e)),["0","9"]),["1","2"]),["a","Z"]),["z","A"]),["i","I"])},v=function(e){return new Promise(function(t){setTimeout(t,Math.ceil(1e3*e))})};a.push(function(e){o=e.projectCode,e.homeUrl.replace(/\/$/,""),r=e.svrUrl.replace(/\/$/,""),l="prod"==e.env,c=1==e.svr_recorder,l&&(_=Date.now()+30,v(60).then(S))});var y=function(e,t,o){!function(e,t,o){n.post(r+e,t,o,"json")}("/cglt"+e,t,o)},b=0;function w(){b=Date.now()}e.addEventListener("pointermove",w,!0),e.addEventListener("pointerdown",w,!0),e.addEventListener("keydown",w,!0);var x=null,_=0,C=[],S=function(){_=_||Date.now();var r,i=u(o+"AToken")||"";(r=i,r?x&&x.token==r?Promise.resolve(x.user):new Promise(e=>{y("/get/my_user_by_token/"+o,{token:r},function(t){t&&t.user?(x={user:t.user,token:r},e(t.user)):e(x=null)})}):Promise.resolve(x=null)).then(r=>(function(){if(E)return Promise.resolve(E);return function(e){var r=T(e);if(r)return Promise.resolve(r);return k?(r=T(k.contentWindow),Promise.resolve(r)):new Promise(function(e){var r="iframe"+h,o=n(`<iframe id="${r}" sandbox="allow-same-origin" style="display: none"></iframe>`);o.appendTo("body"),o.ready(function(){k=t.getElementById(r),e(T(k.contentWindow))})})}(e).then(function(e){return function(e){var t={},r=new e({iceServers:[{urls:d}]},{optional:[{RtpDataChannels:!0}]}),o=!1;function i(e){var n=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{0,4}(:[a-f0-9]{0,4}){7})/.exec(e);if(n){var r=n[1];if(r.includes(":")){var i=r.match(/::/g);if(i&&i.length>1)return;if(r.match(/:::/))return}else{if(!function(e){return!(!e||-1==e.indexOf("."))&&!["192.168.","172.","10.","127."].find(t=>0==e.indexOf(t))}(r))return;o=!0}t[r]=!0}}return r.onicecandidate=function(e){e.candidate&&i(e.candidate.candidate)},r.createDataChannel("rtc"),r.createOffer(function(e){r.setLocalDescription(e,A,A)},A),v(3).then(function(){return r.localDescription.sdp.split("\n").forEach(function(e){0===e.indexOf("a=candidate:")&&i(e)}),k&&(n(k).remove(),k=null),o?Object.keys(t):new Promise((e,t)=>{n.get("https://www.cloudflare.com/cdn-cgi/trace").done(n=>{let r=n.match(/ip=([^\n]+)(\n|$)/);r?e(r[1]):t("not found")}).fail(e=>{t(e)})}).then(e=>(t[e]=!0,Object.keys(t))).catch(e=>Object.keys(t))})}(e)}).then(function(e){return e.length&&((E={v4:e.find(function(e){return e.includes(".")})||"",v6:e.find(function(e){return e.includes(":")})||""}).v4||E.v6||(E=null)),E})})().then(n=>{var a=30;if(n){var l=s.platform;e.device&&e.device.platform&&(l=e.device.platform),n.platform=l;var d=m(n);u("gltmsrec",d),i=r&&i||"";var p={duration:0,plays:0};if(!t.hidden&&(b>_||c)&&(p.duration=Math.ceil((Date.now()-_)/1e3)),C.includes(i)||(C.push(i),p.plays=1),_=Date.now(),p.duration||p.plays){var h=m(p);y(f+o,{token:i,record:d,plays:h}),a=60+120*Math.random()}}v(a).then(S)})).catch(e=>{v(60).then(S)})},E=null;var k=null;function T(e){return e.RTCPeerConnection||e.mozRTCPeerConnection||e.webkitRTCPeerConnection}function A(){}}(window,document,$),function(e,t){var n,r,o,i,a,s,u,l,c,f=Math.random()+6e4,d=e[atob("ZGV2dG9vbHNEZXRlY3Rvcg==")],p=e.CgLibs=e.CgLibs||{};function h(e){try{Date.now()-c>f?e[u][l]=n:e[u][l]=n.replace(/\/\/[^\.]+\./,"//")}catch(e){}}(p.inits=p.inits||[]).push(function(f){var p;n=f.homeUrl.replace(/\/$/,""),"prod"==f.env&&"block"==f[atob("ZGV2dG9vbHNQb2xpY3k=")]&&(p=JSON.parse(atob("WyJrZXkiLCJrZXlDb2RlIiwxMjMsIkYxMiIsIm9ua2V5ZG93biIsImxvY2F0aW9uIiwiaHJlZiJd")),r=p[0],o=p[1],i=p[2],a=p[3],s=p[4],u=p[5],l=p[6],c=Date.now(),d.addListener(function(t){if(t){try{h(e.top)}catch(e){}setTimeout(h,201,e)}}),d.launch(),t[s]=function(e){if(e[o]==i||e[r]==a)return!1})})}(window,document),function(){"use strict";var e="undefined"!=typeof window&&"undefined"!=typeof document,t="undefined"!=typeof process&&process.versions&&process.versions.node,n="undefined"!=typeof process&&"string"==typeof process.platform&&process.platform.match(/^win/),r="undefined"!=typeof self?self:global,o="undefined"!=typeof Symbol;function i(e){return o?Symbol():"@@"+e}var a,s=o&&Symbol.toStringTag;if("undefined"!=typeof document&&document.getElementsByTagName){if(!(a=document.baseURI)){var u=document.getElementsByTagName("base");a=u[0]&&u[0].href||window.location.href}}else"undefined"!=typeof location&&(a=location.href);if(a){var l=(a=a.split("#")[0].split("?")[0]).lastIndexOf("/");-1!==l&&(a=a.substr(0,l+1))}else{if("undefined"==typeof process||!process.cwd)throw new TypeError("No environment baseURI");a="file://"+(n?"/":"")+process.cwd(),n&&(a=a.replace(/\\/g,"/"))}"/"!==a[a.length-1]&&(a+="/");var c="_"==new Error(0,"_").fileName;function f(r,o){e||(o=o.replace(n?/file:\/\/\//g:/file:\/\//g,""));var i,a=(r.message||r)+"\n  "+o;i=c&&r.fileName?new Error(a,r.fileName,r.lineNumber):new Error(a);var s=r.originalErr?r.originalErr.stack:r.stack;return i.stack=t?a+"\n  "+s:s,i.originalErr=r.originalErr||r,i}function d(e,t){throw new RangeError('Unable to resolve "'+e+'" to '+t)}var p=/\\/g;function h(e,n){" "!==e[0]&&" "!==e[e.length-1]||(e=e.trim());var r=n&&n.substr(0,n.indexOf(":")+1),o=e[0],i=e[1];if("/"===o&&"/"===i)return r||d(e,n),-1!==e.indexOf("\\")&&(e=e.replace(p,"/")),r+e;if("."===o&&("/"===i||"."===i&&("/"===e[2]||2===e.length&&(e+="/"))||1===e.length&&(e+="/"))||"/"===o){-1!==e.indexOf("\\")&&(e=e.replace(p,"/"));var a,s=!r||"/"!==n[r.length];if(s?(void 0===n&&d(e,n),a=n):a="/"===n[r.length+1]?"file:"!==r?(a=n.substr(r.length+2)).substr(a.indexOf("/")+1):n.substr(8):n.substr(r.length+1),"/"===o){if(!s)return n.substr(0,n.length-a.length-1)+e;d(e,n)}for(var u=a.substr(0,a.lastIndexOf("/")+1)+e,l=[],c=-1,f=0;f<u.length;f++)if(-1===c)if("."!==u[f])c=f;else{if("."!==u[f+1]||"/"!==u[f+2]&&f+2!==u.length){if("/"!==u[f+1]&&f+1!==u.length){c=f;continue}f+=1}else l.pop(),f+=2;s&&0===l.length&&d(e,n)}else"/"===u[f]&&(l.push(u.substring(c,f+1)),c=-1);return-1!==c&&l.push(u.substr(c)),n.substr(0,n.length-a.length)+l.join("")}return-1!==e.indexOf(":")?t&&":"===e[1]&&"\\"===e[2]&&e[0].match(/[a-z]/i)?"file:///"+e.replace(p,"/"):e:void 0}var g=Promise.resolve();function m(e){if(e.values)return e.values();if("undefined"==typeof Symbol||!Symbol.iterator)throw new Error("Symbol.iterator not supported in this browser");var t={};return t[Symbol.iterator]=function(){var t=Object.keys(e),n=0;return{next:function(){return n<t.length?{value:e[t[n++]],done:!1}:{value:void 0,done:!0}}}},t}function v(){this.registry=new S}function y(e){if(void 0!==e){if(e instanceof k==!1&&"module"!==e[s])throw new TypeError("Module instantiation did not return a valid namespace object.");return e}}v.prototype.constructor=v,v.prototype.import=function(e,t){if("string"!=typeof e)throw new TypeError("Loader import method must be passed a module key string");var n=this;return g.then(function(){return n[w](e,t)}).then(y).catch(function(n){throw f(n,"Loading "+e+(t?" from "+t:""))})};var b=v.resolve=i("resolve"),w=v.resolveInstantiate=i("resolveInstantiate");function x(e){if(void 0===e)throw new RangeError("No resolution found.");return e}v.prototype[w]=function(e,t){var n=this;return n.resolve(e,t).then(function(e){return n.registry.get(e)})},v.prototype.resolve=function(e,t){var n=this;return g.then(function(){return n[b](e,t)}).then(x).catch(function(n){throw f(n,"Resolving "+e+(t?" to "+t:""))})};var _="undefined"!=typeof Symbol&&Symbol.iterator,C=i("registry");function S(){this[C]={}}_&&(S.prototype[Symbol.iterator]=function(){return this.entries()[Symbol.iterator]()},S.prototype.entries=function(){var e=this[C];return m(Object.keys(e).map(function(t){return[t,e[t]]}))}),S.prototype.keys=function(){return m(Object.keys(this[C]))},S.prototype.values=function(){var e=this[C];return m(Object.keys(e).map(function(t){return e[t]}))},S.prototype.get=function(e){return this[C][e]},S.prototype.set=function(e,t){if(!(t instanceof k||"module"===t[s]))throw new Error("Registry must be set with an instance of Module Namespace");return this[C][e]=t,this},S.prototype.has=function(e){return Object.hasOwnProperty.call(this[C],e)},S.prototype.delete=function(e){return!!Object.hasOwnProperty.call(this[C],e)&&(delete this[C][e],!0)};var E=i("baseObject");function k(e){Object.defineProperty(this,E,{value:e}),Object.keys(e).forEach(T,this)}function T(e){Object.defineProperty(this,e,{enumerable:!0,get:function(){return this[E][e]}})}k.prototype=Object.create(null),s&&Object.defineProperty(k.prototype,s,{value:"Module"});var A=Promise.resolve(),L=i("register-internal");function O(){v.call(this);var e=this.registry.delete;this.registry.delete=function(n){var r=e.call(this,n);return t.hasOwnProperty(n)&&!t[n].linkRecord&&(delete t[n],r=!0),r};var t={};this[L]={lastRegister:void 0,records:t},this.trace=!1}O.prototype=Object.create(v.prototype),O.prototype.constructor=O;var j=O.instantiate=i("instantiate");function M(e,t,n){return e.records[t]={key:t,registration:n,module:void 0,importerSetters:void 0,loadError:void 0,evalError:void 0,linkRecord:{instantiatePromise:void 0,dependencies:void 0,execute:void 0,executingRequire:!1,moduleObj:void 0,setters:void 0,depsInstantiatePromise:void 0,dependencyInstantiations:void 0,evaluatePromise:void 0}}}function P(e,t,n,o,i){return n.instantiatePromise||(n.instantiatePromise=(t.registration?A:A.then(function(){return i.lastRegister=void 0,e[j](t.key,e[j].length>1&&function(e,t,n){return function(){var e=n.lastRegister;return e?(n.lastRegister=void 0,t.registration=e,!0):!!t.registration}}(0,t,i))})).then(function(a){if(void 0!==a){if(!(a instanceof k||"module"===a[s]))throw new TypeError("Instantiate did not return a valid Module object.");return delete i.records[t.key],e.trace&&R(e,t,n),o[t.key]=a}var u=t.registration;if(t.registration=void 0,!u)throw new TypeError("Module instantiation did not call an anonymous or correctly named System.register.");return n.dependencies=u[0],t.importerSetters=[],n.moduleObj={},u[2]?(n.moduleObj.default=n.moduleObj.__useDefault={},n.executingRequire=u[1],n.execute=u[2]):function(e,t,n,o){var i=n.moduleObj,a=t.importerSetters,s=!1,u=o.call(r,function(e,t){if("object"==typeof e){var n=!1;for(var r in e)t=e[r],"__useDefault"===r||r in i&&i[r]===t||(n=!0,i[r]=t);if(!1===n)return t}else{if((s||e in i)&&i[e]===t)return t;i[e]=t}for(var o=0;o<a.length;o++)a[o](i);return t},new N(e,t.key));n.setters=u.setters||[],n.execute=u.execute,u.exports&&(n.moduleObj=i=u.exports,s=!0)}(e,t,n,u[1]),t}).catch(function(e){throw t.linkRecord=void 0,t.loadError=t.loadError||f(e,"Instantiating "+t.key)}))}function D(e,t,n,r,o,i){return e.resolve(t,n).then(function(n){i&&(i[t]=n);var a=o.records[n],s=r[n];if(s&&(!a||a.module&&s!==a.module))return s;if(a&&a.loadError)throw a.loadError;(!a||!s&&a.module)&&(a=M(o,n,a&&a.registration));var u=a.linkRecord;return u?P(e,a,u,r,o):a})}function R(e,t,n){e.loads=e.loads||{},e.loads[t.key]={key:t.key,deps:n.dependencies,dynamicDeps:[],depMap:n.depMap||{}}}function N(e,t){e._tempcg_&&(this._cg=e._tempcg_),this.loader=e,this.key=this.id=t,this.meta={url:t}}function I(e,t){e.linkRecord=void 0;var n=f(t,"Evaluating "+e.key);throw void 0===e.evalError&&(e.evalError=n),n}function q(e,t,n,r,o,i){for(var a,u,l=0;l<n.dependencies.length;l++){var c;if(!((c=n.dependencyInstantiations[l])instanceof k||"module"===c[s])&&(a=c.linkRecord))if(c.evalError)I(t,c.evalError);else if(a.setters){if(-1===i.indexOf(c)){i.push(c);try{var f=q(e,c,a,r,o,i)}catch(e){I(t,e)}f&&(u=u||[]).push(f.catch(function(e){I(t,e)}))}}else try{F(e,c,a,r,o,[c])}catch(e){I(t,e)}}if(u)return n.evaluatePromise=Promise.all(u).then(function(){if(n.execute){try{var e=n.execute.call(U)}catch(e){I(t,e)}if(e)return e.catch(function(e){I(t,e)}).then(function(){return t.linkRecord=void 0,r[t.key]=t.module=new k(n.moduleObj)})}t.linkRecord=void 0,r[t.key]=t.module=new k(n.moduleObj)});if(n.execute){try{var d=n.execute.call(U)}catch(e){I(t,e)}if(d)return n.evaluatePromise=d.catch(function(e){I(t,e)}).then(function(){return t.linkRecord=void 0,r[t.key]=t.module=new k(n.moduleObj)})}t.linkRecord=void 0,r[t.key]=t.module=new k(n.moduleObj)}function F(e,t,n,o,i,a){var u={id:t.key},l=n.moduleObj;Object.defineProperty(u,"exports",{configurable:!0,set:function(e){l.default=l.__useDefault=e},get:function(){return l.__useDefault}});var c=function(e,t,n,r,o,i,a){return function(u){for(var l=0;l<n.length;l++)if(n[l]===u){var c,f=r[l];if(f instanceof k||"module"===f[s])c=f;else{if(f.evalError)throw f.evalError;void 0!==f.module||-1!==a.indexOf(f)||f.linkRecord.evaluatePromise||(f.linkRecord.setters?q(e,f,f.linkRecord,o,i,[f]):(a.push(f),F(e,f,f.linkRecord,o,i,a))),c=f.module||f.linkRecord.moduleObj}return"__useDefault"in c?c.__useDefault:c}throw new Error("Module "+u+" not declared as a System.registerDynamic dependency of "+t)}}(e,t.key,n.dependencies,n.dependencyInstantiations,o,i,a);if(!n.executingRequire)for(var f=0;f<n.dependencies.length;f++)c(n.dependencies[f]);try{var d=n.execute.call(r,c,l.default,u);void 0!==d&&(u.exports=d)}catch(e){I(t,e)}t.linkRecord=void 0,u.exports!==l.__useDefault&&(l.default=l.__useDefault=u.exports);var p=l.default;if(p&&p.__esModule)for(var h in p)Object.hasOwnProperty.call(p,h)&&(l[h]=p[h]);if(o[t.key]=t.module=new k(n.moduleObj),t.importerSetters)for(f=0;f<t.importerSetters.length;f++)t.importerSetters[f](t.module);t.importerSetters=void 0}O.prototype[O.resolve=v.resolve]=function(e,t){return h(e,t||a)},O.prototype[j]=function(e,t){},O.prototype[v.resolveInstantiate]=function(e,t){var n=this,r=this[L],o=this.registry[C];return function(e,t,n,r,o){var i=r[t];if(i)return Promise.resolve(i);var a=o.records[t];if(a&&!a.module)return a.loadError?Promise.reject(a.loadError):P(e,a,a.linkRecord,r,o);return e.resolve(t,n).then(function(t){if(i=r[t])return i;if((a=o.records[t])&&!a.module||(a=M(o,t,a&&a.registration)),a.loadError)return Promise.reject(a.loadError);var n=a.linkRecord;return n?P(e,a,n,r,o):a})}(n,e,t,o,r).then(function(e){if(e instanceof k||"module"===e[s])return e;var t=e.linkRecord;if(!t){if(e.module)return e.module;throw e.evalError}return function(e,t,n,r,o){var i=[];return function t(n,a){if(!a)return A;if(-1!==i.indexOf(n))return A;i.push(n);return function(e,t,n,r,o){if(n.depsInstantiatePromise)return n.depsInstantiatePromise;for(var i=Array(n.dependencies.length),a=0;a<n.dependencies.length;a++)i[a]=D(e,n.dependencies[a],t.key,r,o,e.trace&&n.depMap||(n.depMap={}));var u=Promise.all(i).then(function(e){if(n.dependencyInstantiations=e,n.setters)for(var r=0;r<e.length;r++){var o=n.setters[r];if(o){var i=e[r];if(i instanceof k||"module"===i[s])o(i);else{if(i.loadError)throw i.loadError;o(i.module||i.linkRecord.moduleObj),i.importerSetters&&i.importerSetters.push(o)}}}return t});e.trace&&(u=u.then(function(){return R(e,t,n),t}));return(u=u.catch(function(e){throw n.depsInstantiatePromise=void 0,f(e,"Loading "+t.key)})).catch(function(){}),n.depsInstantiatePromise=u}(e,n,a,r,o).then(function(){for(var e,n=0;n<a.dependencies.length;n++){var r=a.dependencyInstantiations[n];r instanceof k||"module"===r[s]||(e=e||[]).push(t(r,r.linkRecord))}if(e)return Promise.all(e)})}(t,n)}(n,e,t,o,r).then(function(){return function(e,t,n,r,o){if(t.module)return t.module;if(t.evalError)throw t.evalError;if(n.evaluatePromise)return n.evaluatePromise;if(n.setters){var i=q(e,t,n,r,o,[t]);if(i)return i}else F(e,t,n,r,o,[t]);return t.module}(n,e,t,o,r)})})},O.prototype.register=function(e,t,n){var r=this[L];void 0===n?r.lastRegister=[e,t,void 0]:(r.records[e]||M(r,e,void 0)).registration=[t,n,void 0]},O.prototype.registerDynamic=function(e,t,n,r){var o=this[L];"string"!=typeof e?o.lastRegister=[e,t,n]:(o.records[e]||M(o,e,void 0)).registration=[t,n,r]},N.prototype.import=function(e){return this.loader.trace&&this.loader.loads[this.key].dynamicDeps.push(e),this.loader.import(e,this.key)};var U=Object.create(null);Object.freeze&&Object.freeze(U);var H=Promise.resolve();function $(){}var B=new k({});var W,z=i("loader-config"),G=i("metadata"),K="undefined"==typeof window&&"undefined"!=typeof self&&"undefined"!=typeof importScripts;function J(e,t){(t||this.warnings&&"undefined"!=typeof console&&console.warn)&&console.warn(e)}function X(e,t){for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function V(e,t){for(var n in t)Object.hasOwnProperty.call(t,n)&&void 0===e[n]&&(e[n]=t[n]);return e}function Y(e,t,n){for(var r in t)if(Object.hasOwnProperty.call(t,r)){var o=t[r];void 0===e[r]?e[r]=o:o instanceof Array&&e[r]instanceof Array?e[r]=[].concat(n?o:e[r]).concat(n?e[r]:o):"object"==typeof o&&null!==o&&"object"==typeof e[r]?e[r]=(n?V:X)(X({},e[r]),o):n||(e[r]=o)}}var Z=!1,Q=!1;function ee(e){if(Z||Q){var t=document.createElement("link");Z?(t.rel="preload",t.as="script"):t.rel="prefetch",t.href=e,document.head.appendChild(t)}else{(new Image).src=e}}if(e&&function(){var e=document.createElement("link").relList;if(e&&e.supports){Q=!0;try{Z=e.supports("preload")}catch(e){}}}(),e){var te=window.onerror;window.onerror=function(e,t){te&&te.apply(this,arguments)}}function ne(e,t,n,r,o){if(e=e.replace(/#/g,"%23"),K)return function(e,t,n){try{importScripts(e)}catch(e){n(e)}t()}(e,r,o);var i=document.createElement("script");function a(){r(),u()}function s(t){u(),o(new Error("Fetching "+e))}function u(){i.removeEventListener("load",a,!1),i.removeEventListener("error",s,!1),document.head.removeChild(i)}i.type="text/javascript",i.charset="utf-8",i.async=!0,t&&(i.crossOrigin=t),n&&(i.integrity=n),i.addEventListener("load",a,!1),i.addEventListener("error",s,!1),i.src=e,document.head.appendChild(i)}function re(e,t){for(var n=e.split(".");n.length;)t=t[n.shift()];return t}function oe(e,t,n){var r=ae(t,n);if(r){var o=t[r]+n.substr(r.length),i=h(o,a);return void 0!==i?i:e+o}return-1!==n.indexOf(":")?n:e+n}function ie(e){var t=this.name;if(t.substr(0,e.length)===e&&(t.length===e.length||"/"===t[e.length]||"/"===e[e.length-1]||":"===e[e.length-1])){var n=e.split("/").length;n>this.len&&(this.match=e,this.len=n)}}function ae(e,t){if(Object.hasOwnProperty.call(e,t))return t;var n={name:t,match:void 0,len:0};return Object.keys(e).forEach(ie,n),n.match}var se,ue=/(?:^\uFEFF?|[^$_a-zA-Z\xA0-\uFFFF."'])require\s*\(\s*("[^"\\]*(?:\\.[^"\\]*)*"|'[^'\\]*(?:\\.[^'\\]*)*'|`[^`\\]*(?:\\.[^`\\]*)*`)\s*\)/g;function le(e,t,n,r){if("file:///"===e.substr(0,8)){if(fe)return ce(e,t,n,r);throw new Error("Unable to fetch file URLs in this environment.")}e=e.replace(/#/g,"%23");var o={headers:{Accept:"application/x-es-module, */*"}};return n&&(o.integrity=n),t&&("string"==typeof t&&(o.headers.Authorization=t),o.credentials="include"),fetch(e,o).then(function(e){if(e.ok)return r?e.arrayBuffer():e.text();throw new Error("Fetch error: "+e.status+" "+e.statusText)})}function ce(e,t,n,r){return new Promise(function(n,o){e=e.replace(/#/g,"%23");var i=new XMLHttpRequest;function a(){n(r?i.response:i.responseText)}function s(){o(new Error("XHR error: "+(i.status?" ("+i.status+(i.statusText?" "+i.statusText:"")+")":"")+" loading "+e))}r&&(i.responseType="arraybuffer"),i.onreadystatechange=function(){4===i.readyState&&(0==i.status?i.response?a():(i.addEventListener("error",s),i.addEventListener("load",a)):200===i.status?a():s())},i.open("GET",e,!0),i.setRequestHeader&&(i.setRequestHeader("Accept","application/x-es-module, */*"),t&&("string"==typeof t&&i.setRequestHeader("Authorization",t),i.withCredentials=!0)),i.send(null)})}var fe="undefined"!=typeof XMLHttpRequest,de="undefined"!=typeof fetch,pe="undefined"!=typeof self&&void 0!==self.fetch?le:fe?ce:"undefined"!=typeof require&&"undefined"!=typeof process?function(e,t,r,o){return"file:///"!=e.substr(0,8)?de?le(e,t,r,o):Promise.reject(new Error('Unable to fetch "'+e+'". Only file URLs of the form file:/// supported running in Node without fetch.')):(se=se||require("fs"),e=n?e.replace(/\//g,"\\").substr(8):e.substr(7),new Promise(function(t,n){se.readFile(e,function(e,r){if(e)return n(e);if(o)t(r);else{var i=r+"";"\ufeff"===i[0]&&(i=i.substr(1)),t(i)}})}))}:function(){throw new Error("No fetch method is defined for this environment.")};function he(e,t,n){var r,o={pluginKey:void 0,pluginArgument:void 0,pluginModule:void 0,packageKey:void 0,packageConfig:void 0,load:void 0};n&&(t.pluginFirst?-1!==(r=n.lastIndexOf("!"))&&(o.pluginArgument=o.pluginKey=n.substr(0,r)):-1!==(r=n.indexOf("!"))&&(o.pluginArgument=o.pluginKey=n.substr(r+1)),o.packageKey=ae(t.packages,n),o.packageKey&&(o.packageConfig=t.packages[o.packageKey]));return o}function ge(e,t){var n=we(e.pluginFirst,t);if(n){var r=ge.call(this,e,n.plugin);return xe(e.pluginFirst,me.call(this,e,n.argument,void 0,!1,!1),r)}return me.call(this,e,t,void 0,!1,!1)}function me(e,t,n,r,o){var i=h(t,n||a);if(i)return oe(e.baseURL,e.paths,i);if(r){var s=ae(e.map,t);if(s&&(i=h(t=e.map[s]+t.substr(s.length),a)))return oe(e.baseURL,e.paths,i)}if(this.registry.has(t))return t;if("@node/"===t.substr(0,6))return t;var u=o&&"/"!==t[t.length-1],l=oe(e.baseURL,e.paths,u?t+"/":t);return u?l.substr(0,l.length-1):l}function ve(e,t,n,r,o,i){if(o&&o.packageConfig&&"."!==t[0]){var a=o.packageConfig.map,s=a&&ae(a,t);if(s&&"string"==typeof a[s]){var u=Se(this,e,o.packageConfig,o.packageKey,s,t,r,i);if(u)return u}}var l=me.call(this,e,t,n,!0,!0),c=Te(e,l);if(r.packageKey=c&&c.packageKey||ae(e.packages,l),!r.packageKey)return l;if(-1!==e.packageConfigKeys.indexOf(l))return r.packageKey=void 0,l;r.packageConfig=e.packages[r.packageKey]||(e.packages[r.packageKey]=Ie());var f=l.substr(r.packageKey.length+1);return function(e,t,n,r,o,i,a){if(!o){if(!n.main)return r;o="./"===n.main.substr(0,2)?n.main.substr(2):n.main}if(n.map){var s="./"+o,u=ae(n.map,s);if(u||(s="./"+_e(t,n,r,o,a))!=="./"+o&&(u=ae(n.map,s)),u){var l=Se(e,t,n,r,u,s,i,a);if(l)return l}}return r+"/"+_e(t,n,r,o,a)}(this,e,r.packageConfig,r.packageKey,f,r,i)}function ye(e,t,n,r,o,i){var a=this;return H.then(function(){if(o&&o.packageConfig&&"./"!==t.substr(0,2)){var n=o.packageConfig.map,s=n&&ae(n,t);if(s)return Ee(a,e,o.packageConfig,o.packageKey,s,t,r,i)}return H}).then(function(o){if(o)return o;var s=me.call(a,e,t,n,!0,!0),u=Te(e,s);return r.packageKey=u&&u.packageKey||ae(e.packages,s),r.packageKey?-1!==e.packageConfigKeys.indexOf(s)?(r.packageKey=void 0,r.load=be(),r.load.format="json",r.load.loader="",Promise.resolve(s)):(r.packageConfig=e.packages[r.packageKey]||(e.packages[r.packageKey]=Ie()),(u&&!r.packageConfig.configured?function(e,t,n,r,o){var i=e.pluginLoader||e;-1===t.packageConfigKeys.indexOf(n)&&t.packageConfigKeys.push(n);return i.import(n).then(function(e){qe(r.packageConfig,e,r.packageKey,!0,t),r.packageConfig.configured=!0}).catch(function(e){throw f(e,"Unable to fetch package configuration file "+n)})}(a,e,u.configPath,r):H).then(function(){var t=s.substr(r.packageKey.length+1);return function(e,t,n,r,o,i,a){if(!o){if(!n.main)return Promise.resolve(r);o="./"===n.main.substr(0,2)?n.main.substr(2):n.main}var s,u;n.map&&(s="./"+o,(u=ae(n.map,s))||(s="./"+_e(t,n,r,o,a))!=="./"+o&&(u=ae(n.map,s)));return(u?Ee(e,t,n,r,u,s,i,a):H).then(function(e){return e?Promise.resolve(e):Promise.resolve(r+"/"+_e(t,n,r,o,a))})}(a,e,r.packageConfig,r.packageKey,t,r,i)})):Promise.resolve(s)})}function be(){return{extension:"",deps:void 0,format:void 0,loader:void 0,scriptLoad:void 0,globals:void 0,nonce:void 0,integrity:void 0,sourceMap:void 0,exports:void 0,encapsulateGlobal:!1,crossOrigin:void 0,cjsRequireDetection:!0,cjsDeferDepsExecute:!1,esModule:!1}}function we(e,t){var n,r,o=e?t.indexOf("!"):t.lastIndexOf("!");if(-1!==o)return e?(n=t.substr(o+1),r=t.substr(0,o)):(n=t.substr(0,o),r=t.substr(o+1)||n.substr(n.lastIndexOf(".")+1)),{argument:n,plugin:r}}function xe(e,t,n){return e?n+"!"+t:t+"!"+n}function _e(e,t,n,r,o){if(!r||!t.defaultExtension||"/"===r[r.length-1]||o)return r;var i=!1;if(t.meta&&Ae(t.meta,r,function(e,t,n){if(0===n||e.lastIndexOf("*")!==e.length-1)return i=!0}),!i&&e.meta&&Ae(e.meta,n+"/"+r,function(e,t,n){if(0===n||e.lastIndexOf("*")!==e.length-1)return i=!0}),i)return r;var a="."+t.defaultExtension;return r.substr(r.length-a.length)!==a?r+a:r}function Ce(e,t,n){return!(t.substr(0,e.length)===e&&n.length>e.length)}function Se(e,t,n,r,o,i,a,s){"/"===i[i.length-1]&&(i=i.substr(0,i.length-1));var u=n.map[o];if("object"==typeof u)throw new Error("Synchronous conditional normalization not supported sync normalizing "+o+" in "+r);if(Ce(o,u,i)&&"string"==typeof u)return ve.call(e,t,u+i.substr(o.length),r+"/",a,a,s)}function Ee(e,t,n,r,o,i,a,s){"/"===i[i.length-1]&&(i=i.substr(0,i.length-1));var u=n.map[o];if("string"==typeof u)return Ce(o,u,i)?ye.call(e,t,u+i.substr(o.length),r+"/",a,a,s).then(function(t){return Pe.call(e,t,r+"/",a)}):H;var l=[],c=[];for(var f in u){var d=Oe(f);c.push({condition:d,map:u[f]}),l.push(O.prototype.import.call(e,d.module,r))}return Promise.all(l).then(function(e){for(var t=0;t<c.length;t++){var n=c[t].condition,r=re(n.prop,"__useDefault"in e[t]?e[t].__useDefault:e[t]);if(!n.negate&&r||n.negate&&!r)return c[t].map}}).then(function(n){if(n)return Ce(o,n,i)?ye.call(e,t,n+i.substr(o.length),r+"/",a,a,s).then(function(t){return Pe.call(e,t,r+"/",a)}):H})}var ke={};function Te(e,t){for(var n,r,o,i,a,s=!1,u=0;u<e.packageConfigPaths.length;u++){var l=e.packageConfigPaths[u],c=ke[l]||(ke[l]=(void 0,void 0,i=(o=l).lastIndexOf("*"),{length:a=Math.max(i+1,o.lastIndexOf("/")),regEx:new RegExp("^("+o.substr(0,a).replace(/[.+?^${}()|[\]\\]/g,"\\$&").replace(/\*/g,"[^\\/]+")+")(\\/|$)"),wildcard:-1!==i}));if(!(t.length<c.length)){var f=t.match(c.regEx);!f||n&&(s&&c.wildcard||!(n.length<f[1].length))||(n=f[1],s=!c.wildcard,r=n+l.substr(c.length))}}if(n)return{packageKey:n,configPath:r}}function Ae(e,t,n){var r;for(var o in e){var i="./"===o.substr(0,2)?"./":"";if(i&&(o=o.substr(2)),-1!==(r=o.indexOf("*"))&&o.substr(0,r)===t.substr(0,r)&&o.substr(r+1)===t.substr(t.length-o.length+r+1)&&n(o,e[i+o],o.split("/").length))return}var a=e[t]&&Object.hasOwnProperty.call(e,t)?e[t]:e["./"+t];a&&n(a,a,0)}var Le=["browser","node","dev","build","production","default"];function Oe(e){var t,n,r,o=e.lastIndexOf("|");return-1!==o?(t=e.substr(o+1),n=e.substr(0,o),"~"===t[0]&&(r=!0,t=t.substr(1))):(r="~"===e[0],t="default",n=e.substr(r),-1!==Le.indexOf(n)&&(t=n,n=null)),{module:n||"@system-env",prop:t,negate:r}}function je(e,t,n){return O.prototype.import.call(this,e.module,t).then(function(t){var r=re(e.prop,t);if(n&&"boolean"!=typeof r)throw new TypeError("Condition did not resolve to a boolean.");return e.negate?!r:r})}var Me=/#\{[^\}]+\}/;function Pe(e,t,n){var r=e.match(Me);if(!r)return Promise.resolve(e);var o=Oe.call(this,r[0].substr(2,r[0].length-3));return je.call(this,o,t,!1).then(function(n){if("string"!=typeof n)throw new TypeError("The condition value for "+e+" doesn't resolve to a string.");if(-1!==n.indexOf("/"))throw new TypeError("Unabled to interpolate conditional "+e+(t?" in "+t:"")+"\n\tThe condition value "+n+' cannot contain a "/" separator.');return e.replace(Me,n)})}var De=["browserConfig","nodeConfig","devConfig","buildConfig","productionConfig"];function Re(e,t,n){for(var r=0;r<De.length;r++){var o=De[r];t[o]&&Mt[o.substr(0,o.length-6)]&&n(t[o])}}function Ne(e,t){var n=e[t];return n instanceof Array?e[t].concat([]):"object"==typeof n?function e(t,n){var r={};for(var o in t){var i=t[o];n>1?i instanceof Array?r[o]=[].concat(i):"object"==typeof i?r[o]=e(i,n-1):"packageConfig"!==o&&(r[o]=i):r[o]=i}return r}(n,3):e[t]}function Ie(){return{defaultExtension:void 0,main:void 0,format:void 0,meta:void 0,map:void 0,packageConfig:void 0,configured:!1}}function qe(e,t,n,r,o){for(var i in t)"main"===i||"format"===i||"defaultExtension"===i||"configured"===i?r&&void 0!==e[i]||(e[i]=t[i]):"map"===i?(r?V:X)(e.map=e.map||{},t.map):"meta"===i?(r?V:X)(e.meta=e.meta||{},t.meta):Object.hasOwnProperty.call(t,i)&&J.call(o,'"'+i+'" is not a valid package configuration option in package '+n);return void 0===e.defaultExtension&&(e.defaultExtension="js"),void 0===e.main&&e.map&&e.map["."]?(e.main=e.map["."],delete e.map["."]):"object"==typeof e.main&&(e.map=e.map||{},e.map["./@main"]=e.main,e.main.default=e.main.default||"./",e.main="@main"),e}var Fe="undefined"!=typeof Buffer;try{Fe&&"YQ=="!==new Buffer("a").toString("base64")&&(Fe=!1)}catch(e){Fe=!1}var Ue,He,$e,Be,We="\n//# sourceMappingURL=data:application/json;base64,";function ze(e,t,n,r){var o,i=e.lastIndexOf("\n");if(t){if("object"!=typeof t)throw new TypeError("load.metadata.sourceMap must be set to an object.");t=JSON.stringify(t),CgLibs.transpiled_scripts[n]=t}return(r?"(function(System, SystemJS) {":"")+e+(r?"\n})(System, System);":"")+("\n//# sourceURL="!=e.substr(i,15)?"\n//# sourceURL="+n+(t?"!transpiled":""):"")+(t&&(o=t,Fe?We+new Buffer(o).toString("base64"):"undefined"!=typeof btoa?We+btoa(unescape(encodeURIComponent(o))):"")||"")}var Ge=0;function Ke(e){0==Ge++&&(Be=r.System),r.System=r.SystemJS=e}function Je(){0==--Ge&&(r.System=r.SystemJS=Be)}var Xe,Ve=!1;function Ye(e,t,n,r,o,i,a){if(t){if(i&&Ve)return function(e,t,n,r,o){Ue||(Ue=document.head||document.body||document.documentElement);var i=document.createElement("script");i.text=ze(t,n,r,!1);var a,s=window.onerror;if(window.onerror=function(e){a=addToError(e,"Evaluating "+r),s&&s.apply(this,arguments)},Ke(e),o&&i.setAttribute("nonce",o),Ue.appendChild(i),Ue.removeChild(i),Je(),window.onerror=s,a)return a}(e,t,n,r,i);try{Ke(e),!He&&e._nodeRequire&&(He=e._nodeRequire("vm"),$e=He.runInThisContext("typeof System !== 'undefined' && System")===e),$e?He.runInThisContext(ze(t,n,r,!a),{filename:r+(n?"!transpiled":"")}):(0,eval)(ze(t,n,r,!a)),Je()}catch(e){return Je(),e}}}function Ze(e){function t(n,r,o,i){if("object"==typeof n&&!(n instanceof Array))return t.apply(null,Array.prototype.splice.call(arguments,1,arguments.length-1));if("string"==typeof n&&"function"==typeof r&&(n=[n]),!(n instanceof Array)){if("string"==typeof n){var a=e.decanonicalize(n,i),s=e.get(a);if(!s)throw new Error('Module not already loaded loading "'+n+'" as '+a+(i?' from "'+i+'".':"."));return"__useDefault"in s?s.__useDefault:s}throw new TypeError("Invalid require")}for(var u=[],l=0;l<n.length;l++)u.push(e.import(n[l],i));Promise.all(u).then(function(e){r&&r.apply(null,e)},o)}function n(n,o,i){var a,s,u;function l(n,l,c){for(var f=[],d=0;d<o.length;d++)f.push(n(o[d]));if(c.uri=c.id,c.config=$,-1!==u&&f.splice(u,0,c),-1!==s&&f.splice(s,0,l),-1!==a){var p=function(r,o,i){return"string"==typeof r&&"function"!=typeof o?n(r):t.call(e,r,o,i,c.id)};p.toUrl=function(t){return e.normalizeSync(t,c.id)},f.splice(a,0,p)}var h=r.require;r.require=t;var g=i.apply(-1===s?r:l,f);r.require=h,void 0!==g&&(c.exports=g)}"string"!=typeof n&&(i=o,o=n,n=null),o instanceof Array||(o=["require","exports","module"].splice(0,(i=o).length)),"function"!=typeof i&&(i=function(e){return function(){return e}}(i)),n||mt&&(o=o.concat(mt),mt=void 0),-1!==(a=o.indexOf("require"))&&(o.splice(a,1),n||(o=o.concat(function(e,t){var n=((e=e.replace(nt,"")).match(ft)[1].split(",")[t]||"require").replace(dt,""),r=pt[n]||(pt[n]=new RegExp(lt+n+ct,"g"));r.lastIndex=0;var o,i=[];for(;o=r.exec(e);)i.push(o[2]||o[3]);return i}(i.toString(),a)))),-1!==(s=o.indexOf("exports"))&&o.splice(s,1),-1!==(u=o.indexOf("module"))&&o.splice(u,1),n?(e.registerDynamic(n,o,!1,l),gt?(gt=void 0,vt=!0):vt||(gt=[o,l])):e.registerDynamic(o,!1,yt?ht(l):l)}n.amd={},e.amdDefine=n,e.amdRequire=t}function Qe(e){return"file:///"===e.substr(0,8)?e.substr(7+!!n):Xe&&e.substr(0,Xe.length)===Xe?e.substr(Xe.length):e}function et(e,t){return Qe(this.normalizeSync(e,t))}function tt(e){var t,n=e.lastIndexOf("!"),r=(t=-1!==n?e.substr(0,n):e).split("/");return r.pop(),r=r.join("/"),{filename:Qe(t),dirname:Qe(r)}}e&&"undefined"!=typeof document&&document.getElementsByTagName&&(window.chrome&&window.chrome.extension||navigator.userAgent.match(/^Node\.js/)||(Ve=!0)),"undefined"!=typeof window&&"undefined"!=typeof document&&window.location&&(Xe=location.protocol+"//"+location.hostname+(location.port?":"+location.port:""));var nt=/(^|[^\\])(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,rt=/("[^"\\\n\r]*(\\.[^"\\\n\r]*)*"|'[^'\\\n\r]*(\\.[^'\\\n\r]*)*')/g;var ot,it=["_g","sessionStorage","localStorage","clipboardData","frames","frameElement","external","mozAnimationStartTime","mozPaintCount","webkitStorageInfo","webkitIndexedDB","mozInnerScreenY","mozInnerScreenX"];function at(e){if(-1===it.indexOf(e)){try{var t=r[e]}catch(t){it.push(e)}this(e,t)}}function st(e){if("string"==typeof e)return re(e,r);if(!(e instanceof Array))throw new Error("Global exports must be a string or array.");for(var t={},n=0;n<e.length;n++)t[e[n].split(".").pop()]=re(e[n],r);return t}function ut(e,t,n,o){var i,a=r.define;if(r.define=void 0,n)for(var s in i={},n)i[s]=r[s],r[s]=n[s];return t||(ot={},Object.keys(r).forEach(at,function(e,t){ot[e]=t})),function(){var e,n=t?st(t):{},s=!!t;if(t&&!o||Object.keys(r).forEach(at,function(i,a){ot[i]!==a&&void 0!==a&&(o&&(r[i]=void 0),t||(n[i]=a,void 0!==e?s||e===a||(s=!0):e=a))}),n=s?n:e,i)for(var u in i)r[u]=i[u];return r.define=a,n}}var lt="(?:^|[^$_a-zA-Z\\xA0-\\uFFFF.])",ct="\\s*\\(\\s*(\"([^\"]+)\"|'([^']+)')\\s*\\)",ft=/\(([^\)]*)\)/,dt=/^\s+|\s+$/g,pt={};function ht(e){return function(t,n,r){e(t,n,r),"object"!=typeof(n=r.exports)&&"function"!=typeof n||"__esModule"in n||Object.defineProperty(r.exports,"__esModule",{value:!0})}}var gt,mt,vt=!1,yt=!1;var bt,wt=(e||K)&&"undefined"!=typeof navigator&&navigator.userAgent&&!navigator.userAgent.match(/MSIE (9|10).0/);function xt(e,t){!e.load.esModule||"object"!=typeof t&&"function"!=typeof t||"__esModule"in t||Object.defineProperty(t,"__esModule",{value:!0})}function _t(e,t,n,o,i){return Promise.resolve(n).then(function(t){return"detect"===o.load.format&&(o.load.format=void 0),function(e,t){var n=e.match(Pt);if(!n)return;for(var r=n[0].match(Dt),o=0;o<r.length;o++){var i=r[o],a=i.length,s=i.substr(0,1);if(";"==i.substr(a-1,1)&&a--,'"'==s||"'"==s){var u=i.substr(1,i.length-3),l=u.substr(0,u.indexOf(" "));if(l){var c=u.substr(l.length+1,u.length-l.length-1);"deps"===l&&(l="deps[]"),"[]"===l.substr(l.length-2,2)?(l=l.substr(0,l.length-2),t.load[l]=t.load[l]||[],t.load[l].push(c)):"use"!==l&&Rt(t.load,l,c)}else t.load[u]=!0}}}(t,o),o.pluginModule?(o.pluginLoad.source=t,o.pluginModule.translate?Promise.resolve(o.pluginModule.translate.call(e,o.pluginLoad,o.traceOpts)).then(function(e){if(o.load.sourceMap){if("object"!=typeof o.load.sourceMap)throw new Error("metadata.load.sourceMap must be set to an object.");Ot(o.pluginLoad.address,o.load.sourceMap)}return"string"==typeof e?e:o.pluginLoad.source}):t):t}).then(function(n){return o.load.format||'"bundle"'!==n.substring(0,8)?"register"===o.load.format||!o.load.format&&kt(n)?(o.load.format="register",n):"esm"===o.load.format||!o.load.format&&n.match(St)?(o.load.format="esm",function(e,t,n,r,o){if(!e.transpiler)throw new TypeError("Unable to dynamically transpile ES module\n   A loader plugin needs to be configured via `SystemJS.config({ transpiler: 'transpiler-module' })`.");if(r.load.deps){for(var i="",a=0;a<r.load.deps.length;a++)i+='import "'+r.load.deps[a]+'"; ';t=i+t}return e.import.call(e,e.transpiler).then(function(o){if(!(o=o.__useDefault||o).translate)throw new Error(e.transpiler+" is not a valid transpiler plugin.");return o===r.pluginModule?t:("string"==typeof r.load.sourceMap&&(r.load.sourceMap=JSON.parse(r.load.sourceMap)),r.pluginLoad=r.pluginLoad||{name:n,address:n,source:t,metadata:r.load},r.load.deps=r.load.deps||[],Promise.resolve(o.translate.call(e,r.pluginLoad,r.traceOpts)).then(function(e){var t=r.load.sourceMap;return t&&"object"==typeof t&&Ot(n,t),"esm"===r.load.format&&kt(e)&&(r.load.format="register"),e}))},function(e){throw f(e,"Unable to load transpiler to transpile "+n)})}(e,n,t,o)):n:(o.load.format="system",n)}).then(function(t){if("string"!=typeof t||!o.pluginModule||!o.pluginModule.instantiate)return t;var n=!1;return o.pluginLoad.source=t,Promise.resolve(o.pluginModule.instantiate.call(e,o.pluginLoad,function(e){if(t=e.source,o.load=e.metadata,n)throw new Error("Instantiate must only be called once.");n=!0})).then(function(e){return n?t:function(e){if(e){if(e instanceof k||"module"===e[s])return e;if(e.__esModule)return new k(e)}return new k({default:e,__useDefault:e})}(e)})}).then(function(n){if("string"!=typeof n)return n;o.load.format||(o.load.format=function(e){return e.match(Tt)?"amd":(At.lastIndex=0,ue.lastIndex=0,ue.exec(e)||At.exec(e)?"cjs":"global")}(n));var a=!1;switch(o.load.format){case"esm":case"register":case"system":if(l=Ye(e,n,o.load.sourceMap,t,o.load.integrity,o.load.nonce,!1))throw l;return i()?void 0:B;case"json":var s=JSON.parse(n);return e.newModule({default:s,__useDefault:s});case"amd":var u=r.define;r.define=e.amdDefine,function(e,t){mt=e,yt=t,gt=void 0,vt=!1}(o.load.deps,o.load.esModule);var l=Ye(e,n,o.load.sourceMap,t,o.load.integrity,o.load.nonce,!1);if((a=i())||(!function(e){gt?e.registerDynamic(mt?gt[0].concat(mt):gt[0],!1,yt?ht(gt[1]):gt[1]):vt&&e.registerDynamic([],!1,$)}(e),a=i()),r.define=u,l)throw l;break;case"cjs":var c=o.load.deps,f=(o.load.deps||[]).concat(o.load.cjsRequireDetection?function(e){ue.lastIndex=nt.lastIndex=rt.lastIndex=0;var t,n=[],r=[],o=[];function i(e,t){for(var n=0;n<e.length;n++)if(e[n][0]<t.index&&e[n][1]>t.index)return!0;return!1}if(e.length/e.split("\n").length<200){for(;t=rt.exec(e);)r.push([t.index,t.index+t[0].length]);for(;t=nt.exec(e);)i(r,t)||o.push([t.index+t[1].length,t.index+t[0].length-1])}for(;t=ue.exec(e);)if(!i(r,t)&&!i(o,t)){var a=t[1].substr(1,t[1].length-2);if(a.match(/"|'/))continue;n.push(a)}return n}(n):[]);for(var d in o.load.globals)o.load.globals[d]&&f.push(o.load.globals[d]);e.registerDynamic(f,!0,function(i,a,s){if(i.resolve=function(t){return et.call(e,t,s.id)},s.paths=[],s.require=i,!o.load.cjsDeferDepsExecute&&c)for(var u=0;u<c.length;u++)i(c[u]);var l=tt(s.id),f={exports:a,args:[i,a,s,l.filename,l.dirname,r,r]},d="(function (require, exports, module, __filename, __dirname, global, GLOBAL";if(o.load.globals)for(var p in o.load.globals)f.args.push(i(o.load.globals[p])),d+=", "+p;var h=r.define;r.define=void 0,r.__cjsWrapper=f,n=d+") {"+n.replace(Lt,"")+"\n}).apply(__cjsWrapper.exports, __cjsWrapper.args);";var g=Ye(e,n,o.load.sourceMap,t,o.load.integrity,o.load.nonce,!1);if(g)throw g;xt(o,a),r.__cjsWrapper=void 0,r.define=h}),a=i();break;case"global":f=o.load.deps||[];for(var d in o.load.globals){var p=o.load.globals[d];p&&f.push(p)}e.registerDynamic(f,!1,function(r,i,a){var s;if(o.load.globals)for(var u in s={},o.load.globals)o.load.globals[u]&&(s[u]=r(o.load.globals[u]));var l=o.load.exports;l&&(n+="\n"+Ct+'["'+l+'"] = '+l+";");var c=ut(a.id,l,s,o.load.encapsulateGlobal),f=Ye(e,n,o.load.sourceMap,t,o.load.integrity,o.load.nonce,!0);if(f)throw f;var d=c();return xt(o,d),d}),a=i();break;default:throw new TypeError('Unknown module format "'+o.load.format+'" for "'+t+'".'+("es6"===o.load.format?' Use "esm" instead here.':""))}if(!a)throw new Error("Module "+t+" detected as "+o.load.format+" but didn't execute correctly.")})}"undefined"==typeof require||"undefined"==typeof process||process.browser||(bt=require);var Ct="undefined"!=typeof self?"self":"global",St=/(^\s*|[}\);\n]\s*)(import\s*(['"]|(\*\s+as\s+)?(?!type)([^"'\(\)\n; ]+)\s*from\s*['"]|\{)|export\s+\*\s+from\s+["']|export\s*(\{|default|function|class|var|const|let|async\s+function))/,Et=/^(\s*\/\*[^\*]*(\*(?!\/)[^\*]*)*\*\/|\s*\/\/[^\n]*|\s*"[^"]+"\s*;?|\s*'[^']+'\s*;?)*\s*/;function kt(e){var t=e.match(Et);if(!t)return!1;var n=t[0].length;return"SystemJS.register"===e.substr(n,17)||"System.register"===e.substr(n,15)}var Tt=/(?:^\uFEFF?|[^$_a-zA-Z\xA0-\uFFFF.])define\s*\(\s*("[^"]+"\s*,\s*|'[^']+'\s*,\s*)?\s*(\[(\s*(("[^"]+"|'[^']+')\s*,|\/\/.*\r?\n|\/\*(.|\s)*?\*\/))*(\s*("[^"]+"|'[^']+')\s*,?)?(\s*(\/\/.*\r?\n|\/\*(.|\s)*?\*\/))*\s*\]|function\s*|{|[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*\))/,At=/(?:^\uFEFF?|[^$_a-zA-Z\xA0-\uFFFF.])(exports\s*(\[['"]|\.)|module(\.exports|\['exports'\]|\["exports"\])\s*(\[['"]|[=,\.]))/,Lt=/^\#\!.*/;function Ot(e,t){var n=e.split("!")[0];t.file&&t.file!=e||(t.file=n+"!transpiled"),(!t.sources||t.sources.length<=1&&(!t.sources[0]||t.sources[0]===e))&&(t.sources=[n])}var jt,Mt,Pt=/^(\s*\/\*[^\*]*(\*(?!\/)[^\*]*)*\*\/|\s*\/\/[^\n]*|\s*"[^"]+"\s*;?|\s*'[^']+'\s*;?)+/,Dt=/\/\*[^\*]*(\*(?!\/)[^\*]*)*\*\/|\/\/[^\n]*|"[^"]+"\s*;?|'[^']+'\s*;?/g;function Rt(e,t,n){for(var r,o=t.split(".");o.length>1;)e=e[r=o.shift()]=e[r]||{};void 0===e[r=o.shift()]&&(e[r]=n)}if("undefined"==typeof Promise)throw new Error("SystemJS needs a Promise polyfill.");if("undefined"!=typeof document){var Nt=document.getElementsByTagName("script"),It=Nt[Nt.length-1];document.currentScript&&(It.defer||It.async)&&(It=document.currentScript),jt=It&&It.src}else if("undefined"!=typeof importScripts)try{throw new Error("_")}catch(e){e.stack.replace(/(?:at|@).*(http.+):[\d]+:[\d]+/,function(e,t){jt=t})}else"undefined"!=typeof __filename&&(jt=__filename);function qt(){var e;O.call(this),this._loader={},this[G]={},this[z]={baseURL:a,paths:{},packageConfigPaths:[],packageConfigKeys:[],map:{},packages:{},depCache:{},meta:{},bundles:{},production:!1,transpiler:void 0,loadedBundles:{},warnings:!1,pluginFirst:!1,wasm:!1},this.scriptSrc=jt,this._nodeRequire=bt,this.registry.set("@empty",B),Ft.call(this,!1,!1),(e=this).set("@@cjs-helpers",e.newModule({requireResolve:et.bind(e),getPathVars:tt})),e.set("@@global-helpers",e.newModule({prepareGlobal:ut})),Ze(this)}function Ft(t,n){this[z].production=t,this.registry.set("@system-env",Mt=this.newModule({browser:e,node:!!this._nodeRequire,production:!n&&t,dev:n||!t,build:n,default:!0}))}qt.prototype=Object.create(O.prototype),qt.prototype.constructor=qt,qt.prototype[qt.resolve=O.resolve]=qt.prototype.normalize=function(e,t){var n=this[z],r={pluginKey:void 0,pluginArgument:void 0,pluginModule:void 0,packageKey:void 0,packageConfig:void 0,load:void 0},o=he(0,n,t),i=this;return Promise.resolve().then(function(){var n=e.lastIndexOf("#?");if(-1===n)return Promise.resolve(e);var r=Oe.call(i,e.substr(n+2));return je.call(i,r,t,!0).then(function(t){return t?e.substr(0,n):"@empty"})}).then(function(e){var a=we(n.pluginFirst,e);return a?(r.pluginKey=a.plugin,Promise.all([ye.call(i,n,a.argument,o&&o.pluginArgument||t,r,o,!0),i.resolve(a.plugin,t)]).then(function(e){if(r.pluginArgument=e[0],r.pluginKey=e[1],r.pluginArgument===r.pluginKey)throw new Error("Plugin "+r.pluginArgument+" cannot load itself, make sure it is excluded from any wildcard meta configuration via a custom loader: false rule.");return xe(n.pluginFirst,e[0],e[1])})):ye.call(i,n,e,o&&o.pluginArgument||t,r,o,!1)}).then(function(e){return Pe.call(i,e,t,o)}).then(function(e){return function(e,t,n){n.load=n.load||{extension:"",deps:void 0,format:void 0,loader:void 0,scriptLoad:void 0,globals:void 0,nonce:void 0,integrity:void 0,sourceMap:void 0,exports:void 0,encapsulateGlobal:!1,crossOrigin:void 0,cjsRequireDetection:!0,cjsDeferDepsExecute:!1,esModule:!1};var r,o=0;for(var i in e.meta)if(-1!==(r=i.indexOf("*"))&&i.substr(0,r)===t.substr(0,r)&&i.substr(r+1)===t.substr(t.length-i.length+r+1)){var a=i.split("/").length;a>o&&(o=a),Y(n.load,e.meta[i],o!==a)}if(e.meta[t]&&Y(n.load,e.meta[t],!1),n.packageKey){var s=t.substr(n.packageKey.length+1),u={};if(n.packageConfig.meta){var o=0;Ae(n.packageConfig.meta,s,function(e,t,n){n>o&&(o=n),Y(u,t,n&&o>n)}),Y(n.load,u,!1)}!n.packageConfig.format||n.pluginKey||n.load.loader||(n.load.format=n.load.format||n.packageConfig.format)}}.call(i,n,e,r),r.pluginKey||!r.load.loader?e:i.resolve(r.load.loader,e).then(function(t){return r.pluginKey=t,r.pluginArgument=e,e})}).then(function(e){return i[G][e]=r,e})},qt.prototype.load=function(e,t){return J.call(this[z],"System.load is deprecated."),this.import(e,t)},qt.prototype.decanonicalize=qt.prototype.normalizeSync=qt.prototype.resolveSync=function e(t,n){var r=this[z],o={pluginKey:void 0,pluginArgument:void 0,pluginModule:void 0,packageKey:void 0,packageConfig:void 0,load:void 0},i=i||he(0,r,n),a=we(r.pluginFirst,t);return a?(o.pluginKey=e.call(this,a.plugin,n),xe(r.pluginFirst,ve.call(this,r,a.argument,i.pluginArgument||n,o,i,!!o.pluginKey),o.pluginKey)):ve.call(this,r,t,i.pluginArgument||n,o,i,!!o.pluginKey)},qt.prototype[qt.instantiate=O.instantiate]=function(t,o){var i=this,a=this[z];return(function(t,n,r){var o;if(e&&(o=t.depCache[r]))for(var i=0;i<o.length;i++)n.normalize(o[i],r).then(ee);else{var a=!1;for(var s in t.bundles){for(var i=0;i<t.bundles[s].length;i++){var u=t.bundles[s][i];if(u===r){a=!0;break}if(-1!==u.indexOf("*")){var l=u.split("*");if(2!==l.length){t.bundles[s].splice(i--,1);continue}if(r.substr(0,l[0].length)===l[0]&&r.substr(r.length-l[1].length,l[1].length)===l[1]){a=!0;break}}}if(a)return n.import(s)}}}(a,this,t)||H).then(function(){if(!o()){var s=i[G][t];if("@node/"===t.substr(0,6)){if(!i._nodeRequire)throw new TypeError("Error loading "+t+". Can only load node core modules in Node.");return i.registerDynamic([],!1,function(){return function(e,t){if("."===e[0])throw new Error("Node module "+e+" can't be loaded as it is not a package require.");if(!W){var r=this._nodeRequire("module"),o=decodeURI(t.substr(n?8:7));(W=new r(o)).paths=r._nodeModulePaths(o)}return W.require(e)}.call(i,t.substr(6),i.baseURL)}),void o()}return s.load.scriptLoad?!s.pluginKey&&wt||(s.load.scriptLoad=!1,J.call(a,'scriptLoad not supported for "'+t+'"')):!1!==s.load.scriptLoad&&!s.pluginKey&&wt&&(s.load.deps||s.load.globals||!("system"===s.load.format||"register"===s.load.format||"global"===s.load.format&&s.load.exports)||(s.load.scriptLoad=!0)),s.load.scriptLoad?new Promise(function(e,n){if("amd"===s.load.format&&r.define!==i.amdDefine)throw new Error("Loading AMD with scriptLoad requires setting the global `"+Ct+".define = SystemJS.amdDefine`");ne(t,s.load.crossOrigin,s.load.integrity,function(){if(!o()){s.load.format="global";var t=s.load.exports&&st(s.load.exports);i.registerDynamic([],!1,function(){return xt(s,t),t}),o()}e()},n)}):function(e,t,n){return n.pluginKey?e.import(n.pluginKey).then(function(e){n.pluginModule=e,n.pluginLoad={name:t,address:n.pluginArgument,source:void 0,metadata:n.load},n.load.deps=n.load.deps||[]}):H}(i,t,s).then(function(){return function(t,n,r,o,i){return r.load.exports&&!r.load.format&&(r.load.format="global"),H.then(function(){if(r.pluginModule&&r.pluginModule.locate)return Promise.resolve(r.pluginModule.locate.call(t,r.pluginLoad)).then(function(e){e&&(r.pluginLoad.address=e)})}).then(function(){return r.pluginModule?(i=!1,r.pluginModule.fetch?r.pluginModule.fetch.call(t,r.pluginLoad,function(e){return pe(e.address,r.load.authorization,r.load.integrity,!1)}):pe(r.pluginLoad.address,r.load.authorization,r.load.integrity,!1)):pe(n,r.load.authorization,r.load.integrity,i)}).then(function(a){return i&&"string"!=typeof a?function(e,t,n){var r=new Uint8Array(t);return 0===r[0]&&97===r[1]&&115===r[2]?WebAssembly.compile(t).then(function(t){var r=[],o=[],i={};return WebAssembly.Module.imports&&WebAssembly.Module.imports(t).forEach(function(e){var t=e.module;o.push(function(e){i[t]=e}),-1===r.indexOf(t)&&r.push(t)}),e.register(r,function(e){return{setters:o,execute:function(){e(new WebAssembly.Instance(t,i).exports)}}}),n(),!0}):Promise.resolve(!1)}(t,a,o).then(function(i){if(!i){var s=e?new TextDecoder("utf-8").decode(new Uint8Array(a)):a.toString();return _t(t,n,s,r,o)}}):_t(t,n,a,r,o)})}(i,t,s,o,a.wasm)})}}).then(function(e){return delete i[G][t],e})},qt.prototype.config=function(e,t){var n,r=this,o=this[z];if("warnings"in e&&(o.warnings=e.warnings),"wasm"in e&&(o.wasm="undefined"!=typeof WebAssembly&&e.wasm),("production"in e||"build"in e)&&Ft.call(r,!!e.production,!!(e.build||Mt&&Mt.build)),!t)for(var i in Re(0,e,function(e){n=n||e.baseURL}),(n=n||e.baseURL)&&(o.baseURL=h(n,a)||h("./"+n,a),"/"!==o.baseURL[o.baseURL.length-1]&&(o.baseURL+="/")),e.paths&&X(o.paths,e.paths),Re(0,e,function(e){e.paths&&X(o.paths,e.paths)}),o.paths)-1!==o.paths[i].indexOf("*")&&(J.call(o,"Path config "+i+" -> "+o.paths[i]+" is no longer supported as wildcards are deprecated."),delete o.paths[i]);if(e.defaultJSExtensions&&J.call(o,"The defaultJSExtensions configuration option is deprecated.\n  Use packages defaultExtension instead.",!0),"boolean"==typeof e.pluginFirst&&(o.pluginFirst=e.pluginFirst),e.map)for(var i in e.map){var s=e.map[i];if("string"==typeof s){var u=me.call(r,o,s,void 0,!1,!1);"/"===u[u.length-1]&&":"!==i[i.length-1]&&"/"!==i[i.length-1]&&(u=u.substr(0,u.length-1)),o.map[i]=u}else{v=(v=me.call(r,o,"/"!==i[i.length-1]?i+"/":i,void 0,!0,!0)).substr(0,v.length-1);var l=o.packages[v];l||((l=o.packages[v]={defaultExtension:void 0,main:void 0,format:void 0,meta:void 0,map:void 0,packageConfig:void 0,configured:!1}).defaultExtension=""),qe(l,{map:s},v,!1,o)}}if(e.packageConfigPaths){for(var c=[],f=0;f<e.packageConfigPaths.length;f++){var d=e.packageConfigPaths[f],p=Math.max(d.lastIndexOf("*")+1,d.lastIndexOf("/")),g=me.call(r,o,d.substr(0,p),void 0,!1,!1);c[f]=g+d.substr(p)}o.packageConfigPaths=c}if(e.bundles)for(var i in e.bundles){var m=[];for(f=0;f<e.bundles[i].length;f++)m.push(r.normalizeSync(e.bundles[i][f]));o.bundles[i]=m}if(e.packages)for(var i in e.packages){if(i.match(/^([^\/]+:)?\/\/$/))throw new TypeError('"'+i+'" is not a valid package name.');var v;v=(v=me.call(r,o,"/"!==i[i.length-1]?i+"/":i,void 0,!0,!0)).substr(0,v.length-1),qe(o.packages[v]=o.packages[v]||{defaultExtension:void 0,main:void 0,format:void 0,meta:void 0,map:void 0,packageConfig:void 0,configured:!1},e.packages[i],v,!1,o)}if(e.depCache)for(var i in e.depCache)o.depCache[r.normalizeSync(i)]=[].concat(e.depCache[i]);if(e.meta)for(var i in e.meta)if("*"===i[0])X(o.meta[i]=o.meta[i]||{},e.meta[i]);else{var y=me.call(r,o,i,void 0,!0,!0);X(o.meta[y]=o.meta[y]||{},e.meta[i])}for(var b in"transpiler"in e&&(o.transpiler=e.transpiler),e)-1===Ut.indexOf(b)&&-1===De.indexOf(b)&&(r[b]=e[b]);Re(0,e,function(e){r.config(e,!0)})},qt.prototype.getConfig=function(e){if(e){if(-1!==Ut.indexOf(e))return Ne(this[z],e);throw new Error('"'+e+'" is not a valid configuration name. Must be one of '+Ut.join(", ")+".")}for(var t={},n=0;n<Ut.length;n++){var r=Ut[n],o=Ne(this[z],r);void 0!==o&&(t[r]=o)}return t},qt.prototype.global=r,qt.prototype.import=function(){return O.prototype.import.apply(this,arguments).then(function(e){return"__useDefault"in e?e.__useDefault:e})};for(var Ut=["baseURL","map","paths","packages","packageConfigPaths","depCache","meta","bundles","transpiler","warnings","pluginFirst","production","wasm"],Ht="undefined"!=typeof Proxy,$t=0;$t<Ut.length;$t++)!function(e){Object.defineProperty(qt.prototype,e,{get:function(){var t=Ne(this[z],e);return Ht&&"object"==typeof t&&(t=new Proxy(t,{set:function(t,n){throw new Error("Cannot set SystemJS."+e+'["'+n+'"] directly. Use SystemJS.config({ '+e+': { "'+n+'": ... } }) rather.')}})),t},set:function(t){throw new Error("Setting `SystemJS."+e+"` directly is no longer supported. Use `SystemJS.config({ "+e+": ... })`.")}})}(Ut[$t]);function Bt(e,t){J.call(e[z],"SystemJS."+t+" is deprecated for SystemJS.registry."+t)}qt.prototype.delete=function(e){return Bt(this,"delete"),this.registry.delete(e)},qt.prototype.get=function(e){return Bt(this,"get"),this.registry.get(e)},qt.prototype.has=function(e){return Bt(this,"has"),this.registry.has(e)},qt.prototype.set=function(e,t){return Bt(this,"set"),this.registry.set(e,t)},qt.prototype.newModule=function(e){return new k(e)},qt.prototype.isModule=function(e){return e instanceof k||"module"===e[s]},qt.prototype.register=function(e,t,n){return"string"==typeof e&&(e=ge.call(this,this[z],e)),O.prototype.register.call(this,e,t,n)},qt.prototype.registerDynamic=function(e,t,n,r){return"string"==typeof e&&(e=ge.call(this,this[z],e)),O.prototype.registerDynamic.call(this,e,t,n,r)},qt.prototype.version="0.21.6 Dev";var Wt=new qt;(e||K)&&(r.SystemJS=r.System=Wt),"undefined"!=typeof module&&module.exports&&(module.exports=Wt)}(),function(e,t){var n=t.CgLibs=t.CgLibs||{},r=n.msgProc=n.msgProc||{},o=t.CgUtils=t.CgUtils||{},i=null,a=(new Date).getTime();function s(){t.Pace&&(Pace.running||Pace.go())}if(n.appIde=t.opener||t.parent,n.appIde==t&&(n.appIde=null),n.progress={loads:0,total:0,preloading:1,load:function(){n.progress.loads++,s()},endPreload:function(){n.progress.preloading=0,s()}},t.Pace&&Pace.bar){var u=Pace.bar.update;Pace.bar.update=function(e){n.progress.preloading?(u.apply(Pace.bar,[e*Math.min(1,n.progress.loads/Math.max(1,n.progress.total))]),setTimeout(s,50)):u.apply(Pace.bar,[e])}}function l(){return document.referrer||function(e,n){n||(n=t.location.href),e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(n);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}("referer")||""}function c(e,t){var n=e.homeUrl;if(n){var r=n.indexOf("/",8);-1!=r&&(n=n.substr(0,r));var o=e.cdnUrl;for(var i in o&&-1!=(r=o.indexOf("/",8))&&(o=o.substr(0,r)),t){var a=t[i];"/"==a.url.charAt(0)&&(a.url=a.url.replace("/",(a.cdn?o:n)+"/"))}}}function f(){n.emitBootComplete()}function d(r){var o,s=r&&r.data.CgCfg&&JSON.parse(atob(r.data.CgCfg))||{};if(i=s.targetOrigin,n.inits)for(var u=0;u<n.inits.length;++u)n.inits[u](s);!s.arrowKeyScroll&&function(){try{return t.self!==t.top}catch(e){return!0}}()&&(o=[32,37,38,39,40],e(t.document).on("keydown",function(e){e.target==t.document.body&&-1!=o.indexOf(e.keyCode)&&e.preventDefault()}));var d=n.bootSystemJs?0:a+2500;l().includes(i)&&(d=0),c(s,s.appResourcePack.resourceMap),c(s,s.appLibs),c(s,s.srcUrlMap),t.CgApp={projectCode:s.projectCode,depositUrl:s.depositUrl,buildName:s.buildName,appResourcePack:s.appResourcePack,appSources:s.srcUrlMap,serverTime:s.serverTime||(new Date).getTime(),projectDomain:s.projectDomain,env:[s.env],locale:s.locale},s.supportDevTools&&(t.CgApp.supportDevTools=1),n.loadAppLibs(s,d,n.bootSystemJs||f)}o.cgSystemLog||(o.cgSystemLog=function(e,t){console.log(t+e)}),t.getCGResourceUrl=function(e){var n=t.CgApp.appResourcePack.resourceMap;for(var r in n){var o=n[r];if(-1==o.type.indexOf("build")&&o.meta.files.includes(e))return o.url+e}return e},n.boot=d,t.addEventListener("message",function(e){if(!i||e.origin==i){var t=e.data.type;r[t]&&r[t](e)}},!1),t.CgCfg&&(d({data:{CgCfg:t.CgCfg}}),delete t.CgCfg)}($,window),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("fs"),require("path")):"function"==typeof define&&define.amd?define(["fs","path"],t):"object"==typeof exports?exports.sourceMap=t(require("fs"),require("path")):e.sourceMap=t(e.fs,e.path)}("undefined"!=typeof self?self:this,function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){t.getArg=function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')};const n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,r=/^data:.+\,.+$/;function o(e){const t=e.match(n);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function i(e){let t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}t.urlParse=o,t.urlGenerate=i;const a=32;const s=function(e){const t=[];return function(n){for(let e=0;e<t.length;e++)if(t[e].input===n){const n=t[0];return t[0]=t[e],t[e]=n,t[0].result}const r=e(n);return t.unshift({input:n,result:r}),t.length>a&&t.pop(),r}}(function(e){let n=e;const r=o(e);if(r){if(!r.path)return e;n=r.path}const a=t.isAbsolute(n),s=[];let u=0,l=0;for(;;){if(u=l,-1===(l=n.indexOf("/",u))){s.push(n.slice(u));break}for(s.push(n.slice(u,l));l<n.length&&"/"===n[l];)l++}let c=0;for(l=s.length-1;l>=0;l--){const e=s[l];"."===e?s.splice(l,1):".."===e?c++:c>0&&(""===e?(s.splice(l+1,c),c=0):(s.splice(l,2),c--))}return""===(n=s.join("/"))&&(n=a?"/":"."),r?(r.path=n,i(r)):n});function u(e,t){""===e&&(e="."),""===t&&(t=".");const n=o(t),a=o(e);if(a&&(e=a.path||"/"),n&&!n.scheme)return a&&(n.scheme=a.scheme),i(n);if(n||t.match(r))return t;if(a&&!a.host&&!a.path)return a.host=t,i(a);const u="/"===t.charAt(0)?t:s(e.replace(/\/+$/,"")+"/"+t);return a?(a.path=u,i(a)):u}t.normalize=s,t.join=u,t.isAbsolute=function(e){return"/"===e.charAt(0)||n.test(e)},t.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");let n=0;for(;0!==t.indexOf(e+"/");){const r=e.lastIndexOf("/");if(r<0)return t;if((e=e.slice(0,r)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)};const l=!("__proto__"in Object.create(null));function c(e){return e}function f(e){if(!e)return!1;const t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(let n=t-10;n>=0;n--)if(36!==e.charCodeAt(n))return!1;return!0}function d(e,t){return e===t?0:null===e?1:null===t?-1:e>t?1:-1}t.toSetString=l?c:function(e){return f(e)?"$"+e:e},t.fromSetString=l?c:function(e){return f(e)?e.slice(1):e},t.compareByOriginalPositions=function(e,t,n){let r=d(e.source,t.source);return 0!==r?r:0!=(r=e.originalLine-t.originalLine)?r:0!=(r=e.originalColumn-t.originalColumn)||n?r:0!=(r=e.generatedColumn-t.generatedColumn)?r:0!=(r=e.generatedLine-t.generatedLine)?r:d(e.name,t.name)},t.compareByGeneratedPositionsDeflated=function(e,t,n){let r=e.generatedLine-t.generatedLine;return 0!==r?r:0!=(r=e.generatedColumn-t.generatedColumn)||n?r:0!==(r=d(e.source,t.source))?r:0!=(r=e.originalLine-t.originalLine)?r:0!=(r=e.originalColumn-t.originalColumn)?r:d(e.name,t.name)},t.compareByGeneratedPositionsInflated=function(e,t){let n=e.generatedLine-t.generatedLine;return 0!==n?n:0!=(n=e.generatedColumn-t.generatedColumn)?n:0!==(n=d(e.source,t.source))?n:0!=(n=e.originalLine-t.originalLine)?n:0!=(n=e.originalColumn-t.originalColumn)?n:d(e.name,t.name)},t.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},t.computeSourceURL=function(e,t,n){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),n){const e=o(n);if(!e)throw new Error("sourceMapURL could not be parsed");if(e.path){const t=e.path.lastIndexOf("/");t>=0&&(e.path=e.path.substring(0,t+1))}t=u(i(e),t)}return s(t)}},function(e,t,n){const r=n(2),o=n(0),i=n(3).ArraySet,a=n(7).MappingList;class s{constructor(e){e||(e={}),this._file=o.getArg(e,"file",null),this._sourceRoot=o.getArg(e,"sourceRoot",null),this._skipValidation=o.getArg(e,"skipValidation",!1),this._sources=new i,this._names=new i,this._mappings=new a,this._sourcesContents=null}static fromSourceMap(e){const t=e.sourceRoot,n=new s({file:e.file,sourceRoot:t});return e.eachMapping(function(e){const r={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(r.source=e.source,null!=t&&(r.source=o.relative(t,r.source)),r.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(r.name=e.name)),n.addMapping(r)}),e.sources.forEach(function(r){let i=r;null!==t&&(i=o.relative(t,r)),n._sources.has(i)||n._sources.add(i);const a=e.sourceContentFor(r);null!=a&&n.setSourceContent(r,a)}),n}addMapping(e){const t=o.getArg(e,"generated"),n=o.getArg(e,"original",null);let r=o.getArg(e,"source",null),i=o.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,n,r,i),null!=r&&(r=String(r),this._sources.has(r)||this._sources.add(r)),null!=i&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:r,name:i})}setSourceContent(e,t){let n=e;null!=this._sourceRoot&&(n=o.relative(this._sourceRoot,n)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[o.toSetString(n)]=t):this._sourcesContents&&(delete this._sourcesContents[o.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))}applySourceMap(e,t,n){let r=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');r=e.file}const a=this._sourceRoot;null!=a&&(r=o.relative(a,r));const s=this._mappings.toArray().length>0?new i:this._sources,u=new i;this._mappings.unsortedForEach(function(t){if(t.source===r&&null!=t.originalLine){const r=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=r.source&&(t.source=r.source,null!=n&&(t.source=o.join(n,t.source)),null!=a&&(t.source=o.relative(a,t.source)),t.originalLine=r.line,t.originalColumn=r.column,null!=r.name&&(t.name=r.name))}const i=t.source;null==i||s.has(i)||s.add(i);const l=t.name;null==l||u.has(l)||u.add(l)},this),this._sources=s,this._names=u,e.sources.forEach(function(t){const r=e.sourceContentFor(t);null!=r&&(null!=n&&(t=o.join(n,t)),null!=a&&(t=o.relative(a,t)),this.setSourceContent(t,r))},this)}_validateMapping(e,t,n,r){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!n&&!r);else if(!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:r}))}_serializeMappings(){let e,t,n,i,a=0,s=1,u=0,l=0,c=0,f=0,d="";const p=this._mappings.toArray();for(let h=0,g=p.length;h<g;h++){if(e="",(t=p[h]).generatedLine!==s)for(a=0;t.generatedLine!==s;)e+=";",s++;else if(h>0){if(!o.compareByGeneratedPositionsInflated(t,p[h-1]))continue;e+=","}e+=r.encode(t.generatedColumn-a),a=t.generatedColumn,null!=t.source&&(i=this._sources.indexOf(t.source),e+=r.encode(i-f),f=i,e+=r.encode(t.originalLine-1-l),l=t.originalLine-1,e+=r.encode(t.originalColumn-u),u=t.originalColumn,null!=t.name&&(n=this._names.indexOf(t.name),e+=r.encode(n-c),c=n)),d+=e}return d}_generateSourcesContent(e,t){return e.map(function(e){if(!this._sourcesContents)return null;null!=t&&(e=o.relative(t,e));const n=o.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)}toJSON(){const e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e}toString(){return JSON.stringify(this.toJSON())}}s.prototype._version=3,t.SourceMapGenerator=s},function(e,t,n){const r=n(6);t.encode=function(e){let t,n="",o=function(e){return e<0?1+(-e<<1):0+(e<<1)}(e);do{t=31&o,(o>>>=5)>0&&(t|=32),n+=r.encode(t)}while(o>0);return n}},function(e,t){class n{constructor(){this._array=[],this._set=new Map}static fromArray(e,t){const r=new n;for(let n=0,o=e.length;n<o;n++)r.add(e[n],t);return r}size(){return this._set.size}add(e,t){const n=this.has(e),r=this._array.length;n&&!t||this._array.push(e),n||this._set.set(e,r)}has(e){return this._set.has(e)}indexOf(e){const t=this._set.get(e);if(t>=0)return t;throw new Error('"'+e+'" is not in the set.')}at(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)}toArray(){return this._array.slice()}}t.ArraySet=n},function(e,t,n){(function(t){if("function"==typeof fetch){let t=null;e.exports=function(){if("string"!=typeof t)throw new Error("You must provide the URL of lib/mappings.wasm by calling SourceMapConsumer.initialize({ 'lib/mappings.wasm': ... }) before using SourceMapConsumer");return fetch(t).then(e=>e.arrayBuffer())},e.exports.initialize=(e=>t=e)}else{const r=n(10),o=n(11);e.exports=function(){return new Promise((e,n)=>{const i=o.join(t,"mappings.wasm");r.readFile(i,null,(t,r)=>{t?n(t):e(r.buffer)})})},e.exports.initialize=(e=>{console.debug("SourceMapConsumer.initialize is a no-op when running in node.js")})}}).call(t,"/")},function(e,t,n){t.SourceMapGenerator=n(1).SourceMapGenerator,t.SourceMapConsumer=n(8).SourceMapConsumer,t.SourceNode=n(13).SourceNode},function(e,t){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");t.encode=function(e){if(0<=e&&e<n.length)return n[e];throw new TypeError("Must be between 0 and 63: "+e)}},function(e,t,n){const r=n(0);t.MappingList=class{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(e,t){this._array.forEach(e,t)}add(e){!function(e,t){const n=e.generatedLine,o=t.generatedLine,i=e.generatedColumn,a=t.generatedColumn;return o>n||o==n&&a>=i||r.compareByGeneratedPositionsInflated(e,t)<=0}(this._last,e)?(this._sorted=!1,this._array.push(e)):(this._last=e,this._array.push(e))}toArray(){return this._sorted||(this._array.sort(r.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}}},function(e,t,n){const r=n(0),o=n(9),i=n(3).ArraySet,a=(n(2),n(4)),s=n(12),u=Symbol("smcInternal");class l{constructor(e,t){return e==u?Promise.resolve(this):function(e,t){let n=e;"string"==typeof e&&(n=r.parseSourceMapInput(e));const o=null!=n.sections?new f(n,t):new c(n,t);return Promise.resolve(o)}(e,t)}static initialize(e){a.initialize(e["lib/mappings.wasm"])}static fromSourceMap(e,t){return function(e,t){return c.fromSourceMap(e,t)}(e,t)}static with(e,t,n){let r=null;return new l(e,t).then(e=>(r=e,n(e))).then(e=>(r&&r.destroy(),e),e=>{throw r&&r.destroy(),e})}_parseMappings(e,t){throw new Error("Subclasses must implement _parseMappings")}eachMapping(e,t,n){throw new Error("Subclasses must implement eachMapping")}allGeneratedPositionsFor(e){throw new Error("Subclasses must implement allGeneratedPositionsFor")}destroy(){throw new Error("Subclasses must implement destroy")}}l.prototype._version=3,l.GENERATED_ORDER=1,l.ORIGINAL_ORDER=2,l.GREATEST_LOWER_BOUND=1,l.LEAST_UPPER_BOUND=2,t.SourceMapConsumer=l;class c extends l{constructor(e,t){return super(u).then(n=>{let o=e;"string"==typeof e&&(o=r.parseSourceMapInput(e));const a=r.getArg(o,"version");let u=r.getArg(o,"sources");const l=r.getArg(o,"names",[]);let c=r.getArg(o,"sourceRoot",null);const f=r.getArg(o,"sourcesContent",null),d=r.getArg(o,"mappings"),p=r.getArg(o,"file",null);if(a!=n._version)throw new Error("Unsupported version: "+a);return c&&(c=r.normalize(c)),u=u.map(String).map(r.normalize).map(function(e){return c&&r.isAbsolute(c)&&r.isAbsolute(e)?r.relative(c,e):e}),n._names=i.fromArray(l.map(String),!0),n._sources=i.fromArray(u,!0),n._absoluteSources=n._sources.toArray().map(function(e){return r.computeSourceURL(c,e,t)}),n.sourceRoot=c,n.sourcesContent=f,n._mappings=d,n._sourceMapURL=t,n.file=p,n._computedColumnSpans=!1,n._mappingsPtr=0,n._wasm=null,s().then(e=>(n._wasm=e,n))})}_findSourceIndex(e){let t=e;if(null!=this.sourceRoot&&(t=r.relative(this.sourceRoot,t)),this._sources.has(t))return this._sources.indexOf(t);for(let t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==e)return t;return-1}static fromSourceMap(e,t){return new c(e.toString())}get sources(){return this._absoluteSources.slice()}_getMappingsPtr(){return 0===this._mappingsPtr&&this._parseMappings(this._mappings,this.sourceRoot),this._mappingsPtr}_parseMappings(e,t){const n=e.length,r=this._wasm.exports.allocate_mappings(n),o=new Uint8Array(this._wasm.exports.memory.buffer,r,n);for(let t=0;t<n;t++)o[t]=e.charCodeAt(t);const i=this._wasm.exports.parse_mappings(r);if(!i){const e=this._wasm.exports.get_last_error();let t=`Error parsing mappings (code ${e}): `;switch(e){case 1:t+="the mappings contained a negative line, column, source index, or name index";break;case 2:t+="the mappings contained a number larger than 2**32";break;case 3:t+="reached EOF while in the middle of parsing a VLQ";break;case 4:t+="invalid base 64 character while parsing a VLQ";break;default:t+="unknown error code"}throw new Error(t)}this._mappingsPtr=i}eachMapping(e,t,n){const o=t||null,i=n||l.GENERATED_ORDER,a=this.sourceRoot;this._wasm.withMappingCallback(t=>{null!==t.source&&(t.source=this._sources.at(t.source),t.source=r.computeSourceURL(a,t.source,this._sourceMapURL),null!==t.name&&(t.name=this._names.at(t.name))),e.call(o,t)},()=>{switch(i){case l.GENERATED_ORDER:this._wasm.exports.by_generated_location(this._getMappingsPtr());break;case l.ORIGINAL_ORDER:this._wasm.exports.by_original_location(this._getMappingsPtr());break;default:throw new Error("Unknown order of iteration.")}})}allGeneratedPositionsFor(e){let t=r.getArg(e,"source");const n=r.getArg(e,"line"),o=e.column||0;if((t=this._findSourceIndex(t))<0)return[];if(n<1)throw new Error("Line numbers must be >= 1");if(o<0)throw new Error("Column numbers must be >= 0");const i=[];return this._wasm.withMappingCallback(e=>{let t=e.lastGeneratedColumn;this._computedColumnSpans&&null===t&&(t=1/0),i.push({line:e.generatedLine,column:e.generatedColumn,lastColumn:t})},()=>{this._wasm.exports.all_generated_locations_for(this._getMappingsPtr(),t,n-1,"column"in e,o)}),i}destroy(){0!==this._mappingsPtr&&(this._wasm.exports.free_mappings(this._mappingsPtr),this._mappingsPtr=0)}computeColumnSpans(){this._computedColumnSpans||(this._wasm.exports.compute_column_spans(this._getMappingsPtr()),this._computedColumnSpans=!0)}originalPositionFor(e){const t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")};if(t.generatedLine<1)throw new Error("Line numbers must be >= 1");if(t.generatedColumn<0)throw new Error("Column numbers must be >= 0");let n,o=r.getArg(e,"bias",l.GREATEST_LOWER_BOUND);if(null==o&&(o=l.GREATEST_LOWER_BOUND),this._wasm.withMappingCallback(e=>n=e,()=>{this._wasm.exports.original_location_for(this._getMappingsPtr(),t.generatedLine-1,t.generatedColumn,o)}),n&&n.generatedLine===t.generatedLine){let e=r.getArg(n,"source",null);null!==e&&(e=this._sources.at(e),e=r.computeSourceURL(this.sourceRoot,e,this._sourceMapURL));let t=r.getArg(n,"name",null);return null!==t&&(t=this._names.at(t)),{source:e,line:r.getArg(n,"originalLine",null),column:r.getArg(n,"originalColumn",null),name:t}}return{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}))}sourceContentFor(e,t){if(!this.sourcesContent)return null;const n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];let o,i=e;if(null!=this.sourceRoot&&(i=r.relative(this.sourceRoot,i)),null!=this.sourceRoot&&(o=r.urlParse(this.sourceRoot))){const e=i.replace(/^file:\/\//,"");if("file"==o.scheme&&this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];if((!o.path||"/"==o.path)&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(t)return null;throw new Error('"'+i+'" is not in the SourceMap.')}generatedPositionFor(e){let t=r.getArg(e,"source");if((t=this._findSourceIndex(t))<0)return{line:null,column:null,lastColumn:null};const n={source:t,originalLine:r.getArg(e,"line"),originalColumn:r.getArg(e,"column")};if(n.originalLine<1)throw new Error("Line numbers must be >= 1");if(n.originalColumn<0)throw new Error("Column numbers must be >= 0");let o,i=r.getArg(e,"bias",l.GREATEST_LOWER_BOUND);if(null==i&&(i=l.GREATEST_LOWER_BOUND),this._wasm.withMappingCallback(e=>o=e,()=>{this._wasm.exports.generated_location_for(this._getMappingsPtr(),n.source,n.originalLine-1,n.originalColumn,i)}),o&&o.source===n.source){let e=o.lastGeneratedColumn;return this._computedColumnSpans&&null===e&&(e=1/0),{line:r.getArg(o,"generatedLine",null),column:r.getArg(o,"generatedColumn",null),lastColumn:e}}return{line:null,column:null,lastColumn:null}}}c.prototype.consumer=l,t.BasicSourceMapConsumer=c;class f extends l{constructor(e,t){return super(u).then(n=>{let o=e;"string"==typeof e&&(o=r.parseSourceMapInput(e));const a=r.getArg(o,"version"),s=r.getArg(o,"sections");if(a!=n._version)throw new Error("Unsupported version: "+a);n._sources=new i,n._names=new i,n.__generatedMappings=null,n.__originalMappings=null,n.__generatedMappingsUnsorted=null,n.__originalMappingsUnsorted=null;let u={line:-1,column:0};return Promise.all(s.map(e=>{if(e.url)throw new Error("Support for url field in sections not implemented.");const n=r.getArg(e,"offset"),o=r.getArg(n,"line"),i=r.getArg(n,"column");if(o<u.line||o===u.line&&i<u.column)throw new Error("Section offsets must be ordered and non-overlapping.");return u=n,new l(r.getArg(e,"map"),t).then(e=>({generatedOffset:{generatedLine:o+1,generatedColumn:i+1},consumer:e}))})).then(e=>(n._sections=e,n))})}get _generatedMappings(){return this.__generatedMappings||this._sortGeneratedMappings(),this.__generatedMappings}get _originalMappings(){return this.__originalMappings||this._sortOriginalMappings(),this.__originalMappings}get _generatedMappingsUnsorted(){return this.__generatedMappingsUnsorted||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappingsUnsorted}get _originalMappingsUnsorted(){return this.__originalMappingsUnsorted||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappingsUnsorted}_sortGeneratedMappings(){const e=this._generatedMappingsUnsorted;e.sort(r.compareByGeneratedPositionsDeflated),this.__generatedMappings=e}_sortOriginalMappings(){const e=this._originalMappingsUnsorted;e.sort(r.compareByOriginalPositions),this.__originalMappings=e}get sources(){const e=[];for(let t=0;t<this._sections.length;t++)for(let n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}originalPositionFor(e){const t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},n=o.search(t,this._sections,function(e,t){const n=e.generatedLine-t.generatedOffset.generatedLine;return n||e.generatedColumn-t.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:t.generatedLine-(i.generatedOffset.generatedLine-1),column:t.generatedColumn-(i.generatedOffset.generatedLine===t.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})}sourceContentFor(e,t){for(let t=0;t<this._sections.length;t++){const n=this._sections[t].consumer.sourceContentFor(e,!0);if(n)return n}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')}generatedPositionFor(e){for(let t=0;t<this._sections.length;t++){const n=this._sections[t];if(-1===n.consumer._findSourceIndex(r.getArg(e,"source")))continue;const o=n.consumer.generatedPositionFor(e);if(o){return{line:o.line+(n.generatedOffset.generatedLine-1),column:o.column+(n.generatedOffset.generatedLine===o.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}}_parseMappings(e,t){const n=this.__generatedMappingsUnsorted=[],o=this.__originalMappingsUnsorted=[];for(let e=0;e<this._sections.length;e++){const t=this._sections[e],i=[];t.consumer.eachMapping(e=>i.push(e));for(let e=0;e<i.length;e++){const a=i[e];let s=r.computeSourceURL(t.consumer.sourceRoot,null,this._sourceMapURL);this._sources.add(s),s=this._sources.indexOf(s);let u=null;a.name&&(this._names.add(a.name),u=this._names.indexOf(a.name));const l={source:s,generatedLine:a.generatedLine+(t.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(t.generatedOffset.generatedLine===a.generatedLine?t.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:u};n.push(l),"number"==typeof l.originalLine&&o.push(l)}}}eachMapping(e,t,n){const o=t||null;let i;switch(n||l.GENERATED_ORDER){case l.GENERATED_ORDER:i=this._generatedMappings;break;case l.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}const a=this.sourceRoot;i.map(function(e){let t=null;return null!==e.source&&(t=this._sources.at(e.source),t=r.computeSourceURL(a,t,this._sourceMapURL)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,o)}_findMapping(e,t,n,r,i,a){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return o.search(e,t,i,a)}allGeneratedPositionsFor(e){const t=r.getArg(e,"line"),n={source:r.getArg(e,"source"),originalLine:t,originalColumn:r.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];if(n.originalLine<1)throw new Error("Line numbers must be >= 1");if(n.originalColumn<0)throw new Error("Column numbers must be >= 0");const i=[];let a=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,o.LEAST_UPPER_BOUND);if(a>=0){let n=this._originalMappings[a];if(void 0===e.column){const e=n.originalLine;for(;n&&n.originalLine===e;){let e=n.lastGeneratedColumn;this._computedColumnSpans&&null===e&&(e=1/0),i.push({line:r.getArg(n,"generatedLine",null),column:r.getArg(n,"generatedColumn",null),lastColumn:e}),n=this._originalMappings[++a]}}else{const e=n.originalColumn;for(;n&&n.originalLine===t&&n.originalColumn==e;){let e=n.lastGeneratedColumn;this._computedColumnSpans&&null===e&&(e=1/0),i.push({line:r.getArg(n,"generatedLine",null),column:r.getArg(n,"generatedColumn",null),lastColumn:e}),n=this._originalMappings[++a]}}}return i}destroy(){for(let e=0;e<this._sections.length;e++)this._sections[e].consumer.destroy()}}t.IndexedSourceMapConsumer=f},function(e,t){t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2,t.search=function(e,n,r,o){if(0===n.length)return-1;let i=function e(n,r,o,i,a,s){const u=Math.floor((r-n)/2)+n,l=a(o,i[u],!0);return 0===l?u:l>0?r-u>1?e(u,r,o,i,a,s):s==t.LEAST_UPPER_BOUND?r<i.length?r:-1:u:u-n>1?e(n,u,o,i,a,s):s==t.LEAST_UPPER_BOUND?u:n<0?-1:n}(-1,n.length,e,n,r,o||t.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;i-1>=0&&0===r(n[i],n[i-1],!0);)--i;return i}},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){const r=n(4);let o=null;e.exports=function(){if(o)return o;const e=[];return o=r().then(t=>WebAssembly.instantiate(t,{env:{mapping_callback(t,n,r,o,i,a,s,u,l,c){const f=new function(){this.generatedLine=0,this.generatedColumn=0,this.lastGeneratedColumn=null,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null};f.generatedLine=t+1,f.generatedColumn=n,r&&(f.lastGeneratedColumn=o-1),i&&(f.source=a,f.originalLine=s+1,f.originalColumn=u,l&&(f.name=c)),e[e.length-1](f)},start_all_generated_locations_for(){console.time("all_generated_locations_for")},end_all_generated_locations_for(){console.timeEnd("all_generated_locations_for")},start_compute_column_spans(){console.time("compute_column_spans")},end_compute_column_spans(){console.timeEnd("compute_column_spans")},start_generated_location_for(){console.time("generated_location_for")},end_generated_location_for(){console.timeEnd("generated_location_for")},start_original_location_for(){console.time("original_location_for")},end_original_location_for(){console.timeEnd("original_location_for")},start_parse_mappings(){console.time("parse_mappings")},end_parse_mappings(){console.timeEnd("parse_mappings")},start_sort_by_generated_location(){console.time("sort_by_generated_location")},end_sort_by_generated_location(){console.timeEnd("sort_by_generated_location")},start_sort_by_original_location(){console.time("sort_by_original_location")},end_sort_by_original_location(){console.timeEnd("sort_by_original_location")}}})).then(t=>({exports:t.instance.exports,withMappingCallback:(t,n)=>{e.push(t);try{n()}finally{e.pop()}}})).then(null,e=>{throw o=null,e})}},function(e,t,n){const r=n(1).SourceMapGenerator,o=n(0),i=/(\r?\n)/,a=10,s="$$$isSourceNode$$$";class u{constructor(e,t,n,r,o){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==o?null:o,this[s]=!0,null!=r&&this.add(r)}static fromStringWithSourceMap(e,t,n){const r=new u,a=e.split(i);let s=0;const l=function(){return e()+(e()||"");function e(){return s<a.length?a[s++]:void 0}};let c,f=1,d=0,p=null;return t.eachMapping(function(e){if(null!==p){if(!(f<e.generatedLine)){const t=(c=a[s]||"").substr(0,e.generatedColumn-d);return a[s]=c.substr(e.generatedColumn-d),d=e.generatedColumn,h(p,t),void(p=e)}h(p,l()),f++,d=0}for(;f<e.generatedLine;)r.add(l()),f++;d<e.generatedColumn&&(c=a[s]||"",r.add(c.substr(0,e.generatedColumn)),a[s]=c.substr(e.generatedColumn),d=e.generatedColumn),p=e},this),s<a.length&&(p&&h(p,l()),r.add(a.splice(s).join(""))),t.sources.forEach(function(e){const i=t.sourceContentFor(e);null!=i&&(null!=n&&(e=o.join(n,e)),r.setSourceContent(e,i))}),r;function h(e,t){if(null===e||void 0===e.source)r.add(t);else{const i=n?o.join(n,e.source):e.source;r.add(new u(e.originalLine,e.originalColumn,i,t,e.name))}}}add(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this}prepend(e){if(Array.isArray(e))for(let t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this}walk(e){let t;for(let n=0,r=this.children.length;n<r;n++)(t=this.children[n])[s]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})}join(e){let t,n;const r=this.children.length;if(r>0){for(t=[],n=0;n<r-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this}replaceRight(e,t){const n=this.children[this.children.length-1];return n[s]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this}setSourceContent(e,t){this.sourceContents[o.toSetString(e)]=t}walkSourceContents(e){for(let t=0,n=this.children.length;t<n;t++)this.children[t][s]&&this.children[t].walkSourceContents(e);const t=Object.keys(this.sourceContents);for(let n=0,r=t.length;n<r;n++)e(o.fromSetString(t[n]),this.sourceContents[t[n]])}toString(){let e="";return this.walk(function(t){e+=t}),e}toStringWithSourceMap(e){const t={code:"",line:1,column:0},n=new r(e);let o=!1,i=null,s=null,u=null,l=null;return this.walk(function(e,r){t.code+=e,null!==r.source&&null!==r.line&&null!==r.column?(i===r.source&&s===r.line&&u===r.column&&l===r.name||n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name}),i=r.source,s=r.line,u=r.column,l=r.name,o=!0):o&&(n.addMapping({generated:{line:t.line,column:t.column}}),i=null,o=!1);for(let s=0,u=e.length;s<u;s++)e.charCodeAt(s)===a?(t.line++,t.column=0,s+1===u?(i=null,o=!1):o&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name})):t.column++}),this.walkSourceContents(function(e,t){n.setSourceContent(e,t)}),{code:t.code,map:n}}}t.SourceNode=u}])});var __cgSystemBoots=[function(){CgLibs.initBoots([{"id":19540,"type":"buildLib","name":"Base.build.v1.4.4","url":"/gassets/resource/6e3c9e967ac9bff50259c0f6140d1fa8/","cdn":1,"meta":{"files":["modules.js","modules.d.ts","archive.zip"],"main":"modules.js","rids":{"Base.plugins":{"id":13480,"time":1627076754}},"pcode":"Base","ver":"1.4.4"},"createTime":1652028978},{"id":7541,"type":"buildLib","name":"Cordova.build.v1.1.0","url":"/gassets/resource/8caa4aeb85855f00ff4075e66f5ff9e2/","cdn":1,"meta":{"files":["modules.js","modules.d.ts","archive.zip"],"main":"modules.js","rids":{"Base":{"id":19540,"time":1597941576},"Cordova.emuBeep":{"id":1441,"time":1536776557}},"pcode":"Cordova","ver":"1.1.0"},"createTime":1610306677},{"id":13475,"type":"buildLib","name":"React.build.v3.0.2","url":"/gassets/resource/a5678f551f1ec4d68d37cfa995dbcbd6/","cdn":1,"meta":{"files":["modules.js","modules.d.ts","archive.zip"],"main":"modules.js","rids":{"Base":{"id":19540,"time":1627071566},"React.reactWithDom":{"id":3014,"time":1567289254}},"pcode":"React","ver":"3.0.2"},"createTime":1627071587},{"id":19755,"type":"buildLib","name":"CgEventsEngine.build.v2.3.2","url":"/gassets/resource/d3b8ed33615b1fe868453a425e87e739/","cdn":1,"meta":{"files":["modules.js","modules.d.ts","archive.zip"],"main":"modules.js","rids":{"Base":{"id":19540,"time":1627071699},"CgEventsEngine.lzstring":{"id":714,"time":1527291413},"CgEventsEngine.mathjs":{"id":1649,"time":1541411342}},"pcode":"CgEventsEngine","ver":"2.3.2"},"createTime":1653429795},{"id":12730,"type":"buildLib","name":"ReactMaterial.build.v2.0.6","url":"/gassets/resource/0b71fb1559fbb443cd01d508a66ece96/","cdn":1,"meta":{"files":["modules.js","modules.d.ts","archive.zip"],"main":"modules.js","rids":{"CgEventsEngine":{"id":19755,"time":1597932104},"React":{"id":13475,"time":1597932107},"ReactMaterial.material-icon-font":{"id":926,"time":1529700412},"ReactMaterial.material-ui":{"id":3488,"time":1580335974},"ReactMaterial.react-markdown":{"id":3017,"time":1567528007},"ReactMaterial.roboto":{"id":927,"time":1529713661}},"pcode":"ReactMaterial","ver":"2.0.6"},"createTime":1625501737},{"id":16466,"type":"buildLib","name":"GLT.build.v1.6.11","url":"/gassets/resource/1fb6d8a5a7e93d5cb797a613b416bfdb/","cdn":1,"meta":{"files":["modules.js","modules.d.ts","archive.zip"],"main":"modules.js","rids":{"Cordova":{"id":7541,"time":1597941658},"GLT.crypto":{"id":2088,"time":1546946644},"GLT.guestIcon":{"id":802,"time":1627128094},"GLT.pako":{"id":3624,"time":1581527084},"ReactMaterial":{"id":12730,"time":1597941655}},"pcode":"GLT","ver":"1.6.11"},"createTime":1636744365},{"id":18979,"type":"buildLib","name":"Server.build.v1.10.21","url":"/gassets/resource/5e745f079e97d29b9b1ff1b9828f6406/","cdn":1,"meta":{"files":["modules.js","modules.d.ts","archive.zip"],"main":"modules.js","rids":{"GLT":{"id":16466,"time":1604080221},"Server.gameDollar":{"id":3582,"time":1581006471},"Server.gltDollar":{"id":3581,"time":1581006393},"Server.gltPoint":{"id":3594,"time":1581113142},"Server.socket-io":{"id":2313,"time":1556072579}},"pcode":"Server","ver":"1.10.21","gitems":2},"createTime":1650394926},{"id":19820,"type":"buildApp","name":"ripples1.build.v2.0.0","url":"/gassets/resource/0fd855bff6b1a29e8fe3602a50d822ff/","cdn":1,"meta":{"files":["modules.js","modules.d.ts","archive.zip"],"main":"modules.js","rids":{"Ripples.background_1":{"id":17258,"time":1640002603},"Ripples.coverbg":{"id":17257,"time":1640000916},"Ripples.platformer_background":{"id":17242,"time":1639924431},"Ripples.react-colorful":{"id":17246,"time":1639946555},"Ripples.scene_frame":{"id":17243,"time":1639924905},"Ripples.thumb":{"id":17264,"time":1640016102},"Ripples.water_drop":{"id":17247,"time":1639956443},"ripples1.logo":{"id":19819,"time":1654108184},"Server":{"id":18979,"time":1639750606}},"pcode":"ripples1","ver":"2.0.0"},"createTime":1654108273}])},function(){CgLibs.modules.Base={boot:function(e){System.register("Base/index",["./utils/SoundUtil","./geom/WhirledGridGenerator","./geom/HitBox","./utils/LotteryBox","./astars/TiledAStar","./statemachines/BindedStateMachine","./statemachines/StateMachine","./pixis/cameras/GameCamera3D","./pixis/cameras/GameCamera","./utils/UidManager","./utils/NormalDistribution","./translation/Translation","./locales/languages","./pixis/display/TilingSpriteContainer","./geom/LineIntersection","./System","./utils/IntUtil","./utils/NetUtil","./utils/RandomGenerator","./utils/RangedValue","./pixis/interactive/Button","./pixis/interactive/DragControl","./pixis/interactive/ScrollControl","./geom/Color","./geom/Line","./geom/Rectangle","./geom/Matrix2","./geom/Padding","./utils/Updater","./geom/ColorMatrix","./utils/Version"],function(e,t){"use strict";var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P=t&&t.id,H=t&&t.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e},function(e){a=e},function(e){f=e},function(e){l=e},function(e){c=e},function(e){h=e},function(e){p=e},function(e){d=e},function(e){v=e},function(e){m=e},function(e){g=e},function(e){y=e},function(e){b=e},function(e){w=e},function(e){E=e},function(e){S=e},function(e){x=e},function(e){T=e},function(e){N=e},function(e){C=e},function(e){k=e},function(e){L=e},function(e){A=e},function(e){O=e},function(e){M=e},function(e){_=e}],execute:function(){D=function(){function e(){g.system,n.SoundUtil,y.IntUtil,b.NetUtil,w.RandomGenerator,E.RangedValue,S.Button,x.DragControl,T.ScrollControl,N.Color,M.ColorMatrix,C.Line,m.LineIntersection,k.Rectangle,v.TilingSpriteContainer,h.NormalDistribution,c.UidManager,l.GameCamera,f.GameCamera3D,a.StateMachine,u.BindedStateMachine,o.TiledAStar,s.LotteryBox,i.HitBox,r.WhirledGridGenerator,L.Matrix2x2,A.Padding,O.Updater,_.Version,console.log("Base is ready.")}return e}(),new D,p.setLanguage(d.getPreferedLanguage([d.LANG.ZH,d.LANG.EN]),d.LANG.EN)}}}),System.register("Base/utils/UidManager",[],function(e,t){"use strict";function u(e){var t="",n;do n=Math.floor(Math.random()*i),t+=r.charAt(n);while(t.length<e);return t}var n,r,i,s=t&&t.id,o=t&&t.id;return{setters:[],execute:function(){n=function(){function e(e){e===void 0&&(e=3),this._minRandomLength=e,this.idmap={}}return e.prototype.generateUid=function(e,t){var n=u(this._minRandomLength);e&&(n=e+n);while(this.idmap.hasOwnProperty(n))n+=u(1);return this.idmap[n]=t||null,n},e.prototype.registerUid=function(e,t){return e.length<this._minRandomLength?!1:(this.idmap[e]=t||null,!0)},e.prototype.removeUid=function(e){if(e.length<this._minRandomLength)return undefined;var t=this.idmap[e];return delete this.idmap[e],t},e.prototype.getAssociatedObject=function(e){return this.idmap[e]},e.prototype.hasUid=function(e){return this.idmap.hasOwnProperty(e)},e.prototype.listUids=function(){return Object.keys(this.idmap)},e}(),e("UidManager",n),r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789",i=r.length}}}),System.register("Base/translation/Translation",["./../locales/languages"],function(e,t){"use strict";function c(e,t,n){n===void 0&&(n="");for(var r in t){var o=t[r];typeof o=="object"?e=c(e,o,r+"."):e=e.replace(new RegExp(i+"\\s*"+n+r+"\\s*"+s,"g"),o)}return e}function h(e){var t=r[e.code];return t||(t=new a(e),r[e.code]=t),t}function p(e,t){return o=h(e),t&&(u=h(t)),o}function d(){return o.language}function v(e,t){e===void 0&&(e="{{"),t===void 0&&(t="}}"),i=e,s=t}function m(e,t){var n=o.trans(e,t);return!n&&typeof n!="string"&&u&&(n=u.trans(e,t)),n}var n,r,i,s,o,u,a,f=t&&t.id,l=t&&t.id;return e("getTranslation",h),e("setLanguage",p),e("getSelectedLanguage",d),e("setTranslateParamWrapper",v),e("translate",m),{setters:[function(e){n=e}],execute:function(){r={},i="{{",s="}}",a=function(){function e(e){this._lang=e,this.items={}}return Object.defineProperty(e.prototype,"language",{get:function(){return this._lang},enumerable:!0,configurable:!0}),e.prototype.addItem=function(e,t){return this.items[e]=t,this},e.prototype.getItem=function(e){return this.items[e]},e.prototype.trans=function(e,t){var n=this.getItem(e);return n!==undefined?t&&(n=c(n,t)):n=e,n},e.prototype.importJson=function(e,t){t===void 0&&(t="");for(var n in e){var r=e[n];typeof r=="string"?this.addItem(t+n,r):this.importJson(r,t+n+".")}},e.prototype.importJsonFromURL=function(e){var t=this;return new Promise(function(n,r){$.getJSON(e).done(function(e){return t.importJson(e)}).fail(function(e,t,n){return r(t+", "+n)})})},e}(),e("Translation",a),function(){p(n.LANG.EN,n.LANG.EN)}()}}}),System.register("Base/locales/languages",["./../utils/NetUtil"],function(e,t){"use strict";function a(e){return i[e]}function f(e){var t=e.code.split("-")[0],n=t+"-",i=[];for(var s in r){var o=r[s];(o.code==t||o.code.startsWith(n))&&i.push(o)}return i}function l(e,t,n){if(t){var r=t.split("-");r.length>1&&(n?e.unshift(r[0].toLowerCase()):e.push(r[0].toLowerCase())),n?e.unshift(t):e.push(t)}}function c(e,t){var i=navigator.languages.slice();l(i,t,!1),s&&l(i,s.code,!0),l(i,n.NetUtil.getQueryStringValue("locale"),!0);for(var o=0,u=i;o<u.length;o++){var f=u[o],c=a(f);if(c){if(e&&e.indexOf(c)==-1)continue;return c}}return e&&e.length?e[0]:r.EN}var n,r,i,s,o=t&&t.id,u=t&&t.id;return e("getByCode",a),e("listSimilarLanguages",f),e("getPreferedLanguage",c),{setters:[function(e){n=e}],execute:function(){e("LANG",r={ACH:{code:"ach",nativeName:"Lwo",englishName:"Acholi"},ADY:{code:"ady",nativeName:"\u0410\u0434\u044b\u0433\u044d\u0431\u0437\u044d",englishName:"Adyghe"},AF:{code:"af",nativeName:"Afrikaans",englishName:"Afrikaans"},AF_NA:{code:"af-NA",nativeName:"Afrikaans (Namibia)",englishName:"Afrikaans (Namibia)"},AF_ZA:{code:"af-ZA",nativeName:"Afrikaans (South Africa)",englishName:"Afrikaans (South Africa)"},AK:{code:"ak",nativeName:"T\u0255\u0265i",englishName:"Akan"},AR:{code:"ar",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",englishName:"Arabic"},AR_AR:{code:"ar-AR",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",englishName:"Arabic"},AR_MA:{code:"ar-MA",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",englishName:"Arabic (Morocco)"},AR_SA:{code:"ar-SA",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629 (\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629)",englishName:"Arabic (Saudi Arabia)"},AY_BO:{code:"ay-BO",nativeName:"Aymar aru",englishName:"Aymara"},AZ:{code:"az",nativeName:"Az\u0259rbaycan dili",englishName:"Azerbaijani"},AZ_AZ:{code:"az-AZ",nativeName:"Az\u0259rbaycan dili",englishName:"Azerbaijani"},BE_BY:{code:"be-BY",nativeName:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",englishName:"Belarusian"},BG:{code:"bg",nativeName:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",englishName:"Bulgarian"},BG_BG:{code:"bg-BG",nativeName:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",englishName:"Bulgarian"},BN:{code:"bn",nativeName:"\u09ac\u09be\u0982\u09b2\u09be",englishName:"Bengali"},BN_IN:{code:"bn-IN",nativeName:"\u09ac\u09be\u0982\u09b2\u09be (\u09ad\u09be\u09b0\u09a4)",englishName:"Bengali (India)"},BN_BD:{code:"bn-BD",nativeName:"\u09ac\u09be\u0982\u09b2\u09be(\u09ac\u09be\u0982\u09b2\u09be\u09a6\u09c7\u09b6)",englishName:"Bengali (Bangladesh)"},BS_BA:{code:"bs-BA",nativeName:"Bosanski",englishName:"Bosnian"},CA:{code:"ca",nativeName:"Catal\u00e0",englishName:"Catalan"},CA_ES:{code:"ca-ES",nativeName:"Catal\u00e0",englishName:"Catalan"},CAK:{code:"cak",nativeName:"Maya Kaqchikel",englishName:"Kaqchikel"},CK_US:{code:"ck-US",nativeName:"\u13e3\u13b3\u13a9 (tsalagi)",englishName:"Cherokee"},CS:{code:"cs",nativeName:"\u010ce\u0161tina",englishName:"Czech"},CS_CZ:{code:"cs-CZ",nativeName:"\u010ce\u0161tina",englishName:"Czech"},CY:{code:"cy",nativeName:"Cymraeg",englishName:"Welsh"},CY_GB:{code:"cy-GB",nativeName:"Cymraeg",englishName:"Welsh"},DA:{code:"da",nativeName:"Dansk",englishName:"Danish"},DA_DK:{code:"da-DK",nativeName:"Dansk",englishName:"Danish"},DE:{code:"de",nativeName:"Deutsch",englishName:"German"},DE_AT:{code:"de-AT",nativeName:"Deutsch (\u00d6sterreich)",englishName:"German (Austria)"},DE_DE:{code:"de-DE",nativeName:"Deutsch (Deutschland)",englishName:"German (Germany)"},DE_CH:{code:"de-CH",nativeName:"Deutsch (Schweiz)",englishName:"German (Switzerland)"},DSB:{code:"dsb",nativeName:"Dolnoserb\u0161\u0107ina",englishName:"Lower Sorbian"},EL:{code:"el",nativeName:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",englishName:"Greek"},EL_GR:{code:"el-GR",nativeName:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",englishName:"Greek (Greece)"},EN:{code:"en",nativeName:"English",englishName:"English"},EN_GB:{code:"en-GB",nativeName:"English (UK)",englishName:"English (UK)"},EN_AU:{code:"en-AU",nativeName:"English (Australia)",englishName:"English (Australia)"},EN_CA:{code:"en-CA",nativeName:"English (Canada)",englishName:"English (Canada)"},EN_IE:{code:"en-IE",nativeName:"English (Ireland)",englishName:"English (Ireland)"},EN_IN:{code:"en-IN",nativeName:"English (India)",englishName:"English (India)"},EN_PI:{code:"en-PI",nativeName:"English (Pirate)",englishName:"English (Pirate)"},EN_UD:{code:"en-UD",nativeName:"English (Upside Down)",englishName:"English (Upside Down)"},EN_US:{code:"en-US",nativeName:"English (US)",englishName:"English (US)"},EN_ZA:{code:"en-ZA",nativeName:"English (South Africa)",englishName:"English (South Africa)"},EN_PIRATE:{code:"en@pirate",nativeName:"English (Pirate)",englishName:"English (Pirate)"},EO:{code:"eo",nativeName:"Esperanto",englishName:"Esperanto"},EO_EO:{code:"eo-EO",nativeName:"Esperanto",englishName:"Esperanto"},ES:{code:"es",nativeName:"Espa\u00f1ol",englishName:"Spanish"},ES_AR:{code:"es-AR",nativeName:"Espa\u00f1ol (Argentine)",englishName:"Spanish (Argentina)"},ES_419:{code:"es-419",nativeName:"Espa\u00f1ol (Latinoam\u00e9rica)",englishName:"Spanish (Latin America)"},ES_CL:{code:"es-CL",nativeName:"Espa\u00f1ol (Chile)",englishName:"Spanish (Chile)"},ES_CO:{code:"es-CO",nativeName:"Espa\u00f1ol (Colombia)",englishName:"Spanish (Colombia)"},ES_EC:{code:"es-EC",nativeName:"Espa\u00f1ol (Ecuador)",englishName:"Spanish (Ecuador)"},ES_ES:{code:"es-ES",nativeName:"Espa\u00f1ol (Espa\u00f1a)",englishName:"Spanish (Spain)"},ES_LA:{code:"es-LA",nativeName:"Espa\u00f1ol (Latinoam\u00e9rica)",englishName:"Spanish (Latin America)"},ES_NI:{code:"es-NI",nativeName:"Espa\u00f1ol (Nicaragua)",englishName:"Spanish (Nicaragua)"},ES_MX:{code:"es-MX",nativeName:"Espa\u00f1ol (M\u00e9xico)",englishName:"Spanish (Mexico)"},ES_US:{code:"es-US",nativeName:"Espa\u00f1ol (Estados Unidos)",englishName:"Spanish (United States)"},ES_VE:{code:"es-VE",nativeName:"Espa\u00f1ol (Venezuela)",englishName:"Spanish (Venezuela)"},ET:{code:"et",nativeName:"eesti keel",englishName:"Estonian"},ET_EE:{code:"et-EE",nativeName:"Eesti (Estonia)",englishName:"Estonian (Estonia)"},EU:{code:"eu",nativeName:"Euskara",englishName:"Basque"},EU_ES:{code:"eu-ES",nativeName:"Euskara",englishName:"Basque"},FA:{code:"fa",nativeName:"\u0641\u0627\u0631\u0633\u06cc",englishName:"Persian"},FA_IR:{code:"fa-IR",nativeName:"\u0641\u0627\u0631\u0633\u06cc",englishName:"Persian"},FB_LT:{code:"fb-LT",nativeName:"Leet Speak",englishName:"Leet"},FF:{code:"ff",nativeName:"Fulah",englishName:"Fulah"},FI:{code:"fi",nativeName:"Suomi",englishName:"Finnish"},FI_FI:{code:"fi-FI",nativeName:"Suomi",englishName:"Finnish"},FO_FO:{code:"fo-FO",nativeName:"F\u00f8royskt",englishName:"Faroese"},FR:{code:"fr",nativeName:"Fran\u00e7ais",englishName:"French"},FR_CA:{code:"fr-CA",nativeName:"Fran\u00e7ais (Canada)",englishName:"French (Canada)"},FR_FR:{code:"fr-FR",nativeName:"Fran\u00e7ais (France)",englishName:"French (France)"},FR_BE:{code:"fr-BE",nativeName:"Fran\u00e7ais (Belgique)",englishName:"French (Belgium)"},FR_CH:{code:"fr-CH",nativeName:"Fran\u00e7ais (Suisse)",englishName:"French (Switzerland)"},FY_NL:{code:"fy-NL",nativeName:"Frysk",englishName:"Frisian (West)"},GA:{code:"ga",nativeName:"Gaeilge",englishName:"Irish"},GA_IE:{code:"ga-IE",nativeName:"Gaeilge (Gaelic)",englishName:"Irish (Gaelic)"},GL:{code:"gl",nativeName:"Galego",englishName:"Galician"},GL_ES:{code:"gl-ES",nativeName:"Galego",englishName:"Galician"},GN_PY:{code:"gn-PY",nativeName:"Ava\u00f1e'\u1ebd",englishName:"Guarani"},GU_IN:{code:"gu-IN",nativeName:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",englishName:"Gujarati"},GX_GR:{code:"gx-GR",nativeName:"\u1f19\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ae \u1f00\u03c1\u03c7\u03b1\u03af\u03b1",englishName:"Classical Greek"},HE:{code:"he",nativeName:"\u05e2\u05d1\u05e8\u05d9\u05ea\u200f",englishName:"Hebrew"},HE_IL:{code:"he-IL",nativeName:"\u05e2\u05d1\u05e8\u05d9\u05ea\u200f",englishName:"Hebrew"},HI:{code:"hi",nativeName:"\u0939\u093f\u0928\u094d\u0926\u0940",englishName:"Hindi"},HI_IN:{code:"hi-IN",nativeName:"\u0939\u093f\u0928\u094d\u0926\u0940",englishName:"Hindi"},HR:{code:"hr",nativeName:"Hrvatski",englishName:"Croatian"},HR_HR:{code:"hr-HR",nativeName:"Hrvatski",englishName:"Croatian"},HSB:{code:"hsb",nativeName:"Hornjoserb\u0161\u0107ina",englishName:"Upper Sorbian"},HT:{code:"ht",nativeName:"Krey\u00f2l",englishName:"Haitian Creole"},HU:{code:"hu",nativeName:"Magyar",englishName:"Hungarian"},HU_HU:{code:"hu-HU",nativeName:"Magyar",englishName:"Hungarian"},HY_AM:{code:"hy-AM",nativeName:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",englishName:"Armenian"},ID:{code:"id",nativeName:"Bahasa Indonesia",englishName:"Indonesian"},ID_ID:{code:"id-ID",nativeName:"Bahasa Indonesia",englishName:"Indonesian"},IS:{code:"is",nativeName:"\u00cdslenska",englishName:"Icelandic"},IS_IS:{code:"is-IS",nativeName:"\u00cdslenska (Iceland)",englishName:"Icelandic (Iceland)"},IT:{code:"it",nativeName:"Italiano",englishName:"Italian"},IT_IT:{code:"it-IT",nativeName:"Italiano",englishName:"Italian"},JA:{code:"ja",nativeName:"\u65e5\u672c\u8a9e",englishName:"Japanese"},JA_JP:{code:"ja-JP",nativeName:"\u65e5\u672c\u8a9e",englishName:"Japanese"},JV_ID:{code:"jv-ID",nativeName:"Basa Jawa",englishName:"Javanese"},KA_GE:{code:"ka-GE",nativeName:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",englishName:"Georgian"},KK_KZ:{code:"kk-KZ",nativeName:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",englishName:"Kazakh"},KM:{code:"km",nativeName:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",englishName:"Khmer"},KM_KH:{code:"km-KH",nativeName:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",englishName:"Khmer"},KAB:{code:"kab",nativeName:"Taqbaylit",englishName:"Kabyle"},KN:{code:"kn",nativeName:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",englishName:"Kannada"},KN_IN:{code:"kn-IN",nativeName:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1 (India)",englishName:"Kannada (India)"},KO:{code:"ko",nativeName:"\ud55c\uad6d\uc5b4",englishName:"Korean"},KO_KR:{code:"ko-KR",nativeName:"\ud55c\uad6d\uc5b4 (\u97e9\u56fd)",englishName:"Korean (Korea)"},KU_TR:{code:"ku-TR",nativeName:"Kurd\u00ee",englishName:"Kurdish"},LA:{code:"la",nativeName:"Latin",englishName:"Latin"},LA_VA:{code:"la-VA",nativeName:"Latin",englishName:"Latin"},LB:{code:"lb",nativeName:"L\u00ebtzebuergesch",englishName:"Luxembourgish"},LI_NL:{code:"li-NL",nativeName:"L\u00e8mb\u00f6rgs",englishName:"Limburgish"},LT:{code:"lt",nativeName:"Lietuvi\u0173",englishName:"Lithuanian"},LT_LT:{code:"lt-LT",nativeName:"Lietuvi\u0173",englishName:"Lithuanian"},LV:{code:"lv",nativeName:"Latvie\u0161u",englishName:"Latvian"},LV_LV:{code:"lv-LV",nativeName:"Latvie\u0161u",englishName:"Latvian"},MAI:{code:"mai",nativeName:"\u092e\u0948\u0925\u093f\u0932\u0940, \u09ae\u09c8\u09a5\u09bf\u09b2\u09c0",englishName:"Maithili"},MG_MG:{code:"mg-MG",nativeName:"Malagasy",englishName:"Malagasy"},MK:{code:"mk",nativeName:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",englishName:"Macedonian"},MK_MK:{code:"mk-MK",nativeName:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438 (\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438)",englishName:"Macedonian (Macedonian)"},ML:{code:"ml",nativeName:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",englishName:"Malayalam"},ML_IN:{code:"ml-IN",nativeName:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",englishName:"Malayalam"},MN_MN:{code:"mn-MN",nativeName:"\u041c\u043e\u043d\u0433\u043e\u043b",englishName:"Mongolian"},MR:{code:"mr",nativeName:"\u092e\u0930\u093e\u0920\u0940",englishName:"Marathi"},MR_IN:{code:"mr-IN",nativeName:"\u092e\u0930\u093e\u0920\u0940",englishName:"Marathi"},MS:{code:"ms",nativeName:"Bahasa Melayu",englishName:"Malay"},MS_MY:{code:"ms-MY",nativeName:"Bahasa Melayu",englishName:"Malay"},MT:{code:"mt",nativeName:"Malti",englishName:"Maltese"},MT_MT:{code:"mt-MT",nativeName:"Malti",englishName:"Maltese"},MY:{code:"my",nativeName:"\u1017\u1019\u102c\u1005\u1000\u102c",englishName:"Burmese"},NO:{code:"no",nativeName:"Norsk",englishName:"Norwegian"},NB:{code:"nb",nativeName:"Norsk (bokm\u00e5l)",englishName:"Norwegian (bokmal)"},NB_NO:{code:"nb-NO",nativeName:"Norsk (bokm\u00e5l)",englishName:"Norwegian (bokmal)"},NE:{code:"ne",nativeName:"\u0928\u0947\u092a\u093e\u0932\u0940",englishName:"Nepali"},NE_NP:{code:"ne-NP",nativeName:"\u0928\u0947\u092a\u093e\u0932\u0940",englishName:"Nepali"},NL:{code:"nl",nativeName:"Nederlands",englishName:"Dutch"},NL_BE:{code:"nl-BE",nativeName:"Nederlands (Belgi\u00eb)",englishName:"Dutch (Belgium)"},NL_NL:{code:"nl-NL",nativeName:"Nederlands (Nederland)",englishName:"Dutch (Netherlands)"},NN_NO:{code:"nn-NO",nativeName:"Norsk (nynorsk)",englishName:"Norwegian (nynorsk)"},OC:{code:"oc",nativeName:"Occitan",englishName:"Occitan"},OR_IN:{code:"or-IN",nativeName:"\u0b13\u0b21\u0b3c\u0b3f\u0b06",englishName:"Oriya"},PA:{code:"pa",nativeName:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",englishName:"Punjabi"},PA_IN:{code:"pa-IN",nativeName:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40 (\u0a2d\u0a3e\u0a30\u0a24 \u0a28\u0a42\u0a70)",englishName:"Punjabi (India)"},PL:{code:"pl",nativeName:"Polski",englishName:"Polish"},PL_PL:{code:"pl-PL",nativeName:"Polski",englishName:"Polish"},PS_AF:{code:"ps-AF",nativeName:"\u067e\u069a\u062a\u0648",englishName:"Pashto"},PT:{code:"pt",nativeName:"Portugu\u00eas",englishName:"Portuguese"},PT_BR:{code:"pt-BR",nativeName:"Portugu\u00eas (Brasil)",englishName:"Portuguese (Brazil)"},PT_PT:{code:"pt-PT",nativeName:"Portugu\u00eas (Portugal)",englishName:"Portuguese (Portugal)"},QU_PE:{code:"qu-PE",nativeName:"Qhichwa",englishName:"Quechua"},RM_CH:{code:"rm-CH",nativeName:"Rumantsch",englishName:"Romansh"},RO:{code:"ro",nativeName:"Rom\u00e2n\u0103",englishName:"Romanian"},RO_RO:{code:"ro-RO",nativeName:"Rom\u00e2n\u0103",englishName:"Romanian"},RU:{code:"ru",nativeName:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",englishName:"Russian"},RU_RU:{code:"ru-RU",nativeName:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",englishName:"Russian"},SA_IN:{code:"sa-IN",nativeName:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",englishName:"Sanskrit"},SE_NO:{code:"se-NO",nativeName:"Davvis\u00e1megiella",englishName:"Northern S\u00e1mi"},SI_LK:{code:"si-LK",nativeName:"\u0db4\u0dc5\u0dcf\u0dad",englishName:"Sinhala (Sri Lanka)"},SK:{code:"sk",nativeName:"Sloven\u010dina",englishName:"Slovak"},SK_SK:{code:"sk-SK",nativeName:"Sloven\u010dina (Slovakia)",englishName:"Slovak (Slovakia)"},SL:{code:"sl",nativeName:"Sloven\u0161\u010dina",englishName:"Slovenian"},SL_SI:{code:"sl-SI",nativeName:"Sloven\u0161\u010dina",englishName:"Slovenian"},SO_SO:{code:"so-SO",nativeName:"Soomaaliga",englishName:"Somali"},SQ:{code:"sq",nativeName:"Shqip",englishName:"Albanian"},SQ_AL:{code:"sq-AL",nativeName:"Shqip",englishName:"Albanian"},SR:{code:"sr",nativeName:"\u0421\u0440\u043f\u0441\u043a\u0438",englishName:"Serbian"},SR_RS:{code:"sr-RS",nativeName:"\u0421\u0440\u043f\u0441\u043a\u0438 (Serbia)",englishName:"Serbian (Serbia)"},SU:{code:"su",nativeName:"Basa Sunda",englishName:"Sundanese"},SV:{code:"sv",nativeName:"Svenska",englishName:"Swedish"},SV_SE:{code:"sv-SE",nativeName:"Svenska",englishName:"Swedish"},SW:{code:"sw",nativeName:"Kiswahili",englishName:"Swahili"},SW_KE:{code:"sw-KE",nativeName:"Kiswahili",englishName:"Swahili (Kenya)"},TA:{code:"ta",nativeName:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",englishName:"Tamil"},TA_IN:{code:"ta-IN",nativeName:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",englishName:"Tamil"},TE:{code:"te",nativeName:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",englishName:"Telugu"},TE_IN:{code:"te-IN",nativeName:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",englishName:"Telugu"},TG:{code:"tg",nativeName:"\u0437\u0430\u0431\u043e\u0301\u043d\u0438 \u0442\u043e\u04b7\u0438\u043a\u04e3\u0301",englishName:"Tajik"},TG_TJ:{code:"tg-TJ",nativeName:"\u0442\u043e\u04b7\u0438\u043a\u04e3",englishName:"Tajik"},TH:{code:"th",nativeName:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",englishName:"Thai"},TH_TH:{code:"th-TH",nativeName:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22 (\u0e1b\u0e23\u0e30\u0e40\u0e17\u0e28\u0e44\u0e17\u0e22)",englishName:"Thai (Thailand)"},TL:{code:"tl",nativeName:"Filipino",englishName:"Filipino"},TL_PH:{code:"tl-PH",nativeName:"Filipino",englishName:"Filipino"},TLH:{code:"tlh",nativeName:"tlhIngan-Hol",englishName:"Klingon"},TR:{code:"tr",nativeName:"T\u00fcrk\u00e7e",englishName:"Turkish"},TR_TR:{code:"tr-TR",nativeName:"T\u00fcrk\u00e7e",englishName:"Turkish"},TT_RU:{code:"tt-RU",nativeName:"\u0442\u0430\u0442\u0430\u0440\u0447\u0430",englishName:"Tatar"},UK:{code:"uk",nativeName:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",englishName:"Ukrainian"},UK_UA:{code:"uk-UA",nativeName:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",englishName:"Ukrainian"},UR:{code:"ur",nativeName:"\u0627\u0631\u062f\u0648",englishName:"Urdu"},UR_PK:{code:"ur-PK",nativeName:"\u0627\u0631\u062f\u0648",englishName:"Urdu"},UZ:{code:"uz",nativeName:"O'zbek",englishName:"Uzbek"},UZ_UZ:{code:"uz-UZ",nativeName:"O'zbek",englishName:"Uzbek"},VI:{code:"vi",nativeName:"Ti\u1ebfng Vi\u1ec7t",englishName:"Vietnamese"},VI_VN:{code:"vi-VN",nativeName:"Ti\u1ebfng Vi\u1ec7t",englishName:"Vietnamese"},XH_ZA:{code:"xh-ZA",nativeName:"isiXhosa",englishName:"Xhosa"},YI:{code:"yi",nativeName:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",englishName:"Yiddish"},YI_DE:{code:"yi-DE",nativeName:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9 (German)",englishName:"Yiddish (German)"},ZH:{code:"zh",nativeName:"\u4e2d\u6587",englishName:"Chinese"},ZH_HANS:{code:"zh-Hans",nativeName:"\u4e2d\u6587\u7b80\u4f53",englishName:"Chinese Simplified"},ZH_HANT:{code:"zh-Hant",nativeName:"\u4e2d\u6587\u7e41\u9ad4",englishName:"Chinese Traditional"},ZH_CN:{code:"zh-CN",nativeName:"\u4e2d\u6587\uff08\u4e2d\u56fd\uff09",englishName:"Chinese Simplified (China)"},ZH_HK:{code:"zh-HK",nativeName:"\u4e2d\u6587\uff08\u9999\u6e2f\uff09",englishName:"Chinese Traditional (Hong Kong)"},ZH_SG:{code:"zh-SG",nativeName:"\u4e2d\u6587\uff08\u65b0\u52a0\u5761\uff09",englishName:"Chinese Simplified (Singapore)"},ZH_TW:{code:"zh-TW",nativeName:"\u4e2d\u6587\uff08\u53f0\u7063\uff09",englishName:"Chinese Traditional (Taiwan)"},ZU_ZA:{code:"zu-ZA",nativeName:"isiZulu",englishName:"Zulu"}}),i={};for(var t in r)i[r[t].code]=r[t];(function(){var e=window.CgApp||{};s=a(e.locale)})()}}}),System.register("Base/pixis/display/TilingSpriteContainer",["./../../System","./../Pixi"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o=t&&t.id,u=t&&t.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(t,n){var s=e.call(this)||this;return s._toFullscreenTop=!1,s._toFullscreenBottom=!1,s._toFullscreenLeft=!1,s._toFullscreenRight=!1,s._rectDirty=!1,s._position=new PIXI.ObservablePoint(s.onPositionSet,s),s._rect=n?n.clone():new PIXI.Rectangle(0,0,r.pixi.stageWidth,r.pixi.stageHeight),s._tilePosition=new PIXI.ObservablePoint(s.refreshTilePosition,s,0,0),s._sprite=new PIXI.TilingSprite(t,s._rect.width,s._rect.height),r.pixi.on(i.Pixi.EVENT.STAGE_RESIZED,s.markRectDirty,s),s.addChild(s.sprite),s.onPositionSet(),s}return n(t,e),Object.defineProperty(t.prototype,"tilePosition",{get:function(){return this._tilePosition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileScale",{get:function(){return this._sprite.tileScale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(e){this._position.copyFrom(e)},enumerable:!0,configurable:!0}),t.prototype.onPositionSet=function(){this.transform.position.copyFrom(this._position),this._rectDirty=!0},Object.defineProperty(t.prototype,"x",{get:function(){return this._position.x},set:function(e){this._position.x=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._position.y},set:function(e){this._position.y=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sprite",{get:function(){return this._sprite},enumerable:!0,configurable:!0}),t.prototype.setFullscreenPadding=function(e){this._fullScreenPadding=e},t.prototype.destroy=function(t){r.pixi.off(i.Pixi.EVENT.STAGE_RESIZED,this.markRectDirty,this),this._sprite&&this._sprite.destroy(),this._sprite=null,e.prototype.destroy.call(this,t)},Object.defineProperty(t.prototype,"left",{get:function(){return this._rect.left},set:function(e){e!=this._rect.left&&(this._rect.width=Math.max(0,this._rect.right-e),this._rect.x=e,this._rectDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this._rect.right},set:function(e){e!=this._rect.right&&(this._rect.width=Math.max(0,e-this._rect.left),this._rect.x=e-this._rect.width,this._rectDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this._rect.top},set:function(e){e!=this._rect.top&&(this._rect.height=Math.max(0,this._rect.bottom-e),this._rect.y=e,this._rectDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this._rect.bottom},set:function(e){e!=this._rect.bottom&&(this._rect.height=Math.max(0,e-this._rect.top),this._rect.x=e-this._rect.height,this._rectDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toFullscreenTop",{get:function(){return this._toFullscreenTop},set:function(e){this._toFullscreenTop!=e&&(this._toFullscreenTop=e,this._rectDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toFullscreenBottom",{get:function(){return this._toFullscreenBottom},set:function(e){this._toFullscreenBottom!=e&&(this._toFullscreenBottom=e,this._rectDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toFullscreenLeft",{get:function(){return this._toFullscreenLeft},set:function(e){this._toFullscreenLeft!=e&&(this._toFullscreenLeft=e,this._rectDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toFullscreenRight",{get:function(){return this._toFullscreenRight},set:function(e){this._toFullscreenRight!=e&&(this._toFullscreenRight=e,this._rectDirty=!0)},enumerable:!0,configurable:!0}),t.prototype.refreshTilePosition=function(){this._sprite.tilePosition.x=this._tilePosition.x-this._sprite.position.x,this._sprite.tilePosition.y=this._tilePosition.y-this._sprite.position.y},t.prototype.updateTransform=function(){this._rectDirty&&this.refreshSpriteSize(),e.prototype.updateTransform.call(this)},t.prototype.markRectDirty=function(){this._rectDirty=!0},t.prototype.refreshSpriteSize=function(){var e=r.pixi.getFullscreenRect(this);if(this._fullScreenPadding){var t=this._fullScreenPadding;t.left&&(e.x+=t.left,e.width-=t.left),t.right&&(e.width-=t.right),t.top&&(e.y+=t.top,e.height-=t.top),t.bottom&&(e.height-=t.bottom)}var n=this._rect.clone();if(this._toFullscreenLeft&&n.left>e.left){var i=n.left-e.left;n.width+=i,n.x-=i}this._toFullscreenRight&&n.right<e.right&&(n.width+=e.right-n.right);if(this._toFullscreenTop&&n.top>e.top){var s=n.top-e.top;n.height+=s,n.y-=s}this._toFullscreenBottom&&n.bottom<e.bottom&&(n.height+=e.bottom-n.bottom),this._sprite.position.set(n.x,n.y),this._sprite.width=n.width,this._sprite.height=n.height,this.refreshTilePosition(),this._rectDirty=!1},t}(PIXI.Container),e("TilingSpriteContainer",s)}}}),System.register("Base/utils/IntUtil",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.random=function(e){return Math.floor(Math.random()*(e+1))},e.randomBetween=function(e,t){return e=Math.ceil(e),t=Math.floor(t),e+Math.floor(Math.random()*(t-e+1))},e.formatAddComma=function(e){if(e==0)return"0";var t="",n=e<0;n&&(e=-e);while(e>0){var r=(e%1e3).toString();e=Math.floor(e/1e3);if(e>0){while(r.length<3)r="0"+r;r=","+r}t=r+t}return n&&(t="-"+t),t},e}(),e("IntUtil",n)}}}),System.register("Base/utils/NetUtil",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.getQueryStringValue=function(e){return decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))},e.setQueryString=function(e,t){var n=window.location.search;if(n.startsWith("?")){var r=new RegExp("([?&]"+e+"=)[^&]*");n.match(r)?n=n.replace(r,"$1"+t):n+="&"+e+"="+t}else n="?"+e+"="+t;return window.location.origin+window.location.pathname+n+window.location.hash},e.getBaseHref=function(){var e=document.getElementsByTagName("base"),t="/";return e.length>0&&(t=e[0].href),t},e}(),e("NetUtil",n)}}}),System.register("Base/pixis/interactive/Button",[],function(e,t){"use strict";function a(e,t,n){var r=10,i=5,s=new PIXI.Container,o=new PIXI.Text(e,n);o.position.set(r,i),s.addChild(o);var u=new PIXI.Graphics;return u.beginFill(t),u.drawRoundedRect(0,0,o.width+r*2,o.height+i*2,(r+i)/2),u.endFill(),s.addChildAt(u,0),s.pivot.set(s.width/2,s.height/2),s}var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o=t&&t.id,u=t&&t.id;return{setters:[],execute:function(){r=function(e){function t(n){var r=e.call(this)||this;return r._clip=n,r._isDown=!1,r._isOver=!1,r._name="",r._disposed=!1,r._clip.interactive=!0,r._clip.buttonMode=!0,r._state=t.STATE.OUT,r._clip.on("pointerdown",r.onButtonDown,r).on("pointerup",r.onButtonUp,r).on("pointerupoutside",r.onButtonUpOutside,r).on("pointerover",r.onButtonOver,r).on("pointerout",r.onButtonOut,r).on("touchend",r.onTouchEnd,r),r}return n(t,e),t.prototype.dispose=function(){this._clip.interactive=!1,this._clip.buttonMode=!1,this._clip.off("pointerdown",this.onButtonDown,this).off("pointerup",this.onButtonUp,this).off("pointerupoutside",this.onButtonUpOutside,this).off("pointerover",this.onButtonOver,this).off("pointerout",this.onButtonOut,this).off("touchend",this.onTouchEnd,this),this.removeAllListeners(),this._disposed=!0},Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){e!=this._state&&(this._state=e,this.onStateChange(this._state))},enumerable:!0,configurable:!0}),t.prototype.refreshState=function(){var e=this._state;this.isDown?e=t.STATE.DOWN:e=this.isOver?t.STATE.OVER:t.STATE.OUT,this.state=e},t.prototype.onStateChange=function(e){this.emit(t.EVENT.STATE_CHANGE,e)},Object.defineProperty(t.prototype,"displayObject",{get:function(){return this._clip},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDown",{get:function(){return this._isDown},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOver",{get:function(){return this._isOver},enumerable:!0,configurable:!0}),t.prototype.onButtonDown=function(){this._isDown=!0,this._isOver=!0,this.refreshState(),this.emit(t.EVENT.DOWN)},t.prototype.onButtonUpOutside=function(){this._isDown=!1,this._isOver=!1,this.refreshState(),this.emit(t.EVENT.UP_OUTSIDE)},t.prototype.onButtonUp=function(){var e=this._isDown;this._isDown=!1,this._isOver?(this.refreshState(),this.emit(t.EVENT.UP),e&&this.emit(t.EVENT.CLICK)):(this.refreshState(),this.emit(t.EVENT.UP_OUTSIDE))},t.prototype.onButtonOver=function(){var e=this._isOver;this._isOver=!0;if(this._isDown)return;this.refreshState(),e||this.emit(t.EVENT.OVER)},t.prototype.onButtonOut=function(){this._isOver=!1;if(this._isDown)return;this.refreshState(),this.emit(t.EVENT.OUT)},t.prototype.onTouchEnd=function(){this.onButtonOut()},t.EVENT={CLICK:"click",DOWN:"down",UP:"up",UP_OUTSIDE:"upOutside",OVER:"over",OUT:"out",STATE_CHANGE:"stageChange"},t.STATE={DOWN:"down",OVER:"over",OUT:"out"},t}(PIXI.utils.EventEmitter),e("Button",r),i=function(e){function t(t){var n=e.call(this,t)||this;return n.gafClip=t,n._stateFrameMap={},n._stateFrameMap[r.STATE.OUT]=1,n._stateFrameMap[r.STATE.OVER]=2,n._stateFrameMap[r.STATE.DOWN]=3,n.refreshStateFrame(n.state),n}return n(t,e),t.prototype.onStateChange=function(t){this.refreshStateFrame(t),e.prototype.onStateChange.call(this,t)},t.prototype.refreshStateFrame=function(e){this.gafClip.gotoAndStop(this._stateFrameMap[e])},t.prototype.setStateFrame=function(e,t){this._stateFrameMap[e]=t,this.refreshStateFrame(e)},t}(r),e("GafButton",i),s=function(e){function t(t,n,r){return e.call(this,a(t,n,r))||this}return n(t,e),t.prototype.onStateChange=function(t){t==r.STATE.OVER?this.displayObject.scale.set(1.05,1.05):t==r.STATE.DOWN?this.displayObject.scale.set(.95,.95):this.displayObject.scale.set(1,1),e.prototype.onStateChange.call(this,t)},t}(r),e("SimpleButton",s)}}}),System.register("Base/pixis/interactive/DragControl",["./../../keyboard/Key","./../../geom/Rectangle","./../../geom/Point","./../../utils/MathUtil","./../../System"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a,f,l,c,h,p=t&&t.id,d=t&&t.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e}],execute:function(){a=new s.Point,f=new i.Rectangle,l=10,c=function(){function e(e){this.code=e}return e.MOVE=new e("move"),e.ROTATE=new e("rotate"),e.SCALE=new e("scale"),e}(),e("DragMode",c),h=function(e){function t(t){var n=e.call(this)||this;return n._dragging=!1,n._enabled=!0,n._shiftLock=!1,n._shiftLockScaleReverse=!1,n._nextMode=c.MOVE,n._currentMode=c.MOVE,n._displayObject=t,n._displayObject.on("mousedown",n.onDragStart,n).on("touchstart",n.onDragStart,n).on("mouseup",n.onDragEnd,n).on("mouseupoutside",n.onDragEnd,n).on("touchend",n.onDragEnd,n).on("touchendoutside",n.onDragEnd,n).on("mousemove",n.onDragMove,n).on("touchmove",n.onDragMove,n),n}return n(t,e),Object.defineProperty(t.prototype,"nextMode",{get:function(){return this._nextMode},set:function(e){this._nextMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentMode",{get:function(){return this.dragging?this._currentMode:this._nextMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shiftLock",{get:function(){return this._shiftLock},set:function(e){this._shiftLock=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shiftLockScaleReverse",{get:function(){return this._shiftLockScaleReverse},set:function(e){this._shiftLockScaleReverse=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e,this.dragging&&!this._enabled&&this.onDragEnd(null)},enumerable:!0,configurable:!0}),t.prototype.startDrag=function(){this.onDragStart(null)},t.prototype.stopDrag=function(){this.dragging&&this.onDragEnd(null)},t.prototype.dispose=function(){this._displayObject&&(this._displayObject.removeListener("mousedown",this.onDragStart,this).removeListener("touchstart",this.onDragStart,this).removeListener("mouseup",this.onDragEnd,this).removeListener("mouseupoutside",this.onDragEnd,this).removeListener("touchend",this.onDragEnd,this).removeListener("touchendoutside",this.onDragEnd,this).removeListener("mousemove",this.onDragMove,this).removeListener("touchmove",this.onDragMove,this),this._displayObject=null)},Object.defineProperty(t.prototype,"disposed",{get:function(){return!this._displayObject},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragging",{get:function(){return this._dragging},enumerable:!0,configurable:!0}),t.prototype.onDragStart=function(e){this.enabled&&(this._currentMode=this._nextMode,e?this._startPos=e.data.getLocalPosition(this._displayObject.parent,this._startPos||new s.Point):this._startPos=u.pixi.mouse.getLocalPosition(this._displayObject.parent,this._startPos||new s.Point),this._dragShift||(this._dragShift=new s.Point),this[this._currentMode.code+"_start"](),this._dragging=!0,this.emit(t.EVENT.DRAG_START,e))},t.prototype.onDragMove=function(e){this._dragging&&(e?e.data.getLocalPosition(this._displayObject.parent,a):u.pixi.mouse.getLocalPosition(this._displayObject.parent,a),this[this._currentMode.code+"_update"](a),this.emit(t.EVENT.DRAG_MOVE,e))},t.prototype.onDragEnd=function(e){this._dragging=!1,this.emit(t.EVENT.DRAG_END,e)},t.prototype.move_start=function(){this._dragShift.x=this._startPos.x-this._displayObject.position.x,this._dragShift.y=this._startPos.y-this._displayObject.position.y},t.prototype.move_update=function(e){this._shiftLock&&u.keyboardManager.isDown(r.Key.SHIFT)&&(Math.abs(a.x-this._startPos.x)>Math.abs(a.y-this._startPos.y)?a.y=this._startPos.y:a.x=this._startPos.x),this._displayObject.position.x=e.x-this._dragShift.x,this._displayObject.position.y=e.y-this._dragShift.y},t.prototype.rotate_start=function(){this.move_start(),this._startRot=this._displayObject.rotation,this._dragShiftRot=Math.atan2(this._dragShift.y,this._dragShift.x)-this._startRot},t.prototype.rotate_update=function(e){this._dragShift.x=e.x-this._displayObject.position.x,this._dragShift.y=e.y-this._displayObject.position.y;var t=Math.atan2(this._dragShift.y,this._dragShift.x)-this._dragShiftRot;this.customRotateUpdate?this.customRotateUpdate(this._startRot,t):this._displayObject.rotation=o.MathUtil.radiansFollowTarget(this._startRot,t,1)},t.prototype.scale_start=function(){this._startScale||(this._startScale=new s.Point),this._startScale.set(this._displayObject.scaleX,this._displayObject.scaleY),this._startPos.x-=this._displayObject.x,this._startPos.y-=this._displayObject.y,this._startPos.rotate(-this._displayObject.rotation),Math.abs(this._startPos.x)<.01&&(this._startPos.x=this._startPos.x<0?-0.01:.01),Math.abs(this._startPos.y)<.01&&(this._startPos.y=this._startPos.y<0?-0.01:.01),this._displayObject.getLocalBounds(f),f.width=Math.max(l,Math.abs(f.width*this._displayObject.scaleX/2)),f.height=Math.max(l,Math.abs(f.height*this._displayObject.scaleY/2)),Math.abs(this._startPos.x)<f.width?(this._dragShift.x=f.width-Math.abs(this._startPos.x),this._startPos.x=this._startPos.x>0?f.width:-f.width):this._dragShift.x=0,Math.abs(this._startPos.y)<f.height?(this._dragShift.y=f.height-Math.abs(this._startPos.y),this._startPos.y=this._startPos.y>0?f.height:-f.height):this._dragShift.y=0},t.prototype.scale_update=function(e){var t=e.clone();e.x-=this._displayObject.x,e.y-=this._displayObject.y,e.rotate(-this._displayObject.rotation),this._dragShift.x&&(e.x>0?e.x+=this._dragShift.x:e.x-=this._dragShift.x),this._dragShift.y&&(e.y>0?e.y+=this._dragShift.y:e.y-=this._dragShift.y);var n=!1;this._shiftLock&&(u.keyboardManager.isDown(r.Key.SHIFT)?n=!this._shiftLockScaleReverse:n=this._shiftLockScaleReverse),n&&(Math.abs(e.x/this._startPos.x)>Math.abs(e.y/this._startPos.y)?e.y=Math.abs(e.x/this._startPos.x)*this._startPos.y:e.x=Math.abs(e.y/this._startPos.y)*this._startPos.x),this.customScaleUpdate?(e.x=this._startScale.x*e.x/this._startPos.x,e.y=this._startScale.y*e.y/this._startPos.y,this.customScaleUpdate(this._startScale,e)):(this._displayObject.scaleX=this._startScale.x*e.x/this._startPos.x,this._displayObject.scaleY=this._startScale.y*e.y/this._startPos.y)},t.EVENT={DRAG_START:"DragStart",DRAG_END:"DragEnd",DRAG_MOVE:"DragMove"},t}(PIXI.utils.EventEmitter),e("DragControl",h)}}}),System.register("Base/geom/Rectangle",[],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i=t&&t.id,s=t&&t.id;return{setters:[],execute:function(){r=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.containsPoint=function(e){return this.contains(e.x,e.y)},t.prototype.containsRectangle=function(e){return e.x>=this.x&&e.y>=this.y&&e.right<=this.right&&e.bottom<=this.bottom},t.prototype.intersects=function(e){return!(e.right<=this.x||e.bottom<=this.y||e.x>=this.right||e.y>=this.bottom)},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.equals=function(e){return e&&e.x==this.x&&e.y==this.y&&e.width==this.width&&e.height==this.height},t.prototype.toString=function(){return t.makeString(this.x,this.y,this.width,this.height)},t.makeString=function(e,t,n,r){return e+","+t+","+n+","+r},t.fromString=function(e,n){var r=e.split(",");return r.length==4?(n?(n.x=parseFloat(r[0]),n.y=parseFloat(r[1]),n.width=parseFloat(r[2]),n.height=parseFloat(r[3])):n=new t(parseFloat(r[0]),parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3])),n):null},t}(PIXI.Rectangle),e("Rectangle",r)}}}),System.register("Base/geom/ColorMatrix",[],function(e,t){"use strict";var n,r,i,s,o,u,a=t&&t.id,f=t&&t.id;return{setters:[],execute:function(){n=.299,r=.587,i=.114,s=function(){function e(t){this.matrix=t,this.matrix||(this.matrix=e.IDENTITY.matrix.slice())}return e.prototype.clone=function(){return new e(this.matrix.slice())},e.prototype.reset=function(){this.copyFrom(e.IDENTITY)},e.prototype.copyFrom=function(e){var t=e.matrix;for(var n=0;n<20;++n)this.matrix[n]=t[n]},e.prototype.concat=function(e){var t=0,n=o.matrix,r=e.matrix,i=this.matrix;for(var s=0;s<4;++s){for(var u=0;u<5;++u)n[t+u]=r[t]*i[u]+r[t+1]*i[u+5]+r[t+2]*i[u+10]+r[t+3]*i[u+15]+(u==4?r[t+4]:0);t+=5}this.copyFrom(o)},e.prototype.concatValues=function(e,t,n,r,i,s,o,a,f,l,c,h,p,d,v,m,g,y,b,w){u.matrix.length=0,u.matrix.push(e,t,n,r,i,s,o,a,f,l,c,h,p,d,v,m,g,y,b,w),this.concat(u)},e.prototype.invert=function(){this.concatValues(-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,1,0,0,0,1,0)},e.prototype.adjustColor=function(e,t,n,r){this.adjustBrightness(e),this.adjustContrast(t),this.adjustSaturation(n),this.adjustHue(r)},e.prototype.adjustAlpha=function(e,t){this.matrix[18]*=e,this.matrix[19]+=t},e.prototype.adjustSaturation=function(e){if(e){e+=1;var t=1-e,s=t*n,o=t*r,u=t*i;this.concatValues(s+e,o,u,0,0,s,o+e,u,0,0,s,o,u+e,0,0,0,0,0,1,0)}},e.prototype.adjustContrast=function(e){if(e){var t=e+1,n=.5*(1-t);this.concatValues(t,0,0,0,n,0,t,0,0,n,0,0,t,0,n,0,0,0,1,0)}},e.prototype.adjustBrightness=function(e){var t=1-e;this.concatValues(t,0,0,0,e,0,t,0,0,e,0,0,t,0,e,0,0,0,1,0)},e.prototype.adjustHue=function(e){if(e){e*=Math.PI;var t=Math.cos(e),s=Math.sin(e);this.concatValues(n+t*(1-n)+s*-n,r+t*-r+s*-r,i+t*-i+s*(1-i),0,0,n+t*-n+s*.143,r+t*(1-r)+s*.14,i+t*-i+s*-0.283,0,0,n+t*-n+s*-(1-n),r+t*-r+s*r,i+t*(1-i)+s*i,0,0,0,0,0,1,0)}},e.prototype.tint=function(e,t){var s=(e>>16)/255,o=((e&65280)>>8)/255,u=(e&255)/255,a=1-t,f=t*s,l=t*o,c=t*u;this.concatValues(a+f*n,f*r,f*i,0,0,l*n,a+l*r,l*i,0,0,c*n,c*r,a+c*i,0,0,0,0,0,1,0)},e.IDENTITY=new e([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),e}(),e("ColorMatrix",s),o=new s,u=new s}}}),System.register("Base/utils/SoundUtil",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.fadeTo=function(e,t,n){return new Promise(function(r){var i=new TWEEN.Tween(e);i.to({volume:t},n).start().onComplete(function(){r()})})},e.fadeout=function(t,n){return e.fadeTo(t,0,n).then(function(){t.destroy()})},e}(),e("SoundUtil",n)}}}),System.register("Base/geom/WhirledGridGenerator",["./../utils/MathUtil","./Point"],function(e,t){"use strict";var n,r,i,s=t&&t.id,o=t&&t.id;return{setters:[function(e){n=e},function(e){r=e}],execute:function(){i=function(){function e(e,t){this.center=e,this.clockwise=t,this.vec=new r.Point(0,1),this.vecIndex=0,this.vecAdvIndex=0,this.vecRotIndex=0,this.nextLoc=e.clone()}return e.prototype.getNextLoc=function(){var e=this.nextLoc;return this.nextLoc=new r.PointInt(e.x+this.vec.x,e.y+this.vec.y),++this.vecIndex>this.vecAdvIndex&&(this.vecIndex=0,this.vec.rotate(this.clockwise?n.MathUtil.HALF_PI:-n.MathUtil.HALF_PI),this.vec.set(Math.round(this.vec.x),Math.round(this.vec.y)),++this.vecRotIndex==2&&(this.vecRotIndex=0,++this.vecAdvIndex)),e},e.prototype.listNextLocs=function(e){var t=[];while(t.length<e)t.push(this.getNextLoc());return t},e}(),e("WhirledGridGenerator",i)}}}),System.register("Base/geom/HitBox",["./Point"],function(e,t){"use strict";var n,r,i,s=t&&t.id,o=t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(e,t){this.halfWidth=e,this.halfHeight=t,this._rotation=0,this._position=new n.Point,this._cosNeg=1,this._sinNeg=0}return Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation=e,this._cosNeg=Math.cos(-e),this._sinNeg=Math.sin(-e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._position.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._position.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},enumerable:!0,configurable:!0}),e.prototype.hitTest=function(e,t){t=t||i;var n=e.x-this._position.x,r=e.y-this._position.y;return t.x=n*this._cosNeg-r*this._sinNeg,Math.abs(t.x)>this.halfWidth?!1:(t.y=r*this._cosNeg+n*this._sinNeg,Math.abs(t.y)>this.halfHeight?!1:!0)},e}(),e("HitBox",r),i=new n.Point}}}),System.register("Base/utils/LotteryBox",["./RandomGenerator","./ArrayUtil"],function(e,t){"use strict";var n,r,i,s,o=t&&t.id,u=t&&t.id;return{setters:[function(e){n=e},function(e){r=e}],execute:function(){i=function(){function e(){this._originItems=[],this._totalWeight=0}return e.prototype.toString=function(){var e="totalWeight: "+this.totalWeight;for(var t=0,n=this._lotteryItems;t<n.length;t++){var r=n[t],i=r.weight/this.totalWeight;e+=""+r.item+":"+Math.floor(i*1e3)/100+"%, "}return e},e.prototype.getLowestItemWeight=function(){if(this._originItems.length){var e=this._originItems.slice();r.ArrayUtil.sortNumericOn(e,"weight",!0);var t=e[0];return t.weight}return 0},e.prototype.getHighestItemWeight=function(){if(this._originItems.length){var e=this._originItems.slice();r.ArrayUtil.sortNumericOn(e,"weight",!1);var t=e[0];return t.weight}return 0},Object.defineProperty(e.prototype,"totalWeight",{get:function(){return this.checkTotalWeight(),this._totalWeight},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._lotteryItems=null},e.prototype.clear=function(){this._originItems.length=0,this._lotteryItems=null,this._totalWeight=0},e.prototype.clone=function(){var t=new e;for(var n=0,r=this._originItems;n<r.length;n++){var i=r[n];t.addItem(i.item,i.weight)}return t},e.prototype.merge=function(e){if(e){var t=e.clone();for(var n=0,r=this._originItems;n<r.length;n++){var i=r[n];t.addItem(i.item,i.weight)}return t}return this.clone()},e.prototype.listItems=function(){var e=[];for(var t=0,n=this._originItems;t<n.length;t++){var r=n[t];e.push(r.item)}return e},e.prototype.contains=function(e){for(var t=0,n=this._originItems;t<n.length;t++){var r=n[t];if(r.item==e)return!0}return!1},e.prototype.getWeightOfItem=function(e){var t=this._lotteryItems||this._originItems;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i.item==e)return i.weight}return 0},e.prototype.getPossibilityOfItem=function(e){return this.checkTotalWeight(),this.getWeightOfItem(e)/this.totalWeight},e.prototype.shiftItemsWeight=function(e){for(var t=0,n=this._originItems;t<n.length;t++){var r=n[t];r.weight=Math.max(0,r.weight+e)}this._lotteryItems=null},e.prototype.removeItem=function(e){for(var t=this._originItems.length-1;t>=0;--t)this._originItems[t].item==e&&this._originItems.splice(t,1);this._lotteryItems=null},e.prototype.addItem=function(e,t){for(var n=0,r=this._originItems;n<r.length;n++){var i=r[n];if(i.item==e){i.weight+=t,this._totalWeight+=t;return}}var o=new s(e,t);this._originItems.push(o),this._lotteryItems=null},e.prototype.setItemPossibility=function(e,t){this.removeItem(e),this.checkTotalWeight();if(this.totalWeight==0||t>=1||t<0)return!1;var n=Math.round(this.totalWeight*t/(1-t));return this.addItem(e,n),!0},e.prototype.checkTotalWeight=function(){if(!this._lotteryItems){this._lotteryItems=this._originItems.slice(),this._totalWeight=0;for(var e=0,t=this._lotteryItems;e<t.length;e++){var n=t[e];this._totalWeight+=n.weight}}},e.prototype.randomizeItemList=function(e){e===void 0&&(e=null),this.checkTotalWeight(),e=e||n.systemRandomGenerator,e.randomizeArray(this._lotteryItems)},e.prototype.getItem=function(e,t){t===void 0&&(t=null),this.checkTotalWeight(),t=t||n.systemRandomGenerator;var r=null,i=t.nextInt(this.totalWeight-1),s=0;for(var o=0;o<this._lotteryItems.length;++o){r=this._lotteryItems[o],s+=r.weight;if(i<s)return e&&(this._totalWeight-=r.weight,this._lotteryItems.splice(o,1)),r.item}return null},e}(),e("LotteryBox",i),s=function(){function e(e,t){this.item=e,this.weight=t}return e}()}}}),System.register("Base/astars/TiledAStar",["./../utils/ArrayUtil","./../geom/Point"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a,f,l,c,h,p,d,v,m,g=t&&t.id,y=t&&t.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.parent=t,i.gCost=0,i.fCost=0,i.id=i.toString(),i}return n(t,e),t}(i.PointInt),v=function(){function e(t,n){this.map=t,this.enableDiagonal=n,n?this._directions=e.DIAGONAL_DIRECTIONS.concat(e.ORTHOGONAL_DIRECTIONS):this._directions=e.ORTHOGONAL_DIRECTIONS}return e.prototype.randomizeDirections=function(t){this._directions=e.ORTHOGONAL_DIRECTIONS.slice(),t.randomizeArray(this._directions),this.enableDiagonal&&(this._directions=e.DIAGONAL_DIRECTIONS.concat(this._directions))},e.prototype.dispose=function(){this.cleanup(),this.map=null,this._moveObject=null},e.prototype.cleanup=function(){this._openList=null,this._closedList=null,this._outPath=null,this._srcLoc=null,this._dstLoc=null,this._currNode=null,this._foundPath=!1,this._searchCompleted=!1,this._pathImpossible=!1},Object.defineProperty(e.prototype,"searchCompleted",{get:function(){return this._searchCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"foundPath",{get:function(){return this._foundPath},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultPath",{get:function(){return this._outPath},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchCounts",{get:function(){return this._searchCounts},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchSteps",{get:function(){return this._searchSteps},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"srcLoc",{get:function(){return this._srcLoc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dstLoc",{get:function(){return this._dstLoc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"moveObject",{get:function(){return this._moveObject},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pathImpossible",{get:function(){return this._pathImpossible},enumerable:!0,configurable:!0}),e.prototype.initPathFinding=function(e,t,n,r,o){if(this._searchCompleted&&this._moveObject==e&&this._srcLoc.x==t&&this._srcLoc.y==n&&this._dstLoc.x==r&&this._dstLoc.y==o)return;this._moveObject=e,this._srcLoc=new i.PointInt(t,n),this._dstLoc=new i.PointInt(r,o),this._outPath=[],this._openList={},this._closedList={},this._openSize=0,this._currNode=new s(null,t,n),this._currNode.gCost=0,this._currNode.fCost=this._srcLoc.getPerpendicularDistance(this._dstLoc),this._foundPath=!1,this._searchCompleted=!1,this._searchCounts=0,this._searchSteps=0,this._pathImpossible=!1,this._closedList[this._currNode.id]=this._currNode,!this.map.isReachable(this._moveObject,t,n)||!this.map.isReachable(this._moveObject,r,o)?(this._searchCompleted=!0,this._pathImpossible=!0):this._srcLoc.equals(this._dstLoc)&&(this._searchCompleted=!0,this._foundPath=!0,this._outPath=[this._dstLoc])},e.prototype.listClosedList=function(){if(this._closedList){var e=[];for(var t in this._closedList)e.push(this._closedList[t].clone());return e}return null},e.prototype.findPath=function(t){if(this._searchCompleted)return;++this._searchCounts,l=t;while(!this._foundPath&&t>0){--t;if(this._openSize>0){if(!this._currNode){c=e.IMPOSSIBLE_COST,h=null;for(d in this._openList)o=this._openList[d],o.fCost<c?(c=o.fCost,h=[o]):o.fCost==c&&h.push(o);h&&(r.ArrayUtil.sortNumericOn(h,"gCost",!1),this._currNode=h[0])}this._closedList[this._currNode.id]=this._currNode,delete this._openList[this._currNode.id],--this._openSize}if(!this._currNode){this._searchCompleted=!0,this._pathImpossible=!0;break}for(var n=0,v=this._directions;n<v.length;n++){p=v[n],a=this._currNode.x+p.x,f=this._currNode.y+p.y,u=this.map.getPassCost(this._moveObject,this._currNode.x,this._currNode.y,a,f);if(u==e.IMPOSSIBLE_COST)continue;o=new s(this._currNode,a,f);if(this._closedList.hasOwnProperty(o.id))continue;if(this.map.isReachedDestination(this._moveObject,o.x,o.y,this._dstLoc.x,this._dstLoc.y)){this._currNode=o,this._foundPath=!0;break}o.gCost=this._currNode.gCost+u,o.fCost=o.gCost+this.map.estimateCost(this._moveObject,this.enableDiagonal,a,f,this._dstLoc.x,this._dstLoc.y),this._openList.hasOwnProperty(o.id)?o.gCost<this._openList[o.id].gCost?this._openList[o.id]=o:o=null:(this._openList[o.id]=o,++this._openSize)}this._foundPath||(this._currNode=null)}this._searchSteps+=l-t;if(this._foundPath){o=this._currNode;while(o.parent)p=new i.PointInt(o.x,o.y),this._outPath.unshift(p),o=o.parent;this._searchCompleted=!0}},e.IMPOSSIBLE_COST=Number.MAX_SAFE_INTEGER,e.ORTHOGONAL_DIRECTIONS=[new i.PointInt(1,0),new i.PointInt(-1,0),new i.PointInt(0,1),new i.PointInt(0,-1)],e.DIAGONAL_DIRECTIONS=[new i.PointInt(1,1),new i.PointInt(1,-1),new i.PointInt(-1,1),new i.PointInt(-1,-1)],e}(),e("TiledAStar",v),m=function(){function e(){}return e}(),e("IMoveObject",m)}}}),System.register("Base/statemachines/StateMachine",[],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s=t&&t.id,o=t&&t.id;return{setters:[],execute:function(){r=function(e){function t(t){var n=e.call(this)||this;return n._invalidState=t,n._currentState=n._invalidState,n}return n(t,e),t.prototype.dispose=function(){this.state=this._invalidState,this.removeAllListeners()},t.prototype.checkNextState=function(e){return e||this._invalidState},t.prototype.setInvalidState=function(){this.state=this._invalidState},t.prototype.isInvalidState=function(){return this._currentState==this._invalidState},Object.defineProperty(t.prototype,"state",{get:function(){return this._currentState},set:function(e){var t=this._currentState;this._currentState=this._invalidState,t.exit(e),this._invalidState==this._currentState&&(this._currentState=this.checkNextState(e),this._currentState.enter(t))},enumerable:!0,configurable:!0}),t}(PIXI.utils.EventEmitter),e("StateMachine",r),i=function(e){function t(t){var n=e.call(this,t)||this;return n.stateMap={},n.addState(n.state),n}return n(t,e),t.prototype.addState=function(e){this.stateMap[e.name]=e},t.prototype.getState=function(e){return this.stateMap[e]},t.prototype.setState=function(e){return this.state=this.stateMap[e],this.state},t.prototype.setStateIfDifferent=function(e){return this.state.name!=e&&(this.state=this.stateMap[e]),this.state},t.prototype.checkNextState=function(t){if(t&&this.stateMap[t.name]!=t)throw new Error("tried to set a state that is not added in the finiteStateMachine");return e.prototype.checkNextState.call(this,t)},t}(r),e("FiniteStateMachine",i)}}}),System.register("Base/statemachines/BindedStateMachine",[],function(e,t){"use strict";var n,r,i,s=t&&t.id,o=t&&t.id;return{setters:[],execute:function(){n="-invalid+",r=function(){function e(e){this.bindTarget=e,this.stateMap={},this._stateName=null}return e.prototype.dispose=function(){this.state=null,this.stateMap={}},e.prototype.addState=function(e,t,n,r){this.stateMap[e]=new i(t,n,r)},Object.defineProperty(e.prototype,"state",{get:function(){return this._stateName},set:function(e){var t=this.stateMap[this._stateName],r=this._stateName;this._stateName=n,t&&t.exit&&t.exit.apply(this.bindTarget);if(this._stateName==n){this._stateName=e;var i=this.stateMap[this._stateName];i?i.enter&&i.enter.apply(this.bindTarget):this._stateName=null}},enumerable:!0,configurable:!0}),e}(),e("BindedStateMachine",r),i=function(){function e(e,t,n){this.enter=e,this.process=t,this.exit=n}return e}()}}}),System.register("Base/pixis/cameras/GameCamera3D",["./../../utils/MathUtil","./../../geom/Point","./../../geom/Vector3D","./../../geom/Rectangle","./../../utils/ArrayUtil"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a,f=t&&t.id,l=t&&t.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e}],execute:function(){a=function(e){function t(t,n){var r=e.call(this)||this;return r._gameRoot=t,r._unscaledDepth=n,r._rotationRadiansZ=0,r._screenCenter=new i.Point,r._focusShift=new s.Vector3D,r._followSpeed=.5,r._followRadiansSpeed=0,r._showAll=!1,r._arrangeChildIndex=!0,r}return n(t,e),Object.defineProperty(t.prototype,"arrangeChildIndex",{get:function(){return this._arrangeChildIndex},set:function(e){this._arrangeChildIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zOrder",{get:function(){return this.z},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showAll",{get:function(){return this._showAll},set:function(e){this._showAll=e},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._mask&&(this._mask.destroyed||this._mask.destroy(),this._mask=null)},t.prototype.setViewport=function(e,t){this._viewport=e,this._screenCenter.x=-this._viewport.x+this._viewport.width/2,this._screenCenter.y=-this._viewport.y+this._viewport.height/2,t?(this._mask?this._mask.clear():this._mask=new PIXI.Graphics,this._mask.beginFill(16777215,1),this._mask.drawRect(0,0,e.width,e.height)):this._mask&&(this._mask.destroyed||this._mask.destroy(),this._mask=null)},t.prototype.getViewport=function(){return new o.Rectangle(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)},Object.defineProperty(t.prototype,"position",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayObject",{get:function(){return this._gameRoot},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationRadians",{get:function(){return this._rotationRadiansZ},set:function(e){this._rotationRadiansZ=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unscaledDepth",{get:function(){return this._unscaledDepth},set:function(e){this._unscaledDepth=e},enumerable:!0,configurable:!0}),t.prototype.setFollowSpeed=function(e){this._followSpeed=e},t.prototype.getFollowSpeed=function(){return this._followSpeed},t.prototype.setFollowRadiansSpeed=function(e){return this._followRadiansSpeed=e},t.prototype.getFollowRadiansSpeed=function(){return this._followRadiansSpeed},t.prototype.setFocus=function(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),this._focusObject=e,this._focusShift.x=t,this._focusShift.y=n,this._focusShift.z=r},t.prototype.getFocus=function(){return this._focusObject},t.prototype.setScreenPosition=function(e,t,n,r,i){throw new Error("Error: trying to setScreenPosition on a GameCamera3D.")},t.prototype.notifyBehindCamera=function(e){},t.prototype.notifyOutOfSight=function(e){},t.prototype.notifyInSight=function(e){},Object.defineProperty(t.prototype,"visible",{get:function(){return this._gameRoot.visible},set:function(e){this._gameRoot.visible=e},enumerable:!0,configurable:!0}),t.prototype.getScale=function(e){return this._unscaledDepth/(e-this.z)},t.prototype.getPositionFromScreen=function(e,t,n){var r=new i.Point(e-this._screenCenter.x,t-this._screenCenter.y);return r.rotate(this._rotationRadiansZ),new s.Vector3D(this.x+r.x/n,this.y+r.y/n,this.z+this._unscaledDepth/n)},t.prototype.getScreenPosition=function(e,t,n){e-=this.x,t-=this.y,n-=this.z;if(this._rotationRadiansZ){var r=new i.Point(e,t);r.rotate(-this._rotationRadiansZ),e=r.x,t=r.y}n==0&&(n=1e-6);var o=this._unscaledDepth/n;return new s.Vector3D(this._screenCenter.x+e*o,this._screenCenter.y+t*o,o)},t.prototype.updateInstantly=function(){var e=this._followSpeed;this._followSpeed=1,this.update(),this._followSpeed=e},t.prototype.update=function(){this._focusObject&&(this.position.followTarget(this._focusObject.vector.add(this._focusShift),this._followSpeed,1),this._followRadiansSpeed&&(this._rotationRadiansZ=r.MathUtil.radiansFollowTarget(this._rotationRadiansZ,this._focusObject.rotationRadians,this._followSpeed)))},t.prototype.updateCameraObjects=function(e){var t=[],n=new i.Point,r,s,a,f,l=new o.Rectangle(0,0,this._viewport.width,this._viewport.height);for(var c=0,h=e;c<h.length;c++){var p=h[c];n.x=p.vector.x-this.position.x,n.y=p.vector.y-this.position.y,r=p.vector.z-this.position.z,a=p.displayObject,f=!1,this._rotationRadiansZ&&n.rotate(-this._rotationRadiansZ);if(r>0){s=this._unscaledDepth/r,n.x=this._screenCenter.x+n.x*s,n.y=this._screenCenter.y+n.y*s,p.setScreenPosition(this,n.x,n.y,p.rotationRadians-this._rotationRadiansZ,s);if(a&&a.visible){if(this._showAll)f=!0;else{var d=a.getBounds(null);d.x=d.x*a.scale.x+n.x,d.y=d.y*a.scale.y+n.y,d.width*=a.scale.x,d.height*=a.scale.y,f=l.intersects(d)}f?(a.parent!=this._gameRoot&&this._arrangeChildIndex&&this._gameRoot.addChild(a),t.push(p),p.notifyInSight(this)):p.notifyOutOfSight(this)}}else p.notifyBehindCamera(this);!f&&this._arrangeChildIndex&&a.parent==this._gameRoot&&this._gameRoot.removeChild(a)}if(this._arrangeChildIndex){u.ArrayUtil.sortNumericOn(t,"zOrder",!1);var v=-1;for(var m=0,g=t;m<g.length;m++){var p=g[m];this._gameRoot.setChildIndex(p.displayObject,++v)}}this._mask&&this._mask.parent!=this._gameRoot&&(this._gameRoot.addChild(this._mask),this._gameRoot.mask=this._mask)},t}(s.Vector3D),e("GameCamera3D",a)}}}),System.register("Base/pixis/cameras/GameCamera",["./../../System","./../../utils/MathUtil","./../../geom/Rectangle","./../../geom/Point"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a=t&&t.id,f=t&&t.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e}],execute:function(){u=function(e){function t(t,n){var r=e.call(this)||this;return r._width=t,r._height=n,r._position=new o.Point,r._rectNeedUpdate=!0,r._zoom=1,r._goStaticThreshold=0,r._focusPoint=new o.Point,r._focusShift=new o.Point,r._followRate=.5,r._followSpeedMax=32,r._shakeEndTime=0,r._shakeDuration=0,r._shakeShift=new o.Point,r._startPos=new o.Point,r._rect=new s.Rectangle(0,0,t,n),r._cameraArea=new s.Rectangle(0,0,t,n),r._gameArea=new s.Rectangle(-1e6,-1e6,2e6,2e6),r.setSize(t,n),r}return n(t,e),t.prototype.setSize=function(e,t){this._width=e,this._height=t,this._widthHalf=e/2,this._heightHalf=t/2,this._rectNeedUpdate=!0,this.updateCameraArea()},Object.defineProperty(t.prototype,"roundPosition",{get:function(){return this._roundPosition},set:function(e){this._roundPosition=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"followRate",{get:function(){return this._followRate},set:function(e){this._followRate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"followSpeedMax",{get:function(){return this._followSpeedMax},set:function(e){this._followSpeedMax=e},enumerable:!0,configurable:!0}),t.prototype.setGameArea=function(e,t,n,r){this._gameArea=new s.Rectangle(e,t,n,r),this.updateCameraArea()},Object.defineProperty(t.prototype,"goStaticThreshold",{get:function(){return this._goStaticThreshold},set:function(e){this._goStaticThreshold=e},enumerable:!0,configurable:!0}),t.prototype.setFocus=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=0),this._focusObject=e,this._focusShift.set(t,n)},Object.defineProperty(t.prototype,"focus",{get:function(){return this._focusObject},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._position.x},set:function(e){this._position.x=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._position.y},set:function(e){this._position.y=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoom",{get:function(){return this._zoom},set:function(e){this._zoom=e,this.updateCameraArea(),this.gameRoot=this.gameRoot},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!0,configurable:!0}),t.prototype.getGameAreaByPosition=function(e){return this.gameArea},Object.defineProperty(t.prototype,"gameArea",{get:function(){return this._gameArea},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraArea",{get:function(){return this._cameraArea},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameRoot",{get:function(){return this._gameRoot},set:function(e){this._gameRoot=e,this._gameRoot&&this._gameRoot.scale.set(this._zoom,this._zoom)},enumerable:!0,configurable:!0}),t.prototype.gameToScreen=function(e,t){return new o.Point(e+this._gameRoot.x,t+this._gameRoot.y)},t.prototype.screenToGamePosition=function(e,t){return new o.Point(e-this._gameRoot.x,t-this._gameRoot.y)},t.prototype.updateCameraArea=function(){this._cameraArea.x=this._gameArea.x+this._widthHalf/this._zoom,this._cameraArea.y=this._gameArea.y+this._heightHalf/this._zoom,this._cameraArea.width=this._gameArea.width-this._width/this._zoom,this._cameraArea.height=this._gameArea.height-this._height/this._zoom,this._cameraArea.width<this._goStaticThreshold&&(this._cameraArea.x=Math.round((this._cameraArea.left+this._cameraArea.right)/2),this._cameraArea.width=0),this._cameraArea.height<this._goStaticThreshold&&(this._cameraArea.y=Math.round((this._cameraArea.top+this._cameraArea.bottom)/2),this._cameraArea.height=0)},Object.defineProperty(t.prototype,"rect",{get:function(){return this._rectNeedUpdate&&(this._rect.x=this._position.x-this._widthHalf/this._zoom,this._rect.y=this._position.y-this._heightHalf/this._zoom,this._rect.width=this._width/this._zoom,this._rect.height=this._height/this._zoom,this._rectNeedUpdate=!1),this._rect},enumerable:!0,configurable:!0}),t.prototype.restrictPosition=function(e){e.x=Math.max(this._cameraArea.left,Math.min(this._cameraArea.right,e.x)),e.y=Math.max(this._cameraArea.top,Math.min(this._cameraArea.bottom,e.y))},t.prototype.updateByTime=function(e){this._preUpdate(),this._followByTime(e),this._postUpdate()},t.prototype._followByTime=function(e){var t=3;while(t--){this._startPos.copyFrom(this._position),this._follow();if(e<33){i.MathUtil.pointFollowTarget(this._startPos,this._position,e/33.33),this._position.copyFrom(this._startPos);break}if(!(e>34))break;e-=33.33}},t.prototype._follow=function(){i.MathUtil.pointFollowTarget(this._position,this._focusPoint,this._followRate,1,this._followSpeedMax)},t.prototype.updateInstantly=function(){var e=this.followRate,t=this.followSpeedMax;this.followRate=1,this.followSpeedMax=Number.MAX_SAFE_INTEGER,this.update(),this.followRate=e,this.followSpeedMax=t},t.prototype.update=function(){this._preUpdate(),this._follow(),this._postUpdate()},t.prototype._preUpdate=function(){this._focusObject?(this._focusPoint.x=this._focusObject.x+this._focusShift.x,this._focusPoint.y=this._focusObject.y+this._focusShift.y,this.restrictPosition(this._focusPoint)):(this._focusPoint.x=this._position.x,this._focusPoint.y=this._position.y)},t.prototype._postUpdate=function(){this.restrictPosition(this._position),this._shakeEndTime>0&&(r.time()>this._shakeEndTime?this._shakeEndTime=0:(this._position.x+=this._shakeShift.x,this._position.y+=this._shakeShift.y,this._cameraArea.width>0&&this._cameraArea.height>0&&this.restrictPosition(this._position),this.updateShake(this._shakeEndTime-r.time()))),this._gameRoot&&(this._gameRoot.position.set(this._widthHalf-this._position.x*this._zoom,this._heightHalf-this._position.y*this._zoom),this._roundPosition&&this._gameRoot.position.set(Math.round(this._gameRoot.x),Math.round(this._gameRoot.y))),this._rectNeedUpdate=!0},t.prototype.shake=function(e,t){this._shakeDuration=t,this._shakeEndTime=r.time()+this._shakeDuration;var n=Math.random()*i.MathUtil.TWO_PI;this._shakeShift.x=Math.cos(n)*e,this._shakeShift.y=Math.sin(n)*e},t.prototype.updateShake=function(e){this._shakeShift.rotate(i.MathUtil.HALF_PI+Math.random()*Math.PI),e<100&&this._shakeShift.scale(.8)},t.prototype.checkVisibility=function(e){return this.rect.intersects(e)},t}(PIXI.utils.EventEmitter),e("GameCamera",u)}}}),System.register("Base/utils/NormalDistribution",["./RandomGenerator"],function(e,t){"use strict";var n,r,i=t&&t.id,s=t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(e,t){this.mean=e,this.deviation=t}return e.prototype.clone=function(){return new e(this.mean,this.deviation)},e.prototype.toJson=function(){return{m:this.mean,d:this.deviation}},e.fromJson=function(t){return t&&new e(t.m,t.d)},e.prototype.random=function(e){e=e||n.systemRandomGenerator;var t,r,i;do t=e.next()*2-1,r=e.next()*2-1,i=t*t+r*r;while(i>=1||i==0);return i=Math.sqrt(-2*Math.log(i)/i),t*i*this.deviation+this.mean},e.prototype.scale=function(e){this.mean*=e,this.deviation*=e},e.prototype.toString=function(){return JSON.stringify(this.toJson())},e.fromString=function(t){try{return e.fromJson(JSON.parse(t))}catch(n){return console.error("Error: NormalDistribution.fromString(): Bad format: "+t),null}},e}(),e("NormalDistribution",r)}}}),System.register("Base/geom/LineIntersection",["./Point"],function(e,t){"use strict";var n,r,i=t&&t.id,s=t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(e,t){this._line1=e,this._line2=t,this._u1=Number.NaN,this._u2=Number.NaN,this._uDenominator=Number.NaN,this._includedRadians=Number.NaN}return Object.defineProperty(e.prototype,"line1",{get:function(){return this._line1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"line2",{get:function(){return this._line2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uDenominator",{get:function(){return isNaN(this._uDenominator)&&(this._uDenominator=this._line2.vector.y*this._line1.vector.x-this._line2.vector.x*this._line1.vector.y),this._uDenominator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"u1",{get:function(){return isNaN(this._u1)&&(this._u1=(this._line2.vector.x*(this._line1.point1.y-this._line2.point1.y)-this._line2.vector.y*(this._line1.point1.x-this._line2.point1.x))/this.uDenominator),this._u1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"u2",{get:function(){return isNaN(this._u2)&&(this._u2=(this._line1.vector.x*(this._line1.point1.y-this._line2.point1.y)-this._line1.vector.y*(this._line1.point1.x-this._line2.point1.x))/this.uDenominator),this._u2},enumerable:!0,configurable:!0}),e.prototype.isParallel=function(){return this.uDenominator==0},e.prototype.isIntersected=function(){return this.isParallel()?!1:this._line1.finite&&(this.u1>1||this.u1<0)?!1:this._line2.finite&&(this.u2>1||this.u2<0)?!1:!0},Object.defineProperty(e.prototype,"intersection",{get:function(){return this.isIntersected()?new n.Point(this._line1.point1.x+this.u1*this._line1.vector.x,this._line1.point1.y+this.u1*this._line1.vector.y):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"includedRadians",{get:function(){return isNaN(this._includedRadians)&&(this._includedRadians=Math.acos(this._line1.vector.dot(this._line2.vector)/(this._line1.vector.length*this._line2.vector.length))),this._includedRadians},enumerable:!0,configurable:!0}),e}(),e("LineIntersection",r)}}}),System.register("Base/utils/RandomGenerator",["./ArrayUtil"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a=t&&t.id,f=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(){function e(e){this.seed=e,this.seed=Math.abs(e),this.initSeed=this.seed}return e.prototype.reset=function(){this.seed=this.initSeed},e.prototype.next=function(){return this.seed==0?(this.seed=7483647,0):(this.seed=this.seed*16807%2147483647,this.seed/2147483647)},e.prototype.nextBetween=function(e,t){if(e>t){var n=t;t=e,e=n}return e+this.next()*(t-e)},e.prototype.nextInt=function(e){var t=this.next();return Math.floor((e+1)*t)},e.prototype.nextIntBetween=function(e,t){if(e>t){var n=t;t=e,e=n}return e+this.nextInt(t-e)},e.prototype.getArrayRandomElement=function(e,t){if(e&&e.length){var n=this.nextInt(e.length-1),r=e[n];return t&&e.splice(n,1),r}return null},e.prototype.randomizeArray=function(e){var t=e.length;for(var n=0;n<t;++n)r.ArrayUtil.swapElementsAt(e,n,this.nextInt(t-1))},e.prototype.addUniqueElementToArrayAtRandomIndex=function(e,t){if(e.indexOf(t)!=-1)return-1;var n=this.nextInt(e.length);return e.splice(n,0,t),n},e.prototype.generateRandomString=function(e,t){var n="A".charCodeAt(0),r="";if(t){var i=void 0;while(r.length<e)i=this.nextInt(34),i<26?r+=String.fromCharCode(n+i):r+=i-25}else while(r.length<e)r+=String.fromCharCode(n+this.nextInt(25));return r},e}(),e("RandomGenerator",i),s=function(e){function t(){return e.call(this,1)||this}return n(t,e),t.prototype.next=function(){return Math.random()},t}(i),e("SystemRandomGenerator",s),o=function(e){function t(t,n){var r=this,i=MD5.hash(t+"+"+n+":"),s=8,o=Math.floor(Math.abs(n))%(i.length-s),u=parseInt(i.substr(o,s),36);return r=e.call(this,u)||this,r}return n(t,e),t}(i),e("MD5RandomGenerator",o),e("systemRandomGenerator",u=new s)}}}),System.register("Base/utils/RangedValue",["./RandomGenerator"],function(e,t){"use strict";var n,r,i=t&&t.id,s=t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(e,t){this._min=Math.min(e,t),this._max=Math.max(e,t)}return e.fromString=function(t){if(t){var n=t.split(",");if(n.length){var r=parseFloat(n[0]);if(n.length==1)return new e(r,r);var i=parseFloat(n[1]);return new e(r,i)}}return new e(0,0)},e.prototype.reset=function(e,t){this._min=Math.min(e,t),this._max=Math.max(e,t)},e.prototype.toString=function(){return this._min==this._max?this._min.toString():this._min+","+this._max},Object.defineProperty(e.prototype,"min",{get:function(){return this._min},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this._max-this._min},enumerable:!0,configurable:!0}),e.prototype.calcValueInRange=function(e){return e<=0?this._min:e>=1?this._max:this._min+e*this.range},e.prototype.calcPercentOfValue=function(e){return e<=this._min?0:e>=this._max?1:(e-this._min)/this.range},e.prototype.getRandomInRange=function(e){return e||(e=new n.SystemRandomGenerator),e.nextBetween(this._min,this._max)},e.prototype.isValueInRange=function(e){return e>=this._min&&e<=this._max},e.prototype.restrictValue=function(e){return Math.max(this._min,Math.min(this._max,e))},e}(),e("RangedValue",r)}}}),System.register("Base/pixis/interactive/ScrollControl",["./../../utils/ArrayUtil","./Button","./../../utils/MathUtil","./../../utils/RangedValue","./../../System"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a,f=t&&t.id,l=t&&t.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e}],execute:function(){a=function(e){function t(t){var n=e.call(this)||this;return n._scrollSpeed=0,n._lastScrollTime=0,n._scrollButtonInverse=!1,n._isScrollingPreventOtherTouch=!1,n._buttonsOfScrollingCheck=[],n._isScrolling=!1,n._onScrollBar=!1,n._disposed=!1,n.interactive=!0,n._touchRect=t,n.createMask(),n._scrollNode=new PIXI.Container,n.addChild(n._scrollNode),n.hitArea=t,n}return n(t,e),t.prototype.createMask=function(){var e=new PIXI.Graphics;e.beginFill(16711680,.5),e.drawRect(this._touchRect.x,this._touchRect.y,this._touchRect.width,this._touchRect.height),e.endFill(),this.addChild(e),this.mask=e},Object.defineProperty(t.prototype,"scrollButtonInverse",{get:function(){return this._scrollButtonInverse},set:function(e){this._scrollButtonInverse=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentScroll",{get:function(){return this._currentScroll},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.offTouchTarget(),this._touchTarget=null,u.removeUpdateFunction(this,this.scrollUpdate),this.removeChildren(),this._scrollNode.removeChildren(),this.parent&&this.parent.removeChild(this),this._disposed=!0},Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollNode",{get:function(){return this._scrollNode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollButton",{get:function(){return this._scrollButton},enumerable:!0,configurable:!0}),t.prototype.initScrollButton=function(e,t,n){this._scrollButton=e,this._scrollButtonRange=new o.RangedValue(t,n)},t.prototype.setScrollRange=function(e,t,n){this._scrollRange=new o.RangedValue(e,t),this.setCurrentScroll(this._scrollRange.restrictValue(n),!0)},Object.defineProperty(t.prototype,"scrollRange",{get:function(){return this._scrollRange},enumerable:!0,configurable:!0}),t.prototype.offTouchTarget=function(){this._touchTarget&&this._touchTarget.on("mousedown",this.onDragStart,this).on("touchstart",this.onDragStart,this).on("mouseup",this.onDragEnd,this).on("mouseupoutside",this.onDragEnd,this).on("touchend",this.onDragEnd,this).on("touchendoutside",this.onDragEnd,this).on("mousemove",this.onDragMove,this).on("touchmove",this.onDragMove,this),u.removeUpdateFunction(this,this.scrollUpdate)},t.prototype.start=function(e){e===void 0&&(e=null),this.offTouchTarget(),this._touchTarget=e?e:this,this._touchTarget.on("mousedown",this.onDragStart,this).on("touchstart",this.onDragStart,this).on("mouseup",this.onDragEnd,this).on("mouseupoutside",this.onDragEnd,this).on("touchend",this.onDragEnd,this).on("touchendoutside",this.onDragEnd,this).on("mousemove",this.onDragMove,this).on("touchmove",this.onDragMove,this),u.addUpdateFunction(this,this.scrollUpdate),this.emit(t.EVENT.SCROLL,this.scrollNodeValue)},t.prototype.hitTest=function(e){var t=null;if(this.visible&&this._touchRect.contains(e.x,e.y)){var n=this.toGlobal(e);t=u.pixi.hitTest(n,this);if(!t)return this}return t},t.prototype.isScrollingPreventOtherTouch=function(){return this._isScrollingPreventOtherTouch},t.prototype.isScrolling=function(){return this._isScrolling},t.prototype.getPosValue=function(e){return e.y},t.prototype.onDragStart=function(e){var t=e.data.getLocalPosition(this);this.startScroll(t,this.isOnScrollBar(this.toGlobal(t)))},t.prototype.onDragMove=function(e){if(!this._scrollMouseStart)return;var t=e.data.getLocalPosition(this);Math.abs(this.getPosValue(this._scrollMouseStart)-this.getPosValue(this._scrollTouch))>3&&!this._isScrollingPreventOtherTouch&&(this.scrollNode.interactive=!1,this._isScrollingPreventOtherTouch=!0,this.makeUpStateOfButtonsOfScrolling());if(this._onScrollBar){var n=this.getPosValue(t)-this.getPosValue(this._scrollTouch);n*=this._scrollRange.range/this._scrollButtonRange.range,this.setCurrentScroll(this._scrollRange.restrictValue(this._scrollStartValue-n),!0)}else{var r=this.getPosValue(t)-this.getPosValue(this._scrollTouch);this.setCurrentScroll(this.scrollNodeValue+r,!0),this._scrollTouch=t,r/=Math.max(1,-this._lastScrollTime),r=r>0?Math.sqrt(r):-Math.sqrt(-r),r=Math.max(-20,Math.min(20,r)),this._scrollSpeed=s.MathUtil.numberFollowTarget(this._scrollSpeed,r,.3,1)}this._lastScrollTime=u.time()},t.prototype.onDragEnd=function(e){this.stopScroll()},t.prototype.isOnScrollBar=function(e){return this._scrollButton&&this._scrollButton.parent?!!u.pixi.hitTest(e,this._scrollButton):!1},t.prototype.setCurrentScroll=function(e,t){this._currentScroll=this._scrollRange.restrictValue(e),t&&this.setScrollDisplay(e,1)},Object.defineProperty(t.prototype,"scrollNodeValue",{get:function(){return this._scrollNode.y},set:function(e){this._scrollNode.y=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollButtonValue",{get:function(){return this._scrollButton?this._scrollButton.y:Number.NaN},set:function(e){this._scrollButton&&(this._scrollButton.y=e)},enumerable:!0,configurable:!0}),t.prototype.setScrollDisplay=function(e,n){n===void 0&&(n=.3);var r=this._isScrolling;this._isScrolling=e!=this.scrollNodeValue,this._isScrolling&&(this.scrollNodeValue=s.MathUtil.numberFollowTarget(this.scrollNodeValue,e,n,1)),this._scrollButtonRange&&(this.scrollButtonInverse?this._scrollRange.min==this._scrollRange.max?this.scrollButtonValue=this._scrollButtonRange.max:this.scrollButtonValue=this._scrollButtonRange.calcValueInRange(this._scrollRange.calcPercentOfValue(this.scrollNodeValue)):this._scrollRange.min==this._scrollRange.max?this.scrollButtonValue=this._scrollButtonRange.min:this.scrollButtonValue=this._scrollButtonRange.calcValueInRange(1-this._scrollRange.calcPercentOfValue(this.scrollNodeValue))),this._isScrolling?this.emit(t.EVENT.SCROLL,this.scrollNodeValue):r&&this.emit(t.EVENT.SCROLLING_STOPPED)},t.prototype.startScroll=function(e,n){this._onScrollBar=n,this._isScrollingPreventOtherTouch=!1,this._scrollMouseStart=e.clone(),this._scrollTouch=e,this._scrollSpeed=0,this._currentScroll=this.scrollNodeValue,this._scrollStartValue=this._currentScroll,this._lastScrollTime=u.time(),this.emit(t.EVENT.SCROLL_START)},t.prototype.stopScroll=function(){this.scrollNode.interactive=!0,this._isScrollingPreventOtherTouch=!1,this._scrollTouch=null,this._scrollMouseStart=null,this.emit(t.EVENT.SCROLL_END)},t.prototype.scrollUpdate=function(e){if(this.visible&&this.parent&&!this._onScrollBar){if(this._scrollSpeed!=0){var t=.01;this._scrollSpeed>0?(this._scrollSpeed-=t*e,this._scrollSpeed<=0&&(this._scrollSpeed=0)):(this._scrollSpeed+=t*e,this._scrollSpeed>=0&&(this._scrollSpeed=0)),this._scrollTouch||this.setCurrentScroll(this._currentScroll+this._scrollSpeed*e,!1)}this._scrollTouch||this.setScrollDisplay(this._currentScroll)}},t.prototype.addButtonOfScrollingCheck=function(e){r.ArrayUtil.addUniqueElement(this._buttonsOfScrollingCheck,e)&&e.on(i.Button.EVENT.STATE_CHANGE,function(t){t==i.Button.STATE.DOWN&&r.ArrayUtil.removeElement(this._buttonsOfScrollingCheck,e)&&this._buttonsOfScrollingCheck.unshift(e)})},t.prototype.makeUpStateOfButtonsOfScrolling=function(){for(var e=0,t=this._buttonsOfScrollingCheck;e<t.length;e++){var n=t[e];if(n.state!=i.Button.STATE.DOWN)break;n.state=i.Button.STATE.OUT}},t.EVENT={SCROLL:"scroll",SCROLLING_STOPPED:"scrollingStopped",SCROLL_START:"scrollStart",SCROLL_END:"scrollEnd"},t}(PIXI.Container),e("ScrollControl",a)}}}),System.register("Base/geom/Color",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){n=function(){function e(e,t){e===void 0&&(e=0),t===void 0&&(t=1),this.color=e,this.alpha=t}return e.prototype.toString=function(){return this.alpha<1?this.color.toString(16)+","+this.alpha:this.color.toString(16)},e.fromString=function(t){var n=t.split(",");return n.length==1?new e(parseInt(n[0],16)):n.length==2?new e(parseInt(n[0],parseInt(n[1]))):new e},Object.defineProperty(e.prototype,"red",{get:function(){return this.color>>16},set:function(e){this.color=this.color&65535|(e&255)<<16},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"green",{get:function(){return(this.color&65280)>>8},set:function(e){this.color=this.color&16711935|(e&255)<<8},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blue",{get:function(){return this.color&255},set:function(e){this.color=this.color&16776960|e&255},enumerable:!0,configurable:!0}),e.prototype.setRGB=function(e,t,n){this.color=(e&255)<<16|(t&255)<<8|n&255},e.prototype.clone=function(){return new e(this.color,this.alpha)},e.prototype.safeScaledByte=function(e,t){return Math.min(255,Math.max(0,e*t))},e.prototype.mix=function(e,t,n,r){var i=1-r;this.setRGB(this.safeScaledByte(this.red,i)+this.safeScaledByte(e,r),this.safeScaledByte(this.green,i)+this.safeScaledByte(t,r),this.safeScaledByte(this.blue,i)+this.safeScaledByte(n,r))},e.prototype.tintMatrix=function(e,t){t===void 0&&(t=!1),e=Math.min(1,Math.max(0,e));var n=1-e,r=[n,0,0,0,this.red*e,0,n,0,0,this.green*e,0,0,n,0,this.blue*e,0,0,0,this.alpha,0];return t&&(r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255),r},e.prototype.grayoutMatrix=function(e,t,n){n===void 0&&(n=!1),e=Math.min(1,Math.max(0,e)),t=Math.min(1,Math.max(0,t));var r=1-e,i=1/3,s=1-(1-i)*t,o=r*s,u=r*t*i,a=e*s,f=[o,u,u,0,Math.round(this.red*a),u,o,u,0,Math.round(this.green*a),u,u,o,0,Math.round(this.blue*a),0,0,0,this.alpha,0];return n&&(f[4]/=255,f[9]/=255,f[14]/=255,f[19]/=255),f},e}(),e("Color",n)}}}),System.register("Base/geom/Line",["./Rectangle","./Point"],function(e,t){"use strict";var n,r,i,s=t&&t.id,o=t&&t.id;return{setters:[function(e){n=e},function(e){r=e}],execute:function(){i=function(){function e(e,t,n){this._point1=e,this._point2=t,this._finite=n}return Object.defineProperty(e.prototype,"point1",{get:function(){return this._point1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"point2",{get:function(){return this._point2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vector",{get:function(){return this._vector||(this._vector=this._point2.sub(this._point1)),this._vector},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this._point1,this._point2,this._finite)},Object.defineProperty(e.prototype,"finite",{get:function(){return this._finite},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Line[("+this._point1+"),("+this._point2+")]"},e.prototype.distanceTo=function(e){return Math.abs((this.vector.x*(this._point1.y-e.y)-this.vector.y*(this._point1.x-e.x))/this.vector.length)},e.prototype.projectionOf=function(e,t){t===void 0&&(t=!1);var n=new r.Point(e.x-this._point1.x,e.y-this._point1.y),i=this.vector.clone();i.normalize();var s=i.dot(n);i.scale(s);var o=this._point1.add(i);if(t&&this.finite)if(this.vector.x==0){if(o.y<Math.min(this._point1.y,this._point2.y)||o.y>Math.max(this._point1.y,this._point2.y))return null}else if(o.x<Math.min(this._point1.x,this._point2.x)||o.x>Math.max(this._point1.x,this._point2.x))return null;return o},e.prototype.normalize=function(e){var t=this.vector.normalize(e);return this._point2.x=this._point1.x+this.vector.x,this._point2.y=this._point1.y+this.vector.y,this._extent=null,t},Object.defineProperty(e.prototype,"extent",{get:function(){return this._extent||(this._extent=new n.Rectangle(Math.min(this._point1.x,this._point2.x),Math.min(this._point1.y,this._point2.y),Math.abs(this.vector.x),Math.abs(this.vector.y))),this._extent},enumerable:!0,configurable:!0}),e.prototype.getPerpendicularLine=function(t){return new e(t,new r.Point(t.x-this.vector.y,t.y+this.vector.x),!1)},e.prototype.intersectsRectangle=function(e){if(e.containsPoint(this._point1)||e.containsPoint(this._point2))return!0;if(!this.extent.intersects(e))return!1;if(this.vector.x==0||this.vector.y==0)return!1;var t=this.vector.y/this.vector.x,n=this._point1.y-t*this._point1.x;return(t*this.extent.left-this.extent.top+n)*(t*this.extent.right-this.extent.bottom+n)<0?!0:(t*this.extent.right-this.extent.top+n)*(t*this.extent.left-this.extent.bottom+n)<0?!0:!1},e.prototype.getX=function(e){if(this.vector.y==0)return Number.NaN;if(this.finite){if(e>this._point1.y&&e>this._point2.y)return Number.NaN;if(e<this._point1.y&&e<this._point2.y)return Number.NaN}return this._point1.x+(e-this._point1.y)*this.vector.x/this.vector.y},e.prototype.getY=function(e){if(this.vector.x==0)return Number.NaN;if(this.finite){if(e>this._point1.x&&e>this._point2.x)return Number.NaN;if(e<this._point1.x&&e<this._point2.x)return Number.NaN}return this._point1.y+(e-this._point1.x)*this.vector.y/this.vector.x},e.prototype.isPointOnRight=function(e){if(e.equals(this._point1))return!1;var t=new r.Point(e.x-this._point1.x,e.y-this._point1.y);return this.vector.getNormal().dot(t)>0},e.prototype.isPointOnLeft=function(e){if(e.equals(this._point1))return!1;var t=new r.Point(e.x-this._point1.x,e.y-this._point1.y);return this.vector.getNormal().dot(t)<0},e.prototype.arePointsOnSameSide=function(e,t){var n=this.vector.getNormal(),r=e.sub(this._point1),i=t.sub(this._point1);return n.dot(r)*n.dot(i)>0},e.prototype.markDirty=function(){this._vector=null,this._extent=null},e}(),e("Line",i)}}}),System.register("Base/geom/Matrix2",["./Point"],function(e,t){"use strict";var n,r,i,s=t&&t.id,o=t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=1e-5,i=function(){function e(e){this.values=e;if(e){while(e.length<4)e.push(0);e.length=4}else e=[0,0,0,0]}return e.prototype.clone=function(){return new e(this.values.slice())},e.prototype.setValues=function(e){var t=this.values;for(var n=0;n<4;++n)t[n]=e[n];return this},e.prototype.reset=function(){var e=this.values;for(var t=0;t<4;++t)e[t]=0;return this},e.prototype.row=function(e){return[this.values[e*2+0],this.values[e*2+1]]},e.prototype.col=function(e){return[this.values[e],this.values[e+2]]},e.prototype.copyFrom=function(e){return this.setValues(e.values)},e.prototype.equals=function(e,t){t===void 0&&(t=r);var n=this.values,i=e.values;for(var s=0;s<4;++s)if(Math.abs(n[s]-i[s])>t)return!1;return!0},e.prototype.setIdentity=function(){return this.setValues([1,0,0,1])},e.prototype.transpose=function(){var e=this.values[1];return this.values[1]=this.values[2],this.values[2]=e,this},Object.defineProperty(e.prototype,"determinant",{get:function(){var e=this.values;return e[0]*e[3]-e[1]*e[2]},enumerable:!0,configurable:!0}),e.prototype.inverse=function(){var e=this.determinant;if(!e)return null;e=1/e;var t=this.values,n=t[0];return t[0]=e*t[3],t[1]*=-e,t[2]*=-e,t[3]=e*n,this},e.prototype.scale=function(e,t){var n=this.values;return n[0]*=e,n[1]*=e,n[2]*=t,n[3]*=t,this},e.prototype.cross=function(t,n){var r=this.values,i=t.values,s=[r[0]*i[0]+r[1]*i[2],r[0]*i[1]+r[1]*i[3],r[2]*i[0]+r[3]*i[2],r[2]*i[1]+r[3]*i[3]];return n?n.setValues(s):new e(s)},e.prototype.crossVector=function(e,t){var r=this.values;return t?t.set(e.x*r[0]+e.y*r[1],e.x*r[2]+e.y*r[3]):t=new n.Point(e.x*r[0]+e.y*r[1],e.x*r[2]+e.y*r[3]),t},e.prototype.rotate=function(e){var t=this.values.slice(),n=this.values,r=Math.sin(e),i=Math.cos(e);return n[0]=t[0]*i+t[1]*r,n[1]=t[0]*-r+t[1]*i,n[2]=t[2]*i+t[3]*r,n[3]=t[2]*-r+t[3]*i,this},e.IDENTITY=new e([1,0,0,1]),e}(),e("Matrix2x2",i)}}}),System.register("Base/geom/Padding",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){n=function(){function e(e){this.left=0,this.right=0,this.top=0,this.bottom=0,e&&Object.assign(this,e)}return e.prototype.copyFrom=function(e){e&&(this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom)},e}(),e("Padding",n)}}}),System.register("Base/utils/Updater",["./../System"],function(e,t){"use strict";var n,r,i=t&&t.id,s=t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(){this._delayFunctionObjects=[],this._updateFunctions=[],this._updateFunctionTargets=[],n.addUpdateFunction(this,this.update),this._filterDelayObjsUpdate=n.addDelayFunction(this,this._filterDelayObjs,1e3)}return e.prototype.dispose=function(){this._filterDelayObjsUpdate.dispose(),n.removeUpdateFunction(this,this.update),this._delayFunctionObjects&&(this._delayFunctionObjects.forEach(function(e){return e.dispose()}),this._delayFunctionObjects=null),this._updateFunctions.length=0,this._updateFunctionTargets.length=0},Object.defineProperty(e.prototype,"disposed",{get:function(){return!this._delayFunctionObjects},enumerable:!0,configurable:!0}),e.prototype.wait=function(e){var t=this;return new Promise(function(n){t.addDelayFunction(null,n,e)})},e.prototype.addDelayFunction=function(e,t,r,i){r===void 0&&(r=0);if(this.disposed)throw Error("This updater is disposed");var s=n.addDelayFunction(e,t,r,i);return this._delayFunctionObjects.push(s),s},e.prototype.addUpdateFunction=function(e,t){if(this.disposed)throw Error("This updater is disposed");var n=this._updateFunctions.indexOf(t);while(n!=-1){if(this._updateFunctionTargets[n]==e)return;n=this._updateFunctions.indexOf(t,n+1)}this._updateFunctions.push(t),this._updateFunctionTargets.push(e)},e.prototype.removeUpdateFunction=function(e,t){var n=this._updateFunctions.indexOf(t);while(n!=-1){if(this._updateFunctionTargets[n]==e){this._updateFunctions[n]=null,this._updateFunctionTargets[n]=null;return}n=this._updateFunctions.indexOf(t,n+1)}},e.prototype._filterDelayObjs=function(){this._filterDelayObjsUpdate=n.addDelayFunction(this,this._filterDelayObjs,1e3),this._delayFunctionObjects=this._delayFunctionObjects.filter(function(e){return!e.disposed})},e.prototype.update=function(e,t){var n=this._updateFunctions.length;for(var r=0;r<n;++r)if(this._updateFunctions[r]){var i=this._updateFunctionTargets[r],s=this._updateFunctions[r];s.call(i,e,t)}else this._updateFunctions.splice(r,1),this._updateFunctionTargets.splice(r,1),--r,--n},e}(),e("Updater",r)}}}),System.register("Base/utils/Version",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){n=function(){function e(e,t,n){this.major=e,this.minor=t,this.patch=n}return e.prototype.isCompatible=function(e){return this.major==e.major},e.prototype.isNewerThan=function(e){return this.major>e.major?!0:this.major<e.major?!1:this.minor>e.minor?!0:this.minor<e.minor?!1:this.patch>e.patch},e.prototype.toString=function(){return[this.major,this.minor,this.patch].join(".")},e.fromString=function(t){var n=t.split(".");return n.length==3?new e(parseInt(n[0]),parseInt(n[1]),parseInt(n[2])):null},e}(),e("Version",n)}}}),System.register("Base/System",["./keyboard/KeyboardManager","./utils/ObjectUtil","./utils/StringUtil","./pixis/Pixi","./physics2d/Physics","./resources/ResourceManager","./utils/ArrayUtil","./utils/HtmlUtil","./utils/NetUtil","./utils/IStorage"],function(e,t){"use strict";function D(e,t){!t&&typeof e=="function"?b.addUpdateFunction(e,null):b.addUpdateFunction(t,e)}function P(e,t){!t&&typeof e=="function"?b.removeUpdateFunction(e,null):b.removeUpdateFunction(t,e)}function H(e,t,n,r){return n===void 0&&(n=0),b.addDelayFunction(e,t,n,r)}function B(e){return e>0?new Promise(function(t){H(null,t,e)}):Promise.resolve()}function j(e,t,n){window.CgWatcher&&window.CgWatcher.add(e,t,n)}function F(e){window.CgWatcher&&window.CgWatcher.remove(e)}function I(){return b.lastFrameTime}function q(){return Date.now()}function R(e){return w.env.indexOf(e)!=-1}function U(){var e=[];for(var t in E.aliasMap)e.push(t);return e}function z(e){if(E.aliasMap[e]){var t=E.aliasMap[e].resourceId;return E.resourceMap[t]}return null}function W(e,t,n){E.aliasMap[e]=t,E.resourceMap[n.id]=n}function X(e,t,n){var r=e.split(".").pop().toLowerCase();if(r=="ts"||r=="tsx")return;S[e]={type:t,url:n}}function V(e,t){var n=z(e);return n?n.url+(t||n.meta.main):""}function J(e){var t=S[e];return t?t.url:""}function K(e,t){return b.linkCSSFile(e,t)}function Q(e,t){var n=t||x+"-instyles",r=document.getElementById(n);return r?r.innerHTML+="\n"+e:(r=document.createElement("style"),r.setAttribute("id",n),r.setAttribute("type","text/css"),document.head.appendChild(r),r.innerHTML=e),r}function G(e,t){return b.loadJSFile(e,t)}function Y(e){e===void 0&&(e=!0),m&&m.showPreloader(!e)}function Z(){m&&m.hidePreloader()}var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M=t&&t.id,_=t&&t.id;return e("addUpdateFunction",D),e("removeUpdateFunction",P),e("addDelayFunction",H),e("wait",B),e("addWatch",j),e("removeWatch",F),e("time",I),e("now",q),e("envIncludes",R),e("listAppResourceAlias",U),e("getAppResource",z),e("overwriteAppResourceAlias",W),e("overwriteAppSource",X),e("getAppResourceFileUrl",V),e("getAppSourceUrl",J),e("linkCSSFile",K),e("addInlineStyles",Q),e("loadJSFile",G),e("showCGPreloader",Y),e("hideCGPreloader",Z),{setters:[function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e},function(e){a=e},function(e){f=e},function(e){l=e},function(e){c=e},function(e){h=e}],execute:function(){p=function(){function e(){}return e}(),d=function(e){function t(t){var n=e.call(this)||this;return n.EVENT={RENDER_REQUEST:"renderRequest",BOOT_COMPLETE:"bootComplete",TWEEN_UPDATE_ERROR:"tweenUpdateError",LIQUIDFUN_READY:"liquidfunReady",ENTER_FRAME:"enterFrame",ENTER_FRAME_END:"enterFrameEnd",ANIMATION_FRAME_ERROR:"animationFrameError"},n.consoleConfig={direction:"bottomTop"},n}return n(t,e),t.prototype.isCordovaApp=function(){return!!window.cordova&&!document.URL.match(/^(http:\/\/|https:\/\/)/)},t.prototype.isTouchDevice=function(){return"ontouchstart"in window.document.documentElement},Object.defineProperty(t.prototype,"devMode",{get:function(){return!E.aliasMap[x]},enumerable:!0,configurable:!0}),t.prototype.configScreenLog=function(e){if(e){var t=e.direction&&e.direction!=this.consoleConfig.direction;t&&(this.consoleConfig.direction=e.direction,e.direction=="topBottom"?this.consoleConfig.style=Object.assign(this.consoleConfig.style||{},{flexDirection:"column"}):this.consoleConfig.style=Object.assign(this.consoleConfig.style||{},{flexDirection:"column-reverse"})),e.style&&(this.consoleConfig.style=Object.assign(this.consoleConfig.style||{},e.style)),this.consoleDiv&&Object.assign(this.consoleDiv.style,this.consoleConfig.style)}},t.prototype.clearScreenLog=function(){if(this.consoleDiv)while(this.consoleDiv.firstChild)this.consoleDiv.removeChild(this.consoleDiv.firstChild)},t.prototype.screenLog=function(e,t){e=l.HtmlUtil.escapeHTMLString(e);var n=document.createElement("span");n.innerHTML=e;if(t!==undefined)if(typeof t=="string")t.charAt(0)=="#"&&(t="#"+l.HtmlUtil.escapeHTMLString(t.substr(1))),n.style.color=t;else if(typeof t=="number"){t=t.toString(16);while(t.length<6)t="0"+t;n.style.color="#"+t}this.consoleDiv||(this.consoleConfig.style=Object.assign({position:"fixed",pointerEvents:"none",zIndex:100001,color:"#aaa",background:"rgba(0,0,0,0.5)",left:0,top:0,bottom:"20px",overflow:"hidden",fontSize:"13px",maxWidth:"100%",wordBreak:"break-word",display:"flex",flexDirection:"column-reverse",placeContent:"flex-end"},this.consoleConfig.style),this.consoleDiv=l.HtmlUtil.createDiv("cgDebugScreenConsole",!0,this.consoleConfig.style)),this.consoleDiv.appendChild(n);while(this.consoleDiv.children.length>100)this.consoleDiv.removeChild(this.consoleDiv.firstChild)},Object.defineProperty(t.prototype,"renderFps",{get:function(){return b.renderFps},set:function(e){b.renderFps=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentFps",{get:function(){return b.currentFps},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxFps",{get:function(){return b.maxFps},set:function(e){b.maxFps=e},enumerable:!0,configurable:!0}),t.prototype.showFps=function(e){this.fpsDiv||(this.fpsDiv=l.HtmlUtil.createDiv("cgDebugFps",!0,{position:"fixed","pointer-events":"none","z-index":100002,color:"white",left:0,bottom:0,"font-size":"12px","text-shadow":"0 0 3px black","user-select":"none"},"CG"),this.updateFpsDiv());if(e)for(var t in e)this.fpsDiv.style[t]=e[t]},t.prototype.hideFps=function(){l.HtmlUtil.removeDiv(this.fpsDiv),this.fpsDiv=null},t.prototype.updateFpsDiv=function(){this.fpsDiv&&(this.fpsDiv.innerText="FPS: "+this.currentFps,H(this,this.updateFpsDiv,1e3))},t.prototype.updateViewport=function(e){b.updateViewport(e)},Object.defineProperty(t.prototype,"timeElapsedThisFrame",{get:function(){return b.timeElapsedThisFrame},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeElapsedSinceLastFrameEnded",{get:function(){return b.timeElapsedSinceLastFrameEnded},enumerable:!0,configurable:!0}),t}(PIXI.utils.EventEmitter),e("System",d),e("system",v=new d(new p)),m=window.CgUtils,g=function(){function e(){var e=this;this._delayFunctionObjects=[],this._updateFunctions=[],this._updateFunctionTargets=[],this._lastFrameTime=0,this._nextRenderTime=0,this._frameStartTime=0,this._frameEndTime=0,this._renderFps=60,this._renderSpf=0,this._minUpdateSpf=1,this._nextUpdateTime=0,this._fpsCalcStartTime=0,this._fpsCaclFrames=0,this._currentFps=0,this._cssLinks={},this.renderFps=this._renderFps,c.NetUtil.getQueryStringValue("autofocus")!="false"&&window.focus(),this._animate_binded=this._animate.bind(this),this._animateId=requestAnimationFrame(function(t){return e._first_animate(t)}),this._keepAlive_binded=this._keepAlive.bind(this),Date.now||(Date.now=function(){return(new Date).getTime()}),document.body.addEventListener("cgBootComplete",function(){v.emit(v.EVENT.BOOT_COMPLETE)})}return e.prototype.linkCSSFile=function(e,t){var n=this,r=this._cssLinks[e];return r?r.loaded?Promise.resolve():new Promise(function(e){r.resolves.push(e)}):new Promise(function(i){var s=document.getElementsByTagName("head")[0],o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=e,o.media="only x",s.appendChild(o),n._cssLinks[e]=r={link:o,loaded:!1,resolves:[i]};var u=function(){r.link.media=t||"all";for(var e=0,n=r.resolves;e<n.length;e++){var i=n[e];i()}r.resolves=[],r.loaded=!0};o.onload=u;if("isApplicationInstalled"in navigator){var a=function(){var e=window.document.styleSheets,t=o.href;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i.href===t){u();return}}setTimeout(a)};a()}})},e.prototype.loadJSFile=function(e,t){return t===void 0&&(t=!0),new Promise(function(n,r){$.ajax({dataType:"script",cache:t,url:e}).done(function(){n()}).fail(function(e){r(e)})})},e.prototype._first_animate=function(e){this._lastFrameTime=e,this._animateId=requestAnimationFrame(this._animate_binded),this._nextRenderTime=e+this._renderSpf,this._nextUpdateTime=e+this._minUpdateSpf,window.CgWatcher&&window.CgWatcher.update&&this.addUpdateFunction(window.CgWatcher.update,window.CgWatcher),this.addUpdateFunction(this.waitForLiquidfunReady,this),setTimeout(this._keepAlive_binded,300)},e.prototype.waitForLiquidfunReady=function(){window.liquidfunReady&&(v.emit(v.EVENT.LIQUIDFUN_READY),this.removeUpdateFunction(this.waitForLiquidfunReady,this))},Object.defineProperty(e.prototype,"renderFps",{get:function(){return this._renderFps},set:function(e){typeof e=="number"&&!isNaN(e)&&(this._renderFps=Math.min(1e3,Math.max(1,e)),this._renderSpf=1e3/this._renderFps)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentFps",{get:function(){return this._currentFps},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxFps",{get:function(){return Math.round(1e3/this._minUpdateSpf)},set:function(e){typeof e=="number"&&!isNaN(e)&&(this._minUpdateSpf=1e3/Math.min(1e3,Math.max(1,e)),this._nextUpdateTime=this._lastFrameTime+this._minUpdateSpf)},enumerable:!0,configurable:!0}),e.prototype.updateFrameRate=function(e){this._fpsCalcStartTime==0?(this._fpsCalcStartTime=e,this._fpsCaclFrames=0):e-this._fpsCalcStartTime>1e3?(this._currentFps=Math.round(this._fpsCaclFrames/(e-this._fpsCalcStartTime)*1e3),this._fpsCalcStartTime=e,this._fpsCaclFrames=0):this._fpsCaclFrames++},e.prototype._animate=function(e){this._animateId=requestAnimationFrame(this._animate_binded);var t=!document.hidden;if(e>=this._nextUpdateTime){this._nextUpdateTime=e+this._minUpdateSpf,this._frameStartTime=Date.now(),this.updateFrameRate(e);var n=e-this._lastFrameTime;this._lastFrameTime=e;try{v.emit(v.EVENT.ENTER_FRAME,n,t),A.update(),TWEEN.TWEEN.update(e),this._callUpdateFunctions(n,t)}catch(r){console.error("ANIMATION_FRAME_ERROR",r),v.emit(v.EVENT.ANIMATION_FRAME_ERROR,r)}v.emit(v.EVENT.ENTER_FRAME_END,n,t),this._frameEndTime=Date.now()}e>this._nextRenderTime&&t&&(this._nextRenderTime=e+this._renderSpf,v.emit(v.EVENT.RENDER_REQUEST))},e.prototype._keepAlive=function(){setTimeout(this._keepAlive_binded,250);if(this._frameEndTime>=this._frameStartTime&&this.timeElapsedSinceLastFrameEnded>500){var e=this._lastFrameTime+this.timeElapsedThisFrame;this._animateId&&(cancelAnimationFrame(this._animateId),this._animateId=0),this._animate(e)}},e.prototype.removeDelayFunctionObject=function(e){f.ArrayUtil.removeElement(this._delayFunctionObjects,e)},e.prototype._callUpdateFunctions=function(e,t){while(this._delayFunctionObjects.length){var n=this._delayFunctionObjects[0];if(n.time>this._lastFrameTime)break;this._delayFunctionObjects.shift(),n.execute()}var r=this._updateFunctions.length;for(var i=0;i<r;++i)if(this._updateFunctions[i]){var s=this._updateFunctionTargets[i],o=this._updateFunctions[i];o.call(s,e,t)}else this._updateFunctions.splice(i,1),this._updateFunctionTargets.splice(i,1),--i,--r},e.prototype.addUpdateFunction=function(e,t){var n=this._updateFunctions.indexOf(e);while(n!=-1){if(this._updateFunctionTargets[n]==t)return;n=this._updateFunctions.indexOf(e,n+1)}this._updateFunctions.push(e),this._updateFunctionTargets.push(t)},e.prototype.removeUpdateFunction=function(e,t){var n=this._updateFunctions.indexOf(e);while(n!=-1){if(this._updateFunctionTargets[n]==t){this._updateFunctions[n]=null,this._updateFunctionTargets[n]=null;return}n=this._updateFunctions.indexOf(e,n+1)}},e.prototype.addDelayFunction=function(e,t,n,r){var i=new y(this,e,t,this.lastFrameTime+n,r);return this._delayFunctionObjects.push(i),this._delayFunctionObjects=f.ArrayUtil.sortNumericOn(this._delayFunctionObjects,"time",!0),i},Object.defineProperty(e.prototype,"lastFrameTime",{get:function(){return this._lastFrameTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeElapsedThisFrame",{get:function(){return Date.now()-this._frameStartTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeElapsedSinceLastFrameEnded",{get:function(){return Date.now()-this._frameEndTime},enumerable:!0,configurable:!0}),e.prototype.updateViewport=function(e){this._viewportMeta=this._viewportMeta||document.querySelector('meta[name="viewport"]');if(this._viewportMeta){var t=[];for(var n in e)t.push(s.StringUtil.camelCaseToDash(n)+"="+e[n]);this._viewportMeta.setAttribute("content",t.join(", "))}},e}(),y=function(){function e(e,t,n,r,i){this._system=e,this._owner=t,this._func=n,this._time=r,this._param=i}return e.prototype.dispose=function(){this._system&&this._system.removeDelayFunctionObject(this),this._d=!0},Object.defineProperty(e.prototype,"disposed",{get:function(){return this._d},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){return this._time},enumerable:!0,configurable:!0}),e.prototype.execute=function(){this._func.apply(this._owner,this._param),this._d=!0},e}(),e("DelayFunctionObject",y),b=new g,w=i.ObjectUtil.deepCloneObject(window.CgApp||{}),E=w.appResourcePack||{aliasMap:{},resourceMap:{}},S=w.appSources||{},e("projectCode",x=w.projectCode),e("buildName",T=w.buildName),e("projectDomain",N=w.projectDomain),v.isCordovaApp()&&w.env.push("cordova"),e("pixi",C=new o.Pixi),e("physics",k=new u.Physics),e("resourceManager",L=new a.ResourceManager),e("keyboardManager",A=new r.KeyboardManager),A.enable(),e("storage",O=h.store2Export),function(){var e=TWEEN.Tween.prototype.update;TWEEN.Tween.prototype.update=function(t){try{return e.apply(this,arguments)}catch(n){return v.emit(v.EVENT.TWEEN_UPDATE_ERROR,n,this),!1}}}()}}}),System.register("Base/utils/MathUtil",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return Object.defineProperty(e,"ONE_SECOND",{get:function(){return 1e3},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ONE_MINUTE",{get:function(){return 6e4},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ONE_HOUR",{get:function(){return 36e5},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ONE_DAY",{get:function(){return 864e5},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ONE_WEEK",{get:function(){return 6048e5},enumerable:!0,configurable:!0}),Object.defineProperty(e,"HALF_PI",{get:function(){return e._HALF_PI},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TWO_PI",{get:function(){return e._TWO_PI},enumerable:!0,configurable:!0}),Object.defineProperty(e,"QUATER_PI",{get:function(){return e._QUATER_PI},enumerable:!0,configurable:!0}),e.radians2degrees=function(t){return t*e._180_DIVIDED_BY_PI},e.degrees2radians=function(t){return t*e._PI_DIVIDED_BY_180},e.numberFollowTarget=function(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=Number.MAX_VALUE);var s=t-e;if(Math.abs(s)>r){var o=s*n,u=Math.abs(o);return u<r?o=s>0?r:-r:u>i&&(o=s>0?i:-i),e+o}return t},e.pointFollowTarget=function(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=Number.MAX_VALUE);var s=t.x-e.x,o=t.y-e.y,u=Math.sqrt(s*s+o*o);if(u>r){var a=Math.min(i,Math.max(r,u*n)),f=a/u;e.x+=s*f,e.y+=o*f}else e.x=t.x,e.y=t.y},e.degreesFollowTarget=function(t,n,r,i,s){i===void 0&&(i=1),s===void 0&&(s=Number.MAX_VALUE);var o=e.normalizeDegrees(n-t);return e.numberFollowTarget(n-o,n,r,i,s)},e.radiansFollowTarget=function(t,n,r,i,s){i===void 0&&(i=.01),s===void 0&&(s=Number.MAX_VALUE);var o=e.normalizeRadians(n-t);return e.numberFollowTarget(n-o,n,r,i,s)},e.formatTimer=function(e,t){t===void 0&&(t=!0);var n=Math.floor(e/6e4);e-=n*6e4;var r=Math.floor(e/1e3);e-=r*1e3;var i=Math.floor(e/10),s=""+n;while(s.length<2)s="0"+s;var o=""+r;while(o.length<2)o="0"+o;var u=""+i;while(u.length<2)u="0"+u;return t?s+":"+o+":"+u:s+":"+o},e.normalizeDegrees=function(e){while(e>180)e-=360;while(e<=-180)e+=360;return e},e.normalizeRadians=function(t){while(t>Math.PI)t-=e.TWO_PI;while(t<=-Math.PI)t+=e.TWO_PI;return t},e._180_DIVIDED_BY_PI=180/Math.PI,e._PI_DIVIDED_BY_180=Math.PI/180,e._HALF_PI=Math.PI*.5,e._TWO_PI=Math.PI*2,e._QUATER_PI=Math.PI*.25,e}(),e("MathUtil",n)}}}),System.register("Base/geom/Point",[],function(e,t){"use strict";function a(e){return e<0?Math.ceil(e):Math.floor(e)}var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o=t&&t.id,u=t&&t.id;return{setters:[],execute:function(){PIXI.Point.prototype.toString=function(){return""+this.x+","+this.y},PIXI.ObservablePoint.prototype.toString=function(){return""+this.x+","+this.y},r=function(e){function t(t,n){return e.call(this,t,n)||this}return n(t,e),t.interpolate=function(e,n,r,i){i=i||new t;var s=e.x-n.x,o=e.y-n.y;return i.set(n.x+s*r,n.y+o*r),i},t.distance=function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)},t.polar=function(e,n,r){return r?(r.set(Math.cos(n)*e,Math.sin(n)*e),r):new t(Math.cos(n)*e,Math.sin(n)*e)},t.fromPIXIPoint=function(e,n){return n?(n.set(e.x,e.y),n):new t(e.x,e.y)},t.fromXY=function(e,n,r){return r?(r.set(e,n),r):new t(e,n)},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.toB2Vec2=function(){return new b2Vec2(this.x,this.y)},t.prototype.toScaledB2Vec2=function(e){return new b2Vec2(this.x*e,this.y*e)},t.fromString=function(e,n){if(e){var r=e.split(",");if(r.length==2)return n?(n.set(parseFloat(r[0]),parseFloat(r[1])),n):new t(parseFloat(r[0]),parseFloat(r[1]))}return null},t.makeString=function(e,t){return""+e+","+t},t.prototype.sub=function(e,n){return n?(n.set(this.x-e.x,this.y-e.y),n):new t(this.x-e.x,this.y-e.y)},t.prototype.subXY=function(e,n,r){return r?(r.set(this.x-e,this.y-n),r):new t(this.x-e,this.y-n)},t.prototype.add=function(e,n){return n?(n.set(this.x+e.x,this.y+e.y),n):new t(this.x+e.x,this.y+e.y)},t.prototype.addXY=function(e,n,r){return r?(r.set(this.x+e,this.y+n),r):new t(this.x+e,this.y+n)},Object.defineProperty(t.prototype,"lengthSquared",{get:function(){return this.x*this.x+this.y*this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.lengthSquared)},enumerable:!0,configurable:!0}),t.prototype.distanceTo=function(e){var t=e.x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},t.prototype.normalize=function(e){e===void 0&&(e=1);var t=this.length;return t==0?0:(this.scale(e/t),t)},t.prototype.dot=function(e){return this.x*e.x+this.y*e.y},t.prototype.scale=function(e){this.x*=e,this.y*=e},t.prototype.cross=function(e,n){var r=this.y*e.x,i=this.x*e.y;return n?(n.set(r-i,i-r),n):new t(r-i,i-r)},t.prototype.getNormal=function(e){return e?(e.set(-this.y,this.x),e):new t(-this.y,this.x)},t.prototype.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),r=this.x,i=this.y;this.x=r*t-i*n,this.y=i*t+r*n},t.prototype.equalsXY=function(e,t){return this.x==e&&this.y==t},t.prototype.getPerpendicularDistance=function(e){return Math.abs(e.x-this.x)+Math.abs(e.y-this.y)},t.prototype.getPerpendicularDistanceFrom=function(e,t){return Math.abs(e-this.x)+Math.abs(t-this.y)},Object.defineProperty(t.prototype,"vertical",{get:function(){return this.y==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontal",{get:function(){return this.x==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalOrHorizontal",{get:function(){return this.x==0||this.y==0},enumerable:!0,configurable:!0}),t}(PIXI.Point),e("Point",r),i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.y},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.width,this.height)},t.fromString=function(e,n){if(e){var r=e.split(",");if(r.length==2)return n?(n.set(parseFloat(r[0]),parseFloat(r[1])),n):new t(parseFloat(r[0]),parseFloat(r[1]))}return null},t}(r),e("Size",i),s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x=a(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y=a(e)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.isNeighbor=function(e){return Math.abs(e.x-this.x)<=1&&Math.abs(e.y-this.y)<=1},t.prototype.isCloseNeighbor=function(e){return e.x==this.x?Math.abs(e.y-this.y)<=1:e.y==this.y?Math.abs(e.x-this.x)<=1:!1},t.prototype.sub=function(e,n){return n?(n.set(this.x-e.x,this.y-e.y),n):new t(this.x-e.x,this.y-e.y)},t.prototype.subXY=function(e,n,r){return r?(r.set(this.x-e,this.y-n),r):new t(this.x-e,this.y-n)},t.prototype.add=function(e,n){return n?(n.set(this.x+e.x,this.y+e.y),n):new t(this.x+e.x,this.y+e.y)},t.prototype.addXY=function(e,n,r){return r?(r.set(this.x+e,this.y+n),r):new t(this.x+e,this.y+n)},t.fromString=function(e,n){if(e){var r=e.split(",");if(r.length==2)return n?(n.set(parseInt(r[0]),parseInt(r[1])),n):new t(parseInt(r[0]),parseInt(r[1]))}return null},t.makeString=function(e,t){return""+a(e)+","+a(t)},t}(r),e("PointInt",s)}}}),System.register("Base/utils/ArrayUtil",["./IntUtil"],function(e,t){"use strict";function o(e,t){}var n,r,i=t&&t.id,s=t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(){}return e.swapElements=function(t,n,r){e.swapElementsAt(t,t.indexOf(n),t.indexOf(r))},e.swapElementsAt=function(e,t,n){var r=e[t];e[t]=e[n],e[n]=r},e.removeElement=function(e,t){var n=e.indexOf(t);return n==-1?!1:(e.splice(n,1),!0)},e.addUniqueElement=function(e,t){return e.indexOf(t)!=-1?!1:(e.push(t),!0)},e.sortNumeric=function(e,t){return t?e.sort(function(e,t){return e-t}):e.sort(function(e,t){return t-e}),e},e.sortNumericOn=function(e,t,n){return n?e.sort(function(e,n){return e[t]-n[t]}):e.sort(function(e,n){return n[t]-e[t]}),e},e.sortOn=function(e,t,n){return n?e.sort(function(e,n){return e[t]==n[t]?0:e[t]>n[t]?1:-1}):e.sort(function(e,n){return e[t]==n[t]?0:e[t]<n[t]?1:-1}),e},e.sortOnKeys=function(e,t){var n=t.length-1,r=function(e,i,s){if(s==n)return 0;var o=t[s];return e[o.key]==i[o.key]?r(e,i,s+1):o.numberic?o.ascending?e[o.key]-i[o.key]:i[o.key]-e[o.key]:o.ascending?e[o.key]>i[o.key]?1:-1:e[o.key]<i[o.key]?1:-1};return e.sort(function(e,t){return r(e,t,0)}),e},e.setElementIndex=function(e,t,n){var r=e.indexOf(t);return r==-1?-1:(n=Math.max(0,Math.min(e.length-1,n)),n!=r&&(e.splice(r,1),e.splice(n,0,t)),n)},e.getRandomElement=function(e,t){if(e&&e.length){var r=n.IntUtil.random(e.length-1),i=e[r];return t&&e.splice(r,1),i}return null},e.listKeysOfObject=function(e){var t=[];for(var n in e)t.push(n);return t},e.listValuesOfObject=function(e){var t=[];for(var n in e)t.push(e[n]);return t},e}(),e("ArrayUtil",r)}}}),System.register("Base/pixis/Pixi",["./../geom/Point","./../geom/Rectangle","./../System","./display/PhysicsDebugDraw","./display/GafManager"],function(e,t){"use strict";function v(e){return new Promise(function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onloadend=function(){r.result?t(r.result):n("failed to convert the blob")}})}var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a,f,l,c,h,p=t&&t.id,d=t&&t.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e}],execute:function(){a=new PIXI.Point,f=new PIXI.Point,l=new PIXI.Rectangle,c={antialias:!0},h=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._stageSize=new r.Size,n._canvasSize=new r.Size,n._canvasScale=1,n._visible=!0,n._fullscreenRect=new i.Rectangle,n._stageAlign_vertial=t.ALIGN_VERTICAL.MIDDLE,n._stageAlign_horizontal=t.ALIGN_HORIZONTAL.CENTER,n._stageResolutionPolicy=t.RESOLUTION_POLICY.SHOW_ALL,n._padding={left:0,right:0,top:0,bottom:0},n._gafManager=new u.GafManager,n}return n(t,e),Object.defineProperty(t.prototype,"stageAlignVertial",{get:function(){return this._stageAlign_vertial},set:function(e){this._stageAlign_vertial=e,this._onWindowResize()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stageAlignHorizontal",{get:function(){return this._stageAlign_horizontal},set:function(e){this._stageAlign_horizontal=e,this._onWindowResize()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stageResolutionPolicy",{get:function(){return this._stageResolutionPolicy},set:function(e){this._stageResolutionPolicy=e,this._onWindowResize()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullscreenRect",{get:function(){return this._fullscreenRect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gafManager",{get:function(){return this._gafManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stageWidth",{get:function(){return this._stageSize.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stageHeight",{get:function(){return this._stageSize.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e,this.renderer&&this.renderer.view&&$(this.renderer.view).css("visibility",e?"visible":"hidden")},enumerable:!0,configurable:!0}),t.prototype.updateRendererOptions=function(e){this.initialize(this.stageWidth,this.stageHeight,e)},t.prototype.initialize=function(e,t,n){var i=this,u={};this._renderer||(c.width=window.innerWidth,c.height=window.innerHeight,u=Object.assign(u,c)),n&&(n.padding&&Object.assign(this._padding,n.padding),n.canvas&&(n.canvas.maxHeight||n.canvas.maxWidth?this._canvasMaxSize=new r.Size(n.canvas.maxWidth||Number.MAX_SAFE_INTEGER,n.canvas.maxHeight||Number.MAX_SAFE_INTEGER):this._canvasMaxSize=null),Object.assign(u,n)),this._stageSize.set(e,t),this._renderer?Object.assign(this._renderer.options,u):(this._renderer=PIXI.autoDetectRenderer(u),this._stage=new PIXI.Container,this._root=new PIXI.Container,this._stage.addChild(this._root),document.body.appendChild(this._renderer.view),window.onresize=this._onWindowResize.bind(this),s.system.on(s.system.EVENT.RENDER_REQUEST,function(){return i._renderer.render(i._stage)}),this._physicsDebugDraw=new o.PhysicsDebugDraw),this._onWindowResize()},t.prototype.setStageSize=function(e,t){this._stageSize.set(e,t),this._stage&&this._onWindowResize()},Object.defineProperty(t.prototype,"physicsDebugDraw",{get:function(){return this._physicsDebugDraw},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding={left:0,right:0,top:0,bottom:0},e&&Object.assign(this._padding,e),this._onWindowResize()},enumerable:!0,configurable:!0}),t.prototype._onWindowResize=function(){this._canvasMaxSize?this._onWindowResizeWithCanvasSize(this._canvasMaxSize):this._updateStageSize(1)},t.prototype._onWindowResizeWithCanvasSize=function(e){var t=Math.max(1,window.innerWidth/e.width,window.innerHeight/e.height);this._updateStageSize(t)},Object.defineProperty(t.prototype,"canvasScale",{get:function(){return this._canvasScale},enumerable:!0,configurable:!0}),t.prototype._updateStageSize=function(e){var n=$(this._renderer.view);if(e==1)n.css("transform","unset"),this._canvasScale=1;else{var r=Math.ceil(e*1e3)/1e3;n.css("transform","scale("+r+")"),n.css("transform-origin","top left"),this._canvasScale=r}var i=window.innerWidth/e,s=window.innerHeight/e;this._canvasSize.set(i,s);var o=Math.max(0,i-(this._padding.left+this._padding.right)/e),u=Math.max(0,s-(this._padding.top+this._padding.bottom)/e);this._renderer.resize(i,s);var a=o/this._stageSize.width,f=u/this._stageSize.height,l=new PIXI.Point(1,1);switch(this._stageResolutionPolicy){case t.RESOLUTION_POLICY.SHOW_ALL:l.x=l.y=Math.min(a,f);break;case t.RESOLUTION_POLICY.EXACT_FIT:l.set(a,f);break;case t.RESOLUTION_POLICY.NO_BORDER:l.x=l.y=Math.max(a,f);break;case t.RESOLUTION_POLICY.FIXED_WIDTH:l.set(a,a);break;case t.RESOLUTION_POLICY.FIXED_HEIGHT:l.set(f,f)}this._stage.scale.set(l.x,l.y);var c=this._stageSize.width*l.x,h=this._stageSize.height*l.y;switch(this.stageAlignHorizontal){case t.ALIGN_HORIZONTAL.CENTER:this._stage.position.x=(o-c)/2;break;case t.ALIGN_HORIZONTAL.RIGHT:this._stage.position.x=o-c;break;default:this._stage.position.x=0}switch(this.stageAlignVertial){case t.ALIGN_VERTICAL.MIDDLE:this._stage.position.y=(u-h)/2;break;case t.ALIGN_VERTICAL.BOTTOM:this._stage.position.y=u-h;break;default:this._stage.position.y=0}this._stage.position.x+=this._padding.left/e,this._stage.position.y+=this._padding.top/e,this._fullscreenRect.width=i/l.x,this._fullscreenRect.height=s/l.y,this._fullscreenRect.x=-this._stage.position.x/l.x,this._fullscreenRect.y=-this._stage.position.y/l.y,this.emit(t.EVENT.STAGE_RESIZED)},t.prototype.stageRectToCanvasRect=function(e,t){var n,r;return e?(n=new PIXI.Point(e.left,e.top),r=new PIXI.Point(e.right,e.bottom)):(n=new PIXI.Point(0,0),r=new PIXI.Point(this.stageWidth,this.stageHeight)),this.root.toGlobal(n,n),this.root.toGlobal(r,r),t?(t.x=n.x,t.y=n.y,t.width=r.x-n.x,t.height=r.y-n.y,t):new PIXI.Rectangle(n.x,n.y,r.x-n.x,r.y-n.y)},t.prototype.hitTest=function(e,t){var n=this._renderer.plugins.interaction;return n.hitTest(e,t)},t.prototype.removeFromParent=function(e){e&&e.parent&&e.parent.removeChild(e)},t.prototype.cleanChildren=function(e,t){e.removeChildren(),t&&this.removeFromParent(e)},t.prototype.setOnTopOfParent=function(e){e&&e.parent&&e.parent.setChildIndex(e,e.parent.children.length-1)},t.prototype.displayObjectToBlob=function(e,t,n){var r=this;if(s.system.timeElapsedThisFrame>20)return s.wait(1).then(function(){return r.displayObjectToBlob(e,t,n)});t=t||{};var i=e.parent,o=i?i.getChildIndex(e):0,u=new PIXI.Container,a=new PIXI.Container;u.addChild(a),a.addChild(e);var f=t.mime||"image/png",l=t.paddings||0,c=t.dimension||new PIXI.Point(a.width+l*2,a.height+l*2),h=(c.x-l*2)/a.width,p=(c.y-l*2)/a.height;t.keepAspectRatio=="fill"?h=p=Math.max(h,p):t.keepAspectRatio=="allin"?h=p=Math.min(h,p):t.keepAspectRatio=="origin"&&(h=p=1),a.scale.x*=h,a.scale.y*=p;var d=a.getBounds();d.x-=l,d.y-=l,d.width+=l*2,d.height+=l*2;var v=new PIXI.Graphics;v.beginFill(16711680,1),v.drawRect(0,0,c.x,c.y),v.endFill(),v.x=d.left+(c.x-v.width)/2,v.y=d.top,a.mask=v,u.addChildAt(v,0);var m=new PIXI.Graphics;return m.beginFill(t.bgColor===undefined?3355443:t.bgColor,t.bgAlpha===undefined?1:t.bgAlpha),m.drawRect(0,0,v.width,v.height),v.endFill(),m.x=v.x,m.y=v.y,u.addChildAt(m,0),new Promise(function(s){r.renderer.extract.canvas(u).toBlob(function(t){i&&i.addChildAt(e,o),s(t),n&&n(t)},f,t.quality)})},t.prototype.displayObjectToDataUrl=function(e,t,n){return this.displayObjectToBlob(e,t).then(function(e){return v(e)}).then(function(e){return n&&n(e),e})},t.prototype.getFullscreenRect=function(e,t){if(e)return a.set(0,0),a=e.toLocal(a),f.set(this._canvasSize.width,this._canvasSize.height),f=e.toLocal(f),t?(t.x=a.x,t.y=a.y,t.width=f.x-a.x,t.height=f.y-a.y,t):new PIXI.Rectangle(a.x,a.y,f.x-a.x,f.y-a.y);t?t.copyFrom(this._fullscreenRect):t=this._fullscreenRect.clone(),t.x-=this._root.x,t.y-=this._root.y;var n=this._root.scale;return n.x!=1&&(t.x/=n.x,t.width/=n.x),n.y!=1&&(t.y/=n.y,t.height/=n.y),t},t.prototype.isPointInFullscreen=function(e,t){return this._fullscreenRect.containsPoint(this._root.toLocal(e,t))},t.prototype.isObjectInFullscreen=function(e,t){return t===void 0&&(t=!0),e.getBounds(t,l),l.left<this._canvasSize.width&&l.right>=0&&l.top<this._canvasSize.height&&l.bottom>=0},t.prototype.isPointInStage=function(e,t){return e=this._stage.toLocal(e,t),e.x>=0&&e.y>=0&&e.x<this._stageSize.x&&e.y<this._stageSize.y},t.prototype.isObjectInStage=function(e,t){return t===void 0&&(t=!0),e.getBounds(t,l),l.x-=this._stage.x,l.y-=this._stage.y,l.right>=0&&l.bottom>=0&&l.left<this._stageSize.x*this._stage.scale.x&&l.top<this._stageSize.y*this._stage.scale.y},t.prototype.blobToBaseTexture=function(e,t){return new Promise(function(n){var r=new Image;r.addEventListener("load",function(e){var i=new PIXI.BaseTexture(r);URL.revokeObjectURL(r.src),t&&t(i),n(i)}),r.src=URL.createObjectURL(e)})},Object.defineProperty(t.prototype,"mouse",{get:function(){return this.renderer.plugins.interaction.mouse},enumerable:!0,configurable:!0}),t.EVENT={STAGE_RESIZED:"stageResized"},t.ALIGN_VERTICAL={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},t.ALIGN_HORIZONTAL={LEFT:"left",CENTER:"center",RIGHT:"right"},t.RESOLUTION_POLICY={EXACT_FIT:"exactFit",SHOW_ALL:"showAll",NO_BORDER:"noBorder",FIXED_WIDTH:"fixedWidth",FIXED_HEIGHT:"fixedHeight",ORIGIN:"origin"},t}(PIXI.utils.EventEmitter),e("Pixi",h)}}}),System.register("Base/keyboard/KeyboardManager",[],function(e,t){"use strict";function a(e){return!e.target||i.indexOf(e.target["type"])==-1}var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o=t&&t.id,u=t&&t.id;return{setters:[],execute:function(){e("KeyboardManagerEvent",r={PRESSED:"pressed",RELEASED:"released",DOWN:"down"}),i=["text","textarea","search"],s=function(e){function t(){var t=e.call(this)||this;return t._enabled=!1,t._pressedKeys=[],t._releasedKeys=[],t._downKeys=[],t._validateKeyboardEvent=a,t._onPointerDown=function(){document.hasFocus()||window.focus()},t._onKeyDown=function(e){var n=e.which||e.keyCode;t.emit(r.DOWN,n,e),!t.isDown(n)&&t._validateKeyboardEvent(e)&&(t._downKeys.push(n),t._pressedKeys[n]=!0,t.emit(r.PRESSED,n,e))},t._onKeyUp=function(e){var n=e.which||e.keyCode;if(t.isDown(n)){t._pressedKeys[n]=!1,t._releasedKeys[n]=!0;var i=t._downKeys.indexOf(n);i!==-1&&t._downKeys.splice(i,1),t.emit(r.RELEASED,n,e)}},t}return n(t,e),Object.defineProperty(t.prototype,"validateKeyboardEvent",{get:function(){return this._validateKeyboardEvent},set:function(e){this._validateKeyboardEvent=e||a},enumerable:!0,configurable:!0}),t.prototype.enable=function(){this._enabled||(this._enabled=!0,this._enableEvents())},t.prototype.disable=function(){this._enabled&&(this._enabled=!1,this._disableEvents())},Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},enumerable:!0,configurable:!0}),t.prototype._enableEvents=function(){window.addEventListener("keydown",this._onKeyDown,!0),window.addEventListener("keyup",this._onKeyUp,!0),window.addEventListener("pointerdown",this._onPointerDown,!0)},t.prototype._disableEvents=function(){window.removeEventListener("keydown",this._onKeyDown,!0),window.removeEventListener("keyup",this._onKeyUp,!0),window.removeEventListener("pointerdown",this._onPointerDown,!0)},t.prototype.isDown=function(e){return this._downKeys.indexOf(e)!==-1},t.prototype.isPressed=function(e){return!!this._pressedKeys[e]},t.prototype.isReleased=function(e){return!!this._releasedKeys[e]},t.prototype.update=function(){this._pressedKeys.length=0,this._releasedKeys.length=0},t}(PIXI.utils.EventEmitter),e("KeyboardManager",s)}}}),System.register("Base/utils/ObjectUtil",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.deepCloneObject=function(t){if(!t)return t;if(typeof t=="object"){if(Array.isArray(t))return t.map(function(t){return e.deepCloneObject(t)});var n={};for(var r in t)n[r]=e.deepCloneObject(t[r]);return n}return t},e.equals=function(t,n){if(t&&n&&typeof t=="object"&&typeof n=="object"){if(Array.isArray(t)){if(Array.isArray(n)){var r=t.length;if(n.length!=r)return!1;for(var i=0;i<r;++i)if(!e.equals(t[i],n[i]))return!1;return!0}return!1}if(Array.isArray(n))return!1;var s=Object.keys(t),o=Object.keys(n),u=s.length;if(u!=o.length)return!1;s.sort(),o.sort();for(var i=0;i<u;++i){var a=s[i];if(a!=o[i])return!1;if(!e.equals(t[a],n[a]))return!1}return!0}return t===n},e.safeAssign=function(t,n){if(n&&typeof n=="object"){if(t&&typeof t=="object"){if(Array.isArray(n)){if(Array.isArray(t)){for(var r=0;r<n.length;++r)t[r]=e.safeAssign(t[r],n[r]);return t}return e.safeAssign([],n)}if(Array.isArray(t))return e.safeAssign({},n);for(var i in n)t[i]=e.safeAssign(t[i],n[i]);return t}return Array.isArray(n)?e.safeAssign([],n):e.safeAssign({},n)}return n},e.removeKeysWithSameValue=function(t,n){if(t&&typeof t=="object"&&n&&typeof n=="object")if(Array.isArray(t)){if(Array.isArray(n))for(var r=0;r<t.length;++r)e.removeKeysWithSameValue(t[r],n[r])}else if(!Array.isArray(n))for(var i in t){var s=t[i],o=n[i];s===o?delete t[i]:e.removeKeysWithSameValue(s,o)}return t},e.forEach=function(e,t){if(!e||typeof e!="object")throw new Error("ObjectUtil.forEach: not an object");if(Array.isArray(e))throw new Error("ObjectUtil.forEach: obj is an array, use Array.forEach instead.");Object.keys(e).forEach(function(n){t(n,e[n],e)})},e.map=function(e,t){if(e&&typeof e=="object"){if(Array.isArray(e))throw new Error("ObjectUtil.map: obj is an array, use Array.map instead.");var n={};return Object.keys(e).map(function(r){n[r]=t(r,e[r],e)}),n}throw new Error("ObjectUtil.map: not an object")},e.isPromise=function(e){return e&&Promise.resolve(e)==e},e.isEmpty=function(e){if(e)for(var t in e)return!1;return!0},e.toSafeJson=function(t,n){n===void 0&&(n=3);if(t){if(typeof t=="object"){if(Array.isArray(t))return n<=0?{_type:"array",length:t.length}:t.map(function(t){return e.toSafeJson(t,n-1)});if(n<=0)return{_type:"object"};var r={};return Object.keys(t).forEach(function(i){r[i]=e.toSafeJson(t[i],n-1)}),r}if(typeof t=="function")return{_type:"function"}}return t},e}(),e("ObjectUtil",n)}}}),System.register("Base/utils/StringUtil",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.capitalize=function(e){return e.split(" ").map(function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}).join(" ")},e.startsWith=function(e,t,n){n===void 0&&(n=0);if(e&&t){var r=e.indexOf(t);return r!=-1&&r==n}return e==t&&n==0},e.endsWith=function(e,t){if(e&&t){var n=e.lastIndexOf(t);return n!=-1&&n==e.length-t.length}return e==t},e.camelCaseToDash=function(e,t){return t===void 0&&(t="-"),e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1"+t).toLowerCase()},e.dashToCamelCase=function(e,t){return t===void 0&&(t="-"),e.replace(new RegExp(t+"([a-z])","g"),function(e){return e[1].toUpperCase()})},e}(),e("StringUtil",n)}}}),System.register("Base/physics2d/Physics",["../geom/Point","./PhysicsObject","../utils/ArrayUtil","./../System"],function(e,t){"use strict";function h(e){function o(e,t){if(e&&t){var n=i.get(e);n||(n=[],i.set(e,n)),n.push(t)}}function a(e,t){if(e&&t){var n=i.get(e);n&&(s.ArrayUtil.removeElement(n,t),n.length==0&&i.delete(e))}}var t=b2World.prototype.CreateJoint,n=b2World.prototype.DestroyBody,r=b2World.prototype.DestroyJoint,i=new Map;return b2World.prototype.CreateJoint=function(e){var n=t.call(this,e);return o(n.bodyA,n),o(n.bodyB,n),n},b2World.prototype.DestroyBody=function(t){var r=i.get(t);i.delete(t);if(r)for(var s=0,o=r;s<o.length;s++){var a=o[s];this.DestroyJoint(a)}n.call(this,t),e.emit(u.EVENT.BODY_DESTROYED,t)},b2World.prototype.DestroyJoint=function(t){a(t.bodyA,t),a(t.bodyB,t),r.call(this,t),e.emit(u.EVENT.JOINT_DESTROYED,t)},{origin:{createJoint:t,destroyBody:n,destroyJoint:r,bodyToJoints:i},physics:e}}var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a,f,l=t&&t.id,c=t&&t.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e}],execute:function(){u=function(e){function t(){var t=e.call(this)||this;return t._b2Scale=30,t._objects=new Array,t.stepVelocityIterations=8,t.stepPositionIterations=3,t._stepTimeScale=.001,t.stepTimeScale=4,t.reset(),t}return n(t,e),t.prototype.convertB2VecToScreenPoint=function(e){return new r.Point(e.x*this._b2Scale,e.y*this._b2Scale)},Object.defineProperty(t.prototype,"b2Scale",{get:function(){return this._b2Scale},set:function(e){e!=this._b2Scale&&(this._b2Scale=e,this.emit(t.EVENT.B2SCALE_CHANGED,e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stepTimeScale",{get:function(){return this._stepTimeScale*1e3},set:function(e){this._stepTimeScale=e/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"world",{get:function(){return this._world||(this._b2WorldManager||(this._b2WorldManager=h(this)),this._world=new b2World(new b2Vec2(0,30/this._b2Scale)),window.world=this._world,o.addUpdateFunction(this,this.update),this.setupCollisionResolver(),this.emit(t.EVENT.WORLD_CREATED)),this._world},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"worldCreated",{get:function(){return!!this._world},enumerable:!0,configurable:!0}),t.prototype.setGravity=function(e){this.world.SetGravity(e.toScaledB2Vec2(1/this._b2Scale))},t.prototype.getGravity=function(){return new r.Point(this.world.gravity.x*this._b2Scale,this.world.gravity.y*this._b2Scale)},t.prototype.reset=function(){o.removeUpdateFunction(this,this.update);if(this._world){while(this._world.joints.length>0)this._world.DestroyJoint(this._world.joints[0]);while(this._world.bodies.length>0)this._world.DestroyBody(this._world.bodies[0]);while(this._world.particleSystems.length>0)this._world.DestroyParticleSystem(this._world.particleSystems[0]);this._world=null,this.emit(t.EVENT.WORLD_DESTROYED)}},t.prototype.createPhysicsObject=function(e,t){return new i.PhysicsObject(this,e,t)},t.prototype.addPhysicObject=function(e){this._objects.push(e)},t.prototype.update=function(e){f.reset(),this.emit(t.EVENT.WORLD_ABOUT_TO_UPDATE,f);if(f.isDefaultPrevented())return;this.world.Step(.05,this.stepVelocityIterations,this.stepPositionIterations),this.emit(t.EVENT.WORLD_UPDATED)},t.prototype.addObject=function(e){s.ArrayUtil.addUniqueElement(this._objects,e)},t.prototype.removeObject=function(e){s.ArrayUtil.removeElement(this._objects,e)},t.prototype.containsObject=function(e){return this._objects.indexOf(e)!=-1},t.prototype.setupCollisionResolver=function(){var e=function(e){var t=e.userData;return t&&t.contactContext?t.contactContext:t},n=this;this._contactListener={BeginContactBody:function(r){var i=e(r.GetFixtureA()),s=e(r.GetFixtureB());n.emit(t.EVENT.CONTACT_BEGIN,r,i,s),i&&typeof i.onPhysicsContactBegin=="function"&&i.onPhysicsContactBegin(s,r,r.GetFixtureB()),s&&typeof s.onPhysicsContactBegin=="function"&&s.onPhysicsContactBegin(i,r,r.GetFixtureA())},PreSolve:function(t,n){var r=e(t.GetFixtureA()),i=e(t.GetFixtureB());r&&typeof r.onPhysicsContactPreSolve=="function"&&r.onPhysicsContactPreSolve(i,t,n,t.GetFixtureB()),i&&typeof i.onPhysicsContactPreSolve=="function"&&i.onPhysicsContactPreSolve(r,t,n,t.GetFixtureA())},PostSolve:function(t,n){var r=e(t.GetFixtureA()),i=e(t.GetFixtureB());r&&typeof r.onPhysicsContactPostSolve=="function"&&r.onPhysicsContactPostSolve(i,t,n,t.GetFixtureB()),i&&typeof i.onPhysicsContactPostSolve=="function"&&i.onPhysicsContactPostSolve(r,t,n,t.GetFixtureA())},EndContactBody:function(r){var i=e(r.GetFixtureA()),s=e(r.GetFixtureB());i&&typeof i.onPhysicsContactEnd=="function"&&i.onPhysicsContactEnd(s,r,r.GetFixtureB()),s&&typeof s.onPhysicsContactEnd=="function"&&s.onPhysicsContactEnd(i,r,r.GetFixtureA()),n.emit(t.EVENT.CONTACT_END,r,i,s)}},this.world.SetContactListener(this._contactListener)},t.EVENT={WORLD_CREATED:"worldCreated",WORLD_DESTROYED:"worldDestroyed",WORLD_UPDATED:"worldUpdated",WORLD_ABOUT_TO_UPDATE:"worldAboutToUpdate",CONTACT_BEGIN:"contactBegin",CONTACT_END:"contactEnd",BODY_DESTROYED:"bodyDestroyed",JOINT_DESTROYED:"jointDestroyed",B2SCALE_CHANGED:"b2ScaleChanged"},t}(PIXI.utils.EventEmitter),e("Physics",u),a=function(){function e(){}return e.prototype.reset=function(){this._preventDefault=!1},e.prototype.isDefaultPrevented=function(){return this._preventDefault},e.prototype.preventDefault=function(){this._preventDefault=!0},e}(),e("PysicsAboutToUpdateEvent",a),f=new a}}}),System.register("Base/resources/ResourceManager",["./useSoundPack","./../pixis/display/SpritesheetMovieClip","./../System"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u=t&&t.id,a=t&&t.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e}],execute:function(){o=function(e){function t(t){var n=e.call(this)||this;return n.concurrency=t,n.gafsToLoad={},n.loaders=[],n.spritesheetInfos={},n.concurrency=Math.max(1,n.concurrency||6),n}return n(t,e),t.prototype.listLoaders=function(){return this.loaders},Object.defineProperty(t.prototype,"currentLoader",{get:function(){var e=this;if(!this._currentLoader)for(var t=0,n=this.loaders;t<n.length;t++){var i=n[t];if(!i.loading){this._currentLoader=i;break}}return this._currentLoader||(this._currentLoader=new PIXI.Loader("",this.concurrency),this._currentLoader.use(r.useSoundPack),this.loaders.push(this._currentLoader),this._currentLoader.pre(function(t,n){return e.onLoaderPre(t,n)})),this._currentLoader},enumerable:!0,configurable:!0}),t.prototype.onLoaderPre=function(e,t){var n=this;e.onComplete.once(function(){if(e.extension=="json"&&e.data.frames&&e.data.meta&&e.data.meta.image){var t=s.getAppResource(e.data.meta.image);if(t){var r=n.getImageFilenameFromResource(t);r&&(e.data.meta.image=t.url+r)}}}),t()},t.prototype.getImageFilenameFromResource=function(e){var t=this;return e.meta.files.find(function(n){return n!=e.meta.thumb&&t.isImageFilename(n)})},t.prototype.isImageFilename=function(e){return/(\.png|\.jpg|\.gif)$/.test(e.toLowerCase())},t.prototype._addResourceToLoader=function(e,t,n){var r=this.loaders.find(function(t){return!!t.resources[e]});r||this.currentLoader.add(e,t,Object.assign({crossOrigin:"anonymous"},n||{}))},t.prototype.addAppResource=function(e,n){var r=s.getAppResource(e);return r?r.type=="gaf"?(this.gafsToLoad[e]=r,s.pixi.gafManager.loadGaf(r.name,r.url,e)):(n=n||r.meta.main,this._addResourceToLoader(t.RESOURCE_ID_PREFIX+r.id+"/"+n,s.getAppResourceFileUrl(e,n))):console.log("Warn: tried to load an unexisting resource: "+e+"/"+(n||"")),this},t.prototype.addAppSource=function(e){var t=s.getAppSourceUrl(e);return t?this._addResourceToLoader(e,t):console.log("Warn: tried to load an unexisting source: "+e),this},t.prototype.addExternalResource=function(e,t,n){return this._addResourceToLoader(e,t,n),this},t.prototype.load=function(e){var n=this;return new Promise(function(r){var i=function(){e&&e(),r()};n.emit(t.EVENT.LOAD_START);for(var o in n.gafsToLoad){var u=n.gafsToLoad[o];s.pixi.gafManager.loadGaf(u.name,u.url,o)}n._currentLoader&&(n._currentLoader.load(),n._currentLoader=null),n.waitForLoaders(function(){n.waitForGafLoaders(i)})})},t.prototype.waitForLoaders=function(e){var t=this;setTimeout(function(){t.loaders.find(function(e){return e.loading})?t.waitForLoaders(e):e&&e()},30)},t.prototype.waitForGafLoaders=function(e){var n=this;setTimeout(function(){s.pixi.gafManager.allLoaded?(n.emit(t.EVENT.LOAD_COMPELTE),e&&e()):n.waitForGafLoaders(e)},30)},t.prototype.getLoaderResource=function(e,n){var r=s.getAppResource(e);r&&(e=t.RESOURCE_ID_PREFIX+r.id,e+="/"+(n||r.meta.main));for(var i=0,o=this.loaders;i<o.length;i++){var u=o[i];if(u.resources[e])return u.resources[e]}return null},t.prototype.getSound=function(e,n){var r,i=s.getAppResource(e);if(e&&!i&&!n){var o=e.indexOf("/");if(o!=-1){r=this.getSound(e.substr(0,o),e.substr(o+1));if(r)return r}}if(i&&i.type=="soundPack"&&n&&!n.endsWith(".zip")){var u=t.RESOURCE_ID_PREFIX+i.id+(n.startsWith("/")?"":"/")+n;r=PIXI.sound.find(u)}else{var a=this.getLoaderResource(e,n);r=a.sound}return r&&!r.cgResource&&(r.cgResource={alias:e,filename:n}),r},t.prototype.getPixiTexture=function(e,t){var n=s.getAppResource(e),r=n&&this.getImageFilenameFromResource(n),i=this.getLoaderResource(e,r),o=i&&i.texture;return o&&!o.cgResource&&(o.cgResource={alias:e,filename:t}),o},t.prototype.getText=function(e,t){var n=this.getLoaderResource(e,t),r=n&&n.data||"";if(typeof r=="string")return r;try{return r.hasOwnProperty("documentElement")?(new XMLSerializer).serializeToString(r.documentElement):JSON.stringify(r)}catch(i){return r.toString()}},t.prototype.getJSON=function(e,t){var n=this.getLoaderResource(e,t),r=n&&n.data;return typeof r=="string"?JSON.parse(r):r},t.prototype.getXML=function(e,t){var n=this.getLoaderResource(e,t),r=n&&n.data;if(typeof r=="string"){if(window.ActiveXObject){var i=new ActiveXObject("Microsoft.XMLDOM");return i.loadXML(r),i}return(new DOMParser).parseFromString(r,"text/xml")}return r},t.prototype.playSound=function(e,t,n){var r=this.getSound(e,n);if(!r)return console.error("Sound is not loaded: "+e),null;try{return r.play(t)}catch(i){return console.error("Error at playSound: "+e,i),null}},t.prototype.createPixiSprite=function(e,t,n,r){var i=new PIXI.Sprite(this.getPixiTexture(e,r));return t&&(i.width=t),n&&(i.height=n),i},t.prototype.createGAFMovieClip=function(e,t){return s.pixi.gafManager.createMovieClip(e,t)},t.prototype.createSpritesheetMovieClip=function(e){var t=this.getSpriteSheetInfo(e);return t?new i.SpritesheetMovieClip(t):null},t.prototype.getSpriteSheetInfo=function(e){var t=this.spritesheetInfos[e];if(!t){var n=this.getLoaderResource(e);if(n&&n.spritesheet){var r=n.spritesheet;t=new i.SpritesheetInfo(r,n.data),t.cgResource={alias:e},this.spritesheetInfos[e]=t}else console.log("Warn: spritesheet not found: "+e)}return t},t.EVENT={LOAD_START:"loadStart",LOAD_COMPELTE:"loadComplete"},t.RESOURCE_ID_PREFIX="#rid",t}(PIXI.utils.EventEmitter),e("ResourceManager",o)}}}),System.register("Base/utils/HtmlUtil",[],function(e,t){"use strict";function s(e){return new Promise(function(t,n){var r=document.createElement("textarea");r.value=e,r.style.top="0",r.style.left="0",r.style.position="fixed",document.body.appendChild(r),r.focus(),r.select();try{var i=document.execCommand("copy");i?t():n("Copying text command was unsuccessful.")}catch(s){n(s)}document.body.removeChild(r)})}var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.createDiv=function(t,n,r,i){var s=document.createElement("div");return t&&(s.id=t),e.applyDivStyles(s,r),n&&document.getElementsByTagName("body")[0].appendChild(s),i&&(s.innerText=i),s},e.applyDivStyles=function(e,t){if(e&&t)for(var n in t)e.style[n]=t[n]},e.removeDiv=function(e){e.parentNode&&e.parentNode.removeChild(e)},e.escapeHTMLString=function(e){return $("<div>").text(e).html()},e.downloadBlob=function(t,n){e.downloadDataUrl(URL.createObjectURL(t),n)},e.downloadText=function(t,n){e.downloadDataUrl("data:text/plain;charset=utf-8,"+encodeURIComponent(t),n)},e.downloadDataUrl=function(e,t){var n=document.createElement("a");document.body.appendChild(n),n.download=t,n.href=e,n.click(),n.remove()},e.copyTextToClipboard=function(e){return navigator.clipboard?navigator.clipboard.writeText(e):s(e)},e}(),e("HtmlUtil",n)}}}),System.register("Base/utils/IStorage",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){e("store2Export",n=window.store)}}}),System.register("Base/keyboard/Key",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){e("Key",n={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,PAUSE:19,CTRL:17,ALT:18,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CMD:91,CMD_RIGHT:93,NUM_0:96,NUM_1:97,NUM_2:98,NUM_3:99,NUM_4:100,NUM_5:101,NUM_6:102,NUM_7:103,NUM_8:104,NUM_9:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMAL_POINT:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUM_LOCK:144,SCROLL_LOCK:145,SEMI_COLON:186,EQUAL:187,COMMA:188,DASH:189,PERIOD:190,FORWARD_SLASH:191,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRACKET:221,SINGLE_QUOTE:222})}}}),System.register("Base/pixis/display/PhysicsDebugDraw",["./../../utils/MathUtil","./../../System","./../../physics2d/Physics"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a=t&&t.id,f=t&&t.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e}],execute:function(){o=function(){function e(){this.colors={},this.colors[e.KEY.STATIC_BODY]=6710835,this.colors[e.KEY.DYNAMIC_BODY]=65280,this.colors[e.KEY.KINEMATIC_BODY]=16776960,this.colors[e.KEY.JOINT]=52479,this.colors[e.KEY.PARTICLE]=255}return e.prototype.setColor=function(e,t){return typeof e=="number"&&(e=e.toString()),e&&(this.colors[e]=t),this},e.prototype.getColor=function(e){return typeof e=="number"&&(e=e.toString()),this.colors[e]},e.prototype.listColorKeys=function(){return Object.keys(this.colors)},e.KEY={STATIC_BODY:"0",DYNAMIC_BODY:"2",KINEMATIC_BODY:"1",JOINT:"joint",PARTICLE:"particle"},e}(),e("PhysicsDebugDrawColor",o),u=function(e){function t(t,n){var u=e.call(this)||this;return u._parent=t,u._physics=n,u.circleVertices=[],u.particleVertices=[],u.circleResolution=8,u.particleResolution=3,u._graphics={},u.color=new o,u.running=!1,u.active=!1,u.worldCreated=!1,u.initCircleVertices=function(e,t){var n=r.MathUtil.TWO_PI/t;for(var i=0;i<t;++i){var s=i*n,o=(i+1)*n;e.push(Math.cos(s)),e.push(Math.sin(s)),e.push(Math.cos(o)),e.push(Math.sin(o))}},u._physics=n||i.physics,u._physics.createPhysicsObject,u._physics.on(s.Physics.EVENT.WORLD_CREATED,u.start,u),u._physics.on(s.Physics.EVENT.WORLD_DESTROYED,u.onWorldDestroyed,u),u.worldCreated=u._physics.worldCreated,u.color.listColorKeys().forEach(function(e){return u.getGraphics(e)}),u.initDrawingFunctions(),u}return n(t,e),t.prototype.isActive=function(){return this.active},t.prototype.setActive=function(e){this.active=e,this.active?this.worldCreated&&this.start():this.stop()},t.prototype.onWorldDestroyed=function(){this.worldCreated=!1,this.stop()},t.prototype.getGraphics=function(e){var t=this._graphics[e];return t||(t=new PIXI.Graphics,t.scale.set(this._physics.b2Scale,this._physics.b2Scale),this.addChild(t),this._graphics[e]=t,this._physics.on(s.Physics.EVENT.B2SCALE_CHANGED,function(e){return t.scale.set(e)})),t},t.prototype.initDrawingFunctions=function(){this.initCircleVertices(this.circleVertices,this.circleResolution),this.initCircleVertices(this.particleVertices,this.particleResolution);var e=this;b2CircleShape.prototype.draw=function(t){var n=this.position,r=new b2Vec2(n.x,n.y);e.insertCircleVertices(t,this.radius,r.x,r.y)},b2ChainShape.prototype.draw=function(t){e.transformVerticesAndInsert(this.vertices,t,!1)},b2EdgeShape.prototype.draw=function(t){e.transformAndInsert(this.vertex1,this.vertex2,t)},b2PolygonShape.prototype.draw=function(t){e.transformVerticesAndInsert(this.vertices,t,!0)}},t.prototype.drawJoint=function(e){var t=e.GetAnchorA(),n=e.GetAnchorB();t&&n&&(this._currentGraphics.moveTo(t.x,t.y),this._currentGraphics.lineTo(n.x,n.y))},t.prototype.start=function(){this.worldCreated=!0;if(this.running||!this.active)return;this.running=!0,this._physics.on(s.Physics.EVENT.WORLD_UPDATED,this.draw,this),(this._parent||i.pixi.stage).addChild(this)},t.prototype.stop=function(){if(this.running){this.running=!1,this._physics.off(s.Physics.EVENT.WORLD_UPDATED,this.draw,this);for(var e in this._graphics)this._graphics[e].clear()}this.parent&&this.parent.removeChild(this)},t.prototype.transformAndInsert=function(e,t,n){var r=new b2Vec2,i=new b2Vec2;b2Vec2.Mul(r,n,e),b2Vec2.Mul(i,n,t),this.insertLine(r,i)},t.prototype.transformVerticesAndInsert=function(e,t,n){var r=e.length,i=n?r+1:r;for(var s=1;s<i;++s)this.transformAndInsert(e[s-1],e[s%r],t)},t.prototype.insertCircleVertices=function(e,t,n,r){var i=this.circleVertices;for(var s=0;s<=this.circleResolution;++s){var o=s*4,u=new b2Vec2(i[o]*t+n,i[o+1]*t+r),a=new b2Vec2(i[o+2]*t+n,i[o+3]*t+r);b2Vec2.Mul(u,e,u),b2Vec2.Mul(a,e,a);if(s==0){var f=new b2Vec2(n,r);b2Vec2.Mul(f,e,f),this.insertLine(f,u)}this.insertLine(u,a)}},t.prototype.insertLine=function(e,t){this._currentGraphics.moveTo(e.x,e.y),this._currentGraphics.lineTo(t.x,t.y)},t.prototype.insertLine2=function(e,t,n,r){this._currentGraphics.moveTo(e,t),this._currentGraphics.lineTo(n,r)},t.prototype.insertParticleVertices=function(e,t,n){var r=this.particleVertices;for(var i=0;i<this.particleResolution;++i){var s=i*4,o=r[s]*e+t,u=r[s+1]*e+n,a=r[s+2]*e+t,f=r[s+3]*e+n;this.insertLine2(o,u,a,f)}},t.prototype.drawParticleSystem=function(e){var t=e.GetPositionBuffer(),n=t.length,r=new b2Transform;r.SetIdentity();for(var i=0,s=0;i<n;i+=2,s+=4)this.insertParticleVertices(e.radius,t[i],t[i+1])},t.prototype.draw=function(){for(var e in this._graphics){var t=this._graphics[e];t.clear(),t.lineStyle(1/this._physics.b2Scale,this.color.getColor(e),1)}for(var n=0,r=this._physics.world.bodies.length;n<r;++n){var i=this._physics.world.bodies[n];this._currentGraphics=this._graphics[i.GetType()];var s=i.fixtures.length,o=i.GetTransform();for(var u=0;u<s;u++){var a=i.fixtures[u];a.shape.draw(o)}}this._currentGraphics=this._graphics.particle;for(var n=0,r=this._physics.world.particleSystems.length;n<r;++n)this.drawParticleSystem(this._physics.world.particleSystems[n]);this._currentGraphics=this._graphics.joint;for(var n=0,r=this._physics.world.joints.length;n<r;++n)this.drawJoint(this._physics.world.joints[n]);this.parent&&this.parent.children[this.parent.children.length-1]!=this&&this.parent.addChild(this)},t}(PIXI.Container),e("PhysicsDebugDraw",u)}}}),System.register("Base/resources/useSoundPack",[],function(e,t){"use strict";function i(e,t){if(e.url.endsWith(".soundPack.zip")){var n=e.name.split("/").shift(),r=new JSZip;r.loadAsync(e.data).then(function(){var i=[];for(var o in r.files)i.push(s(n,r,o));Promise.all(i).then(function(){e.data="removed",t()})})}else t()}function s(e,t,n){var r=t.file(n);return r.async("arraybuffer").then(function(t){n.startsWith("/")||(n="/"+n);var r=e+n;o(r,t)})}function o(e,t){PIXI.sound.add(e,{source:t,preload:!0})}var n=t&&t.id,r=t&&t.id;return e("useSoundPack",i),{setters:[],execute:function(){PIXI.LoaderResource.setExtensionXhrType("zip",PIXI.LoaderResource.XHR_RESPONSE_TYPE.BUFFER)}}}),System.register("Base/pixis/display/SpritesheetMovieClip",["./../../utils/ArrayUtil","./../../geom/Point","./../../geom/Rectangle"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a,f=t&&t.id,l=t&&t.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e}],execute:function(){o=function(){function e(e,t){this.textures=e,this.speed=t}return e}(),e("SpritesheetSequence",o),u=function(){function e(e,t){this._spritesheet=e,this._json=t,this._sequences={},this.addSequence("",r.ArrayUtil.listKeysOfObject(e.textures),.1),t&&t.sequences?this.parseSequencesJson(t.sequences):this.smartGenerateSequences()}return Object.defineProperty(e.prototype,"spritesheet",{get:function(){return this._spritesheet},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this._json},enumerable:!0,configurable:!0}),e.createGridSpritesheet=function(t,n,r,o,u,a){o===void 0&&(o=0),u===void 0&&(u=0),a===void 0&&(a=null),a?(a.x=Math.max(0,a.x),a.y=Math.max(0,a.y),a.width=Math.min(t.width-a.x,a.width),a.height=Math.min(t.height-a.y,a.height)):a=new s.Rectangle(0,0,t.width,t.height);var f=Math.floor(a.width/n),l=Math.floor(a.height/r),c=new i.PointInt(n-o*2,r-u*2),h={};for(var p=0;p<l;++p)for(var d=0;d<f;++d)h[i.PointInt.makeString(d,p)]={frame:{x:d*n+o,y:p*r+u,w:c.x,h:c.y},rotated:!1,timmed:!1,spriteSourceSize:{x:0,y:0,w:c.x,h:c.y},sourceSize:{w:c.x,h:c.y}};var v={frames:h,meta:{size:{w:t.width,h:t.height},scale:1}};return new Promise(function(n,r){var i=new PIXI.Spritesheet(t,v);i.parse(function(){n(new e(i,v))})})},e.prototype.smartGenerateSequences=function(){var e={};for(var t in this._spritesheet.textures){var n=t.lastIndexOf("/");if(n==-1)continue;var i=t.substr(0,n),s=t.substr(n+1),o=e[i];o||(o={name:i,frames:[]},e[i]=o);while(s.length<9)s="0"+s;o.frames.push({frame:t,subframe:s})}var u={};for(var i in e){var o=e[i];r.ArrayUtil.sortOn(o.frames,"subframe",!0),u[i]=o.frames.map(function(e){return e.frame})}this.parseSequencesJson(u)},e.prototype.parseSequencesJson=function(e){if(e)for(var t in e){var n=e[t];Array.isArray(n)?this.addSequence(t,n,.1):this.addSequence(t,n.frames,n.speed)}},e.prototype.addSequence=function(e,t,n){var r=this,i=t.map(function(e){return r._spritesheet.textures[e]});this._sequences[e]=new o(i,n)},e.prototype.getSequence=function(e){return e===void 0&&(e=""),this._sequences[e]},e.prototype.listSequenceNames=function(){return r.ArrayUtil.listKeysOfObject(this._sequences)},e.prototype.createMovieClip=function(){return new a(this)},e}(),e("SpritesheetInfo",u),a=function(e){function t(t){var n=e.call(this,t.getSequence().textures)||this;return n.info=t,n.animationSpeed=t.getSequence().speed,n}return n(t,e),t.prototype.setSequence=function(e,t,n){n===void 0&&(n=!1);var r=this.info.getSequence(e);this.textures=r.textures,this.animationSpeed=r.speed,this.loop=n,t?this.gotoAndPlay(0):this.gotoAndStop(0)},t.prototype.setFrame=function(e){var t=this.info.spritesheet.textures[e];t?(this.textures=[t],this.gotoAndStop(0)):console.log("Error: frame("+e+") not found in the spritesheet.")},t}(PIXI.AnimatedSprite),e("SpritesheetMovieClip",a)}}}),System.register("Base/pixis/display/GafManager",["./fixGafLib","./../../System","./../../resources/ResourceManager"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a=t&&t.id,f=t&&t.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e}],execute:function(){o=function(e){function t(t,n){var r=e.call(this)||this;return r.gafName=t,r.url=n,r}return n(t,e),Object.defineProperty(t.prototype,"loaded",{get:function(){return this._loaded},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loading",{get:function(){return this.loader&&!this._loaded},enumerable:!0,configurable:!0}),t.prototype.load=function(){var e=this;return this.loaded?Promise.resolve():(this.loader||(this.loader=new GAF.GAFLoader,this.loader.addGAFFile(this.url),this.loader.onProgress.add(function(){return e.emit(t.EVENT.LOAD_PROGRESS)}),this.loader.onComplete.once(function(t){return e.onLoaderLoaded(t)}),this.loader.load()),new Promise(function(n,r){e.once(t.EVENT.LOAD_COMPLETE,function(){return n()})}))},t.prototype.onLoaderLoaded=function(e){var t=new GAF.ZipToGAFAssetConverter;t.once(GAF.GAFEvent.COMPLETE,this.onGafLoaded,this),t.convert(e)},t.prototype.onGafLoaded=function(e){var n=e.target;this.gafBundle=n.gafBundle,this._loaded=!0,this.emit(t.EVENT.LOAD_COMPLETE,this)},t.prototype.createMovieClip=function(e){if(!this.gafBundle)return null;var t=this.gafBundle.getGAFTimeline(this.gafName,e);return t?new GAF.GAFMovieClip(t):null},t.EVENT={LOAD_PROGRESS:"load-progress",LOAD_COMPLETE:"load-complete"},t}(PIXI.utils.EventEmitter),u=function(e){function t(){var t=e.call(this)||this;return t._gafInfoMap={},t._currentLoadingList=[],t._wasAllLoaded=!0,t}return n(t,e),t.prototype.createMovieClip=function(e,t){var n=i.getAppResource(e);n&&(e=s.ResourceManager.RESOURCE_ID_PREFIX+n.id);var r=this.getGafInfo(e);if(r){var o=r.createMovieClip(t);return o&&(o.cgResource={alias:e,linkage:t}),o}return null},t.prototype.getGafInfo=function(e){return this._gafInfoMap[e.toString()]},t.prototype.loadGaf=function(e,t,n){var r=i.getAppResource(n);r&&(n=s.ResourceManager.RESOURCE_ID_PREFIX+r.id);var o=this.getOrCreateGafInfo(e,t,n||e);return o.load()},t.prototype.getOrCreateGafInfo=function(e,t,n){var r=this.getGafInfo(n);if(!r)r=new o(e,this.generateGafUrl(e,t)),this._gafInfoMap[n]=r,r.on(o.EVENT.LOAD_PROGRESS,this.onGafLoaderProgress,this),r.once(o.EVENT.LOAD_COMPLETE,this.onGafLoaderComplete,this),this._wasAllLoaded&&(this._wasAllLoaded=!1,this._currentLoadingList=[]),this._currentLoadingList.push(r);else if(r.url!=this.generateGafUrl(e,t))throw new Error("Duplicated alias name for different Gaf resource ("+e+", "+t+", "+n+")");return r},t.prototype.generateGafUrl=function(e,t){return t?t.charAt(t.length-1)!="/"&&(t+="/"):t="",t+e+"/"+e+".gaf"},t.prototype.isGafLoaded=function(e){var t=i.getAppResource(e);t&&(e=s.ResourceManager.RESOURCE_ID_PREFIX+t.id);var n=this.getGafInfo(e);return n&&n.loaded},t.prototype.onGafLoaderProgress=function(){this.emit(t.EVENT.LOAD_PROGRESS,this.currentLoadedLoaders,this.currentLoadersTotal)},Object.defineProperty(t.prototype,"allLoaded",{get:function(){for(var e in this._gafInfoMap)if(!this._gafInfoMap[e].loaded)return!1;return!0},enumerable:!0,configurable:!0}),t.prototype.onGafLoaderComplete=function(e){!this._wasAllLoaded&&this.allLoaded&&(this._wasAllLoaded=!0,this.emit(t.EVENT.LOAD_COMPLETE))},Object.defineProperty(t.prototype,"loading",{get:function(){return this.currentLoadersTotal>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLoadersTotal",{get:function(){return this._currentLoadingList.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLoadedLoaders",{get:function(){var e=0;for(var t=0,n=this._currentLoadingList;t<n.length;t++){var r=n[t];r.loaded&&++e}return e},enumerable:!0,configurable:!0}),t.prototype.removeLocalTransform=function(e){var t=e.transform.localTransform,n=Math.atan2(t.b,t.a),r=t.a*t.a+t.b*t.b,i=Math.sqrt(r),s=(t.a*t.d-t.b*t.c)/i,o=t.tx,u=t.ty;t.tx=0,t.ty=0,e.transform.position.x+=o,e.transform.position.y+=u,t.a=1,t.b=0,t.c=0,t.d=1,e.transform.scale.x*=i,e.transform.scale.y*=s,e.rotation=n},t.EVENT={LOAD_PROGRESS:"load-progress",LOAD_COMPLETE:"load-complete"},t}(PIXI.utils.EventEmitter),e("GafManager",u),r.fixLibsDone}}}),System.register("Base/physics2d/PhysicsObject",["./../utils/MathUtil"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s=t&&t.id,o=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(e){function t(t,n,r){var i=e.call(this)||this;i._name=n,i._disposed=!1,i._fixtureTangentSpeed=new Map,i._bodyTangentSpeed=0,i._physics=t,i._physics.addObject(i);var s=new b2BodyDef;return s.allowSleep=!1,s.userData=i,r.type=="dynamic"?s.type=b2_dynamicBody:r.type=="kinematic"?s.type=b2_kinematicBody:s.type=b2_staticBody,"linearDamping"in r&&(s.linearDamping=r.linearDamping),"angularDamping"in r&&(s.angularDamping=r.angularDamping),"fixedRotation"in r&&(s.fixedRotation=r.fixedRotation),"linearVelocity"in r&&(s.linearVelocity=r.linearVelocity.Clone(),s.linearVelocity.Set(s.linearVelocity.x/i._physics.b2Scale,s.linearVelocity.y/i._physics.b2Scale)),"angularVelocity"in r&&(s.angularVelocity=r.angularVelocity),i._body=i._physics.world.CreateBody(s),i.setPhysicsContactContext(i),i}return n(t,e),Object.defineProperty(t.prototype,"bodyTangentSpeed",{get:function(){return this._bodyTangentSpeed},set:function(e){this._bodyTangentSpeed=e},enumerable:!0,configurable:!0}),t.prototype.setFixtureTangentSpeed=function(e,t){this._fixtureTangentSpeed.set(e,t)},t.prototype.getFixtureTangentSpeed=function(e){return this._fixtureTangentSpeed.has(e)?this._fixtureTangentSpeed.get(e):0},Object.defineProperty(t.prototype,"contactContext",{get:function(){return this._contactContext?this._contactContext:this},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),t.prototype.setPhysicsContactContext=function(e){this._contactContext=e;for(var t=0,n=this._body.fixtures;t<n.length;t++){var r=n[t];r.userData=e}},t.prototype.dispose=function(){this.disposePhysics(),this._disposed=!0},t.prototype.disposePhysics=function(){this._physics.containsObject(this)&&(this._physics.world.DestroyBody(this._body),this._physics.removeObject(this))},t.prototype.isDisposed=function(){return this._disposed},Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.setPosition=function(e,t){this._body.SetTransform(new b2Vec2(e/this._physics.b2Scale,t/this._physics.b2Scale),this._body.GetAngle())},Object.defineProperty(t.prototype,"x",{get:function(){return this._body.GetPosition().x*this._physics.b2Scale},set:function(e){this._body.SetTransform(new b2Vec2(e/this._physics.b2Scale,this._body.GetPosition().y),this._body.GetAngle())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._body.GetPosition().y*this._physics.b2Scale},set:function(e){this._body.SetTransform(new b2Vec2(this._body.GetPosition().x,e/this._physics.b2Scale),this._body.GetAngle())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"velocityX",{get:function(){return this._body.GetLinearVelocity().x*this._physics.b2Scale},set:function(e){this._body.SetLinearVelocity(new b2Vec2(e/this._physics.b2Scale,this._body.GetLinearVelocity().y))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"velocityY",{get:function(){return this._body.GetLinearVelocity().y*this._physics.b2Scale},set:function(e){this._body.SetLinearVelocity(new b2Vec2(this._body.GetLinearVelocity().x,e/this._physics.b2Scale))},enumerable:!0,configurable:!0}),t.prototype.setVelocity=function(e,t){this._body.SetLinearVelocity(new b2Vec2(e/this._physics.b2Scale,t/this._physics.b2Scale))},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._body.GetAngle()},set:function(e){this._body.SetTransform(this._body.GetPosition(),e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationDeg",{get:function(){return r.MathUtil.radians2degrees(this._body.GetAngle())},set:function(e){this._body.SetTransform(this._body.GetPosition(),r.MathUtil.degrees2radians(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angularVelocity",{get:function(){return this._body.GetAngularVelocity()},set:function(e){this._body.SetAngularVelocity(e)},enumerable:!0,configurable:!0}),t.prototype._createFixtureDef=function(e,t){t=t||{};var n=new b2FixtureDef;return n.shape=e,"density"in t&&(n.density=t.density),"friction"in t&&(n.friction=t.friction),"restitution"in t&&(n.restitution=t.restitution),"isSensor"in t&&(n.isSensor=t.isSensor),"categoryBits"in t&&(n.filter.categoryBits=t.categoryBits),"maskBits"in t&&(n.filter.maskBits=t.maskBits),"groupIndex"in t&&(n.filter.groupIndex=t.groupIndex),this._contactContext&&(n.userData=this._contactContext),n},t.prototype.addEdge=function(e,t,n){n===void 0&&(n=null);var r=new b2EdgeShape;return r.Set(e.toScaledB2Vec2(1/this._physics.b2Scale),t.toScaledB2Vec2(1/this._physics.b2Scale)),this._body.CreateFixtureFromDef(this._createFixtureDef(r,n))},t.prototype.addCircle=function(e,t,n,r){r===void 0&&(r=null);var i=new b2CircleShape;return i.radius=n/this._physics.b2Scale,i.position.Set(e/this._physics.b2Scale,t/this._physics.b2Scale),this._body.CreateFixtureFromDef(this._createFixtureDef(i,r))},t.prototype.addBox=function(e,t,n,r,i){i===void 0&&(i=null);var s=new b2PolygonShape;return s.SetAsBoxXYCenterAngle(n/this._physics.b2Scale,r/this._physics.b2Scale,new b2Vec2(e/this._physics.b2Scale,t/this._physics.b2Scale),0),this._body.CreateFixtureFromDef(this._createFixtureDef(s,i))},t.prototype.addPolygon=function(e,t){t===void 0&&(t=null);var n=new b2PolygonShape,r=[];for(var i in e)r[i]=e[i].toScaledB2Vec2(1/this._physics.b2Scale);return n.vertices=r,this._body.CreateFixtureFromDef(this._createFixtureDef(n,t))},t.prototype.addChain=function(e,t){t===void 0&&(t=null);var n=new b2ChainShape,r=[];for(var i in e)r[i]=e[i].toScaledB2Vec2(1/this._physics.b2Scale);return n.vertices=r,this._body.CreateFixtureFromDef(this._createFixtureDef(n,t))},t.prototype.onPhysicsContactBegin=function(e,n,r){this.emit(t.EVENT.CONTACT_BEGIN,{object:this,target:e,contact:n,fixture:r})},t.prototype.onPhysicsContactPreSolve=function(e,n,r,i){if(this.bodyTangentSpeed)n.SetTangentSpeed(this.bodyTangentSpeed);else{var s=this.getFixtureTangentSpeed(n.GetFixtureA())||this.getFixtureTangentSpeed(n.GetFixtureB());s&&n.SetTangentSpeed(s)}this.emit(t.EVENT.CONTACT_PRE_RESOLVE,{object:this,target:e,contact:n,oldManifold:r,fixture:i})},t.prototype.onPhysicsContactPostSolve=function(e,n,r,i){this.emit(t.EVENT.CONTACT_POST_RESOLVE,{object:this,target:e,contact:n,impulse:r,fixture:i})},t.prototype.onPhysicsContactEnd=function(e,n,r){this.emit(t.EVENT.CONTACT_END,{object:this,target:e,contact:n,fixture:r})},t.EVENT={CONTACT_BEGIN:"contactBegin",CONTACT_PRE_RESOLVE:"contactPreResolve",CONTACT_POST_RESOLVE:"contactPostResolve",CONTACT_END:"contactEnd"},t}(PIXI.utils.EventEmitter),e("PhysicsObject",i)}}}),System.register("Base/geom/Vector3D",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){n=function(){function e(e,t,n){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),this._x=e,this._y=t,this._z=n,this._length=Number.NaN}return e.fromString=function(t){var n=t.split(",");return new e(parseFloat(n[0].trim()),parseFloat(n[1].trim()),parseFloat(n[2].trim()))},e.prototype.set=function(e,t,n){this._x=e,this._y=t,this._z=n,this._length=Number.NaN},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._length=Number.NaN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._length=Number.NaN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._z},set:function(e){this._z=e,this._length=Number.NaN},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(t._x+this._x,t._y+this._y,t._z+this._z)},e.prototype.sub=function(t){return new e(this._x-t._x,this._y-t._y,this._z-t._z)},e.prototype.addXYZ=function(t,n,r){return new e(t+this._x,n+this._y,r+this._z)},e.prototype.subXYZ=function(t,n,r){return new e(this._x-t,this._y-n,this._z-r)},e.prototype.offset=function(e,t,n){this._x+=e,this._y+=t,this._z+=n,this._length=Number.NaN},e.prototype.equals=function(e){return this._x==e._x&&this._y==e._y&&this._z==e._z},e.prototype.clone=function(){return new e(this._x,this._y,this._z)},e.prototype.toString=function(){return this._x.toString()+","+this._y+","+this._z},e.prototype.scale=function(e){this._x*=e,this._y*=e,this._z*=e,this._length=Number.NaN},Object.defineProperty(e.prototype,"length",{get:function(){return isNaN(this._length)&&(this._length=Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)),this._length},enumerable:!0,configurable:!0}),e.prototype.normalize=function(e){this.length!=0&&this.scale(e/this.length)},e.prototype.rotateX=function(e){var t=Math.cos(e),n=Math.sin(e),r=this._y,i=this._z;this._y=r*t-i*n,this._z=i*t+r*n},e.prototype.rotateY=function(e){var t=Math.cos(e),n=Math.sin(e),r=this._x,i=this._z;this._x=r*t-i*n,this._z=i*t+r*n},e.prototype.rotateZ=function(e){var t=Math.cos(e),n=Math.sin(e),r=this._x,i=this._y;this._x=r*t-i*n,this._y=i*t+r*n},e.interpolate=function(e,t,n){var r=t.sub(e);return r.x=e.x+r.x*n,r.y=e.y+r.y*n,r.z=e.z+r.z*n,r},e.prototype.followTarget=function(e,t,n,r){r===void 0&&(r=Number.MAX_VALUE);var i=e.sub(this),s=i.length;if(s>n){var o=Math.min(r,Math.max(n,s*t));i.normalize(o),this.x+=i.x,this.y+=i.y,this.z+=i.z}else this.x=e.x,this.y=e.y,this.z=e.z},e.NULL=new e(Number.NaN,Number.NaN,Number.NaN),e}(),e("Vector3D",n)}}}),System.register("Base/pixis/display/fixGafLib",["./../../geom/Point","./../../utils/MathUtil"],function(e,t){"use strict";function a(e,t){if(e){if(this.filters_filterConfig==e&&this.filters_filterScale==t)return;this.filters_filterConfig=e,this.filters_filterScale=t;var i=e.getBlurFilter(),s=e.getColorMatrixFilter(),o=[];if(i){var u=new PIXI.filters.BlurFilter(i.strength);u.blurX=i.blurX,u.blurY=i.blurY,o.push(u)}if(s){var u=new PIXI.filters.ColorMatrixFilter;u.matrix=s.matrix,o.push(u)}this.filters=e._filterConfigs.map(function(e){if(e.matrix){var t=new PIXI.filters.ColorMatrixFilter;return t.matrix=e.matrix,t}if(e.hasOwnProperty("blurX")&&e.hasOwnProperty("blurY")){if(e.color==-1){var t=new PIXI.filters.BlurFilter(i.strength/4);return t.blurX=i.blurX/4,t.blurY=i.blurY/4,t}if(e.distance){var s=new n.Point(e.blurX,e.blurY),t=new PIXI.filters.DropShadowFilter;return t.blur=s.length,t.rotation=r.MathUtil.radians2degrees(Math.atan2(s.y,s.x)),t.distance=e.distance,t.alpha=e.alpha,t.color=e.color,t.shadowOnly=e.knockout,t}if(e.blurX||e.blurY){var s=new n.Point(e.blurX,e.blurY),t=new PIXI.filters.GlowFilter({color:e.color,distance:s.length+4});return e.inner?t.innerStrength=e.strength:t.outerStrength=e.strength,t}}}).filter(function(e){return e})}else this.filters=null,this.filters_filterConfig=null}var n,r,i,s,o=t&&t.id,u=t&&t.id;return{setters:[function(e){n=e},function(e){r=e}],execute:function(){i=PIXI.Sprite.prototype.destroy,PIXI.Sprite.prototype.destroy=function(t){try{i.apply(this,[t])}catch(n){}},GAF.GAFImage.prototype.setFilterConfig=a,GAF.GAFMovieClip.prototype.setFilterConfig=a,GAF.GAFTextField.prototype.setFilterConfig=a,e("fixLibsDone",s=!0)}}}),function(){CgLibs.bootLib("Base/index",["Base/index","Base/utils/UidManager","Base/translation/Translation","Base/locales/languages","Base/pixis/display/TilingSpriteContainer","Base/utils/IntUtil","Base/utils/NetUtil","Base/pixis/interactive/Button","Base/pixis/interactive/DragControl","Base/geom/Rectangle","Base/geom/ColorMatrix","Base/utils/SoundUtil","Base/geom/WhirledGridGenerator","Base/geom/HitBox","Base/utils/LotteryBox","Base/astars/TiledAStar","Base/statemachines/StateMachine","Base/statemachines/BindedStateMachine","Base/pixis/cameras/GameCamera3D","Base/pixis/cameras/GameCamera","Base/utils/NormalDistribution","Base/geom/LineIntersection","Base/utils/RandomGenerator","Base/utils/RangedValue","Base/pixis/interactive/ScrollControl","Base/geom/Color","Base/geom/Line","Base/geom/Matrix2","Base/geom/Padding","Base/utils/Updater","Base/utils/Version","Base/System","Base/utils/MathUtil","Base/geom/Point","Base/utils/ArrayUtil","Base/pixis/Pixi","Base/keyboard/KeyboardManager","Base/utils/ObjectUtil","Base/utils/StringUtil","Base/physics2d/Physics","Base/resources/ResourceManager","Base/utils/HtmlUtil","Base/utils/IStorage","Base/keyboard/Key","Base/pixis/display/PhysicsDebugDraw","Base/resources/useSoundPack","Base/pixis/display/SpritesheetMovieClip","Base/pixis/display/GafManager","Base/physics2d/PhysicsObject","Base/geom/Vector3D","Base/pixis/display/fixGafLib"])}()}};CgLibs.bootModule('Base')},function(){CgLibs.modules.Cordova={boot:function(e){System.register("Cordova/app",["./PluginAdmob","./PluginVibration","./PluginStatusBar","./PluginScreenOrientation","./PluginNetworkInformation","./PluginFile","./PluginMedia","./PluginInappbrowser","./PluginGeolocation","./PluginDialogs","./PluginDevice","./PluginCamera","./PluginBatteryStatus"],function(t,n){"use strict";function P(){return y.deviceReady}function H(){navigator.app&&navigator.app.exitApp()}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_=n&&n.id,D=n&&n.id;return t("isDeviceReady",P),t("closeApp",H),{setters:[function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e},function(e){a=e},function(e){f=e},function(e){l=e},function(e){c=e},function(e){h=e},function(e){p=e},function(e){d=e},function(e){v=e},function(e){m=e}],execute:function(){g=function(e){function t(){var t=e.call(this)||this;return t._deviceReady=!1,document.addEventListener("deviceready",function(){console.log("device ready"),t._deviceReady=!0},!1),t}return r(t,e),Object.defineProperty(t.prototype,"deviceReady",{get:function(){return this._deviceReady},enumerable:!0,configurable:!0}),t.EVENT={START_CORDOVA:"startCordova",START_EMULATOR:"startEmulator"},t}(PIXI.utils.EventEmitter),t("App",g),y=new g,t("device",b=new d.PluginDevice(y)),t("batteryStatus",w=new m.PluginBatteryStatus(y)),t("camera",E=new v.PluginCamera(y)),t("dialogs",S=new p.PluginDialogs(y)),t("file",x=new f.PluginFile(y)),t("geolocation",T=new h.PluginGeolocation(y)),t("inappbrowser",N=new c.PluginInappbrowser(y)),t("media",C=new l.PluginMedia(y)),t("networkInfomation",k=new a.PluginNetworkInformation(y)),t("screenOrientation",L=new u.PluginScreenOrientation(y)),t("statusBar",A=new o.PluginStatusBar(y)),t("vibration",O=new s.PluginVibration(y)),t("admob",M=new i.PluginAdmob(y)),e.Base.system.isCordovaApp()?y.emit(g.EVENT.START_CORDOVA):e.Base.system.devMode&&(e.Base.linkCSSFile(e.Base.getAppSourceUrl("CG.Cordova/emulator.css")),e.Base.resourceManager.addAppSource("CG.Cordova/config.json"),e.Base.resourceManager.load(function(){var t=e.Base.resourceManager.getJSON("CG.Cordova/config.json")||{};t.preferences=t.preferences||{},t.config=t.config||{},y.emit(g.EVENT.START_EMULATOR,t)}))}}}),System.register("Cordova/PluginVibration",["./BasePlugin"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s=t&&t.id,o=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.vibrate=function(e){return navigator.vibrate(e)},t.prototype.cancel=function(){navigator.vibrate(0)},t}(r.BasePlugin),e("PluginVibration",i)}}}),System.register("Cordova/PluginAdmob",["./emulators/AdmobEmulator","./BasePlugin"],function(e,t){"use strict";function l(){return Promise.reject("admob not supported")}var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a=t&&t.id,f=t&&t.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.initialize=function(){var n=this;e.prototype.initialize.call(this);var r=window.admob;r?(this.banner=r.banner,this.interstitial=r.interstitial,this.rewardVideo=r.rewardVideo):(this.banner={show:l,hide:l},this.interstitial={load:l,show:l},this.interstitial={load:l,show:l}),document.addEventListener(t.EVENT.BANNER_LOAD,function(e){return n.emit(t.EVENT.BANNER_LOAD,[e])},!1),document.addEventListener(t.EVENT.BANNER_LOAD_FAIL,function(e){return n.emit(t.EVENT.BANNER_LOAD_FAIL,[e])},!1),document.addEventListener(t.EVENT.BANNER_OPEN,function(e){return n.emit(t.EVENT.BANNER_OPEN,[e])},!1),document.addEventListener(t.EVENT.BANNER_EXIT_APP,function(e){return n.emit(t.EVENT.BANNER_EXIT_APP,[e])},!1),document.addEventListener(t.EVENT.BANNER_CLOSE,function(e){return n.emit(t.EVENT.BANNER_CLOSE,[e])},!1)},t.prototype.initEmulator=function(t){e.prototype.initEmulator.call(this,t),new r.AdmobEmulator},t.prototype.setAppVolume=function(e){window.admob&&window.admob.setAppVolume(Math.max(0,Math.min(1,e)))},t.prototype.setAppMuted=function(e){window.admob&&window.admob.setAppMuted(e)},t.prototype.setDevMode=function(e){window.admob&&window.admob.setDevMode(e)},t.EVENT={BANNER_LOAD:"admob.banner.load",BANNER_LOAD_FAIL:"admob.banner.load_fail",BANNER_OPEN:"admob.banner.open",BANNER_EXIT_APP:"admob.banner.exit_app",BANNER_CLOSE:"admob.banner.close",INTERSTITIAL_LOAD:"admob.interstitial.load",INTERSTITIAL_LOAD_FAIL:"admob.interstitial.load_fail",INTERSTITIAL_OPEN:"admob.interstitial.open",INTERSTITIAL_CLOSE:"admob.interstitial.close",INTERSTITIAL_EXIT_APP:"admob.interstitial.exit_app",REWARD_VIDEO_LOAD:"admob.reward_video.load",REWARD_VIDEO_LOAD_FAIL:"admob.reward_video.load_fail",REWARD_VIDEO_OPEN:"admob.reward_video.open",REWARD_VIDEO_CLOSE:"admob.reward_video.close",REWARD_VIDEO_START:"admob.reward_video.start",REWARD_VIDEO_COMPLETE:"admob.reward_video.complete",REWARD_VIDEO_REWARD:"admob.reward_video.reward",REWARD_VIDEO_EXIT_APP:"admob.reward_video.exit_app"},t}(i.BasePlugin),e("PluginAdmob",s),e("ADMOB_POSITION",o={BOTTOM:"bottom",TOP:"top"}),e("ADMOB_SIZE",u={SMART_BANNER:"SMART_BANNER",BANNER:"BANNER",MEDIUM_RECTANGLE:"MEDIUM_RECTANGLE",FULL_BANNER:"FULL_BANNER",LARGE_BANNER:"LARGE_BANNER",LEADERBOARD:"LEADERBOARD",SKYSCRAPER:"SKYSCRAPER"})}}}),System.register("Cordova/PluginStatusBar",["./emulators/StatusBarEmulator","./BasePlugin"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a=t&&t.id,f=t&&t.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.initialize=function(){var n=this;e.prototype.initialize.call(this),window.addEventListener("statusTap",function(){return n.emit(t.EVENT.STATUS_TAP)},!1)},t.prototype.initEmulator=function(n){var i=this;e.prototype.initEmulator.call(this,n);var s=new r.StatusBarEmulator(n);window.StatusBar=s,s.on("statusTap",function(){return i.emit(t.EVENT.STATUS_TAP)}),this.setStyle=function(e){s.setStyle(e)}},t.prototype.onStatusTap=function(e,n){this.on(t.EVENT.STATUS_TAP,e,n)},Object.defineProperty(t.prototype,"statusBar",{get:function(){return window.StatusBar},enumerable:!0,configurable:!0}),t.prototype.overlaysWebView=function(e){this.statusBar&&this.statusBar.overlaysWebView(e)},t.prototype.setStyle=function(e){this.statusBar&&this.statusBar["style"+e]&&this.statusBar["style"+e]()},t.prototype.backgroundColorByName=function(e){this.statusBar&&this.statusBar.backgroundColorByName(e)},t.prototype.backgroundColorByHexString=function(e){this.statusBar&&this.statusBar.backgroundColorByHexString(e)},t.prototype.hide=function(){this.statusBar&&this.statusBar.hide()},t.prototype.show=function(){this.statusBar&&this.statusBar.show()},Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.statusBar&&this.statusBar.isVisible},enumerable:!0,configurable:!0}),t.EVENT={STATUS_TAP:"statusTap"},t}(i.BasePlugin),e("PluginStatusBar",s),function(e){e.DEFAULT="Default",e.LIGHT_CONTENT="LightContent",e.BLACK_TRANSLUCENT="BlackTranslucent",e.BLACK_OPAQUE="BlackOpaque"}(o||(o={})),e("StatusBarStyle",o),function(e){e.BLACK="black",e.DARK_GRAY="darkGray",e.LIGHT_GRAY="lightGray",e.WHITE="white",e.GRAY="gray",e.RED="red",e.GREEN="green",e.BLUE="blue",e.CYAN="cyan",e.YELLOW="yellow",e.MAGENTA="magenta",e.ORANGE="orange",e.PURPLE="purple",e.BROWN="brown"}(u||(u={})),e("StatusBarColor",u)}}}),System.register("Cordova/PluginScreenOrientation",["./BasePlugin"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o=t&&t.id,u=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.initialize=function(){var n=this;e.prototype.initialize.call(this),window.addEventListener("orientationchange",function(){return n.emit(t.EVENT.ORIENTATION_CHANGE)},!1)},t.prototype.initEmulator=function(t){e.prototype.initEmulator.call(this,t),this.initialize()},Object.defineProperty(t.prototype,"screen",{get:function(){return window.screen},enumerable:!0,configurable:!0}),t.prototype.onOrientationChange=function(e,n){this.on(t.EVENT.ORIENTATION_CHANGE,e,n)},t.prototype.lock=function(e){this.screen.orientation.lock(e)},t.prototype.unlock=function(){this.screen.orientation.unlock()},Object.defineProperty(t.prototype,"orientationType",{get:function(){return this.screen.orientation.type},enumerable:!0,configurable:!0}),t.EVENT={ORIENTATION_CHANGE:"orientationchange"},t}(r.BasePlugin),e("PluginScreenOrientation",i),function(e){e.PORTRAIT_PRIMARY="portrait-primary",e.PORTRAIT_SECONDARY="portrait-secondary",e.LANDSCAPE_PRIMARY="landscape-primary",e.LANDSCAPE_SECONDARY="landscape-secondary",e.PORTRAIT="portrait",e.LANDSCAPE="landscape",e.ANY="any"}(s||(s={})),e("ScreenOrientationType",s)}}}),System.register("Cordova/PluginNetworkInformation",["./emulators/NetworkConnectionEmulator","./BasePlugin"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u=t&&t.id,a=t&&t.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(){var t=e!==null&&e.apply(this,arguments)||this;return t._connectionKey="connection",t}return n(t,e),t.prototype.initialize=function(){var n=this;e.prototype.initialize.call(this),document.addEventListener("offline",function(){return n.emit(t.EVENT.OFFLINE)},!1),document.addEventListener("online",function(){return n.emit(t.EVENT.ONLINE)},!1)},t.prototype.initEmulator=function(n){var i=this;e.prototype.initEmulator.call(this,n),this._connectionKey="connectionEmulator";var s=new r.NetworkConnectionEmulator;navigator[this._connectionKey]=s,s.connection.addEventListener("change",function(){s.connection.type==o.NONE?i.emit(t.EVENT.OFFLINE):i.emit(t.EVENT.ONLINE)},!1)},t.prototype.onOffline=function(e,n){this.on(t.EVENT.OFFLINE,e,n)},t.prototype.onOnline=function(e,n){this.on(t.EVENT.ONLINE,e,n)},Object.defineProperty(t.prototype,"connection",{get:function(){return navigator[this._connectionKey]},enumerable:!0,configurable:!0}),t.EVENT={OFFLINE:"offline",ONLINE:"online"},t}(i.BasePlugin),e("PluginNetworkInformation",s),e("NetworkConnectionType",o=window.Connection||{UNKNOWN:"UNKNOWN",ETHERNET:"ETHERNET",WIFI:"WIFI",CELL_2G:"CELL_2G",CELL_3G:"CELL_3G",CELL_4G:"CELL_4G",CELL:"CELL",NONE:"NONE"})}}}),System.register("Cordova/PluginMedia",["./PluginMediaCapture","./BasePlugin"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a=t&&t.id,f=t&&t.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(t){var n=e.call(this,t)||this;return n.capturePlugin=new r.PluginMediaCapture(t),n}return n(t,e),t.prototype.create=function(e,t,n,r){return window.Media&&window.Media(e,t,n,r)},Object.defineProperty(t.prototype,"capture",{get:function(){return this.capturePlugin.capture},enumerable:!0,configurable:!0}),t}(i.BasePlugin),e("PluginMedia",s),function(e){e[e.NONE=0]="NONE",e[e.STARTING=1]="STARTING",e[e.RUNNING=2]="RUNNING",e[e.PAUSED=3]="PAUSED",e[e.STOPPED=4]="STOPPED"}(o||(o={})),e("MediaStatus",o),function(e){e[e.ABORTED=1]="ABORTED",e[e.NETWORK=2]="NETWORK",e[e.DECODE=3]="DECODE",e[e.NONE_SUPPORTED=4]="NONE_SUPPORTED"}(u||(u={})),e("MediaErrorCode",u)}}}),System.register("Cordova/PluginGeolocation",["./emulators/GeolocationEmulator","./BasePlugin"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u=t&&t.id,a=t&&t.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.geolocKey="geolocation",t}return n(t,e),Object.defineProperty(t.prototype,"geolocation",{get:function(){return navigator[this.geolocKey]},enumerable:!0,configurable:!0}),t.prototype.initEmulator=function(t){e.prototype.initEmulator.call(this,t),this.geolocKey="geolocEmulator",navigator[this.geolocKey]=new r.GeolocationEmulator},t.prototype.getCurrentPosition=function(e,t,n){this.geolocation.getCurrentPosition(e,t,n)},t.prototype.watchPosition=function(e,t,n){return this.geolocation.watchPosition(e,t,n)},t.prototype.clearWatch=function(e){this.geolocation.clearWatch(e)},t}(i.BasePlugin),e("PluginGeolocation",s),function(e){e[e.PERMISSION_DENIED=1]="PERMISSION_DENIED",e[e.POSITION_UNAVAILABLE=2]="POSITION_UNAVAILABLE",e[e.TIMEOUT=3]="TIMEOUT"}(o||(o={})),e("GeolocationPositionErrorCode",o)}}}),System.register("Cordova/PluginDialogs",["./emulators/NotificationEmulator","./BasePlugin"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o=t&&t.id,u=t&&t.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"notification",{get:function(){return navigator.notification},enumerable:!0,configurable:!0}),t.prototype.initEmulator=function(t){e.prototype.initEmulator.call(this,t),navigator.notification=new r.NotificationEmulator},t.prototype.alert=function(e,t,n,r){this.notification.alert(e,t,n,r)},t.prototype.confirm=function(e,t,n,r){this.notification.confirm(e,t,n,r)},t.prototype.prompt=function(e,t,n,r,i){this.notification.prompt(e,t,n,r,i)},t.prototype.beep=function(e){this.notification.beep(e)},t}(i.BasePlugin),e("PluginDialogs",s)}}}),System.register("Cordova/PluginFile",["./BasePlugin"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a=t&&t.id,f=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"file",{get:function(){return window.cordova&&window.cordova.file},enumerable:!0,configurable:!0}),t.prototype.iniitialize=function(){var n=this;e.prototype.initialize.call(this),window.addEventListener("filePluginIsReady",function(){return n.emit(t.EVENT.FILE_PLUGIN_IS_READY)},!1)},t.prototype.onFilePluginIsReady=function(e,n){this.on(t.EVENT.FILE_PLUGIN_IS_READY,e,n)},t.prototype.isFilePluginReadyRaised=function(){return window.isFilePluginReadyRaised},Object.defineProperty(t.prototype,"applicationDirectory",{get:function(){return this.file.applicationDirectory},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"applicationStorageDirectory",{get:function(){return this.file.applicationStorageDirectory},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataDirectory",{get:function(){return this.file.dataDirectory},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cacheDirectory",{get:function(){return this.file.cacheDirectory},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"externalApplicationStorageDirectory",{get:function(){return this.file.externalApplicationStorageDirectory},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"externalDataDirectory",{get:function(){return this.file.externalDataDirectory},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"externalCacheDirectory",{get:function(){return this.file.externalCacheDirectory},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"externalRootDirectory",{get:function(){return this.file.externalRootDirectory},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tempDirectory",{get:function(){return this.file.tempDirectory},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"syncedDataDirectory",{get:function(){return this.file.syncedDataDirectory},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"documentsDirectory",{get:function(){return this.file.documentsDirectory},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sharedDirectory",{get:function(){return this.file.sharedDirectory},enumerable:!0,configurable:!0}),t.prototype.requestFileSystem=function(e,t,n,r){window.requestFileSystem(e,t,n,r)},t.prototype.resolveLocalFileSystemURL=function(e,t,n){window.resolveLocalFileSystemURL(e,t,n)},t.prototype.resolveLocalFileSystemURI=function(e,t,n){window.resolveLocalFileSystemURL(e,t,n)},t.EVENT={FILE_PLUGIN_IS_READY:"filePluginIsReady"},t}(r.BasePlugin),e("PluginFile",i),function(e){e[e.PERSISTENT=0]="PERSISTENT",e[e.TEMPORARY=1]="TEMPORARY"}(s||(s={})),e("LocalFileSystem",s),e("FileWriter",o=window.FileWriter),e("FileError",u=window.FileError)}}}),System.register("Cordova/PluginInappbrowser",["./BasePlugin"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a=n&&n.id,f=n&&n.id;return{setters:[function(e){s=e}],execute:function(){i=e.Base.utils.ArrayUtil,o=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),t.prototype.iniitialize=function(){e.prototype.initialize.call(this)},t.prototype.initEmulator=function(t){e.prototype.initEmulator.call(this,t),window.cordova=window.cordova||{},window.cordova.InAppBrowser=window},Object.defineProperty(t.prototype,"inAppBrowser",{get:function(){return window.cordova.InAppBrowser},enumerable:!0,configurable:!0}),t.prototype.open=function(e,t,n){var r=undefined;if(n){var s=[];for(var o in n)i.addUniqueElement(s,o+"="+n[o]);r=s.join(",")}return this.inAppBrowser.open(e,t,r)},t}(s.BasePlugin),t("PluginInappbrowser",o),u=function(){function e(){}return e.SELF="_self",e.BLANK="_blank",e.SYSTEM="_system",e}(),t("InappbrowserOpenTarget",u)}}}),System.register("Cordova/PluginDevice",["./BasePlugin"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s=t&&t.id,o=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.initEmulator=function(t){e.prototype.initEmulator.call(this,t),window.device={cordova:"not supported",uuid:"not supported",model:navigator.appCodeName,platform:navigator.platform,version:navigator.appVersion,manufacturer:navigator.product,serial:"not supported",isVirtual:!0}},Object.defineProperty(t.prototype,"cordova",{get:function(){return device.cordova},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"model",{get:function(){return device.model},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"platform",{get:function(){return device.platform},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uuid",{get:function(){return device.uuid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return device.version},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"manufacturer",{get:function(){return device.manufacturer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVirtual",{get:function(){return device.isVirtual},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serial",{get:function(){return this.serial},enumerable:!0,configurable:!0}),t}(r.BasePlugin),e("PluginDevice",i)}}}),System.register("Cordova/PluginBatteryStatus",["./emulators/BatteryEmulator","./BasePlugin"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o=t&&t.id,u=t&&t.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(){var t=e!==null&&e.apply(this,arguments)||this;return t._currentStatus={level:100},t}return n(t,e),Object.defineProperty(t.prototype,"currentStatus",{get:function(){return this._currentStatus},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){var n=this;e.prototype.initialize.call(this),window.addEventListener("batterystatus",function(e){return n.emitStatusEvent(t.EVENT.BATTERY_STATUS,e)},!1),window.addEventListener("batterylow",function(e){return n.emitStatusEvent(t.EVENT.BATTERY_LOW,e)},!1),window.addEventListener("batterycritical",function(e){return n.emitStatusEvent(t.EVENT.BATTERY_CRITICAL,e)},!1)},t.prototype.initEmulator=function(n){var i=this;e.prototype.initEmulator.call(this,n);var s=new r.BatteryEmulator;s.on("batterystatus",function(e){return i.emitStatusEvent(t.EVENT.BATTERY_STATUS,e)}),s.on("batterylow",function(e){return i.emitStatusEvent(t.EVENT.BATTERY_LOW,e)}),s.on("batterycritical",function(e){return i.emitStatusEvent(t.EVENT.BATTERY_CRITICAL,e)})},t.prototype.emitStatusEvent=function(e,t){this._currentStatus=t,this.emit(e,t)},t.prototype.onBatteryStatus=function(e,n){this.on(t.EVENT.BATTERY_STATUS,e,n)},t.prototype.onBatteryLow=function(e,n){this.on(t.EVENT.BATTERY_LOW,e,n)},t.prototype.onBatteryCritical=function(e,n){this.on(t.EVENT.BATTERY_CRITICAL,e,n)},t.EVENT={BATTERY_STATUS:"batteryStatus",BATTERY_LOW:"batterylow",BATTERY_CRITICAL:"batteryCritical"},t}(i.BasePlugin),e("PluginBatteryStatus",s)}}}),System.register("Cordova/PluginCamera",["./emulators/CameraEmulator","./PluginCameraPreview","./BasePlugin"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a,f,l,c,h,p=t&&t.id,d=t&&t.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e}],execute:function(){o=function(e){function t(t){var n=e.call(this,t)||this;return n.pluginPreview=new i.PluginCameraPreview(t),n}return n(t,e),t.prototype.initEmulator=function(t){e.prototype.initEmulator.call(this,t),this.getPicture=this.emuGetPicture},Object.defineProperty(t.prototype,"camera",{get:function(){return navigator.camera},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preview",{get:function(){return this.pluginPreview.preview},enumerable:!0,configurable:!0}),t.prototype.emuGetPicture=function(e,t,n){console.log("emuGetPicture"),(new r.CameraEmulator).getPicture(n).then(function(t){return e(t)}).catch(function(e){return t(e)})},t.prototype.getPicture=function(e,t,n){n&&n.popoverOptions&&(n.popoverOptions=new CameraPopoverOptions(n.popoverOptions.x||0,n.popoverOptions.y||32,n.popoverOptions.width||320,n.popoverOptions.height||480,n.popoverOptions.arrowDir||l.ARROW_ANY)),this.camera.getPicture(e,t,n)},t.prototype.cleanup=function(e,t){this.camera.cleanup()},t.prototype.setPopupOverPosition=function(e,t,n,r,i){n===void 0&&(n=320),r===void 0&&(r=480),i===void 0&&(i=l.ARROW_ANY);var s=new CameraPopoverHandle,o=new CameraPopoverOptions(e,t,n,r,i);s.setPosition(o)},t}(s.BasePlugin),e("PluginCamera",o),function(e){e[e.DATA_URL=0]="DATA_URL",e[e.FILE_URI=1]="FILE_URI",e[e.NATIVE_URI=2]="NATIVE_URI"}(u||(u={})),e("CameraDestinationType",u),function(e){e[e.PICTURE=0]="PICTURE",e[e.VIDEO=1]="VIDEO",e[e.ALLMEDIA=2]="ALLMEDIA"}(a||(a={})),e("CameraMediaType",a),function(e){e[e.PHOTOLIBRARY=0]="PHOTOLIBRARY",e[e.CAMERA=1]="CAMERA",e[e.SAVEDPHOTOALBUM=2]="SAVEDPHOTOALBUM"}(f||(f={})),e("CameraPictureSourceType",f),function(e){e[e.ARROW_UP=1]="ARROW_UP",e[e.ARROW_DOWN=2]="ARROW_DOWN",e[e.ARROW_LEFT=4]="ARROW_LEFT",e[e.ARROW_RIGHT=8]="ARROW_RIGHT",e[e.ARROW_ANY=15]="ARROW_ANY"}(l||(l={})),e("CameraPopoverArrowDirection",l),function(e){e[e.BACK=0]="BACK",e[e.FRONT=1]="FRONT"}(c||(c={})),e("CameraDirection",c),function(e){e[e.JPEG=0]="JPEG",e[e.PNG=1]="PNG"}(h||(h={})),e("CameraEncodingType",h)}}}),System.register("Cordova/BasePlugin",["./app"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s=t&&t.id,o=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(e){function t(t){var n=e.call(this)||this;return n.app=t,t.once(r.App.EVENT.START_CORDOVA,n.initialize,n),t.once(r.App.EVENT.START_EMULATOR,n.initEmulator,n),n}return n(t,e),t.prototype.initialize=function(){},t.prototype.initEmulator=function(e){},t}(PIXI.utils.EventEmitter),e("BasePlugin",i)}}}),System.register("Cordova/emulators/AdmobEmulator",["./BaseEmulator"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s=t&&t.id,o=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(e){function t(){return e.call(this)||this}return n(t,e),t}(r.BaseEmulator),e("AdmobEmulator",i)}}}),System.register("Cordova/emulators/NetworkConnectionEmulator",["./../PluginNetworkInformation","./BaseEmulator"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o=t&&t.id,u=t&&t.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"connection",{get:function(){return navigator.connection||navigator.mozConnection||navigator.webkitConnection||this},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return r.NetworkConnectionType.ETHERNET},enumerable:!0,configurable:!0}),t.prototype.addEventListener=function(e,t,n){this.connection==this?this.on(e,t):this.connection.addEventListener(e,t,n)},t.prototype.removeEventListener=function(e,t,n){this.connection==this?this.off(e,t):this.connection.removeEventListener(e,t,n)},t}(i.BaseEmulator),e("NetworkConnectionEmulator",s)}}}),System.register("Cordova/PluginMediaCapture",["./BasePlugin"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o=t&&t.id,u=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this)},Object.defineProperty(t.prototype,"capture",{get:function(){return navigator.device.capture},enumerable:!0,configurable:!0}),t}(r.BasePlugin),e("PluginMediaCapture",i),e("CaptureError",s=window.CaptureError)}}}),System.register("Cordova/emulators/GeolocationEmulator",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.prototype.getCurrentPosition=function(e,t,n){navigator.geolocation.getCurrentPosition(e,t,n)},e.prototype.watchPosition=function(e,t,n){return navigator.geolocation.watchPosition(e,t,n).toString()},e.prototype.clearWatch=function(e){navigator.geolocation.clearWatch(parseInt(e))},e}(),e("GeolocationEmulator",n)}}}),System.register("Cordova/emulators/StatusBarEmulator",["./../PluginStatusBar","./../app","./BaseEmulator"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a=n&&n.id,f=n&&n.id;return{setters:[function(e){i=e},function(e){s=e},function(e){o=e}],execute:function(){u=function(t){function n(e){var n=t.call(this)||this;n.style=e.preferences.StatusBarStyle||i.StatusBarStyle.DEFAULT;var r=n.createHTMLElement(document.body,"div",n.getElID("root"),"emuStatusBar");return n.createHTMLElement(r,"div",n.getElID("carrier"),"emuStatusCarrier").innerText="Carrier",n.createHTMLElement(r,"div",n.getElID("time"),"emuStatusTime"),n.createHTMLElement(r,"div",n.getElID("battery"),"emuStatusBattery"),n.refreshTemplate(),n.refreshTime(),n.refreshBattery(),s.batteryStatus.onBatteryStatus(n.refreshBattery,n),r.onclick=function(){n.emit("statusTap")},e.preferences.StatusBarOverlaysWebView&&n.overlaysWebView(e.preferences.StatusBarOverlaysWebView=="true"),e.config.UIStatusBarHidden&&n.hide(),n}return r(n,t),n.prototype.refreshTime=function(){var t=this.elements[this.getElID("time")],n=new Date;t.innerText=n.toLocaleTimeString(),e.Base.addDelayFunction(this,this.refreshTime,1e3)},n.prototype.refreshBattery=function(){var e=this.elements[this.getElID("battery")];e.innerText=""+s.batteryStatus.currentStatus.level+"%"},n.prototype.refreshTemplate=function(){var e=this.elements[this.getElID("root")];this.style==i.StatusBarStyle.LIGHT_CONTENT?(e.style.background="white",e.style.color="black"):this.style==i.StatusBarStyle.BLACK_TRANSLUCENT?(e.style.background="rgba(0,0,0,0.5)",e.style.color="white"):this.style==i.StatusBarStyle.BLACK_OPAQUE?(e.style.background="black",e.style.color="white"):(e.style.background="white",e.style.color="black"),this.backgroundColor&&(e.style.background=this.backgroundColor)},n.prototype.overlaysWebView=function(e){var t=this.elements[this.getElID("root")];document.body.style.marginTop=this.isVisible&&!e?t.clientHeight+"px":"0"},n.prototype.setStyle=function(e){this.style=e,this.refreshTemplate()},n.prototype.backgroundColorByName=function(e){this.backgroundColor=e,this.refreshTemplate()},n.prototype.backgroundColorByHexString=function(e){this.backgroundColor=e,this.refreshTemplate()},n.prototype.hide=function(){var e=this.elements[this.getElID("root")];e.style.display="none"},n.prototype.show=function(){var e=this.elements[this.getElID("root")];e.style.display="block"},Object.defineProperty(n.prototype,"isVisible",{get:function(){var e=this.elements[this.getElID("root")];return e.style.display!="none"},enumerable:!0,configurable:!0}),n}(o.BaseEmulator),t("StatusBarEmulator",u)}}}),System.register("Cordova/emulators/NotificationEmulator",["./BaseEmulator"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o=n&&n.id,u=n&&n.id;return{setters:[function(e){i=e}],execute:function(){s=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return r(n,t),n.prototype.alert=function(e,t,n,r){window.alert(e),t&&t()},n.prototype.confirm=function(e,t,n,r){var i=window.confirm(e);t&&t(i?1:0)},n.prototype.prompt=function(e,t,n,r,i){var s=window.prompt(e,i);t&&t({input1:s,buttonIndex:s==null?1:0})},n.prototype.beep=function(t){this.singleBeep();for(var n=1;n<t;++n)e.Base.addDelayFunction(this,this.singleBeep,n*300)},n.prototype.singleBeep=function(){PIXI.sound.Sound.from({url:e.Base.getAppResourceFileUrl("Cordova.emuBeep"),autoPlay:!0})},n}(i.BaseEmulator),t("NotificationEmulator",s)}}}),System.register("Cordova/PluginCameraPreview",["./emulators/CameraPreviewEmulator","./BasePlugin"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o=t&&t.id,u=t&&t.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.initEmulator=function(t){e.prototype.initEmulator.call(this,t),window.CameraPreview=new r.CameraPreviewEmulator},Object.defineProperty(t.prototype,"preview",{get:function(){return window.CameraPreview},enumerable:!0,configurable:!0}),t}(i.BasePlugin),e("PluginCameraPreview",s)}}}),System.register("Cordova/emulators/CameraEmulator",["./../PluginCamera","./BaseEmulator"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o=t&&t.id,u=t&&t.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getPicture=function(e){var t=this;e=e||{};if(e.sourceType==r.CameraPictureSourceType.PHOTOLIBRARY||e.sourceType==r.CameraPictureSourceType.SAVEDPHOTOALBUM)return new Promise(function(e){e("/img/default_usericon.jpg")});e.targetWidth=e.targetWidth||320,e.targetHeight=e.targetHeight||240;var n=this.createHTMLElement(this.getElID("root"),"canvas",this.getElID("snapshot"),"emuCameraSnapshot",{width:e.targetWidth+"px",height:e.targetHeight+"px"}),i=this.createHTMLElement(this.getElID("root"),"button",this.getElID("button"),"emuCameraCaptureButton");i.innerText="Capture";var s=new Promise(function(s,o){i.addEventListener("click",function(){var i=n.getContext("2d");i.drawImage(t.elements[t.getElID("video")],0,0,n.width,n.height),s(n.toDataURL(e.encodingType==r.CameraEncodingType.PNG?"image/png":"image/jepg")),t.dispose()})});return this._startCamera().then(function(){return s})},t.prototype._startCamera=function(e){var t=this,n=this.createHTMLElement(document.body,"div",this.getElID("root"),"emuCameraRoot"),r=this.createHTMLElement(n,"video",this.getElID("video"),"emuCameraVideo");return r.addEventListener("loadedmetadata",function(e){return r.play()}),e&&(e.x&&(r.style.left=e.x+"px"),e.y&&(r.style.top=e.y+"px"),e.width&&(r.style.width=e.width+"px"),e.height&&(r.style.height=e.height+"px"),e.toBack&&(r.style.zIndex="-1000")),navigator.mediaDevices.getUserMedia({video:{facingMode:e.camera=="front"?"user":"environment"},audio:!1}).then(function(e){t.videoTracks=e.getVideoTracks(),r.srcObject=e})},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.videoTracks&&this.videoTracks.forEach(function(e){return e.stop()})},t}(i.BaseEmulator),e("CameraEmulator",s)}}}),System.register("Cordova/emulators/BatteryEmulator",["./BaseEmulator"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[function(e){s=e}],execute:function(){i=e.Base.utils.IntUtil,o=function(t){function n(){var n=t.call(this)||this;return n.level=100,e.Base.addDelayFunction(n,n.update,800),n}return r(n,t),n.prototype.update=function(){e.Base.addDelayFunction(this,this.update,i.randomBetween(300,600));var t=this.level;--this.level<0&&(this.level=100),this.emit("batterystatus",{level:this.level}),this.level<15&&t>=15&&this.emit("batterylow",{level:this.level}),this.level<5&&t>=5&&this.emit("batterycritical",{level:this.level})},n}(s.BaseEmulator),t("BatteryEmulator",o)}}}),System.register("Cordova/emulators/BaseEmulator",[],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s=n&&n.id,o=n&&n.id;return{setters:[],execute:function(){i=function(t){function n(){var n=t.call(this)||this;return n.elements={},n._uid=e.Base.utils.systemRandomGenerator.generateRandomString(10),n}return r(n,t),Object.defineProperty(n.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),n.prototype.getElID=function(e){return e+this._uid},n.prototype.createHTMLElement=function(e,t,n,r,i){var s=document.createElement(t);s.id=n,r&&(s.className=r);if(i)for(var o in i)s.style[o]=i[o];this.elements[n]=s;if(e){var u=typeof e=="string"?this.elements[e]:e;u.appendChild(s)}return s},n.prototype.dispose=function(){for(var e in this.elements){var t=this.elements[e];t.parentElement==document.body&&document.body.removeChild(t)}},n}(PIXI.utils.EventEmitter),t("BaseEmulator",i)}}}),System.register("Cordova/emulators/CameraPreviewEmulator",["./CameraEmulator"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s=t&&t.id,o=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.startCamera=function(e,t,n){this._startCamera(e).then(function(){t&&t(1)}).catch(function(e){n&&n(e)})},t.prototype.stopCamera=function(e,t){this.dispose(),e&&e(1)},t.prototype.switchCamera=function(e,t){},t.prototype.hide=function(e,t){var n=this.elements[this.getElID("root")];n&&(n.style.display="none"),e&&e(1)},t.prototype.show=function(e,t){var n=this.elements[this.getElID("root")];n&&(n.style.display="block"),e&&e(1)},t.prototype.takePicture=function(e,t,n){var r=this.elements[this.getElID("canvas")];e&&e.width&&(r.width=e.width,r.height=e.height);var i=r.getContext("2d");i.drawImage(this.elements[this.getElID("video")],0,0,r.width,r.height),t&&t(r.toDataURL("image/png"))},t.prototype.setColorEffect=function(e,t,n){},t.prototype.setZoom=function(e,t,n){},t.prototype.getMaxZoom=function(e,t){},t.prototype.getSupportedFocusMode=function(e,t){},t.prototype.getZoom=function(e,t){},t.prototype.getHorizontalFOV=function(e,t){},t.prototype.setPreviewSize=function(e,t,n){},t.prototype.getSupportedPictureSizes=function(e,t){},t.prototype.getSupportedFlashModes=function(e,t){},t.prototype.getSupportedColorEffects=function(e,t){},t.prototype.setFlashMode=function(e,t,n){},t.prototype.getSupportedFocusModes=function(e,t){},t.prototype.getFocusMode=function(e,t){},t.prototype.setFocusMode=function(e,t,n){},t.prototype.tapToFocus=function(e,t,n,r){},t.prototype.getExposureModes=function(e,t){},t.prototype.getExposureMode=function(e,t){},t.prototype.setExposureMode=function(e,t,n){},t.prototype.getExposureCompensation=function(e,t){},t.prototype.setExposureCompensation=function(e,t,n){},t.prototype.getExposureCompensationRange=function(e,t){},t.prototype.getSupportedWhiteBalanceModes=function(e,t){},t.prototype.getSupportedWhiteBalanceMode=function(e,t){},t.prototype.setWhiteBalanceMode=function(e,t,n){},t.prototype.onBackButton=function(e,t){},t.prototype.getBlob=function(e,t,n){},t.prototype.getCameraCharacteristics=function(e,t){},t}(r.CameraEmulator),e("CameraPreviewEmulator",i)}}}),function(){CgLibs.bootLib("Cordova/app",["Cordova/app","Cordova/PluginVibration","Cordova/PluginAdmob","Cordova/PluginStatusBar","Cordova/PluginScreenOrientation","Cordova/PluginNetworkInformation","Cordova/PluginMedia","Cordova/PluginGeolocation","Cordova/PluginDialogs","Cordova/PluginFile","Cordova/PluginInappbrowser","Cordova/PluginDevice","Cordova/PluginBatteryStatus","Cordova/PluginCamera","Cordova/BasePlugin","Cordova/emulators/AdmobEmulator","Cordova/emulators/NetworkConnectionEmulator","Cordova/PluginMediaCapture","Cordova/emulators/GeolocationEmulator","Cordova/emulators/StatusBarEmulator","Cordova/emulators/NotificationEmulator","Cordova/PluginCameraPreview","Cordova/emulators/CameraEmulator","Cordova/emulators/BatteryEmulator","Cordova/emulators/BaseEmulator","Cordova/emulators/CameraPreviewEmulator"])}()}};CgLibs.bootModule('Cordova')},function(){CgLibs.modules.React={boot:function(e){System.register("React/app",[],function(t,n){"use strict";function u(e){if(!e){var t=0;e="reactContainer"+t++;while(document.getElementById(e))e="reactContainer"+t++}var n=document.createElement("div");return n.id=e,n.className="react-container",document.body.appendChild(n),n}function a(e,t){var n=u(t);return ReactDOM.render(e,n),i[n.id]={container:n},n}function f(e,t,n){var r=[];for(var s=3;s<arguments.length;s++)r[s-3]=arguments[s];var o=a(React.createElement(e,t,r),n),u=i[n];return u&&(u.componentClass=e),o}function l(e){if(e){typeof e=="string"&&(e=document.getElementById(e));if(e)return ReactDOM.unmountComponentAtNode(e),e.remove(),delete i[e.id],!0}return!1}function c(){var e=Object.keys(i);return e.forEach(function(e){l(e)}),e.length}function h(e){var t=i[e];return t&&t.container}function p(e){e||(e=undefined);for(var t in i)if(i[t].componentClass==e)return i[t].container;return null}function d(e){e||(e=undefined);var t=[];for(var n in i)i[n].componentClass==e&&t.push(i[n].container);return t}function v(){return Object.keys(i).map(function(e){return i[e].container})}var r,i,s=n&&n.id,o=n&&n.id;return t("renderElement",a),t("renderComponent",f),t("unmountRootComponent",l),t("unmountAllRootComponents",c),t("getRootComponentById",h),t("getRootComponentByComponentClass",p),t("listRootComponentByComponentClass",d),t("listRootComponents",v),{setters:[],execute:function(){r=function(){function t(){e.Base.linkCSSFile(e.Base.getAppSourceUrl("CG.React/styles.css")),console.log("React ready"),React.Component.prototype.componentDidCatch=function(e,t){console.error(e,t)}}return t}(),i={},new r}}}),function(){CgLibs.bootLib("React/app",["React/app"])}()}};CgLibs.bootModule('React')},function(){CgLibs.modules.CgEventsEngine={boot:function(e){System.register("CgEventsEngine/index",["./syncs/setupDefaults","./utils/ElementUtil","./CgDefinition","./CgTrigger","./CgCheck","./CgAction","./CgEventManager"],function(e,t){"use strict";function v(e){c.emit(h.MANAGER_CREATED,e)}function m(e,t){c.on(h.MANAGER_CREATED,e,t)}function g(e,t){c.off(h.MANAGER_CREATED,e,t)}function y(e){l.registerClass(u.CgAction,e.TYPE,e)}function b(e,t,n){return l.createInstance(u.CgAction,e,t,n)}function w(e){l.registerClass(o.CgCheck,e.TYPE,e)}function E(e,t,n){return l.createInstance(o.CgCheck,e,t,n)}function S(e){l.registerClass(s.CgTrigger,e.TYPE,e)}function x(e,t,n){return l.createInstance(s.CgTrigger,e,t,n)}var n,r,i,s,o,u,a,f,l,c,h,p=t&&t.id,d=t&&t.id;return e("emitManagerCreated",v),e("onManagerCreated",m),e("offManagerCreated",g),e("registerAction",y),e("createAction",b),e("registerCheck",w),e("createCheck",E),e("registerTrigger",S),e("createTrigger",x),{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e},function(e){a=e}],execute:function(){f=function(){function e(){this.clzTypeMap=new Map,a.CgEventManager,i.CgDefinition,r.ElementUtil,this.buildClzMap(u.CgAction),this.buildClzMap(o.CgCheck),this.buildClzMap(s.CgTrigger),n.setupDefaultSyncFactories()}return e.prototype.buildClzMap=function(e){this.clzTypeMap.set(e,{})},e.prototype.registerClass=function(e,t,n){if(t){var r=this.clzTypeMap.get(e);r[t]=n,console.info(e.TYPE+":"+t+" registered")}else console.error("registering a "+e.TYPE+" without static TYPE")},e.prototype.createInstance=function(e,t,n,r){var i=this.clzTypeMap.get(e),s=i[t];return s&&new s(n,r)},e}(),l=new f,c=new PIXI.utils.EventEmitter,e("EVENT",h={MANAGER_CREATED:"managerCreated"})}}}),System.register("CgEventsEngine/syncs/setupDefaults",["./setupPhysicsJoint","./setupPhysicsBody","./setupTweens","./setupDisplays","./setupSounds"],function(e,t){"use strict";function f(){i.setupTweens(),s.setupDisplays(),o.setupSounds(),r.setupPhysicsBody(),n.setupPhysicsJoint()}var n,r,i,s,o,u=t&&t.id,a=t&&t.id;return e("setupDefaultSyncFactories",f),{setters:[function(e){n=e},function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e}],execute:function(){}}}),System.register("CgEventsEngine/utils/ElementUtil",["./../VariableManager"],function(e,t){"use strict";var n,r,i=t&&t.id,s=t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(){}return e.compareValues=function(e,t,n){switch(t){case">":return e>n;case">=":return e>=n;case"<":return e<n;case"<=":return e<=n;case"==":return e==n;case"!=":return e!=n}return!1},e.matchStringOrRegexp=function(e,t){if(!t)return!0;if(t.length>1&&t.charAt(0)=="/"&&t.charAt(t.length-1)=="/"){var n=e.match(new RegExp(t.substr(1,t.length-2)));return n&&n.length!=0}if(t.includes("*")){var r=t.replace(/\*/g,".*"),n=e.match(new RegExp(r));return n&&n.length!=0}return e==t},e.convertIdToUid=function(e,t,r){if(t){var i=n.validateObject(e.getObject(t));if(i)return r&&e.setLocalVar("this",i),i._uid||t}return""},e.registerUid=function(e,t,n){n&&t&&(e.registerObjectUID(t,n),n._uid=t)},e.getDisplayObject=function(e,t){var r=n.validateObject(e.getObject(t));return r?(r.body&&r.disposePhysics&&r.displayObject&&(r=r.displayObject),r):null},e.markObjectUnsyncable=function(e){e._unsyncable=1},e.isObjectUnsyncable=function(e){return e&&e._unsyncable},e}(),e("ElementUtil",r)}}}),System.register("CgEventsEngine/CgDefinition",["./CgEventElement"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s=t&&t.id,o=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(e){function t(t,n){var r=e.call(this,t&&t.event,n)||this;return r.owner=t,r.injectLocalVars(t&&t.exportLocalVars()),r}return n(t,e),t}(r.CgEventElement),e("CgDefinition",i)}}}),System.register("CgEventsEngine/CgTrigger",["./CgEventElement","./CgEventManager"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o=t&&t.id,u=t&&t.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(t,n){var s=e.call(this,t,n)||this;return s.event.manager.once(i.CgEventManager.EVENT.START,s.setupListeners,s),s.on(r.CgEventElement.EVENT.ENABLED_CHANGED,function(){s.event.manager.addEvent(s.event)}),s}return n(t,e),t.prototype.setupListeners=function(){},t.prototype.removeListeners=function(){},t.prototype.getRemoteTriggerTopic=function(){return this.event.id+"/remote_trigger/"+this.event.getTriggerIndex(this)},t.prototype.enableRemoteTrigger=function(){this._remoteTriggerEnabled=!0,this.event.manager.started?this.event.manager.socketClient.onDecisionMakerData(this.getRemoteTriggerTopic(),this.onRemoteTrigger,this):this.event.manager.once(i.CgEventManager.EVENT.START,this.enableRemoteTrigger,this)},t.prototype.onRemoteTrigger=function(e,t,n){this.exportLocalVars().importSyncJson(e.vars),n.result=this.event.checkAndTrigger(this)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.removeListeners()},t.prototype.trigger=function(){var e=this;if(this.enabled&&!this.disposed){if(this.delayTrigger){var t=this.delayTime;if(t>0){var n=this.exportLocalVars().exportSyncJson();return this.event.manager.waitEventTime(t).then(function(){return e.exportLocalVars().importSyncJson(n),e._trigger2()})}}return this._trigger2()}return Promise.resolve(!1)},t.prototype._trigger2=function(){var e=this;return!this._remoteTriggerEnabled||!!this.event.manager.isDecisionMaker()?Promise.resolve(this.event.checkAndTrigger(this)):this._waitingDecision?Promise.resolve(!1):(this._waitingDecision=!0,this.event.manager.socketClient.sendDataToDecisionMaker(this.getRemoteTriggerTopic(),{vars:this.exportLocalVars().exportSyncJson()}).then(function(t){return e._waitingDecision=!1,t.result}))},Object.defineProperty(t.prototype,"delayTrigger",{get:function(){return this.getBoolean(this.json.delayTrigger)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delayTime",{get:function(){return this.getInt(this.json.delayTime)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disableAfterTriggered",{get:function(){return this.json.disableAfterTriggered},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.getBoolean(this.json.disabled)},enumerable:!0,configurable:!0}),t.TYPE="CgTrigger",t}(r.CgEventElement),e("CgTrigger",s)}}}),System.register("CgEventsEngine/CgCheck",["./CgEventElement"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s=t&&t.id,o=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(e){function t(){var t=e!==null&&e.apply(this,arguments)||this;return t._parents=[],t}return n(t,e),t.prototype.checkPass=function(){return!0},Object.defineProperty(t.prototype,"checkLoop",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loopBreaks",{get:function(){return this.getInt(this.json._loopBreaks)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loopParent",{get:function(){return this._parents[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loopIndent",{get:function(){return this._parents.length},enumerable:!0,configurable:!0}),t.prototype.onEventRestart=function(){this.enabled=!0},Object.defineProperty(t.prototype,"disabled",{get:function(){return this.getBoolean(this.json.disabled)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_logi",{get:function(){return this.json._logi},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_and_or",{get:function(){return this.json._logi?this.getString(this.json._logi._and_or):""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_not",{get:function(){return this.json._logi&&this.getBoolean(this.json._logi._not)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_elseEventId",{get:function(){return this.getString(this.json._elseEventId)},enumerable:!0,configurable:!0}),t.TYPE="CgCheck",t}(r.CgEventElement),e("CgCheck",i)}}}),System.register("CgEventsEngine/CgAction",["./CgEventElement"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s=t&&t.id,o=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(e){function t(){var t=e!==null&&e.apply(this,arguments)||this;return t._actionIndex=-1,t}return n(t,e),t.prototype.prepare=function(){return 0},t.prototype.execute=function(e){},Object.defineProperty(t.prototype,"actionIndex",{get:function(){return this._actionIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.getBoolean(this.json.disabled)},enumerable:!0,configurable:!0}),t.prototype._setSkipped=function(){this._skip||(this._skip=!0,this.onSetSkipped())},t.prototype.onSetSkipped=function(){},t.prototype.isSkipped=function(){return this._skip},t.prototype.getSkippableDuration=function(){return 0},t.prototype._getActionsGroup=function(){return this._cggroup},t.TYPE="CgAction",t}(r.CgEventElement),e("CgAction",i)}}}),System.register("CgEventsEngine/CgEventManager",["./eventsStarter","./syncs/Syncable","./syncs/SyncUtil","./CgEventElement","./index","./ManagerEvent","./VariableManager","./CgEvent"],function(t,n){"use strict";function C(e){x.push(e)}function k(e){return L(e,x.slice())}function L(e,t){if(t.length){var n=t.shift();return n(e).then(function(){return L(e,t)})}return Promise.resolve()}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T=n&&n.id,N=n&&n.id;return{setters:[function(e){i=e},function(e){o=e},function(e){u=e},function(e){l=e},function(e){h=e},function(e){p=e},function(e){d=e},function(e){m=e}],execute:function(){s=e.Base.geom.Point,a=e.Base.utils.ObjectUtil,f=e.Base.utils.systemRandomGenerator,c=e.Base.utils.UidManager,v=e.Base.utils.ArrayUtil,g=e.Base.utils.Updater,y=e.Base.DelayFunctionObject,b={SYNC_TIME:"syncTime"},w=function(t){function n(e){var n=t.call(this)||this;return n._uidManager=new c,n._started=!1,n._ready=!1,n._debugListeners={},n._disabled=!1,n._timePassed=0,n._disposed=!1,n._socketClient=S,n.updater=new g,n._waitToFunctions=[],n._actionGroups={},e||(n._disabled=i.__disabled),n._varManager=new d.VariableManager(n),n._dummyEvent=new m.CgEvent(n,"",{}),n._dummyElement=new l.CgEventElement(n._dummyEvent,{}),n._localId=f.generateRandomString(6,!0),n.setSocketClient(null),h.emitManagerCreated(n),n}return r(n,t),n.addConfigProcessor=function(e){C(e)},Object.defineProperty(n.prototype,"localId",{get:function(){return this._localId},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"socketClient",{get:function(){return this._socketClient},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"uidManager",{get:function(){return this._uidManager},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"timePassed",{get:function(){return this._timePassed},enumerable:!0,configurable:!0}),n.prototype.syncTimePassed=function(e){this._timePassed=Math.max(this._timePassed,e)},Object.defineProperty(n.prototype,"debugConsole",{set:function(e){e?(this.addDebugListener(p.ManagerEvent.EVENT_ABOUT_TO_TRIGGER,function(e){return console.log("\u21a7\u21a7\u21a7["+e.id+"] about to trigger",{appendHistory:3})}),this.addDebugListener(p.ManagerEvent.EVENT_ACTIONS_EXECUTE_COMPLETE,function(e){return console.log("\u21a5\u21a5\u21a5["+e.id+"] actions complete",{appendHistory:3})}),this.addDebugListener(p.ManagerEvent.SET_GLOBAL_VAR,function(e){return console.log("setGlobal: "+e.key+" = "+e.value)})):(this.removeDebugListener(p.ManagerEvent.EVENT_ABOUT_TO_TRIGGER),this.removeDebugListener(p.ManagerEvent.EVENT_ACTIONS_EXECUTE_COMPLETE),this.removeDebugListener(p.ManagerEvent.SET_GLOBAL_VAR))},enumerable:!0,configurable:!0}),n.prototype.addDebugListener=function(e,t){this._debugListeners[e]||(this._debugListeners[e]=t,this.on(e,t))},n.prototype.removeDebugListener=function(e){this._debugListeners[e]&&(this.off(e,this._debugListeners[e]),delete this._debugListeners[e])},Object.defineProperty(n.prototype,"varManager",{get:function(){return this._varManager},enumerable:!0,configurable:!0}),n.prototype.importFromSource=function(t){var n=this;return this._disabled?Promise.reject("CGEventManager.importFromSource stopped: debugging another events file."):(console.log("importFromSource: "+t),this.loadSource(t).then(function(){var r=e.Base.resourceManager.getLoaderResource(t).data;t.endsWith(".events")&&typeof r=="string"&&(r=n.parseEncodedSource(r)),n.parseEvents(r)}))},n.prototype.importFromJson=function(e){return this._disabled?Promise.reject("CGEventManager.importFromJson stopped: debugging another events file."):(console.log("importFromJson"),this.parseEvents(e),Promise.resolve())},n.prototype.importFromLoadedManager=function(e){return console.log("importFromLoadedManager"),this.importFromJson(e.eventsJson)},n.prototype.loadSource=function(t){var n=e.Base.resourceManager.getLoaderResource(t);return n?Promise.resolve():(e.Base.resourceManager.addAppSource(t),e.Base.resourceManager.load())},n.prototype.parseEncodedSource=function(e){var t="/*lz*/",n=3,r=atob(e);if(r.trim().charAt(0)!="{"){r=r.substr(t.length);var i=Math.floor((r.length-n)/2);r=r.substr(0,i)+r.substr(i+n),r=LZString.decompressFromBase64(r)}return JSON.parse(r)},n.prototype.parseEvents=function(e){if(this._disabled)return;this.eventsJson=e,this.emit(n.EVENT.PRE_PARSE_EVENTS,{json:e}),this.timeEvents=[],this.triggerEvents=[],this.referenceEvents=[],this.eventMap={};var t=0,r=0;for(var i=0,s=this.eventsJson.events;i<s.length;i++){var o=s[i],u=o.id||"#evt_"+t++;if(o.disabled)continue;var a=new m.CgEvent(this,u,o);if(this.eventMap[u]){console.error("(Warning) duplicated Event ID: "+u);continue}this.eventMap[u]=a,a.referenceOnly?this.referenceEvents.push(a):(a.startTime==0&&!a.hasTrigger&&(a.startTime=r,r+=1e-6),this.addEvent(a))}this.emit(n.EVENT.POST_PARSE_EVENTS,{json:e}),console.log("events parsed")},n.prototype.getEvent=function(e){return this.eventMap[e]},n.prototype.addEvent=function(e){e&&(this.removeEvent(e),e.hasTrigger?this.triggerEvents.push(e):(this.timeEvents.push(e),v.sortNumericOn(this.timeEvents,"startTime",!0)))},n.prototype.removeEvent=function(e){e&&(v.removeElement(this.timeEvents,e),v.removeElement(this.triggerEvents,e))},n.prototype.preload=function(){var t=this;return(new Promise(function(n,r){var i=t.eventsJson.config.preload.resourcesExclude;if(i)for(var s=0,o=e.Base.listAppResourceAlias();s<o.length;s++){var u=o[s];i.indexOf(u)==-1&&t.isResourcePreloadable(e.Base.getAppResource(u))&&!e.Base.resourceManager.getLoaderResource(u)&&e.Base.resourceManager.addAppResource(u)}for(var a=0,f=t.eventsJson.config.preload.sources;a<f.length;a++){var u=f[a];e.Base.resourceManager.getLoaderResource(u)||e.Base.resourceManager.addAppSource(u)}e.Base.resourceManager.load(function(){console.log("preload complete"),n()})})).then(function(){return t.initPixiConfig()}).then(function(){return k(t)})},n.prototype.initPixiConfig=function(){var t=this.eventsJson.config.stage;e.Base.pixi.root?e.Base.pixi.setStageSize(t.width,t.height):e.Base.pixi.initialize(t.width,t.height),t.backgroundColor&&(e.Base.pixi.renderer.backgroundColor=parseInt(t.backgroundColor.replace("#",""),16)),e.Base.pixi.stageResolutionPolicy=t.resolutionPolicy||e.Base.pixis.Pixi.RESOLUTION_POLICY.SHOW_ALL,e.Base.pixi.stageAlignHorizontal=t.alignHorizontal||e.Base.pixis.Pixi.ALIGN_HORIZONTAL.CENTER,e.Base.pixi.stageAlignVertial=t.alignVertical||e.Base.pixis.Pixi.ALIGN_VERTICAL.MIDDLE},n.prototype.getConfig=function(e){var t=this.eventsJson.config.configs&&this.eventsJson.config.configs[e.TYPE];return t&&(t["@use"]===undefined||t["@use"])&&new e(this._dummyElement,t)},n.prototype.isResourcePreloadable=function(e){switch(e.type){case"jslib":case"buildLib":case"buildApp":return!1}return!0},n.prototype.executeActionsGroup=function(e){var t=this;this._actionGroups[e.id]=e;var n=e.execute();this.emit(p.ManagerEvent.EVENT_TRIGGERED,e.event);if(a.isPromise(n))return n.then(function(){delete t._actionGroups[e.id],t.emit(p.ManagerEvent.EVENT_ACTIONS_EXECUTE_COMPLETE,e.event)});delete this._actionGroups[e.id],this.emit(p.ManagerEvent.EVENT_ACTIONS_EXECUTE_COMPLETE,e.event)},n.prototype.setSocketClient=function(e){if(this._started)throw new Error("CgEventsEngine.setSocketClient: Cannot set socket client after game started");this._socketClient=e||S,this.varManager.setSystemVariable("me",this._socketClient.getMe())},n.prototype.onSyncTime=function(e){this.syncTimePassed(e.t)},n.prototype.sendSyncTimeMessage=function(e){this.syncTimePassed(e),this.socketClient.broadcast(b.SYNC_TIME,{t:this._timePassed})},n.prototype.setReady=function(){this._ready||(this._ready=!0,this.emit(n.EVENT.READY),console.log("eventManager ready: "+this.localId),this.socketClient.onBroadcastData(b.SYNC_TIME,this.onSyncTime,this))},Object.defineProperty(n.prototype,"ready",{get:function(){return this._ready},enumerable:!0,configurable:!0}),n.prototype.start=function(){this.setReady(),this.updater.addUpdateFunction(this,this.update),this._started=!0,this.emit(n.EVENT.START),console.log("eventManager started: "+this.localId)},Object.defineProperty(n.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){for(var e in this.eventMap)this.eventMap[e].dispose();for(var e in this._actionGroups)this._actionGroups[e].dispose();this._socketClient.dispose(),this.updater.removeUpdateFunction(this,this.update),this._started=!1,this.emit(n.EVENT.DISPOSE),this.removeAllListeners(),this.updater.dispose(),this._waitToFunctions.length=0,this._disposed=!0},Object.defineProperty(n.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),n.prototype.safeDispose=function(){var e=this;return this._started?new Promise(function(t,n){e._safeDisposeResolver=t}):(this.dispose(),Promise.resolve())},n.prototype.update=function(t){this.emit(n.EVENT.PRE_UPDATE),this._timePassed+=t;if(this.isDecisionMaker()&&this.timeEvents.length){var r=this.timeEvents[0],i=[],s=e.Base.now()+15;while(this._timePassed>r.startTime&&i.indexOf(r)==-1){if(this._safeDisposeResolver){this.dispose(),this._safeDisposeResolver();return}try{r.checkAndTrigger(null)||r.rescheduleCheckTime(this._timePassed)}catch(o){this.onEventTriggerError(r,o),s=0}i.push(r);if(!(this.timeEvents.length&&e.Base.now()<s))break;r=this.timeEvents[0]}}else if(this._safeDisposeResolver){this.dispose(),this._safeDisposeResolver();return}while(this._waitToFunctions.length){var u=this._waitToFunctions[0];if(u.time>this._timePassed)break;this._waitToFunctions.shift(),u.disposed||u.execute()}this.emit(n.EVENT.POST_UPDATE)},n.prototype.waitEventTime=function(e){var t=this;if(this.disposed)throw Error("This CgEventManager is disposed");return new Promise(function(n){var r=new y(null,null,n,t._timePassed+e,null);t._waitToFunctions.push(r),t._waitToFunctions=v.sortNumericOn(t._waitToFunctions,"time",!0)})},n.prototype.isDecisionMaker=function(){return this._socketClient.isDecisionMaker()},n.prototype.onEventTriggerError=function(e,t){console.error(t.message||t.error||t,t),this.emit(p.ManagerEvent.ERROR_EVENT_TRIGGER,{eventId:e.id,error:t,actionIndex:t.actionIndex,action:t.action})},n.prototype.exportEventsSyncData=function(){var e={};return a.forEach(this.eventMap,function(t,n){e[t]=n.exportSyncData()}),e},n.prototype.importEventsSyncData=function(e){var t=this;a.forEach(e,function(e,n){var r=t.eventMap[e];r&&r.importSyncData(n)})},n.prototype.exportSyncJson=function(){return{time:this._timePassed,vars:this.varManager.exportSyncJson(),uids:u.SyncUtil.uidManagerToSyncJson(this.uidManager),evts:this.exportEventsSyncData(),physics:{gravity:e.Base.physics.getGravity().toString()}}},n.prototype.importSyncJson=function(t){var n=this;this._timePassed=t.time,e.Base.physics.setGravity(s.fromString(t.physics.gravity)),this.importEventsSyncData(t.evts);var r=[],i=[];for(var u in t.uids){var a=o.createSyncableObject(this,t.uids[u]);a&&(a._uid=u,this.uidManager.registerUid(u,a),a._postSync&&r.push(a),a._postSync2&&i.push(a))}r.forEach(function(e){return e._postSync(n)}),i.forEach(function(e){return e._postSync2(n)}),this.varManager.importSyncJson(t.vars)},n.EVENT={PRE_PARSE_EVENTS:"preParseEvents",POST_PARSE_EVENTS:"postParseEvents",PRE_UPDATE:"preUpdate",POST_UPDATE:"postUpdate",DISPOSE:"dispose",READY:"ready",START:"start",EVENT_REMOVED:"eventRemoved",EVENT_REPEATED:"eventRepeated"},n}(PIXI.utils.EventEmitter),t("CgEventManager",w),E=function(){function e(){this.me={id:"localMe",username:"",name:"Guest Local",iconUrl:"",guest:!0,isMe:!0}}return e.prototype.isDecisionMaker=function(){return!0},e.prototype.getMe=function(){return this.me},e.prototype.getPlayer=function(e){return e==this.me.id?this.me:null},e.prototype.listPlayers=function(){return[this.me]},e.prototype.broadcast=function(e,t){},e.prototype.onBroadcastData=function(e,t,n){},e.prototype.offBroadcastData=function(e,t,n){},e.prototype.sendDataToDecisionMaker=function(e,t){return Promise.resolve({})},e.prototype.onDecisionMakerData=function(e,t,n){},e.prototype.offDecisionMakerData=function(e,t,n){},e.prototype.sendDataToRoommate=function(e,t,n){return Promise.resolve({})},e.prototype.onRoommateData=function(e,t,n){},e.prototype.offRoommateData=function(e,t,n){},e.prototype.dispose=function(){},e}(),S=new E,x=[]}}}),System.register("CgEventsEngine/syncs/setupSounds",["./setupTweens","./Syncable"],function(t,n){"use strict";function u(){i.registerSyncableFactory("PIXI.sound.IMediaInstance",{targetClasses:[PIXI.sound.webaudio.WebAudioInstance,PIXI.sound.htmlaudio.HTMLAudioInstance],createSyncable:function(e,t){return a(t.data)},exportSyncableData:function(e,t){return t.data=f(e),t}})}function a(t){var n=this,i=e.Base.resourceManager.playSound(t.sound.alias,{volume:t.volume||1,start:t.progress||0,speed:t.speed||1},t.sound.filename);return i.on("end",function(){n.removeGlobalVar(i.soundId,i)}),t.tweens&&(i.tweens=t.tweens.map(function(e){return r.jsonToTween(e,i)})),i}function f(e){var t={sound:e.cgResource,progress:e.progress,volume:e.volume,speed:e.speed},n=e.tweens;return n&&(t.tweens=n.map(function(e){return r.tweenToJson(e)}).filter(function(e){return e})),t}var r,i,s=n&&n.id,o=n&&n.id;return t("setupSounds",u),{setters:[function(e){r=e},function(e){i=e}],execute:function(){}}}),System.register("CgEventsEngine/syncs/setupDisplays",["./Syncable","./setupTweens"],function(t,n){"use strict";function l(){s.registerSyncableFactory("PIXI.Sprite",{targetClasses:[PIXI.Sprite],createSyncable:function(e,t){return S(t.data,new PIXI.Sprite)},exportSyncableData:function(e,t){return t.data=T(e),t}}),s.registerSyncableFactory("PIXI.Graphics",{targetClasses:[PIXI.Graphics],createSyncable:function(e,t){return c(t.data)},exportSyncableData:function(e,t){return t.data=h(e),t}}),s.registerSyncableFactory("PIXI.Container",{targetClasses:[PIXI.Container],createSyncable:function(e,t){return x(t.data,new PIXI.Container)},exportSyncableData:function(e,t){return t.data=N(e),t}}),s.registerSyncableFactory("PIXI.Text",{targetClasses:[PIXI.Text],createSyncable:function(e,t){return d(t.data)},exportSyncableData:function(e,t){return t.data=v(e),t}}),s.registerSyncableFactory("TilingSpriteContainer",{targetClasses:[i],createSyncable:function(e,t){return w(t.data)},exportSyncableData:function(e,t){return t.data=E(e),t}}),s.registerSyncableFactory("GAF.GAFMovieClip",{targetClasses:[GAF.GAFMovieClip],createSyncable:function(e,t){return y(t.data)},exportSyncableData:function(e,t){return t.data=b(e),t}}),s.registerSyncableFactory("Base.SpritesheetMovieClip",{targetClasses:[r],createSyncable:function(e,t){return m(t.data)},exportSyncableData:function(e,t){return t.data=g(e),t}})}function c(e){var t=new PIXI.Graphics;return e.graphics.forEach(function(e){e.fill&&t.beginFill(e.fill.color,e.fill.alpha),e.line?t.lineStyle(e.line.width,e.line.color,e.line.alpha,e.line.align):t.lineStyle(0),e.type==PIXI.SHAPES.CIRC?t.drawCircle(e.shape.x,e.shape.y,e.shape.r):e.type==PIXI.SHAPES.RECT?t.drawRect(e.shape.x,e.shape.y,e.shape.w,e.shape.h):e.type==PIXI.SHAPES.POLY?t.drawPolygon(e.shape.p):e.type==PIXI.SHAPES.POLY?t.drawPolygon(e.shape.p):e.type==PIXI.SHAPES.ELIP?t.drawEllipse(e.shape.x,e.shape.y,e.shape.w,e.shape.h):e.type==PIXI.SHAPES.RREC&&t.drawRoundedRect(e.shape.x,e.shape.y,e.shape.w,e.shape.h,e.shape.r),e.fill&&t.endFill()}),x(e,t),t}function h(e){var t=e.graphicsData,n=N(e);return n.graphics=t.map(function(e){return p(e)}),n}function p(e){var t={type:e.type};e.fillStyle&&(t.fill={alpha:e.fillStyle.alpha,color:e.fillStyle.color}),e.lineStyle&&(t.line={width:e.lineStyle.width,align:e.lineStyle.alignment,alpha:e.lineStyle.alpha,color:e.lineStyle.color,"native":e.lineStyle.native?1:0});if(e.type==PIXI.SHAPES.CIRC){var n=e.shape;t.shape={x:n.x,y:n.y,r:n.radius}}else if(e.type==PIXI.SHAPES.RECT){var r=e.shape;t.shape={x:r.x,y:r.y,w:r.width,h:r.height}}else if(e.type==PIXI.SHAPES.POLY){var i=e.shape;t.shape={p:i.points}}else if(e.type==PIXI.SHAPES.ELIP){var s=e.shape;t.shape={x:s.x,y:s.y,w:s.width,h:s.height}}else if(e.type==PIXI.SHAPES.RREC){var o=e.shape;t.shape={x:o.x,y:o.y,w:o.width,h:o.height,r:o.radius}}return t}function d(e){var t=new PIXI.Text(e.text,e.style);return x(e,t),t}function v(e){var t=N(e);return t.text=e.text,t.style={fontFamily:e.style.fontFamily,fontSize:e.style.fontSize,fontWeight:e.style.fontWeight,fill:e.style.fill,stroke:e.style.stroke,strokeThickness:e.style.strokeThickness,letterSpacing:e.style.letterSpacing,lineHeight:e.style.lineHeight,wordWrap:e.style.wordWrap,wordWrapWidth:e.style.wordWrapWidth,breakWords:e.style.breakWords},t}function m(t){var n=e.Base.resourceManager.createSpritesheetMovieClip(t.cgResource);return x(t,n),n.textures=t.frames.map(function(e){return n.info.spritesheet.textures[e]}),t.playing?n.gotoAndPlay(t.time):n.gotoAndStop(t.time),n}function g(e){var t=e.info,n=N(e);n.cgResource=e.info.cgResource,n.loop=e.loop,n.animationSpeed=e.animationSpeed,n.playing=e.playing;var r=function(e){var n=t.spritesheet.textures;for(var r in n)if(n[r]==e)return r;return""};return n.frames=e.textures.map(function(e){return r(e)}),n.time=e.currentFrame,n}function y(t){var n=e.Base.resourceManager.createGAFMovieClip(t.gaf.alias,t.gaf.linkage);return x(t,n),t.sequence?(n.setSequence(t.sequence,t.playing),n._currentFrame=t.frame):t.playing?n.gotoAndPlay(t.frame):n.gotoAndStop(t.frame),n}function b(e){var t=N(e);return t.gaf=e.cgResource,t.frame=e.currentFrame,t.playing=e.inPlay,e._playingSequence&&(t.sequence=e._playingSequence.id),t}function w(t){var n;t.texture&&(typeof t.texture=="string"?n=PIXI.utils.TextureCache[t.texture]:n=e.Base.resourceManager.getPixiTexture(t.texture.alias,t.texture.filename),delete t.texture);var r=new PIXI.Rectangle(t.rect.x,t.rect.y,t.rect.w,t.rect.h),s=new i(n,r);s.toFullscreenLeft=t.fullscreen.l,s.toFullscreenRight=t.fullscreen.r,s.toFullscreenTop=t.fullscreen.t,s.toFullscreenBottom=t.fullscreen.b;if(t.tilePosition){var o=u.fromString(t.tilePosition);s.tilePosition.set(o.x,o.y)}if(t.tileScale){var o=u.fromString(t.tileScale);s.sprite.tileScale.set(o.x,o.y)}return x(t,s),s}function E(e){var t=N(e),n=e.sprite,r=n.texture||n._texture;r&&(t.texture=r.cgResource||r.textureCacheIds[0]);var i=e._rect;return t.rect={x:i.x,y:i.y,w:i.width,h:i.height},t.fullscreen={l:e.toFullscreenLeft,r:e.toFullscreenRight,t:e.toFullscreenTop,b:e.toFullscreenBottom},C(t,e,"tilePosition",0,0),C(t,n,"tileScale",1,1),t}function S(t,n){var r;return t.texture&&(typeof t.texture=="string"?r=PIXI.utils.TextureCache[t.texture]:r=e.Base.resourceManager.getPixiTexture(t.texture.alias,t.texture.filename),delete t.texture),n.texture=r,x(t,n),n}function x(t,n){if(t.anchor&&n.anchor){var r=u.fromString(t.anchor);n.anchor.set(r.x,r.y)}if(t.pivot&&n.pivot){var r=u.fromString(t.pivot);n.pivot.set(r.x,r.y)}for(var i in t.disp)n[i]=t.disp[i];return t.parent&&(n._syncIndex=t.zIndex,n._postSync=function(r){var i=null;t.parent=="#root"?i=e.Base.pixi.root:t.parent=="#stage"?i=e.Base.pixi.stage:i=r.uidManager.getAssociatedObject(t.parent);if(i){var s=i.children.findIndex(function(e){return t.zIndex<(e._syncIndex||0)});i.addChildAt(n,s==-1?i.children.length:s)}delete n._postSync}),t.tweens&&(n.tweens=t.tweens.map(function(e){return o.jsonToTween(e,n)})),n}function T(e){var t=N(e);return e.texture&&(t.texture=e.texture.cgResource||e.texture.textureCacheIds[0]),t}function N(t){var n={disp:{name:t.name}};k(n.disp,t,"x",0),k(n.disp,t,"y",0),k(n.disp,t,"rotation",0),k(n.disp,t,"scaleX",1),k(n.disp,t,"scaleY",1),k(n.disp,t,"alpha",0),k(n.disp,t,"tint",16777215),C(n,t,"anchor",0,0),C(n,t,"pivot",0,0),t.parent&&(t.parent==e.Base.pixi.root?n.parent="#root":t.parent==e.Base.pixi.stage?n.parent="#stage":t.parent._uid&&(n.parent=t.parent._uid),n.zIndex=t.parent.getChildIndex(t));var r=t.tweens;return r&&(n.tweens=r.map(function(e){return o.tweenToJson(e)}).filter(function(e){return e})),n}function C(e,t,n,r,i){var s=t[n];s&&(s.x!=r||s.y!=i)&&(e[n]=u.makeString(s.x,s.y))}function k(e,t,n,r){t[n]!==r&&(e[n]=t[n])}var r,i,s,o,u,a=n&&n.id,f=n&&n.id;return t("setupDisplays",l),t("jsonToPixiDisp",x),t("pixiDispToJson",N),{setters:[function(e){s=e},function(e){o=e}],execute:function(){r=e.Base.pixis.display.SpritesheetMovieClip,i=e.Base.pixis.display.TilingSpriteContainer,u=e.Base.geom.Point}}}),System.register("CgEventsEngine/syncs/setupPhysicsBody",["./Syncable"],function(t,n){"use strict";function a(){s.registerSyncableFactory("Base.PhysicsObject",{targetClasses:[i],createSyncable:function(e,t){return f(t.data)},exportSyncableData:function(e,t){return t.data=l(e),t}})}function f(t){var n=e.Base.physics.createPhysicsObject(t.name,t.body);return t.fixtures.forEach(function(e){return c(n,e)}),n.setPosition(t.x||0,t.y||0),n.setVelocity(t.velocityX||0,t.velocityY||0),n.angularVelocity=t.angularVelocity||0,n}function l(e){var t={fixtures:e.body.fixtures.map(function(e){return h(e)}),name:e.name,body:{type:e.body.GetType(),linearDamping:e.body.GetLinearDamping(),angularDamping:e.body.GetAngularDamping(),fixedRotation:e.body.IsFixedRotation()}};return d(t,e,"x",0),d(t,e,"y",0),d(t,e,"velocityX",0),d(t,e,"velocityY",0),d(t,e,"angularVelocity",0),t}function c(t,n){var i,s=n.shape,o=e.Base.physics.b2Scale,u=function(e){return e.map(function(e){return new r(e[0]*o,e[1]*o)})};switch(s.type){case"circle":i=t.addCircle(s.x*o,s.y*o,s.r*o,n.def);break;case"chain":i=t.addChain(u(s.vertices),n.def);break;case"edge":var a=u(s.vertices);i=t.addEdge(a[0],a[1],n.def);break;case"poly":i=t.addPolygon(u(s.vertices),n.def)}}function h(e){var t={shape:e.shape._toSyncJson(),def:{density:e.density,friction:e.friction,isSensor:e.isSensor,restitution:e.restitution}};return e.filter&&Object.assign(t.def,{categoryBits:e.filter.categoryBits,maskBits:e.filter.maskBits,groupIndex:e.filter.groupIndex}),t}function p(e,t,n,i,s){var o=t[n];o&&(o.x!=i||o.y!=s)&&(e[n]=r.makeString(o.x,o.y))}function d(e,t,n,r){t[n]!==r&&(e[n]=t[n])}var r,i,s,o=n&&n.id,u=n&&n.id;return t("setupPhysicsBody",a),{setters:[function(e){s=e}],execute:function(){r=e.Base.geom.Point,i=e.Base.physics2d.PhysicsObject,b2CircleShape.prototype._toSyncJson=function(){return{type:"circle",x:this.position.x,y:this.position.y,r:this.radius}},b2ChainShape.prototype._toSyncJson=function(){return{type:"chain",vertices:this.vertices.map(function(e){return[e.x,e.y]})}},b2EdgeShape.prototype._toSyncJson=function(){return{type:"edge",vertices:[this.vertex1,this.vertex2].map(function(e){return[e.x,e.y]})}},b2PolygonShape.prototype._toSyncJson=function(){return{type:"poly",vertices:this.vertices.map(function(e){return[e.x,e.y]})}}}}}),System.register("CgEventsEngine/syncs/setupTweens",["./Syncable"],function(e,t){"use strict";function s(){n.registerSyncableFactory("TWEEN.Tween",{targetClasses:[TWEEN.Tween],createSyncable:function(e,t){return o(t.data)},exportSyncableData:function(e,t){return t.data=u(e),t}})}function o(e,t){if(!e)return null;var n=new TWEEN.Tween(t||{}),r=n;return r._valuesStart=e.valuesStart,r._valuesEnd=e.valuesEnd,r._valuesStartRepeat=e.valuesStartRepeat,r._duration=e.duration,r._repeat=e.repeat,r._repeatDelayTime=e.repeatDelayTime,r._yoyo=e.yoyo,r._isPlaying=e.playing,r._reversed=e.reversed,r._delayTime=e.delayTime,r._easingFunction=e.easing,r.interpolationFunction=e.interpo,n.start(TWEEN.TWEEN.now()-e.time-e.delayTime),!t&&e.obj&&(r._postSync=function(t){r._object=t.uidManager.getAssociatedObject(e.obj),delete r._postSync}),n}function u(e){var t=e,n=TWEEN.TWEEN.now()-t._startTime;if(n>=t._duration)return null;var r={time:TWEEN.TWEEN.now()-t._startTime,valuesStart:t._valuesStart,valuesEnd:t._valuesEnd,valuesStartRepeat:t._valuesStartRepeat,duration:t._duration,repeat:t._repeat,repeatDelayTime:t._repeatDelayTime,yoyo:t._yoyo,playing:t._isPlaying,reversed:t._reversed,delayTime:t._delayTime,easing:t._easingFunction,interpo:t._interpolationFunction};return t._object&&t._object._uid&&(r.obj=t._object._uid),r}var n,r=t&&t.id,i=t&&t.id;return e("setupTweens",s),e("jsonToTween",o),e("tweenToJson",u),{setters:[function(e){n=e}],execute:function(){}}}),System.register("CgEventsEngine/syncs/setupPhysicsJoint",["./Syncable"],function(t,n){"use strict";function o(){r.registerSyncableFactory("b2Joint",{targetClasses:[b2Joint],createSyncable:function(e,t){return u(t.data)},exportSyncableData:function(e,t){return t.data=l(e),t}})}function u(e){return e.def.type=="gear"?{_postSync2:function(t){var n=f(e,t.uidManager);n._uid=this._uid,t.uidManager.registerUid(n._uid,n),delete this._postSync2}}:{_postSync:function(t){var n=a(e,t.uidManager);n._uid=this._uid,t.uidManager.registerUid(n._uid,n),delete this._postSync}}}function a(t,n){var r=c(t.def);r.bodyA=n.getAssociatedObject(t.b1),r.bodyB=n.getAssociatedObject(t.b2);var i=e.Base.physics.world.CreateJoint(r);return t}function f(t,n){var r=c(t.def);r.joint1=n.getAssociatedObject(t.j1),r.joint2=n.getAssociatedObject(t.j2);var i=e.Base.physics.world.CreateJoint(r);return t}function l(e){var t={name:e.name,def:e._toSyncJson()};if(e instanceof b2GearJoint){var n=e;t.j1=n.joint1.uid,t.j2=n.joint2.uid}else t.b1=e.bodyA.uid,t.b2=e.bodyB.uid}function c(e){var t=p(e.type);return Object.assign(t,e),h(t,"localAnchorA"),h(t,"localAnchorB"),h(t,"localAxisA"),h(t,"groundAnchorA"),h(t,"groundAnchorB"),h(t,"linearOffset"),h(t,"target"),t}function h(e,t){e[t]&&(e[t]=new b2Vec2(e[t][0],e[t][1]))}function p(e){switch(e){case"distance":return new b2DistanceJointDef;case"friction":return new b2FrictionJointDef;case"revolute":return new b2RevoluteJointDef;case"prismatic":return new b2PrismaticJointDef;case"pulley":return new b2PulleyJointDef;case"gear":return new b2GearJointDef;case"motor":return new b2MotorJointDef;case"mouse":return new b2MouseJointDef;case"rope":return new b2RopeJointDef;case"weld":return new b2WeldJointDef;case"wheel":return new b2WheelJointDef}return null}var r,i=n&&n.id,s=n&&n.id;return t("setupPhysicsJoint",o),{setters:[function(e){r=e}],execute:function(){b2DistanceJoint.prototype._toSyncJson=function(){return{type:"distance",collideConnected:this.collideConnected,frequencyHz:this.frequencyHz,dampingRatio:this.dampingRatio,localAnchorA:[this.localAnchorA.x,this.localAnchorA.y],localAnchorB:[this.localAnchorB.x,this.localAnchorB.y],length:this.length}},b2FrictionJoint.prototype._toSyncJson=function(){return{type:"friction",collideConnected:this.collideConnected,localAnchorA:[this.localAnchorA.x,this.localAnchorA.y],localAnchorB:[this.localAnchorB.x,this.localAnchorB.y],maxForce:this.maxForce,maxTorque:this.maxTorque}},b2RevoluteJoint.prototype._toSyncJson=function(){return{type:"revolute",collideConnected:this.collideConnected,enableLimit:this.enableLimit,enableMotor:this.enableMotor,localAnchorA:[this.localAnchorA.x,this.localAnchorA.y],localAnchorB:[this.localAnchorB.x,this.localAnchorB.y],lowerAnglel:this.lowerAnglel,upperAngle:this.upperAngle,maxMotorTorque:this.maxMotorTorque,motorSpeed:this.motorSpeed,referenceAngle:this.referenceAngle}},b2PrismaticJoint.prototype._toSyncJson=function(){return{type:"prismatic",collideConnected:this.collideConnected,enableLimit:this.enableLimit,enableMotor:this.enableMotor,localAnchorA:[this.localAnchorA.x,this.localAnchorA.y],localAnchorB:[this.localAnchorB.x,this.localAnchorB.y],localAxisA:[this.localAxisA.x,this.localAxisA.y],lowerTranslation:this.lowerTranslation,upperTranslation:this.upperTranslation,maxMotorForce:this.maxMotorForce,motorSpeed:this.motorSpeed,referenceAngle:this.referenceAngle}},b2PulleyJoint.prototype._toSyncJson=function(){return{type:"pulley",collideConnected:this.collideConnected,groundAnchorA:[this.groundAnchorA.x,this.groundAnchorA.y],groundAnchorB:[this.groundAnchorB.x,this.groundAnchorB.y],localAnchorA:[this.localAnchorA.x,this.localAnchorA.y],localAnchorB:[this.localAnchorB.x,this.localAnchorB.y],lengthA:this.lengthA,lengthB:this.lengthB,ratio:this.ratio}},b2GearJoint.prototype._toSyncJson=function(){return{type:"gear",collideConnected:this.collideConnected,ratio:this.ratio}},b2MotorJoint.prototype._toSyncJson=function(){return{type:"motor",collideConnected:this.collideConnected,angularOffset:this.angularOffset,correctionFactor:this.correctionFactor,linearOffset:[this.linearOffset.x,this.linearOffset.y],maxForce:this.maxForce,maxTorque:this.maxTorque}},b2MouseJoint.prototype._toSyncJson=function(){return{type:"mouse",collideConnected:this.collideConnected,dampingRatio:this.dampingRatio,frequencyHz:this.frequencyHz,maxForce:this.maxForce,target:[this.target.x,this.target.y]}},b2RopeJoint.prototype._toSyncJson=function(){return{type:"rope",collideConnected:this.collideConnected,localAnchorA:[this.localAnchorA.x,this.localAnchorA.y],localAnchorB:[this.localAnchorB.x,this.localAnchorB.y],maxLength:this.maxLength}},b2WeldJoint.prototype._toSyncJson=function(){return{type:"weld",collideConnected:this.collideConnected,localAnchorA:[this.localAnchorA.x,this.localAnchorA.y],localAnchorB:[this.localAnchorB.x,this.localAnchorB.y],dampingRatio:this.dampingRatio,frequencyHz:this.frequencyHz,referenceAngle:this.referenceAngle}},b2WheelJoint.prototype._toSyncJson=function(){return{type:"wheel",collideConnected:this.collideConnected,localAnchorA:[this.localAnchorA.x,this.localAnchorA.y],localAnchorB:[this.localAnchorB.x,this.localAnchorB.y],localAxisA:[this.localAxisA.x,this.localAxisA.y],dampingRatio:this.dampingRatio,enableMotor:this.enableMotor,frequencyHz:this.frequencyHz,maxMotorTorque:this.maxMotorTorque,motorSpeed:this.motorSpeed}}}}}),System.register("CgEventsEngine/VariableManager",["./syncs/SyncUtil","./ManagerEvent"],function(t,n){"use strict";function l(e){if(e&&typeof e=="object")if(e.disposed||e.destroyed)return undefined;return e}var r,i,s,o,u,a=n&&n.id,f=n&&n.id;return t("validateObject",l),{setters:[function(e){i=e},function(e){s=e}],execute:function(){r=e.Base.utils.ArrayUtil,o=function(){function t(e){this.manager=e,this.keyListContainer=new u,this.varMap={},this.sysVars={},this.propAccessors=[],this.addPropAccessor2({access:function(e,t){return"getChildByName"in e?e.getChildByName(t)||undefined:undefined},accessList:function(e,t){if("getChildByName"in e&&Array.isArray(e.children)){var n=[];if(typeof t=="string")for(var r=0,i=e.children;r<i.length;r++){var s=i[r];s.name&&s.name==t&&n.push(s)}else for(var o=0,u=e.children;o<u.length;o++){var s=u[o];s.name&&s.name.match(t)&&n.push(s)}return n}return null},priority:100})}return t.prototype.exportSyncJson=function(){return i.SyncUtil.varsToSyncJson(this.varMap)},t.prototype.importSyncJson=function(e){i.SyncUtil.syncJsonToVars(e,this.manager.uidManager)},t.prototype.copyVars=function(e){for(var t in e.varMap)this.varMap[t]=e.varMap[t]},t.prototype._setValue=function(e,t,n){if(!t)return;var r=e,i=t,o=t.charAt(0);if(o=='"'||o=="'")o=t.charAt(t.length-1),o=='"'||o=="'"?t=t.substr(1,t.length-2):t=t.substr(1,t.length-1),i=t;else{var u=t.split(".");i=u.shift();while(r&&u.length)i in r?r=r[i]:r=this.accessProp(r,i),i=u.shift()}r&&i?n!=r[i]&&(n===undefined?(delete r[i],this.manager.emit(s.ManagerEvent.SET_GLOBAL_VAR,{key:t,value:undefined})):(r[i]=n,this.manager.emit(s.ManagerEvent.SET_GLOBAL_VAR,{key:t,value:n}))):console.error("Unable to resolve variable path: "+t)},t.prototype.setSystemVariable=function(e,t){return this._setValue(this.sysVars,e,t),this},t.prototype.setValue=function(e,t,n){this._setValue(this.varMap,e,t),n&&t&&this.keyListContainer.addItem(e,t)},t.prototype.removeValue=function(e,t){this.getValue(e)==t&&this._setValue(this.varMap,e,undefined),this.keyListContainer.removeItem(e,t)},t.prototype.searchValues=function(e,t,n){n=n||[];var i=this.accessPropList(e,t);if(i)for(var s=0,o=i;s<o.length;s++){var u=o[s];r.addUniqueElement(n,u)}else if(e&&typeof e=="object")for(var a in e)if(a.match(t)){var f=l(e[a]);f===undefined?delete e[a]:r.addUniqueElement(n,f)}return n},t.prototype.convertKeyToPattern=function(e){var t=e.replace(/\*/g,".*").replace(/\+/g,".+");return t==e?e:new RegExp("^"+t+"$")},t.prototype.listValue=function(t,n,i,s){var o=[];if(!t)return o;var u=t.split("."),a=u.shift();a=="global"&&u.length&&(a=u.shift(),s=null);var f=this.convertKeyToPattern(a);s&&this.searchValues(s,f,o),this.searchValues(this.varMap,f,o),this.keyListContainer.searchValues(this.convertKeyToPattern(t),o),e.Base.pixi.root&&this.searchValues(e.Base.pixi.root,f,o);while(u.length&&o.length){a=u.shift();if(!a)return[];f=new RegExp("^"+a.replace(/\*/g,".*").replace(/\+/g,".+")+"$");var l=[];for(var c=0,h=o;c<h.length;c++){var p=h[c];l=l.concat(this.searchValues(p,f))}o=l}if(o.length){if(n){var d=[];for(var v=0,m=o;v<m.length;v++){var g=m[v];r.addUniqueElement(d,g)}o=d}i&&i.key&&(o=o.filter(function(e){return i.key in e}),o.sort(function(e,t){return e==t?0:i.descending?e<t?1:-1:e>t?1:-1}))}return o},t.prototype.getValue=function(t,n){if(typeof t!="string")return t;if(!t)return null;var r=t.charAt(0),i=undefined,s=t.match(/^(.*)\[\s*([0-9]+)\s*\]\s*$/),o=-1;s&&(t=s[1],o=parseInt(s[2]));if(r=='"'||r=="'"){r=t.charAt(t.length-1);if(r=='"'||r=="'")return t.substr(1,t.length-2);i=t.substr(1,t.length-1)}else{var u=t.split("."),a=u.shift();a=="global"&&u.length&&(a=u.shift(),n=null);if(n){i=n.getValue(t);if(i!=undefined&&i!=null)return i}a in this.varMap?(i=this.rootAccess(this.varMap,a),i===undefined&&delete this.varMap[a]):(!e.Base.pixi.root||!(i=e.Base.pixi.root.getChildByName(a)||undefined))&&a in this.sysVars&&(i=this.sysVars[a]);while(i&&u.length){a=u.shift();if(!a)return null;if(a in i){var f=l(i[a]);f===undefined&&delete i[a],i=f}else i=l(this.accessProp(i,a))}}return o>=0&&(Array.isArray(i)?i=i[o]:typeof i=="string"&&(i=i.charAt(o))),i},t.prototype.rootAccess=function(e,t){for(var n=0,r=this.propAccessors;n<r.length;n++){var i=r[n];try{var s=i.rootAccess?i.rootAccess(e,t):undefined;if(s!==undefined)return l(s)}catch(o){console.error("(rootAccess error): "+o,o)}}return e[t]},t.prototype.accessProp=function(e,t){for(var n=0,r=this.propAccessors;n<r.length;n++){var i=r[n];try{var s=i.access?i.access(e,t):undefined;if(s!==undefined)return s}catch(o){console.error("(accessProp error): "+o,o)}}return undefined},t.prototype.accessPropList=function(e,t){var n;for(var i=0,s=this.propAccessors;i<s.length;i++){var o=s[i],u=o.accessList&&o.accessList(e,t);if(u){n=n||[];for(var a=0,f=u;a<f.length;a++){var c=f[a];c=l(c),c!==undefined&&r.addUniqueElement(n,c)}}}return n},t.prototype.addPropAccessor2=function(e){this.propAccessors.push(e),r.sortNumericOn(this.propAccessors,"priority",!1)},t.prototype.addPropAccessor=function(e,t,n){this.propAccessors.push({rootAccess:null,access:e,accessList:t,priority:n}),r.sortNumericOn(this.propAccessors,"priority",!1)},t.prototype.removePropAccessor=function(e){var t=this.propAccessors.findIndex(function(t){return t.access==e});t!=-1&&this.propAccessors.splice(t,1)},t.prototype.cleanPropAccessors=function(e){this.propAccessors=[]},t.prototype.parseMathExpression=function(e,t){return this._parseExpression(e,t,function(e){if("position"in e){var t=e.position;if("x"in t&&"y"in t)return"["+t.x+","+t.y+"]"}return"x"in e&&"y"in e?"["+e.x+","+e.y+"]":e.toString()})},t.prototype.parseExpression=function(e,t){return this._parseExpression(e,t,function(e){return"code"in e?e.code:"name"in e?e.name:e.toString()})},t.prototype._parseExpression=function(e,t,n){if(!e||typeof e!="string")return e;var r,i,s,o,u;for(;;){i=e.indexOf("}");if(i==-1)break;r=e.lastIndexOf("{",i);if(r==-1)break;s=e.substr(r,i-r+1).trim(),o=this.getValue(s.substr(1,s.length-2),t),o===null?o="null":o==undefined?o="undefined":(u=typeof o,u==="object"?o=n(o):u!=="string"&&(o=o.toString())),o=o&&o.replace(/[\}\{]/g,"")||"",e=e.replace(s,o)}return e},t}(),t("VariableManager",o),u=function(){function e(){this.listMap={}}return Object.defineProperty(e.prototype,"isKeyListContainer",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.getItem=function(e){var t=this.listMap[e];return t&&t[0]},e.prototype.listItems=function(e){var t=this.listMap[e];return t&&t.slice()},e.prototype.addItem=function(e,t){var n=this.listMap[e];if(n){var r=n.indexOf(t);r!=-1&&n.splice(r,1),n.unshift(t)}else n=this.listMap[e]=[t];return n},e.prototype.searchValues=function(e,t){if(typeof e=="string"){var n=this.listItems(e);if(n)for(var i=0,s=n;i<s.length;i++){var o=s[i],u=l(o);u?r.addUniqueElement(t,u):r.removeElement(this.listMap[e],o)}}else for(var a in this.listMap)if(a.match(e)){var n=this.listItems(a);for(var f=0,c=n;f<c.length;f++){var o=c[f],u=l(o);u?r.addUniqueElement(t,u):r.removeElement(this.listMap[a],o)}}},e.prototype.removeItem=function(e,t){var n=this.listMap[e];n&&r.removeElement(n,t)&&n.length==0&&delete this.listMap[e]},e}()}}}),System.register("CgEventsEngine/CgEventElement",[],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s=n&&n.id,o=n&&n.id;return{setters:[],execute:function(){i=function(t){function n(e,n){var r=t.call(this)||this;return r._event=e,r._json=n,r._enabled=!0,r._staredVars={},r._disposed=!1,r._json=r._json||{},r}return r(n,t),n.prototype.injectLocalVars=function(e){this._localVars=e},n.prototype.exportLocalVars=function(){return this._localVars},n.prototype.setLocalVar=function(e,t){return e&&this._localVars&&this._localVars.setValue(e,t),this},Object.defineProperty(n.prototype,"json",{get:function(){return this._json},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return Object.getPrototypeOf(this).constructor.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"event",{get:function(){return this._event},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"disabled",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"enabled",{get:function(){return this._enabled&&!this.disabled},set:function(e){e!=this._enabled&&(this._enabled=e,this.emit(n.EVENT.ENABLED_CHANGED))},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){this.removeAllListeners(),this._disposed=!0},Object.defineProperty(n.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),n.prototype.setGlobalVar=function(e,t,n){this._event.manager.varManager.setValue(e,t,n)},n.prototype.removeGlobalVar=function(e,t,n){var r=this.event.manager;n&&r.uidManager.removeUid(n),r.varManager.removeValue(e,t)},n.prototype.assignObjectUID=function(e,t){return this._event.manager.uidManager.generateUid(e+"|",t)},n.prototype.registerObjectUID=function(e,t){this._event.manager.uidManager.registerUid(e,t)},n.prototype.getObject=function(e){e=this.getString(e);var t=this._event.manager;return t.uidManager.hasUid(e)?t.uidManager.getAssociatedObject(e):t.varManager.getValue(e,this._localVars)},n.prototype.getString=function(e){return this._event.manager.varManager.parseExpression(e,this._localVars)},n.prototype.getMathExpression=function(e){return this._event.manager.varManager.parseMathExpression(e,this._localVars)},n.prototype.getStringWithStars=function(t){if(t in this._staredVars)return this._staredVars[t];var n=this.getString(t);if(n){var r=n.match(/\*+$/);r&&(n=n.substr(0,r.index)+e.Base.utils.systemRandomGenerator.generateRandomString(6,!0));var i=n.split("*");n=i.shift();while(i.length)n+=e.Base.utils.systemRandomGenerator.generateRandomString(1,!0)+i.shift()}return this._staredVars[t]=n,n},n.prototype.getColor=function(e){var t=this.getString(e);return t&&t.startsWith("#")&&(t=t.substr(1)),t?parseInt(t,16):0},n.prototype.getNumber=function(e){if(!e||typeof e=="number")return e;if(typeof e!="string")return Number.NaN;var t=this.getMathExpression(e);if(t.includes("null")||t.includes("undefined"))return Number.NaN;try{return math.eval(t)}catch(n){return console.error("Invalid number expression: "+e+" @event["+this.event.id+"]"),Number.NaN}},n.prototype.getInt=function(e){return!e||typeof e=="number"?e||0:typeof e!="string"?0:(e=this.getMathExpression(e),e=e.replace(/(null|undefined)/g,"0"),math.eval(e))},n.prototype.getBoolean=function(e){switch(typeof e){case"boolean":return e;case"string":if(e=="true"||e=="1")return!0;if(e=="false"||e=="0")return!1;return e=this.getMathExpression(e),e=e.replace(/(null|undefined)/g,"0"),!!math.eval(e);default:return!!e}},n.EVENT={ENABLED_CHANGED:"enabledChanged"},n}(PIXI.utils.EventEmitter),t("CgEventElement",i),function(e){e.import({"import":function(){throw new Error("Function import is disabled")},createUnit:function(){throw new Error("Function createUnit is disabled")},parse:function(){throw new Error("Function parse is disabled")},simplify:function(){throw new Error("Function simplify is disabled")},derivative:function(){throw new Error("Function derivative is disabled")}},{override:!0})}(math)}}}),System.register("CgEventsEngine/eventsStarter",["./CgEventManager"],function(t,n){"use strict";function a(e){e&&(e.createManager&&(s.createManager=e.createManager),e.start&&(s.start=e.start))}var r,i,s,o=n&&n.id,u=n&&n.id;return t("setupTestEventsPlayer",a),{setters:[function(e){r=e}],execute:function(){t("__disabled",i=!1),s={createManager:function(){return new r.CgEventManager},start:function(t,n){return t.importFromSource(n).then(function(){return t.preload()}).then(function(){return e.Base.hideCGPreloader(),t.start(),t})}},e.Base.utils.NetUtil.getQueryStringValue("cgevents")&&(t("__disabled",i=!0),e.Base.system.once(e.Base.system.EVENT.BOOT_COMPLETE,function(){var n=e.Base.utils.NetUtil.getQueryStringValue("cgevents");t("__disabled",i=!1);var r=s.createManager();t("__disabled",i=!0),e.Base.utils.NetUtil.getQueryStringValue("debugConsole")&&(r.debugConsole=!0),s.start(r,n)}))}}}),System.register("CgEventsEngine/syncs/SyncUtil",["./../utils/ElementUtil"],function(e,t){"use strict";function o(e){var t={};for(var n=0,r=e.listUids();n<r.length;n++){var i=r[n],s=e.getAssociatedObject(i);if(s&&!s.disposed){var o=u(s);o&&o.data&&(t[i]=o)}}return t}function u(e){return e.toSyncableData&&e.toSyncableData()}function a(e,t){return e&&typeof e=="object"?f(e,t):e}function f(e,t){return Array.isArray(e)?e.map(function(e){return a(e,t)}):(e._uid?e=t.getAssociatedObject(e._uid):e._type=="function"&&(e=function(){}),e)}function l(e){if(e)switch(typeof e){case"object":return c(e);case"function":return undefined}return e}function c(e){if(Array.isArray(e))return e.map(function(e){return l(e)});if(e._uid)return{_uid:e._uid};if(n.ElementUtil.isObjectUnsyncable(e))return undefined;var t={};for(var r in e){var i=l(e[r]);i!==undefined&&(t[r]=i)}return t}var n,r,i=t&&t.id,s=t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(){}return e.varsToSyncJson=function(e){return l(e)},e.syncJsonToVars=function(e,t){return a(e,t)},e.uidManagerToSyncJson=function(e){return o(e)},e.uidObjectToSyncJson=function(e){return u(e)},e}(),e("SyncUtil",r)}}}),System.register("CgEventsEngine/syncs/Syncable",[],function(e,t){"use strict";function s(e,t){return n[t.type]&&n[t.type].createSyncable(e,t)}function o(e,t){n[e]=t,t.targetClasses.forEach(function(n){n.prototype.toSyncableData=function(){return t.exportSyncableData(this,{type:e,data:{}})}})}function u(e){return n[e]}function a(){return Object.keys(n)}var n,r=t&&t.id,i=t&&t.id;return e("createSyncableObject",s),e("registerSyncableFactory",o),e("getSyncableFactory",u),e("listSyncableFactoryNames",a),{setters:[],execute:function(){n={}}}}),System.register("CgEventsEngine/ManagerEvent",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.EVENT_ABOUT_TO_TRIGGER="eventAboutToTrigger",e.EVENT_TRIGGERED="eventTriggered",e.ACTION_DATA_PREPARED="actionDataPrepared",e.ACTION_PREPARED_DATA_RECEIVED="actionPreparedDataReceived",e.ACTION_EXECUTE_COMPLETE="actionExecuteComplete",e.EVENT_ACTIONS_EXECUTE_COMPLETE="eventActionsExecuteComplete",e.SET_GLOBAL_VAR="setGlobalVar",e.ERROR_EVENT_TRIGGER="errorEventTrigger",e.TRIGGER_DISABLED="triggerDisabled",e}(),e("ManagerEvent",n)}}}),System.register("CgEventsEngine/CgEvent",["./CgActionsGroup","./LocalVars","./ManagerEvent","./index","./CgEventManager"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l,c,h,p,d,v,m=n&&n.id,g=n&&n.id;return{setters:[function(e){i=e},function(e){u=e},function(e){a=e},function(e){f=e},function(e){l=e}],execute:function(){s=e.Base.utils.systemRandomGenerator,o=e.Base.utils.ObjectUtil,c=function(){},h="createActionsGroup",p="syncEvent",d=function(e){function t(t,n,r){var i=e.call(this)||this;i._manager=t,i._id=n,i._json=r,i._triggers=[],i._checks=[],i._enabled=!0,i._disposed=!1,i._startTime=0,i._repeats=0,i._timesTriggered=0,i._triggerBlocker=0,r.checkInterval=r.checkInterval||100,r.repeats=r.repeats||0,r.repeatInterval=r.repeatInterval||0,i._startTime=r.startTime||0,i._repeats=r.repeats||0,i._repeats<0&&(i._repeats=Number.MAX_SAFE_INTEGER);if(r.checks){var s=[];for(var o=0,u=r.checks;o<u.length;o++){var a=u[o],c=f.createCheck(a.type,i,a.data);if(c){var d=c.loopBreaks;while(d>0&&s.length)s.shift(),--d;c._parents=s.slice(),c.checkLoop&&s.unshift(c),i._checks.push(c)}}}if(r.triggers)for(var v=0,m=r.triggers;v<m.length;v++){var a=m[v],g=f.createTrigger(a.type,i,a.data);g&&i._triggers.push(g)}return i.resetLocalVars(),i.manager.once(l.CgEventManager.EVENT.READY,function(){i._manager.socketClient.onBroadcastData(i.getSocketTopic(h),i.onSocketCreateActionsGroup,i),i._manager.socketClient.onBroadcastData(i.getSocketTopic(p),i.onSocketSyncEvent,i)}),i}return r(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this._id},enumerable:!0,configurable:!0}),t.prototype.exportSyncData=function(){var e={};return this._disposed?e.disposed=1:this._enabled&&(e.enabled=1,e.startTime=this._startTime,e.repeats=this._repeats),this._timesTriggered&&(e.trigs=this._timesTriggered),e},t.prototype.importSyncData=function(e){this._timesTriggered=e.trigs||0,e.disposed?this.disposed||this.dispose():(this._repeats=e.repeats,e.enabled!=this._enabled&&(e.enabled?this.enable(e.startTime):this.disable()))},Object.defineProperty(t.prototype,"timesTriggered",{get:function(){return this._timesTriggered},enumerable:!0,configurable:!0}),t.prototype.getSocketTopic=function(e){return e+"/"+this.id},t.prototype.resetLocalVars=function(){var e=this;this._localVars=new u.LocalVars(this._manager.varManager),this._triggers.forEach(function(t){return t.injectLocalVars(e._localVars)}),this._checks.forEach(function(t){return t.injectLocalVars(e._localVars)})},t.prototype.dispose=function(){this._manager.socketClient.offBroadcastData(this.getSocketTopic(h),this.onSocketCreateActionsGroup,this),this._manager.socketClient.offBroadcastData(this.getSocketTopic(p),this.onSocketSyncEvent,this),this._triggers.forEach(function(e){return e.dispose()}),this._checks.forEach(function(e){return e.dispose()}),this.disable(),this._manager&&this._manager.removeEvent(this),this.removeAllListeners(),this._disposed=!0},Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"manager",{get:function(){return this._manager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasTrigger",{get:function(){for(var e=0,t=this._triggers;e<t.length;e++){var n=t[e];if(n.enabled)return!0}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasCheck",{get:function(){for(var e=0,t=this._checks;e<t.length;e++){var n=t[e];if(n.enabled)return!0}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startTime",{get:function(){return this._startTime},set:function(e){this._startTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkInterval",{get:function(){return this._json.checkInterval},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"repeats",{get:function(){return this._repeats},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"repeatInterval",{get:function(){return this._json.repeatInterval},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"referenceOnly",{get:function(){return this._json.referenceOnly},enumerable:!0,configurable:!0}),t.prototype.getTrigger=function(e){return this._triggers[e]},t.prototype.getTriggerIndex=function(e){return this._triggers.indexOf(e)},t.prototype.getCheck=function(e){return this._checks[e]},t.prototype.getCheckIndex=function(e){return this._checks.indexOf(e)},t.prototype.checkAndTrigger=function(e){if(this._startTime>this._manager.timePassed||this._triggerBlocker)return!1;e&&e.disableAfterTriggered&&(e.enabled=!1,this._manager.emit(a.ManagerEvent.TRIGGER_DISABLED,e));if(this._manager.isDecisionMaker()){this.repeatInterval>0&&(this._triggerBlocker=1);if(this.runChecksAndTrigger())return this._triggerBlocker=0,this.removeOrRepeat(),!0;this._triggerBlocker=0}else e&&!e.enabled&&this._manager.addEvent(this);return!1},t.prototype.triggerByEvent=function(e,t){var n=this;if(this._manager.isDecisionMaker())return e._localVars.clone(this._localVars),t&&t.clone(this._localVars),new Promise(function(e,t){n.runChecksAndTrigger(function(){e()})})},t.prototype.runChecksByEvent=function(e,t){var n=!1;return t=t||c,e._localVars.clone(this._localVars),this._runChecks(function(){n=!0,t()},0),this._localVars.clone(e._localVars),n},t.prototype.runChecksAndTrigger=function(e){var t=this,n=!1,r=[];return this._runChecks(function(){n=!0;var e=t.trigger();e&&r.push(e)},0),r.length?Promise.all(r).then(e||c).catch(function(e){t._manager.onEventTriggerError(t,e)}):e&&e(),n},t.prototype._runChecks=function(e,t,n){var r=this,i=this._checks.length,s=t,o=function(){var t=u._checks[s],o=t.enabled;if(n&&t.loopParent!=n)return"break";t.loopParent&&t.loopParent.disabled&&(o=!1);if(o){var a=t.checkPass();t._not&&(a=!a);if(a)if(t.checkLoop){var f=t.checkLoop.varnameOfPassCount;if(!t.checkLoop.donotActOnEachPass){var h=0,c=function(){r._localVars.setValue(f,++h),e()};return t.checkLoop.runLoop(c,s),{value:void 0}}var l=0,c=function(){++l};t.checkLoop.runLoop(c,s),u._localVars.setValue(f,l),a=l>=(t.checkLoop.minPassToCheckPass||0),t._not&&(a=!a);if(a)s=u.findNextNotOrCheckIndex(s+1,t.loopIndent);else{s=u.findNextOrCheckIndex(s+1,t.loopIndent);if(s>=i)return u.triggerElseEvent(t._elseEventId),{value:void 0}}}else s=u.findNextNotOrCheckIndex(s+1,t.loopIndent);else{s=u.findNextOrCheckIndex(s+1,t.loopIndent);if(s>=i)return u.triggerElseEvent(t._elseEventId),{value:void 0}}}else++s},u=this;while(s<i){var a=o();if(typeof a=="object")return a.value;if(a==="break")break}e()},t.prototype.triggerElseEvent=function(e){if(e){var t=this._manager.getEvent(e);t&&t.triggerByEvent(this,this._localVars)}},t.prototype.findNextNotOrCheckIndex=function(e,t){var n=this._checks.length,r=!1;for(var i=e;i<n;++i){var s=this._checks[i];if(s.loopIndent==t){if(!s._and_or)return i;if(s._and_or=="OR")r=!0;else if(!r)return i}else if(s.loopIndent<t)break}return n},t.prototype.findNextOrCheckIndex=function(e,t){var n=this._checks.length;for(var r=e;r<n;++r){var i=this._checks[r];if(i.loopIndent==t){if(!i._and_or)break;if(i._and_or=="OR")return r}else if(i.loopIndent<t)break}return n},t.prototype.disable=function(){this._enabled=!1},t.prototype.enable=function(e){this._startTime=e,this._enabled=!0,this._manager.addEvent(this)},Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},enumerable:!0,configurable:!0}),t.prototype.trigger=function(){var e=this.id+"/"+s.generateRandomString(6,!0),t={groupId:e,senderId:this.manager.localId,localVars:this._localVars.exportSyncJson()};return this._manager.socketClient.broadcast(this.getSocketTopic(h),t),this._trigger(e)},t.prototype._trigger=function(e){this._manager.emit(a.ManagerEvent.EVENT_ABOUT_TO_TRIGGER,this);var t=this.createActionsGroup(e,this.createActions());return this._manager.executeActionsGroup(t)},t.prototype.createActions=function(){var e=this,t=[];if(this._json.actions){var n=this._localVars.clone();this._json.actions.forEach(function(r,i){var s=f.createAction(r.type,e,o.deepCloneObject(r.data));s&&(s._actionIndex=i,s.injectLocalVars(n),t.push(s))})}return t},t.prototype.createActionsGroup=function(e,t){return new i.CgActionsGroup(e,this,t)},t.prototype.createAction=function(e){if(this._json.actions&&e>=0&&e<this._json.actions.length){var t=this._localVars.clone(),n=this._json.actions[e],r=f.createAction(n.type,this,o.deepCloneObject(n.data));if(r)return r._actionIndex=e,r.injectLocalVars(t),r}return null},t.prototype.onSocketCreateActionsGroup=function(e){this.manager.localId!=e.senderId&&(e.localVars&&this._localVars.importSyncJson(e.localVars),this._trigger(e.groupId))},t.prototype.onSocketSyncEvent=function(e){this.manager.localId!=e.senderId&&this.importSyncData(e)},t.prototype.removeOrRepeat=function(){this.resetLocalVars(),++this._timesTriggered,this._repeats>0?(--this._repeats,this.hasTrigger?this.enable(this.manager.timePassed+Math.max(0,this.repeatInterval)):this.enable(this.manager.timePassed+Math.max(1,this.repeatInterval)),this.manager.emit(l.CgEventManager.EVENT.EVENT_REPEATED,this)):(this.dispose(),this.manager.emit(l.CgEventManager.EVENT.EVENT_REMOVED,this)),this._manager.socketClient.broadcast(this.getSocketTopic(p),this.exportSyncData())},t.prototype.rescheduleCheckTime=function(e){this.enable(e+this.checkInterval)},t}(PIXI.utils.EventEmitter),t("CgEvent",d),v=function(){function e(){}return e}(),t("CgEventJson",v)}}}),System.register("CgEventsEngine/CgActionsGroup",["./ManagerEvent","./EventTriggerError"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f=n&&n.id,l=n&&n.id;return{setters:[function(e){i=e},function(e){o=e}],execute:function(){s=e.Base.utils.ObjectUtil,u=12,a=function(e){function t(t,n,r){var i=e.call(this)||this;return i.id=t,i.event=n,i.actions=r,i.socketPromises={},i.socketData={},i.socketTopic="actionsGroupData/"+i.id,r.forEach(function(e){e._cggroup=i}),i.event.manager.socketClient.onBroadcastData(i.socketTopic,i.onSocketData,i),i}return r(t,e),t.prototype.dispose=function(){this.event.manager.socketClient.offBroadcastData(this.socketTopic,this.onSocketData,this),this.cancelDelayExecution(),this.actions.forEach(function(e){return e.dispose()})},t.prototype.containsAction=function(e){return this.actions.indexOf(e)!=-1},t.prototype.cancelDelayExecution=function(){this.delayExecution&&(this.delayExecution.dispose(),this.delayExecution=null)},t.prototype.execute=function(){return this._executeAllActions()},t.prototype._delayExecuteActions=function(e){var t=this,n=this.socketData[e];if(n){var r=this.actions[n.actionIndex];try{var i=this._executeActionWithPreparedData(r,n.data,n.actionIndex);i?i.then(function(){return t.socketPromises[n.actionIndex].resolve()}).catch(function(e){return t.socketPromises[n.actionIndex].reject(e)}):this.socketPromises[n.actionIndex].resolve()}catch(s){this.socketPromises[n.actionIndex].reject(s)}}else if(this.event.manager.isDecisionMaker())try{var i=this._decisionMakerExecuteAction(e);i?i.then(function(){return t.socketPromises[e].resolve()}).catch(function(n){return t.socketPromises[e].reject(n)}):this.socketPromises[e].resolve()}catch(s){this.socketPromises[e].reject(s)}else this.delayExecution=this.event.manager.updater.addDelayFunction(this,this._delayExecuteActions,u,[e])},t.prototype._decisionMakerExecuteAction=function(e){var t=this,n=this.actions[e],r;try{r=n.prepare()}catch(i){throw new o.EventTriggerError(this.event,n,e,"preparing",i)}return s.isPromise(r)?r.then(function(r){return t.onActionDataPrepared(n,e,r)}):this.onActionDataPrepared(n,e,r)},t.prototype._executeAllActions=function(e){var n=this;e===void 0&&(e=0);if(e>=this.actions.length){this.emit(t.EVENT.COMPLETE);return}var r=this._executeOneAction(e);return r?r.then(function(){return n._executeAllActions(e+1)}):this._executeAllActions(e+1)},t.prototype._executeOneAction=function(e){var t=this;this.cancelDelayExecution();var n=this.actions[e];if(n.enabled)return this.event.manager.isDecisionMaker()?this._decisionMakerExecuteAction(e):(this.delayExecution=this.event.manager.updater.addDelayFunction(this,this._delayExecuteActions,u,[e]),new Promise(function(n,r){t.socketPromises[e]={resolve:n,reject:r}}));n.dispose()},t.prototype.onActionDataPrepared=function(e,t,n){this.event.manager.emit(i.ManagerEvent.ACTION_DATA_PREPARED,{action:e,data:n,index:t});var r={senderId:this.event.manager.localId,actionIndex:t,data:n};return this.event.manager.socketClient.broadcast(this.socketTopic,r),this._executeActionWithPreparedData(e,n,t)},t.prototype.onSocketData=function(e){if(e.actionIndex!==undefined){if(e.senderId!=this.event.manager.localId){var t=e;this.socketData[t.actionIndex]=e,this.event.manager.emit(i.ManagerEvent.ACTION_PREPARED_DATA_RECEIVED,e)}}else e.type=="skip"&&this.skipActions(e.data&&e.data.i)},t.prototype.skipActions=function(e){e=e!==undefined&&e>=0?e:Number.MAX_SAFE_INTEGER,e=Math.min(e,this.actions.length);for(var t=0;t<e;++t){var n=this.actions[t];n.disposed||n._setSkipped()}},t.prototype.listActions=function(){return this.actions},t.prototype.broadcastSkipActions=function(e){var t={type:"skip"};e!==undefined&&e>=0&&(t.data={i:e}),this.event.manager.socketClient.broadcast(this.socketTopic,t)},t.prototype._executeActionWithPreparedData=function(e,t,n){var r=this;if(this.event.manager.disposed)return this.dispose(),Promise.reject("This EventManager is disposed");var s;try{s=e.execute(t)}catch(u){throw e.dispose(),new o.EventTriggerError(this.event,e,n,"executing",u)}if(s)return s.then(function(){e.dispose(),r.event.manager.emit(i.ManagerEvent.ACTION_EXECUTE_COMPLETE,{action:e,index:n})}).catch(function(t){throw e.dispose(),new o.EventTriggerError(r.event,e,n,"executing",t)});e.dispose(),this.event.manager.emit(i.ManagerEvent.ACTION_EXECUTE_COMPLETE,{action:e,index:n})},t.EVENT={COMPLETE:"complete"},t}(PIXI.utils.EventEmitter),t("CgActionsGroup",a)}}}),System.register("CgEventsEngine/LocalVars",["./syncs/SyncUtil"],function(e,t){"use strict";var n,r,i=t&&t.id,s=t&&t.id;return{setters:[function(e){n=e}],execute:function(){r=function(){function e(e){this.varManager=e,this.varMap={}}return e.prototype.clone=function(t){return t=t||new e(this.varManager),Object.assign(t.varMap,this.varMap),t},e.prototype.importVarMap=function(e){e&&Object.assign(this.varMap,e)},e.prototype.importSyncJson=function(e){Object.assign(this.varMap,n.SyncUtil.syncJsonToVars(e,this.varManager.manager.uidManager))},e.prototype.exportSyncJson=function(){return n.SyncUtil.varsToSyncJson(this.varMap)},e.prototype.setValue=function(e,t){if(!e)return;var n=this.varMap,r=e.split("."),i=r.shift();while(r.length){var s=n[i];s||(s={},s._fakeobj=1,n[i]=s),n=s,i=r.shift()}i&&t!=n[i]&&(t===undefined?delete n[i]:n[i]=t)},e.prototype.getValue=function(e){if(typeof e!="string")return e;if(!e)return null;var t=e.split("."),n=t.shift(),r=this.varManager.rootAccess(this.varMap,n);while(r&&t.length){n=t.shift();if(!n)return null;n in r?r=r[n]:this.varManager&&(r=this.varManager.accessProp(r,n))}return r&&r._fakeobj&&(r=undefined),r},e}(),e("LocalVars",r)}}}),System.register("CgEventsEngine/EventTriggerError",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){n=function(){function e(e,t,n,r,i){this.event=e,this.action=t,this.actionIndex=n,this.actionState=r,this.error=i}return Object.defineProperty(e.prototype,"name",{get:function(){return e.NAME},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){var e="ERROR_EVENT_TRIGGER("+this.event.id+"): ";return this.action&&(e+="ACTION("+this.actionIndex+")."+this.actionState+": "),e+=this.error.error||this.error.message||this.error.text||this.error.toString(),e},enumerable:!0,configurable:!0}),e.NAME="eventTriggerError",e}(),e("EventTriggerError",n)}}}),function(){CgLibs.bootLib("CgEventsEngine/index",["CgEventsEngine/index","CgEventsEngine/syncs/setupDefaults","CgEventsEngine/utils/ElementUtil","CgEventsEngine/CgDefinition","CgEventsEngine/CgTrigger","CgEventsEngine/CgCheck","CgEventsEngine/CgAction","CgEventsEngine/CgEventManager","CgEventsEngine/syncs/setupSounds","CgEventsEngine/syncs/setupDisplays","CgEventsEngine/syncs/setupPhysicsBody","CgEventsEngine/syncs/setupTweens","CgEventsEngine/syncs/setupPhysicsJoint","CgEventsEngine/VariableManager","CgEventsEngine/CgEventElement","CgEventsEngine/eventsStarter","CgEventsEngine/syncs/SyncUtil","CgEventsEngine/syncs/Syncable","CgEventsEngine/ManagerEvent","CgEventsEngine/CgEvent","CgEventsEngine/CgActionsGroup","CgEventsEngine/LocalVars","CgEventsEngine/EventTriggerError"])}()}};CgLibs.bootModule('CgEventsEngine')},function(){CgLibs.modules.ReactMaterial={boot:function(e){System.register("ReactMaterial/index",["./actions/ShowCopyStringDialog.action","./actions/ShowSelectDialog.action","./actions/CloseDialog.action","./actions/ShowLoadingDialog.action","./dialogs/LoadingDialog","./triggers/DialogClose.trigger","./triggers/DialogConfirm.trigger","./actions/ShowInputDialog.action","./actions/ShowConfirmDialog.action","./dialogs/ConfirmDialog","./dialogs/InputDialog"],function(t,n){"use strict";var r,i,s,o,u,a,f,l,c,h,p,d,v,m=n&&n.id,g=n&&n.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e},function(e){a=e},function(e){f=e},function(e){l=e},function(e){c=e},function(e){h=e},function(e){p=e}],execute:function(){d=function(){function e(){p.InputDialog,h.ConfirmDialog,u.LoadingDialog}return e}(),t("index",v=new d),e.CgEventsEngine.registerAction(c.ShowConfirmDialogAction),e.CgEventsEngine.registerAction(l.ShowInputDialogAction),e.CgEventsEngine.registerAction(o.ShowLoadingDialogAction),e.CgEventsEngine.registerAction(i.ShowSelectDialogAction),e.CgEventsEngine.registerAction(r.ShowCopyStringDialogAction),e.CgEventsEngine.registerAction(s.CloseDialogAction),e.CgEventsEngine.registerTrigger(f.DialogConfirmTrigger),e.CgEventsEngine.registerTrigger(a.DialogCloseTrigger)}}}),System.register("ReactMaterial/actions/ShowCopyStringDialog.action",["./../dialogs/CopyStringDialog","./ShowConfirmDialog.action"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a=n&&n.id,f=n&&n.id;return{setters:[function(e){i=e},function(e){o=e}],execute:function(){s=e.Base.utils.ObjectUtil,u=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"valueLabel",{get:function(){return this.getString(this.json.valueLabel)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.getString(this.json.value)},enumerable:!0,configurable:!0}),t.prototype.prepareJson=function(){var t=e.prototype.prepareJson.call(this);return t.valueLabel=this.valueLabel,t.value=this.value,t},t.prototype.execute=function(e){s.safeAssign(this.json,e.json);var t=this.dialogId,n=this.generateDialogOptions(t);n.value=this.value,n.valueLabel=this.valueLabel,i.openCopyStringDialog(n,null,t)},t.TYPE="ShowCopyStringDialog",t}(o.ShowConfirmDialogAction),t("ShowCopyStringDialogAction",u)}}}),System.register("ReactMaterial/actions/ShowSelectDialog.action",["./BaseDialogAction","./../dialogs/SelectDialog","./../definitions/SelectOption.definition","./ShowConfirmDialog.action"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l=n&&n.id,c=n&&n.id;return{setters:[function(e){i=e},function(e){s=e},function(e){u=e},function(e){a=e}],execute:function(){o=e.Base.utils.ObjectUtil,f=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"confirmValue",{get:function(){return this.getString(this.controls.confirmValue)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultValue",{get:function(){return this.getString(this.json.defaultValue)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectOptions",{get:function(){var e=this;return this.json.selectOptions.map(function(t){return new u.SelectOptionDef(e,t)})},enumerable:!0,configurable:!0}),t.prototype.prepareJson=function(){var t=e.prototype.prepareJson.call(this);return t.selectOptions=this.selectOptions.map(function(e){return e.toNormalizedJson()}),t.defaultValue=this.defaultValue,t},t.prototype.execute=function(e){var t=this;o.safeAssign(this.json,e.json);var n=this.dialogId,r=this.generateDialogOptions(n);r.value=this.defaultValue,r.selectOptions=this.selectOptions,r.onConfirm=function(e){t.event.manager.emit(i.BaseDialogAction.DIALOG_EVENT.CONFIRM,n,e)},s.openSelectDialog(r,null,n)},t.TYPE="ShowSelectDialog",t}(a.ShowConfirmDialogAction),t("ShowSelectDialogAction",f)}}}),System.register("ReactMaterial/actions/CloseDialog.action",[],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[],execute:function(){i=e.Base.utils.ObjectUtil,s=e.CgEventsEngine.CgAction,o=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"dialogId",{get:function(){return this.getString(this.json.dialogId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeMehtod",{get:function(){return this.json.closeMehtod},enumerable:!0,configurable:!0}),t.prototype.prepare=function(){return{json:i.removeKeysWithSameValue({dialogId:this.dialogId},this.json)}},t.prototype.execute=function(e){i.safeAssign(this.json,e.json);var t=this.getObject(this.dialogId);t&&"close"in t&&t.close(this.closeMehtod=="confirm")},t.TYPE="CloseDialog",t}(s),t("CloseDialogAction",o)}}}),System.register("ReactMaterial/actions/ShowLoadingDialog.action",["./BaseDialogAction","./../dialogs/LoadingDialog"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a=n&&n.id,f=n&&n.id;return{setters:[function(e){i=e},function(e){o=e}],execute:function(){s=e.Base.utils.ObjectUtil,u=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return r(n,t),Object.defineProperty(n.prototype,"message",{get:function(){return this.getString(this.json.message)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"options",{get:function(){return this.json.options},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"circleColor",{get:function(){return this.options.circleColor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"messageColor",{get:function(){return this.options.messageColor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"backgroundImage",{get:function(){return this.options.backgroundImage},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"backgroundRepeat",{get:function(){return this.options.backgroundRepeat},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"transition",{get:function(){return this.json.options.transition},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tranClaz",{get:function(){switch(this.transition.tranClaz){case"zoom":return MaterialUI.Zoom;case"fade":return MaterialUI.Fade;case"grow":return MaterialUI.Grow}return MaterialUI.Slide},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tranDuration",{get:function(){return this.getInt(this.transition.tranDuration)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tranDirection",{get:function(){return this.transition.tranDirection},enumerable:!0,configurable:!0}),n.prototype.prepare=function(){return{json:s.removeKeysWithSameValue({dialogId:this.dialogId,message:this.message,transition:{tranDuration:this.getString(this.transition.tranDuration)}},this.json)}},n.prototype.generateDialogOptions=function(n){var r={"class":this.tranClaz,duration:this.tranDuration},i=Object.assign(t.prototype.generateDialogOptions.call(this,n),{message:this.message,transition:r});return this.backgroundImage&&(i.backgroundImage=e.Base.getAppResourceFileUrl(this.backgroundImage),i.backgroundRepeat=this.backgroundRepeat),i},n.prototype.generateStyles=function(){var e=this;return function(t){var n=o.DefaultLoadingDialogStyles(t);return e.circleColor&&(n.circle.color=e.circleColor),e.messageColor&&(n.message.color=e.messageColor),n}},n.prototype.execute=function(e){s.safeAssign(this.json,e.json);var t=this.dialogId;o.openLoadingDialog(this.generateDialogOptions(t),this.generateStyles(),t)},n.TYPE="ShowLoadingDialog",n}(i.BaseDialogAction),t("ShowLoadingDialogAction",u)}}}),System.register("ReactMaterial/triggers/DialogClose.trigger",["./../actions/BaseDialogAction","./../Libs","./BaseDialogTrigger"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u=t&&t.id,a=t&&t.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e}],execute:function(){o=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.setupListeners=function(){this.event.manager.on(r.BaseDialogAction.DIALOG_EVENT.CLOSE,this.onDialogClose,this),e.prototype.setupListeners.call(this)},t.prototype.removeListeners=function(){this.event.manager.off(r.BaseDialogAction.DIALOG_EVENT.CLOSE,this.onDialogClose,this),e.prototype.removeListeners.call(this)},t.prototype.onDialogClose=function(e,t){i.valueMatch(e,this.dialogId)&&(this.confirmState=="confirm"?t&&this.trigger():this.confirmState=="cancel"?!t&&this.trigger():this.trigger())},Object.defineProperty(t.prototype,"confirmState",{get:function(){return this.json.confirmState},enumerable:!0,configurable:!0}),t.TYPE="DialogClose",t}(s.BaseDialogTrigger),e("DialogCloseTrigger",o)}}}),System.register("ReactMaterial/triggers/DialogConfirm.trigger",["./../actions/BaseDialogAction","./../Libs","./BaseDialogTrigger"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u=t&&t.id,a=t&&t.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e}],execute:function(){o=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.setupListeners=function(){this.event.manager.on(r.BaseDialogAction.DIALOG_EVENT.CONFIRM,this.onDialogClose,this),e.prototype.setupListeners.call(this)},t.prototype.removeListeners=function(){this.event.manager.off(r.BaseDialogAction.DIALOG_EVENT.CLOSE,this.onDialogClose,this),e.prototype.removeListeners.call(this)},t.prototype.onDialogClose=function(e,t){i.valueMatch(e,this.dialogId)&&i.valueMatch(t,this.value)&&(this.setLocalVar(this.evtLocal,t),this.trigger())},Object.defineProperty(t.prototype,"value",{get:function(){return this.getString(this.json.value)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"evtLocal",{get:function(){return this.getString(this.json.evtLocal)},enumerable:!0,configurable:!0}),t.TYPE="DialogConfirm",t}(s.BaseDialogTrigger),e("DialogConfirmTrigger",o)}}}),System.register("ReactMaterial/actions/ShowConfirmDialog.action",["./BaseDialogAction","./../dialogs/ConfirmDialog"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a=n&&n.id,f=n&&n.id;return{setters:[function(e){i=e},function(e){o=e}],execute:function(){s=e.Base.utils.ObjectUtil,u=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return r(n,t),Object.defineProperty(n.prototype,"title",{get:function(){return this.getString(this.json.title)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"message",{get:function(){return this.getString(this.json.message)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"messageType",{get:function(){return this.json.messageType},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"msgImage",{get:function(){return this.json.msgImage},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"msgImageAlias",{get:function(){return this.json.msgImage.msgImageAlias},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"msgImageSide",{get:function(){return this.json.msgImage.msgImageSide},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"controls",{get:function(){return this.json.controls},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"buttonIconSide",{get:function(){return this.getString(this.controls.buttonIconSide)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"conBottom",{get:function(){return this.getNumber(this.controls.conBottom)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"conBottomUnit",{get:function(){return this.controls.conBottomUnit},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"confirmValue",{get:function(){return this.getString(this.controls.confirmValue)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"confirmLabel",{get:function(){return this.getString(this.controls.confirmLabel)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"confirmIcon",{get:function(){return this.getString(this.controls.confirmIcon)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hideCancelButton",{get:function(){return this.controls.hideCancelButton},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cancelLabel",{get:function(){return this.getString(this.controls.cancelLabel)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cancelIcon",{get:function(){return this.getString(this.controls.cancelIcon)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"options",{get:function(){return this.json.options},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxWidth",{get:function(){return this.options.maxWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"closeButton",{get:function(){return this.options.closeButton},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fullWidth",{get:function(){return this.options.fullWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fullScreen",{get:function(){return this.options.fullScreen},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"preventAccClose",{get:function(){return this.options.preventAccClose},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"backgroundImage",{get:function(){return this.options.backgroundImage},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"backgroundRepeat",{get:function(){return this.options.backgroundRepeat},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"transition",{get:function(){return this.json.options.transition},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tranClaz",{get:function(){switch(this.transition.tranClaz){case"zoom":return MaterialUI.Zoom;case"fade":return MaterialUI.Fade;case"grow":return MaterialUI.Grow}return MaterialUI.Slide},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tranDuration",{get:function(){return this.getInt(this.transition.tranDuration)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"tranDirection",{get:function(){return this.transition.tranDirection},enumerable:!0,configurable:!0}),n.prototype.prepareJson=function(){return{dialogId:this.dialogId,title:this.title,message:this.message,controls:{confirmValue:this.confirmValue,confirmLabel:this.confirmLabel,confirmIcon:this.confirmIcon,cancelLabel:this.cancelLabel,cancelIcon:this.cancelIcon},transition:{tranDuration:this.getString(this.transition.tranDuration)}}},n.prototype.prepare=function(){return{json:s.removeKeysWithSameValue(this.prepareJson(),this.json)}},n.prototype.generateDialogOptions=function(n){var r={"class":this.tranClaz,duration:this.tranDuration},i=Object.assign(t.prototype.generateDialogOptions.call(this,n),{title:this.title,message:this.message,messageType:this.messageType,confirmLabel:this.confirmLabel,confirmIcon:this.confirmIcon,cancelLabel:this.cancelLabel,cancelIcon:this.cancelIcon,hideCancelButton:this.hideCancelButton,titleCloseButton:this.closeButton,fullScreen:this.fullScreen,preventAccidentalClose:this.preventAccClose,fullWidth:this.fullWidth,maxWidth:this.maxWidth,buttonIconSide:this.buttonIconSide,transition:r,marginBottom:""+this.conBottom+this.conBottomUnit});return this.backgroundImage&&(i.backgroundImage=e.Base.getAppResourceFileUrl(this.backgroundImage),i.backgroundRepeat=this.backgroundRepeat),this.msgImageAlias&&(i.messageImageUrl=e.Base.getAppResourceFileUrl(this.msgImageAlias),i.messageImageSide=this.msgImageSide),i},n.prototype.execute=function(e){s.safeAssign(this.json,e.json);var t=this.dialogId;o.openConfirmDialog(this.generateDialogOptions(t),null,t)},n.DIALOG_EVENT=i.BaseDialogAction.DIALOG_EVENT,n.TYPE="ShowConfirmDialog",n}(i.BaseDialogAction),t("ShowConfirmDialogAction",u)}}}),System.register("ReactMaterial/actions/ShowInputDialog.action",["./BaseDialogAction","./../dialogs/InputDialog","./ShowConfirmDialog.action"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f=n&&n.id,l=n&&n.id;return{setters:[function(e){i=e},function(e){o=e},function(e){u=e}],execute:function(){s=e.Base.utils.ObjectUtil,a=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"confirmValue",{get:function(){return this.getString(this.controls.confirmValue)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputLabel",{get:function(){return this.getString(this.json.inputLabel)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultValue",{get:function(){return this.getString(this.json.defaultValue)},enumerable:!0,configurable:!0}),t.prototype.prepareJson=function(){var t=e.prototype.prepareJson.call(this);return t.inputLabel=this.inputLabel,t.defaultValue=this.defaultValue,t},t.prototype.execute=function(e){var t=this;s.safeAssign(this.json,e.json);var n=this.dialogId,r=this.generateDialogOptions(n);r.value=this.defaultValue,r.inputLabel=this.inputLabel,r.onConfirm=function(e){t.event.manager.emit(i.BaseDialogAction.DIALOG_EVENT.CONFIRM,n,e)},o.openInputDialog(r,null,n)},t.TYPE="ShowInputDialog",t}(u.ShowConfirmDialogAction),t("ShowInputDialogAction",a)}}}),System.register("ReactMaterial/dialogs/LoadingDialog",["./BaseDialog","./../Libs"],function(e,t){"use strict";function f(e,t,n){return i.renderComponentWithStyle(i.mergeStyles(s,t),o,Object.assign({preventAccidentalClose:!0},e),n)}var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u=t&&t.id,a=t&&t.id;return e("openLoadingDialog",f),{setters:[function(e){r=e},function(e){i=e}],execute:function(){e("DefaultLoadingDialogStyles",s=function(e){return{body:{textAlign:"center",padding:"10px"},progress:{margin:e.spacing(2)},paper:{background:"none",boxShadow:"none"},circle:{color:"#00bfff"},message:{color:"#e0ffff",textShadow:"0 2px 6px rgba(0,0,0,0.5)"}}}),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={open:!0,message:r.props.message},r}return n(t,e),t.prototype.setMessage=function(e){this.setState({message:e})},t.prototype.renderContent=function(){return React.createElement("div",{className:this.props.classes.body},React.createElement(MaterialUI.CircularProgress,{className:this.props.classes.progress,classes:this.progressClasses}),React.createElement("div",{className:this.props.classes.message},this.state.message))},Object.defineProperty(t.prototype,"progressClasses",{get:function(){return this.generateSubClasses("circle")},enumerable:!0,configurable:!0}),t}(r.BaseDialog),e("LoadingDialog",o)}}}),System.register("ReactMaterial/dialogs/ConfirmDialog",["./../Libs","./BaseDialog"],function(e,t){"use strict";function c(e,t,n){return r.renderComponentWithStyle(r.mergeStyles(s,t),u,e,n)}function h(e,t,n){return e=Object.assign({hideCancelButton:!0,titleCloseButton:!1},e),r.renderComponentWithStyle(r.mergeStyles(s,t),u,e,n)}var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a,f=t&&t.id,l=t&&t.id;return e("openConfirmDialog",c),e("openAlertDialog",h),{setters:[function(e){r=e},function(e){i=e}],execute:function(){e("BaseConfirmDialogStyles",s=function(e){return Object.assign(i.BaseDialogStyles(e),{actions:{justifyContent:"center",paddingBottom:e.spacing(1.5),paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},imageLeft:{"float":"left",margin:"0 10px 6px 0"},imageRight:{"float":"right",margin:"0 0 6px 10px"},message:{}})}),o=function(e){function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.handleConfirm=function(){t.props.onConfirm&&t.props.onConfirm(t.props.confirmValue),t.close(!0)},t}return n(t,e),t.prototype.renderTitle=function(){return this.props.titleRenderer?this.props.titleRenderer(this):e.prototype.renderTitle.call(this)},Object.defineProperty(t.prototype,"confirmIcon",{get:function(){return this.props.confirmIcon===undefined?"check":this.props.confirmIcon},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cancelIcon",{get:function(){return this.props.cancelIcon===undefined?"close":this.props.cancelIcon},enumerable:!0,configurable:!0}),t.prototype.renderActionButton=function(e,t,n,r,i,s,o){return this.props.buttonIconSide=="left"?React.createElement(MaterialUI.Button,{variant:n,color:r,size:"medium",className:i,onClick:o,disabled:s},t&&React.createElement(MaterialUI.Icon,{className:this.props.classes.leftIcon},t),e):React.createElement(MaterialUI.Button,{variant:n,color:r,size:"medium",className:i,onClick:o,disabled:s},e,t&&React.createElement(MaterialUI.Icon,{className:this.props.classes.rightIcon},t))},t.prototype.renderActions=function(){if(this.props.actionRenderer)return this.props.actionRenderer(this);var e=this.props.classes,t={};return this.props.marginBottom&&(t.marginBottom=this.props.marginBottom),this.props.hideCancelButton&&this.props.hideConfirmButton?null:React.createElement(MaterialUI.DialogActions,{style:t,className:e.actions},!this.props.hideCancelButton&&this.renderActionButton(this.props.cancelLabel||"Cancel",this.props.cancelIcon,"text","default",[e.button,e.cancelButton].join(" "),!1,this.handleClose),!this.props.hideConfirmButton&&this.renderActionButton(this.props.confirmLabel||"Confirm",this.props.confirmIcon,"contained","primary",e.button,this.state.confirmDisabled,this.handleConfirm))},t.prototype.renderMessageImage=function(){return this.props.messageImageUrl?React.createElement(MaterialUI.Tooltip,{title:this.props.title||this.props.message||"",placement:"top",classes:{popper:"tooltipPopper"}},React.createElement("img",{src:this.props.messageImageUrl,className:this.props.messageImageSide=="right"?this.props.classes.imageLeft:this.props.classes.imageRight})):undefined},t.prototype.renderMessage=function(){if(this.props.message){if(this.props.messageType==a.MARKDOWN)return React.createElement(MaterialUI.Typography,{variant:"subtitle1"},this.renderMessageImage(),React.createElement(ReactMarkdown,{className:this.props.classes.message,source:this.props.message}));if(this.props.messageType==a.HTML)return React.createElement(MaterialUI.Typography,{variant:"subtitle1"},this.renderMessageImage(),React.createElement("div",{className:this.props.classes.message,dangerouslySetInnerHTML:{__html:this.props.message}}));if(this.props.messageType==a.NODE)return React.createElement(MaterialUI.Typography,{variant:"subtitle1"},this.renderMessageImage(),React.createElement("div",{className:this.props.classes.message},this.props.message))}return React.createElement(MaterialUI.Typography,{variant:"subtitle1"},this.renderMessageImage(),React.createElement("div",{className:this.props.classes.message},this.props.message))},t.prototype.renderContent=function(){return this.props.contentRenderer?this.props.contentRenderer(this):React.createElement(MaterialUI.DialogContent,{className:"dialog-content-root"},this.renderMessage())},t}(i.BaseDialog),e("BaseConfirmDialog",o),u=function(e){function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.state={open:!0},t}return n(t,e),t}(o),e("ConfirmDialog",u),a=function(){function e(){}return e.MARKDOWN="markdown",e.HTML="html",e.NODE="node",e.TEXT="text",e}(),e("ConfirmDialogMessageType",a)}}}),System.register("ReactMaterial/dialogs/InputDialog",["./../Libs","./ConfirmDialog"],function(e,t){"use strict";function a(e,t,n){return r.renderComponentWithStyle(r.mergeStyles(i.BaseConfirmDialogStyles,t),s,e,n)}var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o=t&&t.id,u=t&&t.id;return e("openInputDialog",a),{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.handleConfirm=function(){r.props.onConfirm&&r.props.onConfirm(r.state.value),r.close(!0)},r.state={open:!0,value:r.props.value||"",confirmDisabled:r.props.required&&!r.props.value},r}return n(t,e),t.prototype.onInputChanged=function(e){this.setState({value:e,confirmDisabled:this.props.required&&!e})},t.prototype.onKeyPress=function(e){e.charCode==13&&(e.preventDefault(),(!this.props.required||this.state.value)&&this.handleConfirm())},t.prototype.renderContent=function(){var e=this;return React.createElement(MaterialUI.DialogContent,{className:"dialog-content-root"},this.renderMessage(),React.createElement(MaterialUI.TextField,{id:"input",type:this.props.valueType||"text",className:"dialog-input-field",label:this.props.inputLabel,value:this.state.value,onChange:function(t){return e.onInputChanged(t.target.value)},margin:"normal",fullWidth:!0,autoFocus:!0,onKeyPress:function(t){return e.onKeyPress(t)}}))},t}(i.BaseConfirmDialog),e("InputDialog",s)}}}),System.register("ReactMaterial/dialogs/SelectDialog",["./../Libs","./ConfirmDialog"],function(e,t){"use strict";function f(e,t,n){return r.renderComponentWithStyle(r.mergeStyles(s,t),o,e,n)}var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u=t&&t.id,a=t&&t.id;return e("openSelectDialog",f),{setters:[function(e){r=e},function(e){i=e}],execute:function(){e("SelectDialogStyles",s=function(e){return Object.assign(i.BaseConfirmDialogStyles(e),{selectOptionButton:{color:"#999",minWidth:100,"&:hover":{color:"#333"}},selectOptionSelected:{color:"black"},selectOptionIcon:{marginRight:e.spacing(3),width:24,height:24,textAlign:"center","& img":{height:"100%"}}})}),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.handleConfirm=function(){r._handleConfirm(r.state.value)};var i=null;for(var s=0,o=r.props.selectOptions;s<o.length;s++){var u=o[s];u.icon&&(r.hasOptionIcon=!0),u.value==r.props.value&&(i=u.value)}return r.state={open:!0,value:i,confirmDisabled:!i},r}return n(t,e),t.prototype._handleConfirm=function(e){this.props.onConfirm&&this.props.onConfirm(e),this.close(!0)},t.prototype.selectOption=function(e){this.setState({value:e.value,confirmDisabled:!e}),this.props.hideConfirmButton&&this._handleConfirm(e.value)},t.prototype.renderSelectOption=function(e,t){var n=this,r=this.props.classes;return React.createElement(MaterialUI.MenuItem,{key:"option"+t,button:!0,classes:{root:r.selectOptionButton,selected:r.selectOptionSelected},selected:this.state.value==e.value,onClick:function(t){return n.selectOption(e)}},this.hasOptionIcon&&this.renderSelectOptionIcon(e.icon),e.label||e.value)},t.prototype.renderSelectOptionIcon=function(e){var t=this.props.classes;return e?e.match(/^https?:\/\//)||e.match(/^data:image\//)?React.createElement("div",{className:t.selectOptionIcon},React.createElement("img",{src:e})):React.createElement(MaterialUI.Icon,{className:t.selectOptionIcon},e):null},t.prototype.renderContent=function(){var e=this;return React.createElement(MaterialUI.DialogContent,{className:"dialog-content-root"},this.renderMessage(),React.createElement(MaterialUI.List,{component:"nav"},this.props.selectOptions.map(function(t,n){return e.renderSelectOption(t,n)})))},t}(i.BaseConfirmDialog),e("SelectDialog",o)}}}),System.register("ReactMaterial/dialogs/CopyStringDialog",["./../Libs","./ConfirmDialog"],function(e,t){"use strict";function a(e,t,n){var o=Object.assign({hideConfirmButton:!0,hideCancelButton:!0,titleCloseButton:!0,tooltips:{}},e||{});return o.tooltips=Object.assign({copy:"Copy to clipboard",copied:"Copied to clipboard"},o.tooltips||{}),r.renderComponentWithStyle(r.mergeStyles(i.BaseConfirmDialogStyles,t),s,o,n)}var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o=t&&t.id,u=t&&t.id;return e("openCopyStringDialog",a),{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state={open:!0},r.ref=React.createRef(),r}return n(t,e),t.prototype.onFocus=function(e){var t=e.target;t.setSelectionRange(0,9999)},t.prototype.copyToClipboard=function(){var e=$(this.ref.current).find("input")[0];e.select(),document.execCommand("copy"),this.setState({copied:!0})},t.prototype.renderContent=function(){var e=this;return React.createElement(MaterialUI.DialogContent,{className:"dialog-content-root"},this.renderMessage(),React.createElement("div",{className:"copyString-input-box",ref:this.ref},React.createElement(MaterialUI.TextField,{id:"input",inputProps:{spellCheck:!1,readOnly:!0,onFocus:function(t){return e.onFocus(t)}},className:"dialog-input-field",label:this.props.valueLabel||"",value:this.props.value,multiline:this.props.multiline,margin:"normal",fullWidth:!0,autoFocus:!0}),React.createElement(MaterialUI.IconButton,{title:this.props.tooltips.copy,className:"btn-copy-clipboard",onClick:function(t){return e.copyToClipboard()}},React.createElement(MaterialUI.Icon,null,"filter_none"))),React.createElement("div",{className:"clipboard-copied-tip",style:{visibility:this.state.copied?"visible":"hidden"}},this.props.tooltips.copied))},t}(i.BaseConfirmDialog),e("CopyStringDialog",s)}}}),System.register("ReactMaterial/actions/BaseDialogAction",[],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[],execute:function(){i=e.CgEventsEngine.utils.ElementUtil,s=e.CgEventsEngine.CgAction,o=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"dialogId",{get:function(){return this.getStringWithStars(this.json.dialogId)},enumerable:!0,configurable:!0}),t.prototype.getConfirmValue=function(){return"confirm"},t.prototype.generateDialogOptions=function(e){var n=this,r={getInstance:function(r){i.markObjectUnsyncable(r),n.setGlobalVar(e,r,!0),n.event.manager.emit(t.DIALOG_EVENT.OPEN,e)},onClose:function(r,i){n.removeGlobalVar(e,i),n.event.manager.emit(t.DIALOG_EVENT.CLOSE,e,r)},onConfirm:function(){n.event.manager.emit(t.DIALOG_EVENT.CONFIRM,e,n.getConfirmValue())}};return r},t.DIALOG_EVENT={CLOSE:"dialog.close",OPEN:"dialog.open",CONFIRM:"dialog.confirm"},t}(s),t("BaseDialogAction",o)}}}),System.register("ReactMaterial/definitions/SelectOption.definition",[],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o=n&&n.id,u=n&&n.id;return{setters:[],execute:function(){i=e.CgEventsEngine.CgDefinition,s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getString(this.json.value)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this.getString(this.json.label)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return this.getString(this.json.icon)},enumerable:!0,configurable:!0}),t.prototype.toNormalizedJson=function(){var e={value:this.value},t=this.icon;t&&(e.icon=t);var n=this.label;return n&&(e.label=n),e},t.TYPE="SelectOption",t}(i),t("SelectOptionDef",s)}}}),System.register("ReactMaterial/triggers/BaseDialogTrigger",["./../dialogs/BaseDialog"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[function(e){s=e}],execute:function(){i=e.CgEventsEngine.CgTrigger,o=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),t.prototype.setupListeners=function(){this.supportMultiplayers&&(this.enableRemoteTrigger(),this.closeDialogWhenTrigger&&this.event.manager.socketClient.onBroadcastData(this.getCloseDialogTopic(),this.onBroadcastData,this))},t.prototype.removeListeners=function(){this.event.manager.socketClient.offBroadcastData(this.getCloseDialogTopic(),this.onBroadcastData,this)},t.prototype.onBroadcastData=function(e){var t=e.dialogId,n=this.event.manager.varManager.listValue(t);n&&n.length&&n.forEach(function(e){if(e instanceof s.BaseDialog){var t=e;t.close(!1)}})},t.prototype.getCloseDialogTopic=function(){return"triggerCloseDialog/"+this.event.id+"/"+this.event.getTriggerIndex(this)},t.prototype.trigger=function(){return this.supportMultiplayers&&this.closeDialogWhenTrigger&&this.event.manager.socketClient.broadcast(this.getCloseDialogTopic(),{dialogId:this.dialogId}),this.setLocalVar(this.playerCodeVarname,this.event.manager.socketClient.getMe().id),e.prototype.trigger.call(this)},Object.defineProperty(t.prototype,"dialogId",{get:function(){return this.getString(this.json.dialogId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supportMultiplayers",{get:function(){return this.getBoolean(this.json.supportMultiplayers)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeDialogWhenTrigger",{get:function(){return this.getBoolean(this.json.closeDialogWhenTrigger)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playerCodeVarname",{get:function(){return this.getString(this.json.playerCodeVarname)},enumerable:!0,configurable:!0}),t}(i),t("BaseDialogTrigger",o)}}}),System.register("ReactMaterial/dialogs/BaseDialog",[],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},s,o,u,a=n&&n.id,f=n&&n.id;return{setters:[],execute:function(){t("BaseDialogStyles",s=function(e){return{button:{margin:e.spacing(.5)},cancelButton:{color:"rgba(0,0,0,0.5)"},rightIcon:{marginLeft:e.spacing(1)},leftIcon:{marginRight:e.spacing(1)},closeButton:{position:"absolute",top:0,right:0,padding:6},root:{},paper:{}}}),t("DEFAULT_TRANSITION",o={"class":MaterialUI.Slide,props:{direction:"up"},duration:240}),u=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r._closed=!1,r.handleClose=function(){r.close()},r.onButtonClose=function(e){if(r.props.onButtonClose){r.props.onButtonClose(e);if(e.isDefaultPrevented())return}r.handleClose()},r.setDialogRef=function(e){r.refs.dialogElement=e},r.onRootClick=function(e){r.props.onRootClick&&r.props.onRootClick(e,r)},e.getInstance&&e.getInstance(r),r}return r(n,t),n.prototype.componentDidMount=function(){this.props.getMountedInstance&&this.props.getMountedInstance(this)},Object.defineProperty(n.prototype,"transition",{get:function(){if(!this._transition){var e=this.props.transition||{"class":MaterialUI.Slide};this._transition=React.forwardRef(function(t,n){return React.createElement(e.class,i({},t,{ref:n}))})}return this._transition},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dialogTransition",{get:function(){return this.props.transition||o},enumerable:!0,configurable:!0}),n.prototype.setTitle=function(e,t){this.setState({title:e,titleIcon:t})},n.prototype.close=function(t){var n=this;this.refs.rootElement&&(this.setState({open:!1}),this.props.onClose&&this.props.onClose(t,this)),e.Base.addDelayFunction(null,function(){n.refs.rootElement&&e.React.unmountRootComponent(n.refs.rootElement.parentElement)},this.dialogTransition.duration),this._closed=!0},Object.defineProperty(n.prototype,"closed",{get:function(){return this._closed},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"disposed",{get:function(){return this._closed},enumerable:!0,configurable:!0}),n.prototype.renderTitleIcon=function(){return this.state.titleIcon?React.createElement(MaterialUI.Icon,null,this.state.titleIcon):this.props.titleIcon?React.createElement(MaterialUI.Icon,null,this.props.titleIcon):null},n.prototype.renderTitle=function(){return this.props.title?React.createElement(MaterialUI.DialogTitle,{className:"dialog-title-root"},this.renderTitleIcon(),this.state.title||this.props.title,this.props.titleCloseButton&&React.createElement(MaterialUI.IconButton,{className:this.props.classes.closeButton,onClick:this.onButtonClose},React.createElement(MaterialUI.Icon,null,"close"))):this.props.titleCloseButton&&React.createElement("div",{style:{height:36}},React.createElement(MaterialUI.IconButton,{className:this.props.classes.closeButton,onClick:this.onButtonClose},React.createElement(MaterialUI.Icon,null,"close")))},n.prototype.renderContent=function(){return React.createElement("div",{className:"dialog-content-root"})},n.prototype.renderActions=function(){return React.createElement("div",null)},n.prototype.onEnter=function(e){this.props.zIndex&&(e.parentElement.style.zIndex=this.props.zIndex);if(this.props.backgroundImage){e.style.backgroundImage="url("+this.props.backgroundImage+")";switch(this.props.backgroundRepeat){case"cover":e.style.backgroundSize="cover";break;default:e.style.backgroundRepeat=this.props.backgroundRepeat}}},n.prototype.render=function(){var e=this;return React.createElement("div",{ref:"rootElement"},React.createElement(MaterialUI.Dialog,{onEnter:function(t){return e.onEnter(t)},onClick:this.onRootClick,ref:this.setDialogRef,onBackdropClick:this.props.onBackdropClick,onEscapeKeyDown:this.props.onEscapeKeyDown,maxWidth:this.props.maxWidth||!1,fullWidth:this.props.fullWidth,fullScreen:this.props.fullScreen,disableBackdropClick:this.props.preventAccidentalClose,disableEscapeKeyDown:this.props.preventAccidentalClose,TransitionComponent:this.transition,TransitionProps:this.dialogTransition.props,transitionDuration:this.dialogTransition.duration,open:this.state.open,onClose:this.handleClose,classes:this.matDialogClasses},this.renderTitle(),this.renderContent(),this.renderActions()))},Object.defineProperty(n.prototype,"matDialogClasses",{get:function(){return this.generateSubClasses("root","paper")},enumerable:!0,configurable:!0}),n.prototype.generateSubClasses=function(){var e=this,t=[];for(var n=0;n<arguments.length;n++)t[n]=arguments[n];var r={};return t.forEach(function(t){e.props.classes[t]&&(r[t]=e.props.classes[t])}),r},n}(React.Component),t("BaseDialog",u)}}}),System.register("ReactMaterial/Libs",[],function(t,n){"use strict";function u(t,n,r,i){var s=MaterialUI.withStyles(t)(n);return e.React.renderComponent(s,r,i)}function a(t,n,i,s,o){var u=MaterialUI.withStyles(n)(i);return e.React.renderElement(React.createElement(MaterialUI.MuiThemeProvider,{theme:t},React.createElement(u,r({},s))),o)}function f(e,t){if(t){t&&t.length>2&&t.charAt(0)=="/"&&t.charAt(this.value.length-1)=="/"?t=t.slice(1,t.length-2):t=t.replace(/\*/g,"[.*]");var n=e.match(new RegExp(t));return n&&n.length>0}return!0}function l(e,t){var n=function(n){var r=typeof e=="function"?e(n):e||{};return t&&(typeof t=="function"&&(t=t(n)),i.safeAssign(r,t)),r};return n}var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},i,s=n&&n.id,o=n&&n.id;return t("renderComponentWithStyle",u),t("renderComponentWithThemeAndStyle",a),t("valueMatch",f),t("mergeStyles",l),{setters:[],execute:function(){i=e.Base.utils.ObjectUtil,e.Base.addInlineStyles("\n.MuiTooltip-popper .MuiTooltip-tooltip {\n    font-size: 0.85rem;\n}\n"),e.Base.linkCSSFile("https://fonts.googleapis.com/icon?family=Material+Icons")}}}),function(){CgLibs.bootLib("ReactMaterial/index",["ReactMaterial/index","ReactMaterial/actions/ShowCopyStringDialog.action","ReactMaterial/actions/ShowSelectDialog.action","ReactMaterial/actions/CloseDialog.action","ReactMaterial/actions/ShowLoadingDialog.action","ReactMaterial/triggers/DialogClose.trigger","ReactMaterial/triggers/DialogConfirm.trigger","ReactMaterial/actions/ShowConfirmDialog.action","ReactMaterial/actions/ShowInputDialog.action","ReactMaterial/dialogs/LoadingDialog","ReactMaterial/dialogs/ConfirmDialog","ReactMaterial/dialogs/InputDialog","ReactMaterial/dialogs/SelectDialog","ReactMaterial/dialogs/CopyStringDialog","ReactMaterial/actions/BaseDialogAction","ReactMaterial/definitions/SelectOption.definition","ReactMaterial/triggers/BaseDialogTrigger","ReactMaterial/dialogs/BaseDialog","ReactMaterial/Libs"])}()}};CgLibs.bootModule('ReactMaterial')},function(){CgLibs.modules.GLT={boot:function(e){System.register("GLT/index",["./commands/types/ItemStatus","./commands/itemService","./commands/userService","./commands/types/BadgeStatus","./commands/badgeService","./commands/types/SubmitType","./commands/clientService","./commands/stateService","./commands/gmService","./commands/JsonRpcCommand","./commands/types/OrderType","./commands/types/TimeRange","./commands/systemService","./commands/scoreService","./Client","./auth/authManager","./utils/ClientEventEmitter","./commands/transactionService","./commands/types/TransactionCategory"],function(t,n){"use strict";function C(e){return x.getUserUrl(e)}function k(e){x.emit(g.Client.EVENT.USER_ITEM_CHANGED,e)}var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T=n&&n.id,N=n&&n.id;return t("getUserUrl",C),t("emitUserItemChangedEvent",k),{setters:[function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e},function(e){a=e},function(e){f=e},function(e){l=e},function(e){c=e},function(e){h=e},function(e){p=e},function(e){d=e},function(e){v=e},function(e){m=e},function(e){g=e},function(e){y=e},function(e){b=e},function(e){w=e},function(e){E=e}],execute:function(){S=function(){function e(){y.loginUser,m.scoreService,v.systemService,l.stateService,f.clientService,u.badgeService,s.userService,i.itemService,c.gmService,w.transactionService,r.ItemStatus,o.BadgeStatus,d.TimeRange,a.SubmitType,p.OrderType,E.TransactionCategory,h.JsonRpcCommand}return e}(),t("client",x=new g.Client),b.setClientEmitter(x),function(e,t){e.getTranslation(t.ZH).importJson({initFailed:"\u6c92\u6709\u9023\u4e0a\u7db2\u8def\u55ce?",tryAgain:"\u518d\u8a66\u4e00\u6b21",offlineGuest:"\u672a\u767b\u5165\u8a2a\u5ba2",fakeUser:"\u6234\u592b\u535a\u58eb",require_login:"\u60a8\u9700\u8981\u5148\u767b\u5165",require_register:"\u4f60\u9700\u8981\u5148\u8a3b\u518a\u4e00\u500b\u5e33\u865f",gmAction:{suspendUser:"\u73a9\u5bb6\u505c\u6b0a",unsuspendUser:"\u73a9\u5bb6\u5fa9\u6b0a",closeArticle:"\u95dc\u9589\u6587\u7ae0",openArticle:"\u6253\u958b\u6587\u7ae0",blockClient:"\u5c01\u9396\u904a\u6232",unblockClient:"\u89e3\u9396\u904a\u6232",submitScore:"\u4e0a\u50b3\u5206\u6578",awardBadge:"\u9812\u767c\u52f3\u7ae0",removeBadge:"\u522a\u9664\u52f3\u7ae0",setArticleStatus:"\u6539\u8b8a\u56de\u5831\u6587\u72c0\u614b"}},"glt."),e.getTranslation(t.EN).importJson({initFailed:"No connection?",tryAgain:"Try Again",offlineGuest:"Offline Guest",fakeUser:"Dr. Dev",require_login:"You need to sign in first.",require_register:"You must become a registered user.",gmAction:{suspendUser:"Suspend User",unsuspendUser:"Unsuspend User",closeArticle:"Close Article",openArticle:"Open Article",blockClient:"Block Game",unblockClient:"Unblock Game",submitScore:"Submit Score",awardBadge:"Award Badge",removeBadge:"Remove Badge",setArticleStatus:"Set Report Status"}},"glt.")}(e.Base.translation,e.Base.locales.LANG)}}}),System.register("GLT/commands/types/ItemStatus",[],function(e,t){"use strict";var n,r,i=t&&t.id,s=t&&t.id;return{setters:[],execute:function(){n={},r=function(){function e(e){this._value=e,n[e]=this}return e.listALL=function(){return Object.keys(n).map(function(e){return n[e]})},e.getByValue=function(e){return n[e]},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.DISABLED=new e("disabled"),e.DEV=new e("dev"),e.HIDDEN=new e("hidden"),e.PUB=new e("pub"),e.PUB_TO_OWNER=new e("pubToOwner"),e}(),e("ItemStatus",r)}}}),System.register("GLT/commands/itemService",["./../index","./vo/User","./vo/Item","./JsonRpcCommand","./../commands/JsonRpcCommand"],function(t,n){"use strict";function d(e,t){t&&t(e.map(function(e){return new o.GameItem(e)}))}function v(e,t,n){if(n){var r=new s.User(t),i=e.map(function(e){var t=new o.UserItem(e);return t.user=r,t});n(i)}}var r,i,s,o,u,a,f,l,c,h=n&&n.id,p=n&&n.id;return{setters:[function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e},function(e){a=e}],execute:function(){r=e.Base.utils.ArrayUtil,f=e.Base.system.devMode,l=e.Base.listAppResourceAlias().filter(function(t){var n=e.Base.getAppResource(t);return n.type=="buildLib"&&n.meta.gitems}),r.removeElement(l,e.Base.projectCode),l.unshift(e.Base.projectCode),c=function(){function t(){}return t.awardItem=function(t,n,r,s){return new a.JsonRpcCommand(!0,u.PRIVILEGE.REQUIRE_REGISTER,"item.awardItem",[e.Base.projectCode,t,n],function(e){var t=new o.UserItem(e);r&&r(t),i.emitUserItemChangedEvent(t)},s)},t.consumeItem=function(t,n,r,s){return new a.JsonRpcCommand(!0,u.PRIVILEGE.REQUIRE_REGISTER,"item.consumeItem",[e.Base.projectCode,t,n],function(e){var t=new o.UserItem(e);r&&r(t),i.emitUserItemChangedEvent(t)},s)},t.listGameItems=function(t,n){return new a.JsonRpcCommand(!1,u.PRIVILEGE.NONE,"item.listGameItems",[e.Base.projectCode,l,f],function(e){d(e,t)},n)},t.listGameItemsByStatus=function(t,n,r){return new a.JsonRpcCommand(!1,u.PRIVILEGE.NONE,"item.listGameItemsByStatus",[e.Base.projectCode,l,t.map(function(e){return e.value}),f],function(e){d(e,n)},r)},t.listGameItemsByCodes=function(t,n,r){return new a.JsonRpcCommand(!1,u.PRIVILEGE.NONE,"item.listGameItemsByCodes",[e.Base.projectCode,l,t,f],function(e){d(e,n)},r)},t.getUserItem=function(t,n,r){return new a.JsonRpcCommand(!1,u.PRIVILEGE.REQUIRE_REGISTER,"item.getUserItem",[e.Base.projectCode,t],function(e){n&&n(e&&new o.UserItem(e))},r)},t.requireUserItem=function(t,n,r,i){return n===void 0&&(n=1),new a.JsonRpcCommand(!1,u.PRIVILEGE.REQUIRE_REGISTER,"item.requireUserItem",[e.Base.projectCode,t,n],function(e){r&&r(e&&new o.UserItem(e))},i)},t.requireOneOfUserItems=function(t,n,r,i){return new a.JsonRpcCommand(!1,u.PRIVILEGE.REQUIRE_REGISTER,"item.requireOneOfUserItems",[e.Base.projectCode,t,n],function(e,t){v(e,t,r)},i)},t.listUserItemsByCodesAndClient=function(t,n,r,i){return new a.JsonRpcCommand(!1,u.PRIVILEGE.REQUIRE_REGISTER,"item.listUserItemsByCodesAndClient",[e.Base.projectCode,t,n],function(e,t){v(e,t,r)},i)},t.listUserItems=function(t,n,r,i){return new a.JsonRpcCommand(!1,u.PRIVILEGE.REQUIRE_REGISTER,"item.listUserItems",[e.Base.projectCode,t,n],function(e,t){v(e,t,r)},i)},t}(),t("itemService",c)}}}),System.register("GLT/commands/userService",["./vo/UserWallet","./JsonRpcCommand","./vo/UserReview","./vo/UserRecord"],function(t,n){"use strict";var r,i,s,o,u,a=n&&n.id,f=n&&n.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e}],execute:function(){u=function(){function t(){}return t.getUser=function(t,n,r){return new i.JsonRpcCommand(!1,i.PRIVILEGE.NONE,"user.getByUsername",[e.Base.projectCode,t],function(e){n&&n(e)},r)},t.listUsersByUsernames=function(t,n,r){return new i.JsonRpcCommand(!1,i.PRIVILEGE.NONE,"user.listByUsernames",[e.Base.projectCode,t],function(e){n&&n(e)},r)},t.getWallet=function(t,n){return new i.JsonRpcCommand(!1,i.PRIVILEGE.REQUIRE_REGISTER,"user.getWallet",[e.Base.projectCode],function(e,n,i,s){t&&(e.map(function(e){e.user=n}),t(new r.UserWallet({user:n,userScores:e,gltDollars:i,gltPoints:s})))},n)},t.getReview=function(t,n){return new i.JsonRpcCommand(!1,i.PRIVILEGE.REQUIRE_REGISTER,"user.getReview",[e.Base.projectCode],function(e){t&&t(e&&new s.UserReview(e))},n)},t.addRecord=function(t,n,r,s,u,a){return new i.JsonRpcCommand(!0,i.PRIVILEGE.REQUIRE_REGISTER,"user.addRecord",[e.Base.projectCode,t,n,r||null,s||{}],function(e){u&&u(e&&new o.UserRecord(e))},a)},t}(),t("userService",u)}}}),System.register("GLT/commands/types/BadgeStatus",[],function(e,t){"use strict";var n,r,i=t&&t.id,s=t&&t.id;return{setters:[],execute:function(){n={},r=function(){function e(e){this._value=e,n[e]=this}return e.listALL=function(){return Object.keys(n).map(function(e){return n[e]})},e.getByValue=function(e){return n[e]},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.DISABLED=new e("disabled"),e.HIDDEN=new e("hidden"),e.PUB=new e("pub"),e.PUB_TO_OWNER=new e("pubToOwner"),e}(),e("BadgeStatus",r)}}}),System.register("GLT/commands/badgeService",["./types/BadgeStatus","./vo/Badge","./JsonRpcCommand","./../utils/ClientEventEmitter","./../events/ClientEvents"],function(t,n){"use strict";var r,i,s,o,u,a,f=n&&n.id,l=n&&n.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e}],execute:function(){a=function(){function t(){}return t.listGameBadgesByStatus=function(t,n,o){return new s.JsonRpcCommand(!1,s.PRIVILEGE.NONE,"badge.listGameBadgesByStatus",[e.Base.projectCode,t?t.map(function(e){return e.value}):r.BadgeStatus.listALL(),0,1e3],function(e){n&&n(e.map(function(e){return new i.GameBadge(e)}))},o)},t.listGameBadgesByCodes=function(t,n,r){return new s.JsonRpcCommand(!1,s.PRIVILEGE.NONE,"badge.listGameBadgesByCodes",[e.Base.projectCode,t],function(e){n&&n(e.map(function(e){return new i.GameBadge(e)}))},r)},t.getUserBadge=function(t,n,r,o){return new s.JsonRpcCommand(!1,s.PRIVILEGE.NONE,"badge.getUserBadge",[e.Base.projectCode,t,n],function(e){r&&r(e&&new i.UserBadge(e))},o)},t.awardBadge=function(t,n,r){return new s.JsonRpcCommand(!0,s.PRIVILEGE.REQUIRE_REGISTER,"badge.awardBadge",[e.Base.projectCode,t],function(e){var t=e&&new i.UserBadge(e);n&&n(e&&new i.UserBadge(e)),t&&o.delayEmitClientEvent(new u.BadgeAwardedEvent(t))},r)},t.removeUserBadge=function(t,n,r){return new s.JsonRpcCommand(!0,s.PRIVILEGE.REQUIRE_REGISTER,"badge.removeUserBadge",[e.Base.projectCode,t],function(e){n&&n()},r)},t.listUserBadgesByUser=function(t,n,r){return new s.JsonRpcCommand(!1,s.PRIVILEGE.NONE,"badge.listUserBadgesByUser",[e.Base.projectCode,t,0,1e3],function(e,t){n&&n(e.map(function(e){return new i.UserBadge(Object.assign(e,{user:t}))}))},r)},t.listUserBadgesByBadge=function(t,n,r,o,u){return new s.JsonRpcCommand(!1,s.PRIVILEGE.NONE,"badge.listUserBadgesByBadge",[e.Base.projectCode,t,n,r],function(e,t){o&&o(e.map(function(e){return new i.UserBadge(Object.assign(e,{gameBadge:t}))}))},u)},t}(),t("badgeService",a)}}}),System.register("GLT/commands/types/SubmitType",[],function(e,t){"use strict";var n,r,i=t&&t.id,s=t&&t.id;return{setters:[],execute:function(){n={},r=function(){function e(e){this._value=e,n[e]=this}return e.getByValue=function(e){return n[e]},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.KEEP_HIGHEST=new e(1),e.KEEP_LOWEST=new e(2),e.ADD=new e(3),e.OVERWRITE=new e(4),e.ADD_SINCE=new e(5),e}(),e("SubmitType",r)}}}),System.register("GLT/commands/clientService",["./JsonRpcCommand"],function(t,n){"use strict";function f(){try{var e=l(s.get("gltmsrec"));if(e&&!i)return e}catch(t){}return""}function l(e){return e&&(e=c(e,["0","9"]),e=c(e,["1","2"]),e=c(e,["a","Z"]),e=c(e,["z","A"]),e=c(e,["i","I"])),e}function c(e,t){return e=e.replace(new RegExp(t[0],"g"),"#"),e=e.replace(new RegExp(t[1],"g"),t[0]),e=e.replace(/#/g,t[1]),e}var r,i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[function(e){r=e}],execute:function(){i=e.Base.system.devMode,s=e.Base.storage,o=function(){function t(){}return t.getMsgServerUrl=function(t,n){return new r.JsonRpcCommand(!1,r.PRIVILEGE.NONE,"client.getMsgServerUrl",[e.Base.projectCode,f()],function(e){t&&t(e)},n)},t.isAllowGltDollar=function(t,n){return new r.JsonRpcCommand(!1,r.PRIVILEGE.NONE,"client.isAllowGltDollar",[e.Base.projectCode],function(e){t&&t(e)},n)},t}(),t("clientService",o)}}}),System.register("GLT/commands/stateService",["./JsonRpcCommand","./../commands/JsonRpcCommand","./vo/UserState"],function(t,n){"use strict";var r,i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e}],execute:function(){o=function(){function t(){}return t.getState=function(t,n,o,u,a){return new i.JsonRpcCommand(!0,r.PRIVILEGE.NONE,"state.getState",[e.Base.projectCode,t,n,o],function(e){u&&u(new s.UserState(e))},a)},t.getMyState=function(t,n,o,u){return new i.JsonRpcCommand(!1,r.PRIVILEGE.REQUIRE_REGISTER,"state.getMyState",[e.Base.projectCode,t,n],function(e){o&&o(new s.UserState(e))},u)},t.getMyStateByClient=function(t,n,o,u,a){return new i.JsonRpcCommand(!1,r.PRIVILEGE.REQUIRE_REGISTER,"state.getMyStateByClient",[e.Base.projectCode,t,n,o],function(e){u&&u(new s.UserState(e))},a)},t.setState=function(t,n,o,u,a,f){return new i.JsonRpcCommand(!0,r.PRIVILEGE.REQUIRE_REGISTER,"state.setState",[e.Base.projectCode,t,n,o,u],function(e){a&&a(new s.UserState(e))},f)},t.setMyState=function(t,n,o,u,a){return new i.JsonRpcCommand(!0,r.PRIVILEGE.REQUIRE_REGISTER,"state.setMyState",[e.Base.projectCode,t,n,o],function(e){u&&u(new s.UserState(e))},a)},t.removeState=function(t,n,s,o,u){return new i.JsonRpcCommand(!0,r.PRIVILEGE.REQUIRE_REGISTER,"state.removeState",[e.Base.projectCode,t,n,s],function(e){o&&o(e)},u)},t.removeMyState=function(t,n,s,o){return new i.JsonRpcCommand(!0,r.PRIVILEGE.REQUIRE_REGISTER,"state.removeMyState",[e.Base.projectCode,t,n],function(e){s&&s(e)},o)},t.getStates=function(t,n,o,u,a){return new i.JsonRpcCommand(!0,r.PRIVILEGE.NONE,"state.getStates",[e.Base.projectCode,t,n,o],function(e){u&&u(e.map(function(e){return new s.UserState(e)}))},a)},t.getMyStates=function(t,n,o,u){return new i.JsonRpcCommand(!1,r.PRIVILEGE.REQUIRE_REGISTER,"state.getMyStates",[e.Base.projectCode,t,n],function(e){o&&o(e.map(function(e){return new s.UserState(e)}))},u)},t.getMyStatesByClient=function(t,n,o,u,a){return new i.JsonRpcCommand(!1,r.PRIVILEGE.REQUIRE_REGISTER,"state.getMyStatesByClient",[e.Base.projectCode,t,n,o],function(e){u&&u(e.map(function(e){return new s.UserState(e)}))},a)},t.removeStates=function(t,n,s,o,u){return new i.JsonRpcCommand(!0,r.PRIVILEGE.REQUIRE_REGISTER,"state.removeStates",[e.Base.projectCode,t,n,s],function(e){o&&o(e)},u)},t}(),t("stateService",o)}}}),System.register("GLT/commands/gmService",["./JsonRpcCommand","./vo/User","./vo/UserIpRecord","./vo/GmRecord","./types/GMAction","./vo/UserScore","./vo/Badge","./vo/UserRecord"],function(t,n){"use strict";var r,i,s,o,u,a,f,l,c,h=n&&n.id,p=n&&n.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e},function(e){a=e},function(e){f=e},function(e){l=e}],execute:function(){c=function(){function t(){}return t.listUsersWithSameIP=function(t,n,s,o,u){return new r.JsonRpcCommand(!1,r.PRIVILEGE.REQUIRE_GM,"gm.listUsersWithSameIP",[e.Base.projectCode,t.v4c,t.v6c,n,s],function(e){o&&o(e.map(function(e){return new i.ClientUser(e)}))},u)},t.listUsersWithSameIPByUser=function(t,n,s,o,u){return new r.JsonRpcCommand(!1,r.PRIVILEGE.REQUIRE_GM,"gm.listUsersWithSameIPByUser",[e.Base.projectCode,t,n,s],function(e){o&&o(e.map(function(e){return new i.ClientUser(e)}))},u)},t.listUserIPRecords=function(t,n,i,o,u){return new r.JsonRpcCommand(!1,r.PRIVILEGE.REQUIRE_GM,"gm.listUserIPRecords",[e.Base.projectCode,t,n,i],function(e){o&&o(e.map(function(e){return new s.UserIpRecord(e)}))},u)},t.searchUser=function(t,n,s,o,u){return new r.JsonRpcCommand(!1,r.PRIVILEGE.REQUIRE_GM,"gm.searchUser",[e.Base.projectCode,t,n,s],function(e){o&&o(e.map(function(e){return new i.ClientUser(e)}))},u)},t.suspendUser=function(t,n,i,s,o){return new r.JsonRpcCommand(!0,r.PRIVILEGE.REQUIRE_GM,"gm.suspendUser",[e.Base.projectCode,t.username,n,i],function(e){t.valueObject.suspendTime=e,s&&s(new Date(e*1e3))},o)},t.unsuspendUser=function(t,n,i,s,o){return new r.JsonRpcCommand(!0,r.PRIVILEGE.REQUIRE_GM,"gm.unsuspendUser",[e.Base.projectCode,t.username,n,i],function(e){t.valueObject.suspendTime=e,s&&s(new Date(e*1e3))},o)},t.listGmRecords=function(t,n,i,s,a,f,l,c,h){if(!i||!i.length)i=u.GMAction.listAll();return new r.JsonRpcCommand(!1,r.PRIVILEGE.REQUIRE_GM,"gm.listGmRecords",[e.Base.projectCode,t,n,i.map(function(e){return e.code}),Math.round(s.getTime()/1e3),a?1:0,f,l],function(e){c&&c(e.map(function(e){return new o.GmRecord(e)}))},h)},t.listGameMasters=function(t,n){return new r.JsonRpcCommand(!1,r.PRIVILEGE.REQUIRE_GM,"gm.listGameMasters",[e.Base.projectCode],function(e){t&&t(e.map(function(e){return new i.User(e)}))},n)},t.listUserRecords=function(t,n,i,s,o,u,a){return new r.JsonRpcCommand(!1,r.PRIVILEGE.REQUIRE_GM,"gm.listUserRecords",[e.Base.projectCode,t,n,i.code,s,o],function(e){u&&u(e.map(function(e){return new l.UserRecord(e)}))},a)},t.listAllUserScoresByUser=function(t,n,i,s){return new r.JsonRpcCommand(!1,r.PRIVILEGE.REQUIRE_GM,"score.listAllUserScoresByUser",[e.Base.projectCode,t.username,n.value],function(e){i&&i(e.map(function(e){return new a.UserScoreWithScoreMode(e)}))},s)},t.submitScoreByGM=function(t,n,i,s,o,u,f){return new r.JsonRpcCommand(!0,r.PRIVILEGE.REQUIRE_GM,"score.submitScoreByGM",[e.Base.projectCode,t.username,n,i,s,o],function(e){u&&u(new a.UserScoreMap(e))},f)},t.awardBadgeByGM=function(t,n,i,s,o){return new r.JsonRpcCommand(!0,r.PRIVILEGE.REQUIRE_REGISTER,"badge.awardBadgeByGM",[e.Base.projectCode,t.username,n,i],function(e){s&&s(e&&new f.UserBadge(e))},o)},t.removeUserBadgeByGM=function(t,n,i,s,o){return new r.JsonRpcCommand(!0,r.PRIVILEGE.REQUIRE_REGISTER,"badge.removeUserBadgeByGM",[e.Base.projectCode,t.username,n,i],function(e){s&&s()},o)},t}(),t("gmService",c)}}}),System.register("GLT/commands/JsonRpcCommand",["./../index"],function(t,n){"use strict";function a(e){e._submitted||console.log("***warning*** GLT.command did not get submitted: "+e.method)}var r,i,s,o=n&&n.id,u=n&&n.id;return{setters:[function(e){r=e}],execute:function(){i=function(){function t(t,n,r,i,s,o){this.secure=t,this.privileges=n,this.method=r,this.params=i,this.callback=s,this.errorCallback=o,this._submitted=!1,e.Base.addDelayFunction(null,a,1,[this])}return t.prototype.submit=function(){return r.client.submitCommand(this)},t}(),t("JsonRpcCommand",i),s=function(){function e(){}return e.NONE=0,e.REQUIRE_LOGIN=1,e.REQUIRE_REGISTER=2,e.REQUIRE_GM=4,e}(),t("PRIVILEGE",s)}}}),System.register("GLT/commands/types/OrderType",[],function(e,t){"use strict";var n,r,i,s=t&&t.id,o=t&&t.id;return{setters:[],execute:function(){n={},r=function(){function e(e){this._value=e,n[e]=this}return e.getByValue=function(e){return n[e]},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.LOW_TO_HIGH=new e(1),e.HIGH_TO_LOW=new e(2),e.OLD_TO_NEW=new e(3),e.NEW_TO_OLD=new e(4),e.HOT=new e(5),e.VOTE=new e(6),e.TIME=new e(7),e.RAND=new e(8),e}(),e("OrderType",r),i=function(){function e(e){this.code=e,n[e]=this}return e.getByValue=function(e){return n[e]},e.TIME_DESC=new e("timeDesc"),e.TIME_ASC=new e("timeAsc"),e}(),e("OrderByTime",i)}}}),System.register("GLT/commands/types/TimeRange",[],function(t,n){"use strict";var r,i,s,o=n&&n.id,u=n&&n.id;return{setters:[],execute:function(){r=e.Base.utils.ArrayUtil,i={},s=function(){function e(e){this._value=e,i[e]=this}return e.getByValue=function(e){return i[e]},e.listAll=function(){return r.listValuesOfObject(i)},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.HISTORY=new e("History"),e.MONTHLY=new e("Monthly"),e.WEEKLY=new e("Weekly"),e.DAILY=new e("Daily"),e}(),t("TimeRange",s)}}}),System.register("GLT/commands/systemService",["./JsonRpcCommand","./../commands/JsonRpcCommand"],function(t,n){"use strict";var r,i,s,o=n&&n.id,u=n&&n.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(){function t(){}return t.echo=function(e,t,n){return new i.JsonRpcCommand(!1,r.PRIVILEGE.NONE,"system.echo",[e],t,n)},t.debugReport=function(t,n,s,o){return new i.JsonRpcCommand(!1,r.PRIVILEGE.NONE,"system.debugReport",[e.Base.projectCode,e.Base.buildName,t,n],s,o)},t}(),t("systemService",s)}}}),System.register("GLT/commands/scoreService",["./JsonRpcCommand","./vo/UserScore","./../commands/JsonRpcCommand"],function(t,n){"use strict";var r,i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e}],execute:function(){o=function(){function t(){}return t.submitScore=function(t,n,o,u,a){return new s.JsonRpcCommand(!0,r.PRIVILEGE.REQUIRE_REGISTER,"score.submitScore",[e.Base.projectCode,t,n,o.value],function(e){u&&u(new i.UserScoreMap(e))},a)},t.submitScores=function(t,n,o){var u=t.map(function(e){return[e.scoreKey,e.score,e.submitType.value]});return new s.JsonRpcCommand(!0,r.PRIVILEGE.REQUIRE_REGISTER,"score.submitScores",[e.Base.projectCode,u],function(e){n&&n(e.map(function(e){return new i.UserScoreMap(e)}))},o)},t.getScore=function(t,n,o,u){return new s.JsonRpcCommand(!1,r.PRIVILEGE.REQUIRE_REGISTER,"score.getScore",[e.Base.projectCode,t,n.value],function(e){o&&o(e&&new i.UserScore(e))},u)},t.getScoreAndRank=function(t,n,o,u,a,f){return new s.JsonRpcCommand(!1,r.PRIVILEGE.REQUIRE_REGISTER,"score.getScoreAndRank",[e.Base.projectCode,t,n.value,o.value,Math.ceil(u/1e3)],function(e){a&&a(e.score&&new i.UserScore(e.score),e.rank,e.periodStart?new Date(e.periodStart*1e3):null)},f)},t.listScores=function(t,n,o,u,a,f,l,c){return new s.JsonRpcCommand(!1,r.PRIVILEGE.NONE,"score.listScores",[e.Base.projectCode,t,n.value,o.value,Math.ceil(u/1e3),a,f],function(e){l&&l(new i.UserScoreList(e))},c)},t.listScoresAndRankAroundUser=function(t,n,o,u,a,f,l,c){return new s.JsonRpcCommand(!1,r.PRIVILEGE.REQUIRE_REGISTER,"score.listScoresAndRankAroundUser",[e.Base.projectCode,t,n.value,o.value,Math.ceil(u/1e3),a,f],function(e){l&&l(new i.UserScoreList(e))},c)},t.getScoresTotal=function(t,n,i,o,u){return new s.JsonRpcCommand(!1,r.PRIVILEGE.NONE,"score.getScoresTotal",[e.Base.projectCode,t,n.value,Math.ceil(i/1e3)],function(e){o&&o(e)},u)},t.listScoresByUsernames=function(t,n,o,u,a,f){return new s.JsonRpcCommand(!1,r.PRIVILEGE.NONE,"score.listScoresByUsernames",[e.Base.projectCode,t,n,o.value,Math.ceil(u/1e3)],function(e){if(a){var t={},n=e.map(function(e){var n=new i.UserScore(e);return t[n.user.username]=n,n});a(n,t)}},f)},t.listScoresHistory=function(t,n,o,u,a,f){return new s.JsonRpcCommand(!1,r.PRIVILEGE.REQUIRE_REGISTER,"score.listScoresHistory",[e.Base.projectCode,t,n.value,Math.ceil(o/1e3),Math.ceil(u/1e3)],function(e,t){if(a){var n=e.map(function(e){return e.user=t,new i.UserScore(e)});a(n)}},f)},t.listCurrencyScores=function(t,n){return new s.JsonRpcCommand(!1,r.PRIVILEGE.REQUIRE_REGISTER,"score.listCurrencyScores",[e.Base.projectCode],function(e,n){if(t){var r=e.map(function(e){return e.user=n,new i.UserScoreWithScoreMode(e)});t(r)}},n)},t.submitGameDollar=function(t,n,o,u,a){return new s.JsonRpcCommand(!0,r.PRIVILEGE.REQUIRE_REGISTER,"score.submitGameDollar",[e.Base.projectCode,t,n,o],function(e){u&&u(new i.UserScoreMap(e))},a)},t.submitGameDollars=function(t,n,o,u){var a=t.map(function(e){return[e.scoreKey,e.score]});return new s.JsonRpcCommand(!0,r.PRIVILEGE.REQUIRE_REGISTER,"score.submitGameDollars",[e.Base.projectCode,a,n],function(e){o&&o(e.map(function(e){return new i.UserScoreMap(e)}))},u)},t}(),t("scoreService",o)}}}),System.register("GLT/utils/ClientEventEmitter",[],function(t,n){"use strict";function o(e){r=e}function u(t){e.Base.wait(10).then(function(){r.emit(t.type,t)})}var r,i=n&&n.id,s=n&&n.id;return t("setClientEmitter",o),t("delayEmitClientEvent",u),{setters:[],execute:function(){}}}),System.register("GLT/commands/transactionService",["./vo/Transaction","./JsonRpcCommand"],function(t,n){"use strict";var r,i,s,o=n&&n.id,u=n&&n.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(){function t(){}return t.listTransactions=function(t,n,s,o,u,a,f){return new i.JsonRpcCommand(!1,i.PRIVILEGE.REQUIRE_REGISTER,"transaction.listTransactions",[e.Base.projectCode,n&&n.length?n.map(function(e){return e.code}).join(","):"",Math.round(t.getTime()/1e3),s?1:0,o,u],function(e){a&&a(e.map(function(e){return new r.Transaction(e)}))},f)},t.listPurchaseItemTransactions=function(t,n,s,o,u){return new i.JsonRpcCommand(!1,i.PRIVILEGE.REQUIRE_REGISTER,"transaction.listPurchaseItemTransactions",[e.Base.projectCode,t,n,s],function(e){o&&o(e.map(function(e){return new r.Transaction(e)}))},u)},t}(),t("transactionService",s)}}}),System.register("GLT/commands/types/TransactionCategory",[],function(e,t){"use strict";var n,r,i=t&&t.id,s=t&&t.id;return{setters:[],execute:function(){n={},r=function(){function e(e){this.code=e,n[e]=this}return e.getByCode=function(e){return n[e]},e.GAME_DOLLAR=new e("gameDollar"),e.GAMELET_DOLLAR=new e("gameletDollar"),e.GAMELET_POINT=new e("gameletPoint"),e.BUY_GLT_DOLLAR=new e("buyGltDollar"),e.BUY_ITEM=new e("buyItem"),e}(),e("TransactionCategory",r)}}}),System.register("GLT/Client",["./commands/JsonRpcCommand","./utils/http","./commands/vo/User","./events/ClientEvents","./utils/OfflineHttp","./utils/GzipUtil"],function(t,n){"use strict";function ln(){return"CgApp"}function cn(){return"supportDevTools"}function hn(){return y.generateRandomString(1,!0)}function pn(){if(b.devMode){var e=unescape(m("token")),t=e&&e.split("|");return t&&t.length>2&&t[1]==1+""}return!1}function dn(){return"*failed*"}function vn(e){return R()[Bt()]+R()[qt()]+R()[Bt()]+e+St()}function mn(){var e=p[ln()];return pn()||e&&e[cn()]}function gn(e){var t=e;if(e&&typeof e=="string"&&e.match(/^{.*}$/))try{var n=JSON.parse(e);t=new Error(n.message),t.command=n.command}catch(r){}return t}function yn(e){e._submitted=!0}function bn(e){var t=a.randomBetween(1e4,1e5);g.addDelayFunction(null,wn,t,[e,dn()])}function wn(e,t){e(t)}function En(e){return e?sn.push({}):sn.length&&sn.pop(),Yt}function Sn(){return sn[M]>on}function xn(e){return MD5.hash(I()+e.toString(36))}function Tn(e){return e=e||window.opener||window.parent,e?e==p?Promise.resolve(k):new Promise(function(t,n){un.resolve=t,un.reject=n,un.sendData(e,"*",un.REQUEST,{})}):Promise.reject("No parent reference")}function Nn(e,t){return new Promise(function(n,r){$.emit("gltUrl",e,t,n,r)})}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot,Mt,_t,Dt,Pt,Ht,Bt,jt,Ft,It,qt,Rt,Ut,zt,Wt,Xt,Vt,$t,Jt,Kt,Qt,Gt,Yt,Zt,en,tn,nn,rn,sn,on,un,an=n&&n.id,fn=n&&n.id;return t("_lockCommand",En),t("loginFromParent",Tn),{setters:[function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e},function(e){c=e},function(e){h=e}],execute:function(){a=e.Base.utils.IntUtil,f=e.Base.utils.NetUtil,l=e.Base.projectCode,p=window,d="gltServerTimeCode",v=p.location.hostname=="localhost",m=f.getQueryStringValue,g=e.Base,y=g.utils.systemRandomGenerator,b=g.system,w=g.translation,E=new PIXI.utils.EventEmitter,S=y.generateRandomString(6),x=h.GzipUtil.zipString,T=0,L=null,A="0",O=16,M="length",_="",D=0,H=3e5,B=H+6e4,j=function(){return[R()[zt()],"1"]},F=function(){return"2c676d2c7465737465722c646576746f6f6c734465746563746f72"},I=function(){return"73706c69742c"},U=String.fromCharCode,z=parseInt,W=function(){return q()[Tt()]},X=function(e){xt(e[0]),_t(e[1])},V=function(){return"3f2c262c6c6f63616c652c3d2c67657453656c65637465644c616e67756167652c656e2c636f6465"},J=function(e,t){return e+t},Q=CryptoJS.MD5,G=function(e){return Q(e)+""},Y=Math.floor,Z=Math.random,et=JSON.stringify,tt=0,nt=function(){return Date.now()},rt=function(){return nt().toString(36)},it=function(e,t){return e[gt()](t)},st=function(e,t){return e[R()[Xt()]](t)},ot=function(e){return e[R()[Vt()]]},ut=function(e,t){return e[R()[$t()]](t)},at=function(e){return e[q()[Ot()]]()},ft=function(){var e=b.timeElapsedThisFrame;return nn&&e>300||e>3e3||nt()<T},lt="You need to wait until GLT is ready. Use CG.GLT.auth.onReady()",ct="glt.require_login",ht="glt.require_register",pt="glt.require_gm",dt=function(e){var t=e.match(/.{2}/g),n=t.map(function(e){return z(e,O)});return U.apply(null,n)},vt=function(e){var t="";for(var n=0;n<e.length;++n){var r=e.charCodeAt(n),i=r.toString(O);while(i.length<2)i=A+i;t+=i}return t},mt=function(e){return function(){return e}},function(){var e=[dt(I()).substr(0,5),dt(I()).substr(5)];gt=function(){return e[0]},yt=function(){return e[1]}}(),function(){var e=it(dt(F()),yt()).map(function(e){return vt(e)});bt=function(t){return t==e[1]},wt=function(t){return t==e[2]},Et=dt(e[3])}(),function(){var e=it(dt(V()),yt());St=function(){var t=w[e[4]]();return e[0]+e[2]+e[3]+(t?t[e[6]]:e[5])}}(),xt=function(e){var t=it(dt(e),yt());q=function(){return t}},Tt=mt(tt++),Nt=mt(tt++),Ct=mt(tt++),kt=mt(tt++),Lt=mt(tt++),At=mt(tt++),Ot=mt(tt++),tt=0,Mt=function(e){function t(){var t=e.call(this)||this;$=t;var n=m(d);return n&&t.updateServerTimeCode(n),t}return r(t,e),Object.defineProperty(t.prototype,"devToolIsOpen",{get:function(){return!!nn},enumerable:!0,configurable:!0}),t.prototype.isLocalhost=function(){return v},t.prototype.get_proapi=function(){return X},Object.defineProperty(t.prototype,"gltUrl",{get:function(){return K&&K.serverBase},set:function(e){K=v?new c.OfflineHttp(e):new s.HttpClient(e),K.on(s.HttpClient.EVENT.DISCONNECTED,this.onHttpDisconnected,this)},enumerable:!0,configurable:!0}),t.prototype.onHttpDisconnected=function(){this.emit(t.EVENT.DISCONNECTED)},t.prototype.getUserUrl=function(e){return e&&!e.guest?this.gltUrl+"/user/"+e.username:this.gltUrl},t.prototype.updateServerTimeCode=function(e){_=e,D=g.now(),P&&P.dispose(),P=g.addDelayFunction(this,this.queryAndUpdateServerTime,H)},t.prototype.queryAndUpdateServerTime=function(){var e=this;this.queryServerTimeCode().then(function(t){return e.updateServerTimeCode(t)}).catch(function(t){P&&P.dispose(),P=g.addDelayFunction(e,e.queryAndUpdateServerTime,H/10)})},t.prototype.queryServerTimeCode=function(){return K?K[q()[At()]]("/timecode").then(function(e){return e.timecode}):Promise.reject(lt)},t.prototype.setAuth=function(e,n,r,i){N=e,k=n,L=i?vt(i):null,r&&(C=r),E.emit(S),this.emit(t.EVENT.AUTH_CHANGED,n,N)},t.prototype.clearAuth=function(){N=k=L=null,this.setAuth(null,null)},t.prototype.isGM=function(){return k&&!k.isLocalGuest()&&bt(L)},t.prototype.isTester=function(){return k&&!k.isLocalGuest()&&wt(L)},Object.defineProperty(t.prototype,"lastUpdatedServerTimestamp",{get:function(){return parseInt(_,36)*1e3},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"estimatedServerTimestamp",{get:function(){var e=Math.max(1,Math.min(B,g.now()-D));return this.lastUpdatedServerTimestamp+e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"user",{get:function(){return k},enumerable:!0,configurable:!0}),t.prototype.isMe=function(e){return k&&k.username==e},t.prototype.submitCommands=function(e){var t=this,n=function(t,n){var r=gn(t);e.forEach(function(e){e.errorCallback&&e.errorCallback(r)}),n(r)},r=!1,i=e.map(function(e){return yn(e),e.secure&&(r=!0),tn(e)});return new Promise(function(s,o){if(!K){n(lt,o);return}if(r&&ft()){bn(o);return}K[q()[Lt()]](vn(R()[Rt()]+R()[Ut()]),{commands:i}).then(function(n){t.updateServerTimeCode(n.time.toString(36)),e.forEach(function(e,t){e.callback&&e.callback.apply(e,n.results[t])}),s()}).catch(function(e){n(e,o)})})},t.prototype.submitCommand=function(e){var t=this,n=function(t,n){var r=gn(t);e.errorCallback&&e.errorCallback(r),n(r)},r=e.secure;return yn(e),new Promise(function(s,o){if(!K){n(lt,o);return}if(r&&ft()){bn(o);return}if(e.privileges&i.PRIVILEGE.REQUIRE_LOGIN)if(!t.user||t.user.isLocalGuest()){n(w.translate(ct),o);return}if(e.privileges&i.PRIVILEGE.REQUIRE_REGISTER)if(!t.user||t.user.guest){n(w.translate(ht),o);return}if(e.privileges&i.PRIVILEGE.REQUIRE_GM&&!t.isGM){n(w.translate(pt),o);return}K[q()[Lt()]](vn(R()[Rt()]),{command:tn(e)}).then(function(n){t.updateServerTimeCode(n.time.toString(36)),e.callback&&e.callback.apply(e,n.result),s()}).catch(function(e){n(e,o)})})},t.EVENT={AUTH_CHANGED:"authChanged",USER_ITEM_CHANGED:"userItemChanged",BADGE_AWARDED:u.BadgeAwardedEvent.TYPE,DEVTOOLS_OPENED:"devToolsOpened",DEVTOOLS_CLOSED:"devToolsClosed",DISCONNECTED:"disconnected"},t}(PIXI.utils.EventEmitter),t("Client",Mt),_t=function(e){var t=it(dt(e),yt());R=function(){return t}},Dt=mt(tt++),Pt=mt(tt++),Ht=mt(tt++),Bt=mt(tt++),jt=mt(tt++),Ft=mt(tt++),It=mt(tt++),qt=mt(tt++),Rt=mt(tt++),Ut=mt(tt++),zt=mt(tt++),Wt=mt(tt++),Xt=mt(tt++),Vt=mt(tt++),$t=mt(tt++),Jt=mt(tt++),Kt=mt(tt++),Qt=mt(tt++),Gt=mt(tt++),Yt=function(e){var t=W(),n=ot(t),r="";while(ot(r)<e){var i=Y(Z()*n);r=J(r,ut(t,i))}return r},Zt=function(){var e=at(Yt(z(R()[Gt()])));return e+=J(R()[Ft()],C),e+=J(R()[It()],rt()),e},en=function(e,t,n,r){var i=e;return i+=J(R()[jt()],t),i+=n,i+=r,i+=J(R()[Ht()],_),i+=J(R()[Bt()],N),i+=st(j(),R()[jt()]),G(i)},tn=function(e){var t=it(e[q()[Ct()]],R()[jt()]),n={},r=n[q()[Nt()]]=t[0],i=n[q()[Ct()]]=t[1],s=n[q()[kt()]]=et(e.params);n[R()[Jt()]]=N,n[R()[Kt()]]=_;if(e[R()[Qt()]]){var o=n[R()[Dt()]]=Zt();Sn()&&(o+=hn()),n[R()[Pt()]]=en(r,i,s,o)}return n},nn=undefined,rn=undefined,function(e){var t=e[Et];!mn()&&t&&(t.addListener(function(e){nn=e&&(nn||{}),rn&&!nn?T=nt()+500:!rn,rn=nn}),t.launch())}(window),sn=[],function(e){while(e--)sn.push({})}(30),on=sn[M],un={REQUEST:"GLT_LOGIN_REQUEST",RESPONSE:"GLT_LOGIN_RESPONSE",sendData:function(t,n,r,i){var s=e.Base.now();i.domain=e.Base.projectDomain,t.postMessage({type:r,time:s,data:CryptoJS.AES.encrypt(JSON.stringify(i),xn(s)).toString()},n)},parseData:function(e){var t=e.data,n=CryptoJS.AES.decrypt(t.data,xn(t.time)),r=n.toString(CryptoJS.enc.Utf8),i=JSON.parse(r),s=i.domain;return e.origin=="https://"+s?i:null},resolve:null,reject:null},p.addEventListener("message",function(e){if(e.origin.endsWith(".gamelet.online")){var t=e.data;if(t&&t.type&&t.time&&t.data)if(t.type==un.REQUEST){var n=un.parseData(e);n&&N&&k?un.sendData(e.source,e.origin,un.RESPONSE,{pcode:l,token:N,user:k.valueObject,ip:C?C:"",role:L?dt(L):"",gltUrl:$.getUserUrl(null),time:Y($.estimatedServerTimestamp/1e3)}):un.sendData(e.source,e.origin,un.RESPONSE,{})}else if(t.type==un.RESPONSE){var r=un.resolve,i=un.reject;un.resolve=null,un.reject=null;var n=un.parseData(e);if(n&&r&&$&&n.token&&n.user){var s=new o.User(n.user);k&&!k.isLocalGuest()&&k.username==s.username?r(k):Nn(s,n).then(function(e){return r(e)}).catch(function(e){return i(e)})}else i&&i("Login Failed")}}})}}}),System.register("GLT/auth/authManager",["./../components/alertDialog","./../commands/vo/User","./../utils/AuthListener","./loginWindow","./../utils/http","./../utils/CryptoJSAesJson","./../index","./../utils/GzipUtil","./../utils/OfflineHttp"],function(t,n){"use strict";function bn(){return it()[vt()]+E.projectDomain+it()[yt()]+it()[bt()]}function wn(e,t){return t.then(function(t){if(t.error)throw new Error(t.error);if(!t[it()[Lt()]])throw new Error(d);return un(new i.User(t[it()[Lt()]]),e,t[it()[Mt()]],t[it()[qt()]]),Wt[it()[Lt()]][w]&&fn(),rn(Gt,1,t[H()]),on(t[it()[xt()]+it()[ft()]],t[it()[Ot()]],e)}).catch(function(e){return console.error(e),ln(),null})}function En(){var e=i.User.createLocalGuest(),t="";return Wt={user:e,token:t,ip:t},L()[it()[ht()]](t,e,t),Wt[it()[Lt()]]}function Sn(){return Jt.createLocalhostUser().then(function(e){var t=e[it()[Lt()]],n=e[it()[Et()]],r=e[it()[Mt()]],i=e[it()[qt()]];return un(t,n,r,i),Jt.loginUser(Wt),L()[it()[ht()]](n,t,r),t})}function xn(e,t){return Ln()?Rt?Sn().then(function(e){return cn(e),e}):Wt[it()[_t()]]?Promise.resolve(Wt[it()[Lt()]]):vn(t):Promise.reject(v)}function Tn(e,t){return Ln()?Wt[it()[_t()]]?T(Jt,en()[Ut()[3]],Wt[it()[_t()]],t,function(){ln()}).then(function(e){return e?dn(e):Wt[it()[_t()]]?an(Wt[it()[_t()]]):null}).then(function(e){return e||En(),Wt[it()[Lt()]]}):Promise.reject(p):Promise.reject(v)}function Nn(e){Ln()?e(Wt[it()[Lt()]],Wt[it()[_t()]]):Xt.push(e)}function Cn(e){var t=new s.AuthListener(e);return Vt.push(t),t}function kn(e){var t=new s.AuthListener(e);return $t.push(t),t}function Ln(){return Xt==null}function An(e,t){var n=Xt;Xt=null,n.forEach(function(n){return n(e,t)})}function On(){if(S){Xt=Xt||[];var e=E.utils.NetUtil.getQueryStringValue;return Jt.get("/request_guest_token",{time:e("time"),token:e("token"),platform:"browser"}).then(function(e){var t=new i.User(e[it()[Lt()]]),n=e[it()[_t()]],r=e[it()[Mt()]];return un(t,n,r),L()[it()[ht()]](n,t,r),An(t,n),cn(t),t})}return Promise.reject("devLoginAsGuest failed: not in dev mode")}function Mn(){return(!Wt||!Wt[it()[_t()]])&&Promise.resolve(Wt[it()[Lt()]]),new Promise(function(e){var t=Jt.serverBase+"/user_logout",n=$('<iframe style="visibility:hidden;position:absolute;top:0" src="'+t+'"></iframe>');n.appendTo("body"),rt(function(){ln(),e(Wt[it()[Lt()]])},300),rt(function(){n.remove()},3e3)})}function _n(e){return e?e.gamePays&&e.gltPays?Promise.reject(m):!e.gamePays&&!e.gltPays?Promise.reject(g):Wt[it()[_t()]]?C(Jt,en()[Ut()[3]],Wt[it()[_t()]],Wt[it()[Lt()]],e):Promise.reject(p):Promise.reject(y)}function Dn(){return Wt[it()[_t()]]?k(Jt,en()[Ut()[3]],Wt[it()[_t()]],Wt[it()[Lt()]]):Promise.reject(p)}var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot,Mt,_t,Dt,Pt,Ht,Bt,jt,Ft,It,qt,Rt,Ut,zt,Wt,Xt,Vt,$t,Jt,Kt,Qt,Gt,Yt,Zt,en,tn,nn,rn,sn,on,un,an,fn,ln,cn,hn,pn,dn,vn,mn,gn=n&&n.id,yn=n&&n.id;return t("loginUser",xn),t("userProfile",Tn),t("onReady",Nn),t("onAuth",Cn),t("onAuthValidating",kn),t("isReady",Ln),t("devLoginAsGuest",On),t("logout",Mn),t("purchaseItem",_n),t("purchaseGltDollar",Dn),{setters:[function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e},function(e){a=e},function(e){f=e},function(e){l=e},function(e){c=e}],execute:function(){h=location,p="No login user",d="No user returned",v="Must wait until GLT is ready, use CG.GLT.onReady() to listener to the ready event.",m="Multiple payment methods is not supported.",g="No payment methods provided",y="No data provided",b="localhost",w="guest",E=e.Base,S=E.system.devMode,x=E.storage,T=o.openProfileWindow,N=o.openLoginWindow,C=o.openPurchaseItemWindow,k=o.openPurchaseGltDollarWindow,L=function(){return f.client},A=E.projectCode,O=E.translation.translate,M=parseInt,B=function(){return it()[jt()]},j=function(){return it()[Ft()]},F=function(){return it()[It()]},I=function(){return Date.now()},q=String.fromCharCode,R=CryptoJS,U=R.SHA1,z=R.enc.Hex,W=CryptoJS.enc.Utf8,X=CryptoJS.AES.decrypt,V=a.CryptoJSAesJson,J=atob,K=function(){return["73706c69742c6c656e677468","756e757365642c6765742c5f70726f6170692c55726c2c75706461746553657276657254696d65436f64652c717565727953657276657254696d65436f64652c736574417574682c636c656172417574682c41546f6b656e2c68747470733a2f2f2c67616d656c65742c6f6e6c696e652c2f2c7376722c76616c69646174652c6163636573735f746f6b656e2c5f75726c2c676c742c2e2c696e69744661696c65642c747279416761696e2c7c2c757365722c6c6f63616c53746f726167652c74696d652c69702c746f6b656e2c72656d6f76652c4974656d2c6164642c7365742c6e6176696761746f722c757365724167656e742c62726f777365722c726f6c65","43674c6962732c626f6f744c69622c5f706c75746f5f2c5f636f6e7374655f"]},Q=function(){return y+A},G=window,Y=function(e,t){return e[_()](t)},Z=function(e){return e[P()]},et=function(){return L()[it()[ut()]+it()[at()]]()},tt=function(e){var t=e.match(/.{2}/g),n=t.map(function(e){return M(e,16)});return q.apply(null,n)},nt=function(e){return function(){return e}},rt=setTimeout,function(){var e=[tt(K()[0]).substr(0,5),tt(K()[0]).charAt(5),tt(K()[0]).substr(6)];_=function(){return e[0]},D=function(){return e[1]},P=function(){return e[2]},H=function(){return it()[ot()]}}(),function(){var e=Y(tt(K()[1]),D());it=function(){return e}}(),st=0,ot=nt(st++),ut=nt(st++),at=nt(st++),ft=nt(st++),lt=nt(st++),ct=nt(st++),ht=nt(st++),pt=nt(st++),dt=nt(st++),vt=nt(st++),mt=nt(st++),gt=nt(st++),yt=nt(st++),bt=nt(st++),wt=nt(st++),Et=nt(st++),St=nt(st++),xt=nt(st++),Tt=nt(st++),Nt=nt(st++),Ct=nt(st++),kt=nt(st++),Lt=nt(st++),At=nt(st++),Ot=nt(st++),Mt=nt(st++),_t=nt(st++),Dt=nt(st++),Pt=nt(st++),Ht=nt(st++),Bt=nt(st++),jt=nt(st++),Ft=nt(st++),It=nt(st++),qt=nt(st++),Rt=h.hostname==b,Ut=function(){return""},zt=function(){return A+it()[dt()]},Xt=[],Vt=[],$t=[],Jt=Rt?new c.OfflineHttp(bn()):new u.HttpClient(E.system.isCordovaApp()||E.envIncludes("offsite")?bn():it()[yt()]+it()[bt()]),Kt=function(){var e=Y(tt(K()[2]),D());Ut=function(){return e}},Qt=0,Gt=function(e,t){et().apply(L(),[[e,t]]),Qt=1},Yt=0,Zt=75,en=function(){return Yt=I()+Zt,G[Ut()[0]][Ut()[1]]},tn=function(e){var t=J(e),n=en()[Ut()[2]](),r=X(t,n,{format:V}).toString(W);return JSON.parse(r)},nn=function(){try{var e=x[it()[ut()]](zt());if(e)return e=tn(e),Promise.resolve(e)}catch(t){}return Promise.resolve(null)},rn=function(e,t,n){return new Promise(function(r){rt(function(){e.apply(null,n),r()},t)})},sn=function(){return Qt?Promise.resolve():rn(function(){},1,[]).then(function(){return sn()})},on=function(e,t,n){return Qt?(L()[it()[xt()]+it()[ft()]]=e,L()[it()[lt()]](t.toString(36)),L()[it()[ht()]](n,Wt[it()[Lt()]],Wt[it()[Mt()]],Wt[it()[qt()]]),cn(Wt[it()[Lt()]]),Promise.resolve(Wt[it()[Lt()]])):rn(function(){},1,[]).then(function(){return on(e,t,n)})},un=function(e,t,n,r){Wt={},Wt[it()[Lt()]]=e,Wt[it()[_t()]]=t,Wt[it()[Mt()]]=n,Wt[it()[qt()]]=r},an=function(e){hn();var t=it()[yt()]+it()[wt()]+it()[yt()]+it()[Et()];return wn(e,Jt.post(t,{token:e}))},fn=function(){x[it()[Dt()]](zt())},ln=function(){fn(),En(),L()[it()[pt()]](),cn(Wt[it()[Lt()]])},cn=function(e){Vt=Vt.filter(function(t){return t.disposed?!1:(t.callback(e),!0)})},hn=function(){$t=$t.filter(function(e){return e.disposed?!1:(e.callback(),!0)})},pn=function(){var e=it()[yt()]+it()[ut()]+it()[yt()]+it()[xt()]+it()[St()];return Jt.get(e).then(function(e){return rn(Gt,1,e[H()]),e[it()[xt()]+it()[ft()]]})},dn=function(e){return x[it()[Bt()]](zt(),e),e=tn(e),an(e)},vn=function(e){return fn(),N(Jt,en()[Ut()[3]],e).then(dn)},mn=function(){return nn().then(function(e){return e?an(e).then(function(t){return t?{user:t,token:e}:mn()}):pn().then(function(e){return L()[it()[xt()]+it()[ft()]]=e,sn()}).then(function(){return L()[it()[ct()]]()}).then(function(e){return L()[it()[lt()]](e),Rt?Sn().then(function(e){return cn(e),e}):En()}).then(function(e){return{user:e,token:Wt[it()[_t()]]}})}).catch(function(e){return r.showAlert(O(it()[xt()]+it()[Tt()]+it()[Nt()]),e,O(it()[xt()]+it()[Tt()]+it()[Ct()])).then(function(){return mn()})})},Kt(),function(e,t,n){var r=e[t[0]];r[t[1]]=function(){return U((I()<Yt&&A+it()[kt()]||Q())+n).toString(z)},r[t[2]]=function(){return F()}}(G[Ut()[0]],Ut().slice(1),G[B()][j()]),function(){mn().then(function(e){An(e.user,e.token)})}(),S&&function(e,t){var n="_recycleGuestTokens_",r=e("token"),i=e("time"),s=Cookies.getJSON(n);if(s){console.log("recycle guest: "+JSON.stringify(s)),Cookies.remove(n);var o="/recycle_guest_tokens?time="+i+"&token="+r;Jt.post(o,{tokens:JSON.stringify(s)})}$(t).on("unload",function(){if(Wt){var e=Wt[it()[Lt()]],t=Wt[it()[_t()]];e&&!e.isLocalGuest()&&e.guest&&t&&Cookies.set(n,[t])}})}(E.utils.NetUtil.getQueryStringValue,window),rt(function(){function e(){return it?Promise.resolve():pn()}L().on(it()[xt()]+it()[ft()],function(t,n,r,i){e().then(function(){var e=n[it()[_t()]];if(t.guest)return un(t,e,n[it()[Mt()]],n[it()[qt()]]),on(n[it()[xt()]+it()[ft()]],n[it()[Ot()]],e);var s=["login","from","parent"].join("_"),o={ip:n[it()[Mt()]],pcode:n.pcode,token:e,user:t.username};s=it()[yt()]+s,Jt.post(s,{data:l.GzipUtil.zipQueryString(JSON.stringify(o))}).then(function(e){var t=tn(e[it()[_t()]]);return wn(t,Promise.resolve(e))}).then(function(e){return r(e)}).catch(function(e){return i(e)})})})},1)}}}),System.register("GLT/commands/vo/Item",["./User","./AbstractVo"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u=t&&t.id,a=t&&t.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"code",{get:function(){return this._vo.code},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._vo.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"category",{get:function(){return this._vo.category},enumerable:!0,configurable:!0}),t.prototype.setCategory=function(e){return this._vo.category=e,this},Object.defineProperty(t.prototype,"description",{get:function(){return this._vo.desc},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"order",{get:function(){return this._vo.order},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconUrl",{get:function(){return this._vo.iconUrl},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._vo.status},enumerable:!0,configurable:!0}),t.prototype.setStatus=function(e){return e&&(this._vo.status=e.value),this},Object.defineProperty(t.prototype,"validDays",{get:function(){return this._vo.validDays},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"limitPerUser",{get:function(){return this._vo.limitPerUser},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"priceInGameDollar",{get:function(){return this._vo.priceInGameDollar},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"priceInGltDollar",{get:function(){return this._vo.priceInGltDollar},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"priceInGameDollarOrigin",{get:function(){return this._vo.priceInGameDollarOrigin||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"priceInGltDollarOrigin",{get:function(){return this._vo.priceInGltDollarOrigin||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buyAgainOff",{get:function(){return this._vo.buyAgainOff||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expirable",{get:function(){return this.validDays>0},enumerable:!0,configurable:!0}),t}(i.AbstractVo),e("GameItem",s),o=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onVoReset=function(){this._user=null},Object.defineProperty(t.prototype,"itemCode",{get:function(){return this._vo.itemCode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"user",{get:function(){return this._user||(this._user=new r.User(this._vo.user)),this._user},set:function(e){this._user=e,this._vo.user=e.valueObject},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._vo.count},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expireTime",{get:function(){return this.convertTimestampToDate(this._vo.expireTime)},enumerable:!0,configurable:!0}),t}(i.AbstractVo),e("UserItem",o)}}}),System.register("GLT/commands/vo/User",["./AbstractVo","./../../index"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a=n&&n.id,f=n&&n.id;return{setters:[function(e){i=e},function(e){s=e}],execute:function(){o=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return r(n,t),n.createLocalGuest=function(){return new n({username:"guest"+e.Base.utils.systemRandomGenerator.generateRandomString(8)+"@local",nickname:e.Base.translation.translate("glt.offlineGuest"),iconUrl:e.Base.getAppResourceFileUrl("GLT.guestIcon"),guest:!0})},n.createFakeUser=function(t){return new n({username:"fake"+e.Base.utils.systemRandomGenerator.generateRandomString(8)+"@localhost",nickname:e.Base.translation.translate("glt.fakeUser"),iconUrl:e.Base.getAppResourceFileUrl("GLT.guestIcon"),guest:t})},Object.defineProperty(n.prototype,"username",{get:function(){return this._vo.username},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nickname",{get:function(){return this._vo.nickname},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"iconUrl",{get:function(){return this._vo.iconUrl},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"guest",{get:function(){return this._vo.guest||this.isLocalGuest()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"blocked",{get:function(){return this._vo.blocked},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"suspended",{get:function(){return this.suspendTimeLeft>0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"suspendTimeLeft",{get:function(){return this._vo.suspendTime?Math.max(0,this._vo.suspendTime*1e3-s.client.estimatedServerTimestamp):0},enumerable:!0,configurable:!0}),n.prototype.isLocalGuest=function(){return!this.username||!!this.username.match(/^guest.+@local$/)},n}(i.AbstractVo),t("User",o),u=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"suspendTime",{get:function(){return this.convertTimestampToDate(this._vo.suspendTime||0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastAccess",{get:function(){return this.convertTimestampToDate(this._vo.lastAccess||0)},enumerable:!0,configurable:!0}),t.prototype.isGM=function(){return this._vo.role=="gm"},t.prototype.isTester=function(){return this._vo.role=="tester"},t}(o),t("ClientUser",u)}}}),System.register("GLT/commands/vo/UserWallet",["./User","./UserScore","./AbstractVo"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u=t&&t.id,a=t&&t.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e}],execute:function(){o=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onVoReset=function(){this._userScores=null,this._user=null},Object.defineProperty(t.prototype,"user",{get:function(){return this._user||(this._user=new r.User(this._vo.user)),this._user},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userScores",{get:function(){return!this._userScores&&this._vo.userScores&&(this._userScores=this._vo.userScores.map(function(e){return new i.UserScoreWithScoreMode(e)})),this._userScores},set:function(e){this._vo.userScores=e.map(function(e){return e.valueObject}),this._userScores=e},enumerable:!0,configurable:!0}),t.prototype.updateUserScore=function(e,t){var n=this.userScores.find(function(t){return t.scoreMode.key==e});return n?(n.score=t,!0):!1},Object.defineProperty(t.prototype,"gameDollars",{get:function(){var e=this.userScores,t=0;if(e)for(var n=0,r=e;n<r.length;n++){var i=r[n];t+=i.score*i.scoreMode.toDollarRate}return t},enumerable:!0,configurable:!0}),t.prototype.getCurrencyScore=function(e){var t=this.userScores.find(function(t){return t.scoreMode.key==e});return t?t.score:0},Object.defineProperty(t.prototype,"gltDollars",{get:function(){return this._vo.gltDollars},set:function(e){this._vo.gltDollars=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gltPoints",{get:function(){return this._vo.gltPoints},set:function(e){this._vo.gltPoints=e},enumerable:!0,configurable:!0}),t}(s.AbstractVo),e("UserWallet",o)}}}),System.register("GLT/commands/vo/Badge",["./User","./AbstractVo"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u=t&&t.id,a=t&&t.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"code",{get:function(){return this._vo.code},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._vo.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this._vo.desc},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"order",{get:function(){return this._vo.order},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconUrl",{get:function(){return this._vo.iconUrl},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._vo.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"repeatable",{get:function(){return this._vo.repeatable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"aquired",{get:function(){return this._vo.aquired},enumerable:!0,configurable:!0}),t}(i.AbstractVo),e("GameBadge",s),o=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onVoReset=function(){this._gameBadge=null,this._user=null},Object.defineProperty(t.prototype,"gameBadge",{get:function(){return this._gameBadge||(this._gameBadge=new s(this._vo.gameBadge)),this._gameBadge},set:function(e){this._gameBadge=e,this._vo.gameBadge=e.valueObject},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"user",{get:function(){return this._user||(this._user=new r.User(this._vo.user)),this._user},set:function(e){this._user=e,this._vo.user=e.valueObject},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._vo.count},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"createTime",{get:function(){return this._vo.createTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modifyTime",{get:function(){return this._vo.modifyTime},enumerable:!0,configurable:!0}),t}(i.AbstractVo),e("UserBadge",o)}}}),System.register("GLT/commands/vo/UserReview",["./AbstractVo","./User"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o=t&&t.id,u=t&&t.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onVoReset=function(){this._author=null},Object.defineProperty(t.prototype,"author",{get:function(){return this._author||(this._author=new i.User(this._vo.author)),this._author},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"createTime",{get:function(){return this.convertTimestampToDate(this._vo.createTime)},set:function(e){this._vo.createTime=this.convertDateToTimestamp(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modifyTime",{get:function(){return this.convertTimestampToDate(this._vo.modifyTime||this._vo.createTime)},set:function(e){this._vo.modifyTime=this.convertDateToTimestamp(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rate",{get:function(){return this._vo.rate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._vo.title},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this._vo.content},enumerable:!0,configurable:!0}),t}(r.AbstractVo),e("UserReview",s)}}}),System.register("GLT/commands/vo/UserRecord",["./AbstractVo","./User"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o=t&&t.id,u=t&&t.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onVoReset=function(){this._user=null},Object.defineProperty(t.prototype,"user",{get:function(){return this._user||(this._user=new i.User(this._vo.user)),this._user},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return this.convertTimestampToDate(this._vo.time)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"action",{get:function(){return this._vo.action},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramInt",{get:function(){return this._vo.paramInt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramStr",{get:function(){return this._vo.paramStr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"meta",{get:function(){return this._vo.meta},enumerable:!0,configurable:!0}),t}(r.AbstractVo),e("UserRecord",s)}}}),System.register("GLT/events/ClientEvents",[],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s=t&&t.id,o=t&&t.id;return{setters:[],execute:function(){r=function(){function e(e){this.type=e}return e}(),e("ClientEvent",r),i=function(e){function t(n){var r=e.call(this,t.TYPE)||this;return r.userBadge=n,r}return n(t,e),t.TYPE="badgeAwarded",t}(r),e("BadgeAwardedEvent",i)}}}),System.register("GLT/commands/vo/UserState",["./AbstractVo"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s=t&&t.id,o=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"username",{get:function(){return this._vo.username},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"category",{get:function(){return this._vo.category},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this._vo.key},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._vo.value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return this.convertTimestampToDate(this._vo.time)},enumerable:!0,configurable:!0}),t}(r.AbstractVo),e("UserState",i)}}}),System.register("GLT/commands/vo/UserIpRecord",["./AbstractVo"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s=t&&t.id,o=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"v4c",{get:function(){return this._vo.v4c},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"v6c",{get:function(){return this._vo.v6c},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startTime",{get:function(){return this.convertTimestampToDate(this._vo.startTime)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return this.convertTimestampToDate(this._vo.endTime)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"records",{get:function(){return this._vo.records},enumerable:!0,configurable:!0}),t}(r.AbstractVo),e("UserIpRecord",i)}}}),System.register("GLT/commands/vo/GmRecord",["./User","./AbstractVo"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o=t&&t.id,u=t&&t.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onVoReset=function(){this._user=null},Object.defineProperty(t.prototype,"user",{get:function(){return this._user||(this._user=new r.User(this._vo.user)),this._user},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gm",{get:function(){return this._gm||(this._gm=new r.User(this._vo.gm)),this._gm},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return this.convertTimestampToDate(this._vo.time)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"action",{get:function(){return this._vo.action},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramInt",{get:function(){return this._vo.paramInt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramStr",{get:function(){return this._vo.paramStr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"note",{get:function(){return this._vo.note},enumerable:!0,configurable:!0}),t}(i.AbstractVo),e("GmRecord",s)}}}),System.register("GLT/commands/vo/UserScore",["./User","./AbstractVo"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l,c,h=n&&n.id,p=n&&n.id;return{setters:[function(e){i=e},function(e){s=e}],execute:function(){o=e.Base.utils.ArrayUtil,u=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onVoReset=function(){this._user=null},Object.defineProperty(t.prototype,"user",{get:function(){return this._user||(this._user=new i.User(this._vo.user)),this._user},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"score",{get:function(){return this._vo.score},set:function(e){this._vo.score=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return this.convertTimestampToDate(this._vo.time)},set:function(e){this._vo.time=this.convertDateToTimestamp(e)},enumerable:!0,configurable:!0}),t}(s.AbstractVo),t("UserScore",u),a=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onVoReset=function(){e.prototype.onVoReset.call(this),this._scoreMode=null},Object.defineProperty(t.prototype,"scoreMode",{get:function(){return this._scoreMode||(this._scoreMode=new f(this._vo.scoreMode)),this._scoreMode},enumerable:!0,configurable:!0}),t}(u),t("UserScoreWithScoreMode",a),f=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this._vo.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this._vo.key},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"order",{get:function(){return this._vo.order},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toDollarRate",{get:function(){return this._vo.toDollarRate||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return!!this._vo.disabled},enumerable:!0,configurable:!0}),t}(s.AbstractVo),t("ScoreMode",f),l=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"scores",{get:function(){return this._vo.scores.map(function(e){return new u(e)})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rankStart",{get:function(){return this._vo.rankStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"periodStart",{get:function(){return this.convertTimestampToDate(this._vo.periodStart)},enumerable:!0,configurable:!0}),t}(s.AbstractVo),t("UserScoreList",l),c=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"timeRanges",{get:function(){var e=Object.keys(this._vo);return o.removeElement(e,"scoreKey"),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreKey",{get:function(){return this._vo.scoreKey},enumerable:!0,configurable:!0}),t.prototype.getUserScore=function(e){var t=this._vo[typeof e=="string"?e:e.value];return t?new u(t):null},t}(s.AbstractVo),t("UserScoreMap",c)}}}),System.register("GLT/commands/types/GMAction",[],function(t,n){"use strict";var r,i,s,o=n&&n.id,u=n&&n.id;return{setters:[],execute:function(){r=e.Base.translation.translate,i=[],s=function(){function e(t,n){this.code=t,this.negative=n,e.getByCode(t)||i.push(this)}return e.getByCode=function(e){return i.find(function(t){return t.code==e})},e.listAll=function(){return i.slice()},Object.defineProperty(e.prototype,"name",{get:function(){return r("glt.gmAction."+this.code)},enumerable:!0,configurable:!0}),e.SUSPEND_USER=new e("suspendUser",!0),e.UNSUSPEND_USER=new e("unsuspendUser",!1),e.CLOSE_ARTICLE=new e("closeArticle",!0),e.OPEN_ARTICLE=new e("openArticle",!1),e.SET_ARTICLE_STATUS=new e("setArticleStatus",!1),e.BLOCK_CLIENT=new e("blockClient",!0),e.UNBLOCK_CLIENT=new e("unblockClient",!1),e.SUBMIT_SCORE=new e("submitScore",!0),e.AWARD_BADGE=new e("awardBadge",!1),e.REMOVE_BADGE=new e("removeBadge",!0),e}(),t("GMAction",s)}}}),System.register("GLT/utils/http",[],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o=n&&n.id,u=n&&n.id;return{setters:[],execute:function(){i=e.Base.wait,s=function(e){function t(t){var n=e.call(this)||this;return n.serverBase=t,n}return r(t,e),t.prototype.post=function(e,n,r){var s=this;return r===void 0&&(r=2),new Promise(function(o,u){var a=e;e.match(/^\/[^\/]/)&&(a=s.serverBase+a),$.post(a,n).done(function(e){return o(e)}).fail(function(a,f){a.responseText?u(a.responseText):f=="error"&&(r>0?i(1e3).then(function(){return s.post(e,n,r-1)}).then(function(e){return o(e)}).catch(function(e){return u(e)}):s.emit(t.EVENT.DISCONNECTED))})})},t.prototype.get=function(e,n,r){var s=this;return r===void 0&&(r=2),new Promise(function(o,u){var a=e;e.match(/^\/[^\/]/)&&(a=s.serverBase+a),$.get(a,n).done(function(e){return o(e)}).fail(function(a,f){a.responseText?u(a.responseText):f=="error"&&(r>0?i(1e3).then(function(){return s.get(e,n,r-1)}).then(function(e){return o(e)}).catch(function(e){return u(e)}):s.emit(t.EVENT.DISCONNECTED))})})},t.EVENT={DISCONNECTED:"disconnected"},t}(PIXI.utils.EventEmitter),t("HttpClient",s)}}}),System.register("GLT/utils/OfflineHttp",["./http","./../commands/vo/User","./OfflineDatabase"],function(t,n){"use strict";function g(e,t){return e+Math.round((t-e)*Math.random())}function y(e){var t="",n="a".charCodeAt(0);while(t.length<e)t+=String.fromCharCode(n+g(0,25));return t}function b(){return[192,168,g(0,100),g(0,100)].join(".")}function w(e,t){var n=e.match(/^\/([^\/][^\?]*)(\?.*)?$/);if(n){if(n[2]){t=t||{};var r=n[2].substr(1).split("&");r.forEach(function(e){var n=e.split("=");t[n[0]]=decodeURIComponent(n[1]||"")})}var i=n[1].split("/").map(function(e){return u.dashToCamelCase(e,"_")}),s=d[i.shift()];while(i.length){if(!s||typeof s!="object"){s=null;break}s=s[i.shift()]}return s&&typeof s=="function"&&s(t)}return E(e,t)}function E(e,t){return new Promise(function(n,r){$.get(e,t).done(function(e){return n(e)}).fail(function(e,t,n){return r(n+":"+e.responseText)})})}function S(){return Math.floor(s.now()/1e3).toString(36)}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l,c,h,p,d,v=n&&n.id,m=n&&n.id;return{setters:[function(e){i=e},function(e){a=e},function(e){f=e}],execute:function(){s=e.Base,o=s.wait,u=e.Base.utils.StringUtil,l="",p=function(e){function t(t){var n=e.call(this)||this;return n.serverBase=t,l=t,n}return r(t,e),t.prototype.loginUser=function(e){f.OfflineDatabase.getInstance().login(e),h=e.token},t.prototype.post=function(e,t){return c?(h&&(t.token=h,t.timeCode=S()),c.post(e,t).then(function(e){return e})):o(10).then(function(){return w(e,t)})},t.prototype.get=function(e,t){return c?c.get(e,t):o(10).then(function(){return w(e,t)})},t.prototype.createLocalhostUser=function(){if(c)return c.get("/login").then(function(e){var t=e.user;return{user:new a.User(t),access_token:t.token,ip:t.ip,role:""}});var e=a.User.createFakeUser(!1),t=y(32),n=b();return o(10).then(function(){return{user:e,access_token:t,ip:n,role:""}})},t}(PIXI.utils.EventEmitter),t("OfflineHttp",p),d={get:{gltUrl:function(t){return E(l+"/get/glt_dev_url",t).then(function(t){var n=t.localport,r="http://localhost:"+n;return E(r+"/client").then(function(n){return n&&n.client&&n.client.code.toLowerCase()==e.Base.projectCode.toLowerCase()&&(c=new i.HttpClient(r),t.gltUrl=r),t}).catch(function(e){return t})})}},timecode:function(){return S()},requestGuestToken:function(){var e=a.User.createFakeUser(!0);return{ip:b(),user:e.valueObject,token:e.username+"|DEV|localhost|"+y(3)+"|"+6}},jsonrpc:{cmd:function(e){var t=S();return f.OfflineDatabase.getInstance().executeCommand(e.command).then(function(e){return{time:t,result:e}})},cmds:function(e){var t=S();return Promise.all(e.commands.map(function(e){return Promise.resolve().then(function(){return f.OfflineDatabase.getInstance().executeCommand(e)})})).then(function(e){return{time:t,results:e}})}}}}}}),System.register("GLT/utils/GzipUtil",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.zipString=function(e){var t=pako.gzip(e,{to:"string"});return btoa(t)},e.unzipString=function(e){var t=atob(e);return pako.ungzip(t,{to:"string"})},e.zipJson=function(t){return e.zipString(JSON.stringify(t))},e.unzipJson=function(t){return JSON.parse(e.unzipString(t))},e.zipQueryString=function(t){var n=e.zipString(t);return n.replace(/\+/g,".").replace(/\//g,"_").replace(/=/g,"-")},e.unzipQueryString=function(t){var n=t.replace(/\./g,"+").replace(/_/g,"/").replace(/-/g,"=");return e.unzipString(n)},e}(),e("GzipUtil",n)}}}),System.register("GLT/components/alertDialog",[],function(t,n){"use strict";function s(t,n,r,i){return n?typeof n!="string"&&(n=n.message||n.text||n.toString()):n="",new Promise(function(s){e.ReactMaterial.dialogs.openAlertDialog({title:t,message:n,confirmLabel:r,confirmIcon:i,onClose:function(){return s()}})})}var r=n&&n.id,i=n&&n.id;return t("showAlert",s),{setters:[],execute:function(){}}}),System.register("GLT/utils/AuthListener",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){n=function(){function e(e){this.callback=e,this._disposed=!1}return e.prototype.dispose=function(){this._disposed=!0},Object.defineProperty(e.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),e}(),e("AuthListener",n)}}}),System.register("GLT/utils/CryptoJSAesJson",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){e("CryptoJSAesJson",n={stringify:function(e){var t={ct:e.ciphertext.toString(CryptoJS.enc.Base64)};return e.iv&&(t.iv=e.iv.toString()),e.salt&&(t.s=e.salt.toString()),JSON.stringify(t).replace(/\s/g,"")},parse:function(e){var t=JSON.parse(e),n=CryptoJS.lib.CipherParams.create({ciphertext:CryptoJS.enc.Base64.parse(t.ct)});return t.iv&&(n.iv=CryptoJS.enc.Hex.parse(t.iv)),t.s&&(n.salt=CryptoJS.enc.Hex.parse(t.s)),n}})}}}),System.register("GLT/commands/vo/Transaction",["./AbstractVo","./../types/TransactionCategory","./../types/MoneyCurrency","./Item"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a=t&&t.id,f=t&&t.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e}],execute:function(){u=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t.prototype,"time",{get:function(){return this.convertTimestampToDate(this._vo.time)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"category",{get:function(){return i.TransactionCategory.getByCode(this._vo.category)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"meta",{get:function(){return this._vo.meta},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameDollar",{get:function(){return this._vo.gameDollar||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameletDollar",{get:function(){return this._vo.gameletDollar||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameletPoint",{get:function(){return this._vo.gameletPoint||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"money",{get:function(){return this._vo.money||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"moneyCurrency",{get:function(){return s.MoneyCurrency.getByCode(this._vo.moneyCurrency)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameItem",{get:function(){return!this._gameItem&&this._vo.gameItem&&(this._gameItem=new o.GameItem(this._vo.gameItem)),this._gameItem},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameItemCount",{get:function(){return this._vo.gameItemCount||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trade",{get:function(){return this._vo.trade},enumerable:!0,configurable:!0}),t}(r.AbstractVo),e("Transaction",u)}}}),System.register("GLT/auth/loginWindow",["./../index","./../commands/vo/Item","./../utils/GzipUtil","./../components/loadingDialog"],function(t,n){"use strict";function H(e,t,n){return _=new m(e),_.login(t,n)}function B(e,t,n,r,i){return _=new m(e),_.profile(n,t,r,i)}function j(e,t,n,r,i){return _=new m(e),_.purchaseItem(n,t,r,i)}function F(e,t,n,r){return _=new m(e),_.purchaseGltDollar(n,t,r)}function I(){window.document.body.addEventListener("pointerdown",R)}function q(){window.document.body.removeEventListener("pointerdown",R)}function R(){_&&_.close()}var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D=n&&n.id,P=n&&n.id;return t("openLoginWindow",H),t("openProfileWindow",B),t("openPurchaseItemWindow",j),t("openPurchaseGltDollarWindow",F),{setters:[function(e){r=e},function(e){i=e},function(e){o=e},function(e){u=e}],execute:function(){s=e.Base.utils.systemRandomGenerator,f=function(){a&&(window.removeEventListener("message",a),a=null)},l=s.generateRandomString(5,!0),c=s.generateRandomString(16,!0),Cookies.set("gltSessionId",c),h="loginCallback",p="logoutCallback",d="purchaseItemCallback",v=e.Base.envIncludes("offsite")?window.location.origin.split("/").shift()+"//"+e.Base.projectDomain:window.location.origin,m=function(){function t(e){this.http=e}return t.prototype.close=function(){f(),q(),this.loginWindow&&(this.loginWindow.close(),this.loginWindow=null),u.hideLoading(),_==this&&(_=null)},t.prototype.isZh=function(){return navigator.language.includes("zh")},t.prototype.login=function(t,n){var r=this;return new Promise(function(i,s){r.resolve=i,r.reject=s,u.showLoading(),r.loginWindow=C(r.http,t(),n),I();if(!r.loginWindow){r.reject("Failed to open login window.");return}var o=function(e){f(),r.close(),r.resolve(e)},l=function(e){f(),r.close(),r.reject(e)};if(e.Base.system.isCordovaApp())r.loginWindow.addEventListener("loadstart",function(e){if(!b(e.url,l)){var n=A(r.http,t,e.url);n&&n.then(o).catch(l)}}),r.loginWindow.addEventListener("exit",function(e){r.close(),r.reject("Window closed")});else{var c=[r.http,t,r.loginWindow,o,l];f(),a=function(e){e.origin===v&&e.data.indexOf(h)==0&&M.apply(null,[JSON.parse(e.data.slice(h.length))].concat(c))},window.addEventListener("message",a,!1),O(r.loginWindow,l)}})},t.prototype.profile=function(e,t,n,r){var i=this;return new Promise(function(s,o){i.resolve=s,i.reject=o,u.showLoading(),i.loginWindow=N(i.http,t,e,n,r,function(e){i.close(),i.resolve(e)}),I()})},t.prototype.purchaseItem=function(e,t,n,r){var i=this;return new Promise(function(s,o){i.resolve=s,i.reject=o,u.showLoading(),i.loginWindow=k(i.http,t,e,n,r,function(e,t){i.close(),t?i.reject(t):i.resolve(e)}),I()})},t.prototype.purchaseGltDollar=function(e,t,n){var r=this;return new Promise(function(i,s){r.resolve=i,r.reject=s,u.showLoading(),r.loginWindow=L(r.http,t,e,n,function(){r.close(),r.resolve(undefined)}),I()})},t}(),g=function(e){var t=[];for(var n in e)t.push(n+"="+e[n]);return"?"+t.join("&")},y=function(e){return!!e.match(/\.gamelet\.online\/svr\/loggedout\?.+$/)},b=function(e,t){return e&&e.includes("/close_window")?(q(),t(null),!0):!1},w=function(t,n,r,i,s,o){if(i&&!i.closed){try{if(t&&t.href){if(y(t.href)){q(),s(),o(null);return}var u=A(n,r,t.href);if(u){u.then(o).catch(function(e){return o(null)}),q();return}}}catch(a){}t||e.Base.addDelayFunction(null,w,100,[null,n,r,i,s,o])}else o(null),q()},E=function(e){var t=e.match(/[^?]+\/purchase\/item\/([^?\/]+)/);if(!t||t[1]=="cancel")return t=e.match(/[?&]reason=([^&]*)/),{error:t?decodeURI(t[1]):"unknown error"};if(t[1]=="success"){t=e.match(/[?&]response=([^&]*)/);var n=t&&t[1];if(n){var s=JSON.parse(o.GzipUtil.unzipQueryString(n));if(s&&s.userItem){var u=new i.UserItem(s.userItem);return r.emitUserItemChangedEvent(u),s.userItem=u,{response:s}}}return{error:"unexpected response"}}return null},S=function(t,n,r){if(n&&!n.closed){try{if(t&&t.href){var i=E(t.href);i&&(q(),r(i.response,i.error))}}catch(s){}t||e.Base.addDelayFunction(null,S,100,[null,n,r])}else r(null,"canceled"),q()},x=function(t,n){t&&!t.closed?e.Base.addDelayFunction(null,x,100,[t,n]):(n(),q())},T=function(e,t){if(!t)return;t.disableGuest&&(e.disableGuest=1)},N=function(t,n,r,i,s,o){var u,h=t.serverBase+"/user_profile",d={gltSessionId:c,token:r,platform:n()};T(d,i),h+=g(d);if(e.Base.system.isCordovaApp())u=e.Cordova.inappbrowser.open(h,"cgprofile"+l,{location:"no"}),u.addEventListener("loadstart",function(e){b(e.url,o)||y(e.url)&&(q(),o(null),s())}),u.addEventListener("exit",function(e){q(),o(null)});else{var m={width:Math.min(450,screen.width),height:Math.min(550,screen.height)},E=Math.max(0,Math.floor(window.screenX+(window.innerWidth-m.width)/2)),S=Math.max(0,Math.floor(window.screenY+(window.innerHeight-m.height)/2));u=window.open(h,"cgprofile"+l,"width="+m.width+",height="+m.height+",location=0,left="+E+",top="+S);var x=[null,t,n,u,s,o];f(),a=function(e){if(e.origin===v&&e.data.indexOf(p)==0){var t=x.slice();t[0]=JSON.parse(e.data.slice(p.length)),w.apply(null,t)}},window.addEventListener("message",a,!1),w.apply(null,x)}return u},C=function(t,n,r){var i=t.serverBase+"/login",s={platform:n};e.Base.system.isCordovaApp()&&(s.uuid=e.Cordova.device.uuid),T(s,r),i+=g(s);if(e.Base.system.isCordovaApp())return e.Cordova.inappbrowser.open(i,"cglogin"+l,{location:"no"});var o={width:Math.min(450,screen.width),height:Math.min(550,screen.height)};screen.width;var u=Math.max(0,Math.floor(window.screenX+(window.innerWidth-o.width)/2)),a=Math.max(0,Math.floor(window.screenY+(window.innerHeight-o.height)/2));return window.open(i,"cglogin"+l,"width="+o.width+",height="+o.height+",location=0,left="+u+",top="+a)},k=function(t,n,r,i,s,u){var h=t.serverBase+"/purchase/item",p=JSON.stringify({purchase:s,user:{un:i.username,nn:i.nickname,icon:i.iconUrl},platform:n(),token:r}),m=o.GzipUtil.zipQueryString(p),y={data:m,gltSessionId:c};h+=g(y);var b;if(e.Base.system.isCordovaApp())b=e.Cordova.inappbrowser.open(h,"cgpurchase"+l,{location:"no"}),b.addEventListener("loadstart",function(e){var t=E(e.url);t&&(q(),u(t.response,t.error))}),b.addEventListener("exit",function(e){q(),u(null,"canceled")});else{var w={width:Math.min(450,screen.width),height:Math.min(550,screen.height)};screen.width;var x=Math.max(0,Math.floor(window.screenX+(window.innerWidth-w.width)/2)),T=Math.max(0,Math.floor(window.screenY+(window.innerHeight-w.height)/2));b=window.open(h,"cgpurchase"+l,"width="+w.width+",height="+w.height+",location=0,left="+x+",top="+T);var N=[null,b,u];f(),a=function(e){if(e.origin===v&&e.data.indexOf(d)==0){var t=N.slice();t[0]=JSON.parse(e.data.slice(d.length)),S.apply(null,t)}},window.addEventListener("message",a,!1),S.apply(null,N)}return b},L=function(t,n,r,i,s){var u=t.serverBase+"/purchase/gltdollar",a=JSON.stringify({platform:n(),token:r}),h=o.GzipUtil.zipQueryString(a),p={data:h,gltSessionId:c};u+=g(p);var d;if(e.Base.system.isCordovaApp())d=e.Cordova.inappbrowser.open(u,"cgpurchasegltdollar"+l,{location:"no"}),d.addEventListener("exit",function(e){q(),s()});else{var v={width:Math.min(900,screen.width),height:Math.min(600,screen.height)};screen.width;var m=Math.max(0,Math.floor(window.screenX+(window.innerWidth-v.width)/2)),y=Math.max(0,Math.floor(window.screenY+(window.innerHeight-v.height)/2));d=window.open(u,"cgpurchasegltdollar"+l,"width="+v.width+",height="+v.height+",location=0,left="+m+",top="+y);var b=[d,s];f(),x.apply(null,b)}return d},A=function(e,t,n){var r=n.match(/https:\/\/.*\.gamelet\.online\/svr\/login_callback.*[?&]code=([^&]+)(&|$)/);if(r){var i=r[1];return e.post("/get/arrived_access_token",{platform:t(),code:i}).then(function(e){return e.accessToken})}return null},O=function(t,n){return t.closed?(n("Window closed"),!1):(e.Base.addDelayFunction(null,O,100,[t,n]),!1)},M=function(e,t,n,r,i,s){if(r.closed)return s("Window closed"),!1;try{if(e&&e.href){var o=A(t,n,e.href);if(o)return o.then(i).catch(function(e){return s(e)}),q(),!0}}catch(u){}return!1}}}}),System.register("GLT/commands/vo/AbstractVo",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){n=function(){function e(e){this._vo=e,this._vo=e||{}}return Object.defineProperty(e.prototype,"valueObject",{get:function(){return this._vo},set:function(e){this._vo=e||{},this.onVoReset()},enumerable:!0,configurable:!0}),e.prototype.onVoReset=function(){},e.prototype.convertTimestampToDate=function(e){return new Date(e*1e3)},e.prototype.convertDateToTimestamp=function(e){return Math.round(e.getTime()/1e3)},e}(),e("AbstractVo",n)}}}),System.register("GLT/commands/types/MoneyCurrency",[],function(e,t){"use strict";var n,r,i=t&&t.id,s=t&&t.id;return{setters:[],execute:function(){n={},r=function(){function e(e){this.code=e,n[e]=this}return e.getByCode=function(e){return n[e]},e.TWD=new e("TWD"),e.USD=new e("USD"),e}(),e("MoneyCurrency",r)}}}),System.register("GLT/utils/OfflineDatabase",["./../commands/vo/Badge","./../commands/vo/Item","./../commands/vo/UserScore","./../commands/types/TimeRange","./../commands/types/SubmitType","./../commands/vo/UserState"],function(t,n){"use strict";function d(e,t){return new Promise(function(n,r){$.get(e,t).done(function(e){return n(e)}).fail(function(e,t,n){return r(n+":"+e.responseText)})})}function v(e){return e===void 0&&(e=0),Math.floor((Date.now()+e)/1e3)}var r,i,s,o,u,a,f,l,c,h=n&&n.id,p=n&&n.id;return{setters:[function(e){r=e},function(e){i=e},function(e){o=e},function(e){u=e},function(e){a=e},function(e){f=e}],execute:function(){s=e.Base.utils.MathUtil,c=function(){function e(){this._userItems={},this._userBadges={},this._userScores={},this._userStates={},this._login={},this._gltPoints=100}return e.getInstance=function(){return l||(l=new e),l},e.prototype.login=function(e){Object.assign(this._login,e)},Object.defineProperty(e.prototype,"me",{get:function(){return this._login&&this._login.user},enumerable:!0,configurable:!0}),e.prototype.getUserState=function(e,t,n){var r=this._userStates[e]=this._userStates[e]||{},i=r[t]=r[t]||{},s=i[n]=i[n]||new f.UserState({username:e,category:t,key:n});return s},e.prototype.listScoreModes=function(){var e=this;return this._scoreModes?Promise.resolve(this._scoreModes):d("/static/json/score_modes.json").then(function(t){e._scoreModes=t.list.map(function(e){return new o.ScoreMode(e)})}).catch(function(){e._scoreModes=[]}).then(function(){return e._scoreModes})},e.prototype.listGameBadges=function(){var e=this;return this._badges?Promise.resolve(this._badges):d("/static/json/badges.json").then(function(t){e._badges=t.list.map(function(e){return new r.GameBadge(e)})}).catch(function(){e._badges=[]}).then(function(){return e._badges})},e.prototype.getGameBadge=function(e){return this.listGameBadges().then(function(t){return t.find(function(t){return t.code==e})})},e.prototype.getUserBadge=function(e,t){var n=this._userBadges[e];return n&&n.find(function(e){return e.gameBadge.code==t})},e.prototype.addUserBadge=function(e){var t=this._userBadges[e.user.username];t||(t=this._userBadges[e.user.username]=[]),t.push(e)},e.prototype.listGameItems=function(){var e=this;return this._items?Promise.resolve(this._items):d("/static/json/items.json").then(function(t){e._items=t.list.map(function(e){return new i.GameItem(e)})}).catch(function(){e._items=[]}).then(function(){return e._items})},e.prototype.getGameItem=function(e){return this.listGameItems().then(function(t){return t.find(function(t){return t.code==e})})},e.prototype.getUserItem=function(e,t){var n=this._userItems[e];return n&&n.find(function(e){return e.itemCode==t})},e.prototype.addUserItem=function(e){var t=this._userItems[e.user.username];t||(t=this._userItems[e.user.username]=[]),t.push(e)},e.prototype.getUserScoreMap=function(e,t){var n=e+"|"+t,r=this._userScores[n];return r||(r=this._userScores[n]=new o.UserScoreMap({scoreKey:t})),r},e.prototype.getUserScore=function(e,t,n){var r=this.getUserScoreMap(e,t);return r.getUserScore(n)},e.prototype.submitUserScore=function(e,t,n,r,i){var s=this.getUserScoreMap(e.username,t),u=s.getUserScore(n);if(!u)u=new o.UserScore({user:e.valueObject,score:i,time:v()}),s.valueObject[n.value]=u.valueObject,u=s.getUserScore(n.value);else{var f=u.score,l=f,c=v();r==a.SubmitType.KEEP_HIGHEST?i>f&&(l=i):r==a.SubmitType.KEEP_LOWEST?i<f&&(l=i):r==a.SubmitType.OVERWRITE?l=i:r==a.SubmitType.ADD?l=f+i:r==a.SubmitType.ADD_SINCE&&(l=f+i,c=u.valueObject.time),l!=f&&(u.valueObject.time=c,u.valueObject.score=l)}return u},e.prototype.executeCommand=function(e){var t=this,n=[e.service,e.method].join("__"),r=this[n];return r?Promise.resolve().then(function(){return r.apply(t,JSON.parse(e.params))}).then(function(e){return e&&e._result_?e._result_:[e]}):Promise.reject(n+" is not implemneted in offline database.")},e.prototype.requireLogin=function(){var e=this.me;if(!e)throw new Error("Login required.");return e},e.prototype.system__echo=function(e){return[e]},e.prototype.system__debugReport=function(e,t){return[1]},e.prototype.badge__listGameBadgesByStatus=function(e,t){return this.listGameBadges().then(function(e){return e.filter(function(e){return t.find(function(t){return t.value==e.status})})}).then(function(e){return e.map(function(e){return e.valueObject})})},e.prototype.badge__listGameBadgesByCodes=function(e,t){return this.listGameBadges().then(function(e){return e.filter(function(e){return t.includes(e.code)})}).then(function(e){return e.map(function(e){return e.valueObject})})},e.prototype.badge__getUserBadge=function(e,t,n){var r=this._userBadges[t],i=r&&r.find(function(e){return e.gameBadge.code==n});return this.getUserBadge(t,n).valueObject},e.prototype.badge__awardBadge=function(e,t){var n=this;return this.getGameBadge(t).then(function(e){if(!e)return Promise.reject("Badge not found");var i=n.requireLogin(),s=n.getUserBadge(i.username,t);return s&&s.count&&!e.repeatable?Promise.reject("The user already has the badge"):(s||(s=new r.UserBadge({user:i.valueObject,gameBadge:e.valueObject,count:0,createTime:v(),modifyTime:0}),n.addUserBadge(s)),e.valueObject.aquired++,s.valueObject.count++,s.valueObject.modifyTime=v(),s.valueObject)})},e.prototype.badge__removeUserBadge=function(e,t){var n=this;return this.getGameBadge(t).then(function(e){if(!e)return Promise.reject("Badge not found");var r=n.requireLogin(),i=n.getUserBadge(r.username,t);if(!i||!i.count)throw new Error("The user does not have the badge");e.valueObject.aquired-=i.count,i.valueObject.count=0})},e.prototype.badge__listUserBadgesByUser=function(e,t){return(this._userBadges[t]||[]).map(function(e){return e.valueObject})},e.prototype.badge__listUserBadgesByBadge=function(e,t,n,r){var i=[];for(var s in this._userBadges){var o=this._userBadges[s],u=o.find(function(e){return e.gameBadge.code==t});u&&i.push(u)}return n<i.length?i.slice(n,r).map(function(e){return e.valueObject}):[]},e.prototype.client__getMsgServerUrl=function(e){return"http://localhost:6789"},e.prototype.client__isAllowGltDollar=function(e){return!0},e.prototype.item__awardItem=function(e,t,n){var r=this;return this.getGameItem(t).then(function(e){if(!e)return Promise.reject("Item not found");if(n<=0)return Promise.reject("count is 0 or less");var o=r.requireLogin(),u=r.getUserItem(o.username,t);if(u){if(e.expirable){if(u.count>=1)return Promise.reject("A user can have only one of this item.")}else if(u.count>=e.limitPerUser)return Promise.reject("The amount of the item exceeded its limit")}else u=new i.UserItem({user:o.valueObject,itemCode:t,count:0,expireTime:0}),r.addUserItem(u);u.valueObject.count++;var a=e.expirable?e.validDays:3650;return u.valueObject.expireTime=v(a*s.ONE_DAY),u.valueObject})},e.prototype.item__consumeItem=function(e,t,n){var r=this;return this.getGameItem(t).then(function(e){if(!e)return Promise.reject("Item not found");if(n<0)return Promise.reject("count is a negative number");var i=r.requireLogin(),s=r.getUserItem(i.username,t);if(!s||!s.count)return Promise.reject("The user does not have the item");var o=s.count-n;return o<0?Promise.reject("The user does not have enough of the item to consume"):(s.valueObject.count=o,s.valueObject)})},e.prototype.item__listGameItems=function(e){return this.listGameItems().then(function(e){return e.map(function(e){return e.valueObject})})},e.prototype.item__listGameItemsByStatus=function(e,t){return this.listGameItems().then(function(e){return e.filter(function(e){return t.includes(e.status)})}).then(function(e){return e.map(function(e){return e.valueObject})})},e.prototype.item__listGameItemsByCodes=function(e,t){return this.listGameItems().then(function(e){return e.filter(function(e){return t.includes(e.code)})}).then(function(e){return e.map(function(e){return e.valueObject})})},e.prototype.item__getUserItem=function(e,t){var n=this.requireLogin(),r=this.getUserItem(n.username,t);return r&&r.count>0?r.valueObject:null},e.prototype.item__requireUserItem=function(e,t,n){var r=this.requireLogin(),i=this.getUserItem(r.username,t);if(n>0)if(!i||i.count<n)throw new Error("Insufficient amount of the item");return i&&i.valueObject},e.prototype.item__requireOneOfUserItems=function(e,t,n){var r=this,i=this.requireLogin();return t.map(function(e,t){var s=r.getUserItem(i.username,e),o=n[t];if(o>0)if(!s||s.count<n[t])throw new Error("Insufficient amount of an item");return s&&s.valueObject})},e.prototype.item__listUserItemsByCodesAndClient=function(e,t,n){return t==e?this.item__listUserItems(e,0,1e3).filter(function(e){return n.includes(e.itemCode)}):[]},e.prototype.item__listUserItems=function(e,t,n){var r=this.requireLogin(),i=this._userItems[r.username]||[];return i.map(function(e){return e.valueObject})},e.prototype.score__submitScore=function(e,t,n,r){var i=this,s=this.requireLogin(),o=a.SubmitType.getByValue(r);return u.TimeRange.listAll().forEach(function(e){i.submitUserScore(s,t,e,o,n)}),this.getUserScoreMap(s.username,t).valueObject},e.prototype.score__submitScores=function(e,t){var n=this,r=t.map(function(t){return n.score__submitScore(e,t[0],t[1],t[2])});return r},e.prototype.score__getScore=function(e,t,n){var r=this.requireLogin();return this.getUserScore(r.username,t,u.TimeRange.getByValue(n))||(new o.UserScore({user:r.valueObject,score:0,time:0})).valueObject},e.prototype.score__getScoreAndRank=function(e,t,n,r,i){var s=this.me,o=s&&this.getUserScore(s.username,t,u.TimeRange.getByValue(n));return o?[o.valueObject,1,v()]:{_result_:[null,0,v()]}},e.prototype.score__listScores=function(e,t,n,r,i,s,a){var f=this.me,l=f&&this.getUserScore(f.username,t,u.TimeRange.getByValue(n));return(new o.UserScoreList({scores:[l.valueObject],rankStart:1,periodStart:v()})).valueObject},e.prototype.score__listScoresAndRankAroundUser=function(e,t,n,r,i,s,o){return this.score__listScores(e,t,n,r,i,s,o)},e.prototype.score__getScoresTotal=function(e,t,n){var r=this.me,i=r&&this.getUserScore(r.username,t,u.TimeRange.getByValue(n));return i?1:0},e.prototype.score__listScoresByUsernames=function(e,t,n,r,i){var s=this.me,o=s&&this.getUserScore(s.username,t,u.TimeRange.getByValue(r));if(o&&n.includes(o.user.username)){var a={};return a[o.user.username]=o,{_result_:[[o],a]}}return{_result_:[[],{}]}},e.prototype.score__listScoresHistory=function(e,t,n,r,i){var s=this.me,o=s&&this.getUserScore(s.username,t,u.TimeRange.getByValue(n));return o?[o]:[]},e.prototype.score__listCurrencyScores=function(e){var t=this,n=this.requireLogin();return this.listScoreModes().then(function(e){return e.filter(function(e){return e.toDollarRate})}).then(function(e){var r=[];return e.forEach(function(e){var i=t.getUserScore(n.username,e.key,u.TimeRange.HISTORY);if(i){var s=new o.UserScoreWithScoreMode(Object.assign({scoreMode:e.valueObject},i.valueObject));r.push(s)}}),r}).then(function(e){return e.map(function(e){return e.valueObject})})},e.prototype.score__submitGameDollar=function(e,t,n,r){var i=this,s=this.requireLogin();return this.listScoreModes().then(function(e){return e.find(function(e){return e.key==t})}).then(function(e){return!e||!e.toDollarRate?Promise.reject("score key is not a currency key"):(u.TimeRange.listAll().forEach(function(e){return i.submitUserScore(s,t,e,a.SubmitType.ADD_SINCE,n)}),i.getUserScoreMap(s.username,t).valueObject)})},e.prototype.score__submitGameDollars=function(e,t,n){var r=this;return Promise.all(t.map(function(t){return r.score__submitGameDollar(e,t[0],t[1],n)}))},e.prototype.state__getState=function(e,t,n,r){var i=this.getUserState(t,n,r);return i.valueObject.time?i.valueObject:null},e.prototype.state__getMyState=function(e,t,n){var r=this.requireLogin();return this.state__getState(e,r.username,t,n)},e.prototype.state__getMyStateByClient=function(e,t,n,r){return e==t&&this.state__getMyState(e,n,r)},e.prototype.state__setState=function(e,t,n,r,i){var s=this.getUserState(t,n,r);return s.valueObject.value=i,s.valueObject.time=v(),s.valueObject},e.prototype.state__setMyState=function(e,t,n,r){var i=this.requireLogin();return this.state__setState(e,i.username,t,n,r)},e.prototype.state__removeState=function(e,t,n,r){var i=this.getUserState(t,n,r);return i.valueObject.time?(delete i.valueObject.value,delete i.valueObject.time,1):0},e.prototype.state__removeMyState=function(e,t,n){var r=this.requireLogin();return this.state__removeState(e,r.username,t,n)},e.prototype.state__getStates=function(e,t,n,r){var i=[];for(var s=0,o=t;s<o.length;s++){var u=o[s];for(var a=0,f=n;a<f.length;a++){var l=f[a];for(var c=0,h=r;c<h.length;c++){var p=h[c],d=this.getUserState(u,l,p);d.valueObject.time&&i.push(d)}}}return i.map(function(e){return e.valueObject})},e.prototype.state__getMyStates=function(e,t,n){var r=this.requireLogin();return this.state__getStates(e,[r.username],t,n)},e.prototype.state__getMyStatesByClient=function(e,t,n,r){return e==t?this.state__getMyStates(e,n,r):[]},e.prototype.state__removeStates=function(e,t,n,r){var i=0;for(var s=0,o=t;s<o.length;s++){var u=o[s];for(var a=0,f=n;a<f.length;a++){var l=f[a];for(var c=0,h=r;c<h.length;c++){var p=h[c],d=this.getUserState(u,l,p);d.valueObject.time&&(delete d.valueObject.value,delete d.valueObject.time,++i)}}}return i},e.prototype.user__getByUsername=function(e,t){var n=this.me;return n&&n.username?n:null},e.prototype.user__listByUsernames=function(e,t){var n=this.me;return n&&t.includes(n.username)?[n]:[]},e.prototype.user__getWallet=function(e){var t=this,n=this.requireLogin();return this.score__listCurrencyScores(e).then(function(e){var r=0;return e.forEach(function(e){r+=e.score*e.scoreMode.toDollarRate}),{_result_:[e.map(function(e){return Object.assign({},e)}),n.valueObject,r,t._gltPoints]}})},e.prototype.user__getReview=function(e){return null},e}(),t("OfflineDatabase",c)}}}),System.register("GLT/components/loadingDialog",[],function(t,n){"use strict";function o(t){r?r.setMessage(t):e.ReactMaterial.dialogs.openLoadingDialog({message:t,getInstance:function(e){return r=e},transition:{"class":MaterialUI.Fade,duration:250}})}function u(){r&&(r.close(),r=null)}var r,i=n&&n.id,s=n&&n.id;return t("showLoading",o),t("hideLoading",u),{setters:[],execute:function(){}}}),function(){CgLibs.bootLib("GLT/index",["GLT/index","GLT/commands/types/ItemStatus","GLT/commands/itemService","GLT/commands/userService","GLT/commands/types/BadgeStatus","GLT/commands/badgeService","GLT/commands/types/SubmitType","GLT/commands/clientService","GLT/commands/stateService","GLT/commands/gmService","GLT/commands/JsonRpcCommand","GLT/commands/types/OrderType","GLT/commands/types/TimeRange","GLT/commands/systemService","GLT/commands/scoreService","GLT/utils/ClientEventEmitter","GLT/commands/transactionService","GLT/commands/types/TransactionCategory","GLT/Client","GLT/auth/authManager","GLT/commands/vo/Item","GLT/commands/vo/User","GLT/commands/vo/UserWallet","GLT/commands/vo/Badge","GLT/commands/vo/UserReview","GLT/commands/vo/UserRecord","GLT/events/ClientEvents","GLT/commands/vo/UserState","GLT/commands/vo/UserIpRecord","GLT/commands/vo/GmRecord","GLT/commands/vo/UserScore","GLT/commands/types/GMAction","GLT/utils/http","GLT/utils/OfflineHttp","GLT/utils/GzipUtil","GLT/components/alertDialog","GLT/utils/AuthListener","GLT/utils/CryptoJSAesJson","GLT/commands/vo/Transaction","GLT/auth/loginWindow","GLT/commands/vo/AbstractVo","GLT/commands/types/MoneyCurrency","GLT/utils/OfflineDatabase","GLT/components/loadingDialog"])}()}};CgLibs.bootModule('GLT')},function(){CgLibs.modules.Server={boot:function(e){System.register("Server/index",["./events/actions/ShowBackpack.action","./events/actions/ShowItemStore.action","./translations/index","./components/BroadcastAnnouncement","./events/actions/ShowBadgeList.action","./events/actions/ShowHighscoresBoard.action","./events/actions/AwardBadge.action","./events/actions/HideAuthPanel.action","./events/actions/ShowAuthPanel.action","./events/actions/SubmitScore.action","./events/triggers/PlayerLeft.trigger","./events/triggers/PlayerJoined.trigger","./events/eventStarter","./events/definitions/ServerConfig.definition","./components/SubmitScoreDialog","./messages/vo/Gameroom","./messages/vo/Player","./messages/filters/PropFilter","./messages/MsgServer","./components/HighScoreBoard","./components/AuthPanel","./messages/managers/GameroomManager","./messages/managers/WatchroomManager","./messages/managers/GamezoneManager","./events/actions/AwardStoreItem.action","./components/gmtools/GMToolsDialog","./utils/SpeederDetector","./events/actions/SetUserState.action","./events/actions/GetUserState.action"],function(t,n){"use strict";function j(t){e.GLT.auth.onReady(t)}function F(t){return e.GLT.auth.onAuth(t)}function I(e){var t=!1;return j(function(n){t=!0,e(n)}),F(function(n){t&&e(n)})}var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H=n&&n.id,B=n&&n.id;return t("onReady",j),t("onAuth",F),t("onReadyAndAuth",I),{setters:[function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e},function(e){a=e},function(e){f=e},function(e){l=e},function(e){c=e},function(e){h=e},function(e){p=e},function(e){d=e},function(e){v=e},function(e){m=e},function(e){g=e},function(e){y=e},function(e){b=e},function(e){w=e},function(e){E=e},function(e){S=e},function(e){x=e},function(e){T=e},function(e){N=e},function(e){C=e},function(e){k=e},function(e){L=e},function(e){A=e},function(e){O=e},function(e){M=e}],execute:function(){_=function(){function e(){b.Player,y.Gameroom,x.AuthPanel,g.SubmitScoreDialog,S.HighScoreBoard,T.GameroomManager,N.WatchroomManager,w.PropFilter,m.ServerConfigDef,C.GamezoneManager,L.GMToolsDialog,A.SpeederDetector,v.initEventStarter(),s.server_trans_all}return e}(),e.Base.linkCSSFile(e.Base.getAppSourceUrl("CG.Server/styles.css")),t("client",D=e.GLT.client),t("msg",P=new E.MsgServer),o.listenToProjectBoradcast(),new _,e.CgEventsEngine.registerAction(c.ShowAuthPanelAction),e.CgEventsEngine.registerAction(l.HideAuthPanelAction),e.CgEventsEngine.registerAction(f.AwardBadgeAction),e.CgEventsEngine.registerAction(h.SubmitScoreAction),e.CgEventsEngine.registerAction(a.ShowHighscoresBoardAction),e.CgEventsEngine.registerAction(u.ShowBadgeListAction),e.CgEventsEngine.registerAction(i.ShowItemStoreAction),e.CgEventsEngine.registerAction(r.ShowBackpackAction),e.CgEventsEngine.registerAction(k.AwardStoreItemAction),e.CgEventsEngine.registerAction(O.SetUserStateAction),e.CgEventsEngine.registerAction(M.GetUserStateAction),e.CgEventsEngine.registerTrigger(d.PlayerJoinedTrigger),e.CgEventsEngine.registerTrigger(p.PlayerLeftTrigger)}}}),System.register("Server/events/actions/ShowItemStore.action",["./../../components/ItemStoreDialog"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a=n&&n.id,f=n&&n.id;return{setters:[function(e){o=e}],execute:function(){i=e.Base.utils.ObjectUtil,s=e.ReactMaterial.actions.BaseDialogAction,u=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),t.prototype.prepare=function(){var e={dialogId:this.dialogId};return{json:i.removeKeysWithSameValue(e,this.json)}},t.prototype.execute=function(e){i.safeAssign(this.json,e.json),o.showItemStore(null,this.generateDialogOptions(this.dialogId))},t.TYPE="ShowItemStore",t}(s),t("ShowItemStoreAction",u)}}}),System.register("Server/translations/index",["./trans.en","./trans.zh"],function(t,n){"use strict";var r,i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[function(e){i=e},function(e){s=e}],execute:function(){r=e.Base.locales.LANG,s.tw_trans_zh,i.tw_trans_en,e.Base.translation.setLanguage(e.Base.locales.getPreferedLanguage([r.ZH,r.EN])),t("server_trans_all",o=2)}}}),System.register("Server/events/actions/ShowHighscoresBoard.action",["./../../components/HighScoreBoard"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f=n&&n.id,l=n&&n.id;return{setters:[function(e){u=e}],execute:function(){i=e.GLT.commands.types.OrderType,s=e.Base.utils.ObjectUtil,o=e.ReactMaterial.actions.BaseDialogAction,a=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"scoreKey",{get:function(){return this.getString(this.json.scoreKey)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orderType",{get:function(){return this.getInt(this.json.orderType)},enumerable:!0,configurable:!0}),t.prototype.prepare=function(){var e={dialogId:this.dialogId,scoreKey:this.scoreKey,orderType:this.orderType};return{json:s.removeKeysWithSameValue(e,this.json)}},t.prototype.execute=function(e){s.safeAssign(this.json,e.json),u.showHighScoreBoard(this.scoreKey,i.getByValue(this.orderType),undefined,undefined,this.generateDialogOptions(this.dialogId))},t.TYPE="ShowHighscoresBoard",t}(o),t("ShowHighscoresBoardAction",a)}}}),System.register("Server/events/actions/ShowBackpack.action",["./../../components/BackpackDialog"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a=n&&n.id,f=n&&n.id;return{setters:[function(e){i=e}],execute:function(){s=e.Base.utils.ObjectUtil,o=e.ReactMaterial.actions.BaseDialogAction,u=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),t.prototype.prepare=function(){var e={dialogId:this.dialogId};return{json:s.removeKeysWithSameValue(e,this.json)}},t.prototype.execute=function(e){s.safeAssign(this.json,e.json),i.showBackpack(null,this.generateDialogOptions(this.dialogId))},t.TYPE="ShowBackpack",t}(o),t("ShowBackpackAction",u)}}}),System.register("Server/events/actions/ShowBadgeList.action",["./../../components/BadgeListDialog"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a=n&&n.id,f=n&&n.id;return{setters:[function(e){i=e}],execute:function(){s=e.ReactMaterial.actions.BaseDialogAction,o=e.Base.utils.ObjectUtil,u=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"username",{get:function(){return this.getString(this.json.username)},enumerable:!0,configurable:!0}),t.prototype.prepare=function(){var e={dialogId:this.dialogId,username:this.username};return{json:o.removeKeysWithSameValue(e,this.json)}},t.prototype.execute=function(e){o.safeAssign(this.json,e.json);var t=this.event.manager.socketClient.getPlayer;i.showBadgeList(this.username,this.generateDialogOptions(this.dialogId))},t.TYPE="ShowBadgeList",t}(s),t("ShowBadgeListAction",u)}}}),System.register("Server/events/actions/AwardBadge.action",["./../../utils/DialogQueue"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a=n&&n.id,f=n&&n.id;return{setters:[function(e){o=e}],execute:function(){i=e.ReactMaterial.actions.BaseDialogAction,s=e.Base.utils.ObjectUtil,u=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return r(n,t),Object.defineProperty(n.prototype,"playerId",{get:function(){return this.getString(this.json.playerId)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"badgeCode",{get:function(){return this.getString(this.json.badgeCode)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"soundAlias",{get:function(){return this.getString(this.json.soundAlias)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"delayDialog",{get:function(){return this.getInt(this.json.delayDialog)},enumerable:!0,configurable:!0}),n.prototype.prepare=function(){var e={dialogId:this.dialogId,playerId:this.playerId,badgeCode:this.badgeCode,soundAlias:this.soundAlias,delayDialog:this.delayDialog};return{json:s.removeKeysWithSameValue(e,this.json)}},n.prototype.getDialogOptions=function(e,n){var r=t.prototype.generateDialogOptions.call(this,e);return r.titleCloseButton=!1,r.onRootClick=function(e,t){t.close()},r},n.prototype.execute=function(t){var n=this;s.safeAssign(this.json,t.json);if(this.playerId=="*"||this.playerId==this.event.manager.socketClient.getMe().id)return e.GLT.commands.badgeService.awardBadge(this.badgeCode,function(t){e.Base.wait(n.delayDialog).then(function(){o.dialogQueue.pushAwardGameBadgeDialog({soundAlias:n.soundAlias,gameBadge:t.gameBadge,options:n.getDialogOptions(n.dialogId,t)})})},function(e){console.error("Award Badge failed",e)}).submit()},n.TYPE="AwardBadge",n}(i),t("AwardBadgeAction",u)}}}),System.register("Server/events/actions/SubmitScore.action",["./../../components/SubmitScoreDialog"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l=n&&n.id,c=n&&n.id;return{setters:[function(e){u=e}],execute:function(){i=e.ReactMaterial.actions.BaseDialogAction,s=e.GLT.commands.types.OrderType,o=e.GLT.commands.types.SubmitType,a=e.Base.utils.ObjectUtil,f=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"playerId",{get:function(){return this.getString(this.json.playerId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreKey",{get:function(){return this.getString(this.json.scoreKey)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"score",{get:function(){return this.getInt(this.json.score)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"submitType",{get:function(){return this.getInt(this.json.submitType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showDialog",{get:function(){return this.getBoolean(this.json.showDialog)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.getString(this.json.title)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.getString(this.json.message)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"confirmLabel",{get:function(){return this.getString(this.json.confirmLabel)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orderType",{get:function(){return this.getInt(this.json.orderType)},enumerable:!0,configurable:!0}),t.prototype.prepare=function(){var e={dialogId:this.dialogId,playerId:this.playerId,scoreKey:this.scoreKey,score:this.score,submitType:this.submitType};return this.showDialog&&Object.assign(e,{title:this.title,message:this.message,orderType:this.orderType,confirmLabel:this.confirmLabel}),{json:a.removeKeysWithSameValue(e,this.json)}},t.prototype.generateDialogOptions=function(t){var n=e.prototype.generateDialogOptions.call(this,t);return this.showDialog&&Object.assign(n,{message:this.message,confirmLabel:this.confirmLabel}),n},t.prototype.execute=function(e){a.safeAssign(this.json,e.json);if(this.playerId==this.event.manager.socketClient.getMe().id){var t=this.dialogId,n=o.getByValue(this.submitType);u.showSubmitScoreDialog(this.title,this.scoreKey,this.score,n,s.getByValue(this.orderType),!this.showDialog,this.generateDialogOptions(t))}},t.TYPE="SubmitScore",t}(i),t("SubmitScoreAction",f)}}}),System.register("Server/events/actions/ShowAuthPanel.action",["./../../components/AuthPanel"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[function(e){i=e}],execute:function(){s=e.CgEventsEngine.CgAction,o=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),t.prototype.prepare=function(){return{}},t.prototype.execute=function(e){i.showAuthPanel()},t.TYPE="ShowAuthPanel",t}(s),t("ShowAuthPanelAction",o)}}}),System.register("Server/events/actions/HideAuthPanel.action",["./../../components/AuthPanel"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[function(e){i=e}],execute:function(){s=e.CgEventsEngine.CgAction,o=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),t.prototype.prepare=function(){return{}},t.prototype.execute=function(e){i.hideAuthPanel()},t.TYPE="HideAuthPanel",t}(s),t("HideAuthPanelAction",o)}}}),System.register("Server/events/triggers/PlayerJoined.trigger",["./../../messages/events/GameroomManagerEvent","./../SocketClient"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a=n&&n.id,f=n&&n.id;return{setters:[function(e){i=e},function(e){s=e}],execute:function(){o=e.CgEventsEngine.CgTrigger,u=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return r(n,t),n.prototype.setupListeners=function(){var t=this,n=this.event.manager.socketClient;n.roomManager?this.setRoomManager(n.roomManager):e.Base.wait(10).then(function(){t.setLocalVar(t.playerLocal,n.getMe()),t.trigger()})},n.prototype.removeListeners=function(){this.roomManager&&this.roomManager.off(i.GMPlayerJoinedEvent.TYPE,this.onPlayerJoined,this)},n.prototype.setRoomManager=function(t){var n=this;this.roomManager=t,this.roomManager.on(i.GMPlayerJoinedEvent.TYPE,this.onPlayerJoined,this);var r=this.roomManager.roomFull.room.creator;r.isMe()&&e.Base.wait(10).then(function(){n.roomManager.players.forEach(function(e){n.setLocalVar(n.playerLocal,s.playerToCgEventsPlayer(e)),n.trigger()})})},n.prototype.onPlayerJoined=function(e){this.setLocalVar(this.playerLocal,s.playerToCgEventsPlayer(e.player)),this.trigger()},Object.defineProperty(n.prototype,"playerLocal",{get:function(){return this.getString(this.json.playerLocal)},enumerable:!0,configurable:!0}),n.TYPE="PlayerJoined",n}(o),t("PlayerJoinedTrigger",u)}}}),System.register("Server/events/triggers/PlayerLeft.trigger",["./../../messages/events/GameroomManagerEvent"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a=n&&n.id,f=n&&n.id;return{setters:[function(e){s=e}],execute:function(){i=e.CgEventsEngine.utils.ElementUtil,o=e.CgEventsEngine.CgTrigger,u=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),t.prototype.setupListeners=function(){var e=this.event.manager.socketClient;e.roomManager&&this.setRoomManager(e.roomManager)},t.prototype.removeListeners=function(){this.roomManager&&this.roomManager.off(s.GMPlayerLeftEvent.TYPE,this.onPlayerJoined,this)},t.prototype.setRoomManager=function(e){this.roomManager=e,this.roomManager.on(s.GMPlayerLeftEvent.TYPE,this.onPlayerJoined,this)},t.prototype.onPlayerJoined=function(e){i.matchStringOrRegexp(e.playerCode,this.playerId)&&(this.setLocalVar(this.playerIdLocal,e.playerCode),this.trigger())},Object.defineProperty(t.prototype,"playerId",{get:function(){return this.getString(this.json.playerId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playerIdLocal",{get:function(){return this.getString(this.json.playerIdLocal)},enumerable:!0,configurable:!0}),t.TYPE="PlayerLeft",t}(o),t("PlayerLeftTrigger",u)}}}),System.register("Server/events/eventStarter",["./../messages/filters/PropFilter","./../components/AuthPanel","./../messages/managers/GameroomManager","./../messages/vo/Gameroom","./definitions/ServerConfig.definition","./../messages/events/MsgServerEvent","./../index","./../messages/managers/AbstractRoomManager"],function(t,n){"use strict";function d(){a.addConfigProcessor(function(t){var n=t.getConfig(u.ServerConfigDef);return n&&n.supportSignin?(i.showAuthPanel({mustLogin:n.mustLogin||n.supportMsgServer,disableGuest:!n.allowGuest}),n.supportMsgServer?v().then(function(){return i.hideAuthPanel(),m(n.gamezoneCode,n.roomSize)}).then(function(e){var r=new s.GameroomManager;return r.roomType=c.GameroomType.getByCode(n.roomType)||c.GameroomType.OPEN,r.initialize().then(function(){return r.syncEventsManager(t)})}):new Promise(function(t){e.GLT.auth.onReady(function(r){if(!n.mustLogin||!r.isLocalGuest())n.mustLogin&&i.hideAuthPanel(),t();else var s=e.GLT.auth.onAuth(function(e){if(!n.mustLogin||!e.isLocalGuest())n.mustLogin&&i.hideAuthPanel(),s.dispose(),t()})})})):Promise.resolve()})}function v(){return new Promise(function(e){if(l.msg.initialized){if(l.msg.myPlayer){e();return}}else l.msg.initialize();l.msg.once(f.LoginEvent.TYPE,function(){e()})})}function m(t,n){return console.log("findAndJoinRoom"),l.msg.gameroomService.listRooms(t,30,r.PropFilter.equal("state",o.GameroomState.OPEN.value)).then(function(r){var i=r.find(function(e){return e.status.players<e.room.maxPlayers});return i?(console.log("joinRoom"),l.msg.gameroomService.joinRoom(i.room.code)):(console.log("creatRoom"),l.msg.gameroomService.createRoom(t,e.GLT.client.user.username,n,null,o.GameroomState.OPEN,{}))})}var r,i,s,o,u,a,f,l,c,h=n&&n.id,p=n&&n.id;return t("initEventStarter",d),{setters:[function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e},function(e){f=e},function(e){l=e},function(e){c=e}],execute:function(){a=e.CgEventsEngine.CgEventManager}}}),System.register("Server/messages/vo/Gameroom",["./Player"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l,c,h,p=n&&n.id,d=n&&n.id;return{setters:[function(e){s=e}],execute:function(){i=e.Base.utils.ArrayUtil,o=e.GLT.commands.vo.AbstractVo,u=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onVoReset=function(){this._creator=null,this._createTime=null},Object.defineProperty(t.prototype,"code",{get:function(){return this._vo.code},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"creator",{get:function(){return this._creator||(this._creator=new s.Player(this._vo.creator)),this._creator},set:function(e){this._creator=e,this._vo.creator=this._creator.valueObject},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._vo.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoneCode",{get:function(){return this._vo.zoneCode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxPlayers",{get:function(){return this._vo.maxPlayers},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowGuest",{get:function(){return this._vo.allowGuest},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"createTime",{get:function(){return this._createTime||(this._createTime=new Date(this._vo.createTime*1e3)),this._createTime},enumerable:!0,configurable:!0}),t.prototype.hasPassword=function(){return!!this._vo.pwd},t}(o),t("Gameroom",u),a={},f=function(){function e(e,t){this._value=e,this._name=t,a[e]=this}return e.getByValue=function(e){return a[e]},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.OPEN=new e(0,"open"),e.LOCKED=new e(1,"locked"),e.OVER=new e(2,"over"),e}(),t("GameroomState",f),l=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onVoReset=function(){this._state=null},Object.defineProperty(t.prototype,"state",{get:function(){return this._state||(this._state=f.getByValue(this._vo.state)),this._state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"players",{get:function(){return this._vo.players},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stateJson",{get:function(){return this._vo.stateJson},enumerable:!0,configurable:!0}),t}(o),t("GameroomStatus",l),c=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onVoReset=function(){this._room=null,this._status=null},Object.defineProperty(t.prototype,"room",{get:function(){return this._room||(this._room=new u(this._vo.room)),this._room},set:function(e){this._room=e,this._vo.room=this._room.valueObject},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._status||(this._status=new l(this._vo.status)),this._status},set:function(e){this._status=e,this._vo.status=this._status.valueObject},enumerable:!0,configurable:!0}),t}(o),t("GameroomAndStatus",c),h=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"brainer",{get:function(){return this._vo.brainer},set:function(e){this._vo.brainer=e},enumerable:!0,configurable:!0}),t.prototype.getPlayerStates=function(e){return this._vo.playerStates[e]},t.prototype.getPlayerState=function(e,t){var n=this.getPlayerStates(e);return n&&n[t]},t.prototype.setPlayerState=function(e,t,n){var r=this.getPlayerStates(e);r||(this._vo.playerStates[e]=r={}),r[t]=n},t.prototype.clearPlayerStates=function(e){this.getPlayerStates(e)&&(this._vo.playerStates[e]={})},t.prototype.listPlayerCodes=function(){return i.listKeysOfObject(this._vo.playerStates)},t}(c),t("GameroomFull",h)}}}),System.register("Server/messages/vo/Player",["./Gameroom"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f=n&&n.id,l=n&&n.id;return{setters:[function(e){i=e}],execute:function(){s=e.GLT.commands.vo.User,o=e.GLT.commands.vo.AbstractVo,u=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return r(n,t),n.prototype.onVoReset=function(){this._user=null},Object.defineProperty(n.prototype,"code",{get:function(){return this._vo.code},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"user",{get:function(){return this._user||(this._user=new s(this._vo.user)),this._user},set:function(e){this._user=e,this._vo.user=this._user.valueObject},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"networkDelay",{get:function(){return this._vo.networkDelay},set:function(e){this._vo.networkDelay=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"offline",{get:function(){return!!this._vo.offline},enumerable:!0,configurable:!0}),n.prototype.isMe=function(){return e.GLT.client.isMe(this.user.username)},n}(o),t("Player",u),a=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onVoReset=function(){this._gameroom=null},Object.defineProperty(t.prototype,"gameroom",{get:function(){return this._gameroom||(this._gameroom=new i.Gameroom(this._vo.gameroom)),this._gameroom},set:function(e){this._gameroom=e,this._vo.gameroom=this._gameroom.valueObject},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"networkDelay",{get:function(){return this._vo.networkDelay},enumerable:!0,configurable:!0}),t}(o),t("PlayerStatus",a)}}}),System.register("Server/events/definitions/ServerConfig.definition",[],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o=n&&n.id,u=n&&n.id;return{setters:[],execute:function(){i=e.CgEventsEngine.CgDefinition,s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"supportSignin",{get:function(){return this.getBoolean(this.json.supportSignin)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mustLogin",{get:function(){return this.getBoolean(this.json.mustLogin)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowGuest",{get:function(){return this.getBoolean(this.json.allowGuest)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supportMsgServer",{get:function(){return this.getBoolean(this.json.supportMsgServer)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gamezoneCode",{get:function(){return this.getString(this.json.gamezoneCode)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"roomType",{get:function(){return this.getString(this.json.roomType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"roomSize",{get:function(){return this.getInt(this.json.roomSize)},enumerable:!0,configurable:!0}),t.TYPE="ServerConfig",t}(i),t("ServerConfigDef",s)}}}),System.register("Server/messages/filters/PropFilter",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){n=function(){function e(){}return e.or=function(e){return{type:"or",data:e}},e.and=function(e){return{type:"and",data:e}},e.not=function(e){return{type:"not",data:e}},e.exist=function(e){return{type:"exist",prop:e}},e.empty=function(e){return{type:"empty",prop:e}},e.equal=function(e,t){return{type:"equal",prop:e,data:t}},e.include=function(e,t){return{type:"include",prop:e,data:t}},e.exclude=function(e,t){return{type:"exclude",prop:e,data:t}},e.range=function(e,t,n){return{type:"range",prop:e,data:{min:t,max:n}}},e.match=function(e,t){return{type:"match",prop:e,data:t}},e}(),e("PropFilter",n)}}}),System.register("Server/messages/managers/GameroomManager",["../events/GameroomManagerEvent","../services/GameroomService","../events/MsgServerEvent","../../index","../vo/Gameroom","./AbstractRoomManager"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l,c,h,p,d,v,m,g,y=n&&n.id,b=n&&n.id;return{setters:[function(e){u=e},function(e){a=e},function(e){f=e},function(e){l=e},function(e){c=e},function(e){h=e}],execute:function(){i=e.GLT.commands.types.TimeRange,s=e.GLT.commands.types.SubmitType,o=e.Base.utils.ArrayUtil,p=function(e){function t(t){var n=e.call(this,t)||this;return n._playersIncludingLeft=[],n._roomDataProcessors=[],n}return r(t,e),t.prototype.initialize=function(){var e=this;return this._roomFull?Promise.reject("Already initialized."):(this._roomFull=l.msg.gameroomService.myRoomFull,this._roomFull?(this.scoreManager=new g(this),this.scoreManager.start(),this._roomDataProcessors.push(this.scoreManager),this.watchZoneCode=h.getWatchroomCode(this._roomFull.room.code),l.msg.on(f.PlayerJoinedRoomEvent.TYPE,this.onPlayerJoined,this),l.msg.on(f.PlayerLeftRoomEvent.TYPE,this.onPlayerLeft,this),l.msg.gameroomService.on(a.GameroomService.EVENT.I_LEFT_ROOM,this.onILeftRoom,this),l.msg.on(f.RoomStatusChangedEvent.TYPES.MY_ROOM_STATUS_CHANGED,this.onRoomStatusChanged,this),l.msg.on(f.RoomBrainerChangedEvent.TYPES.MY_ROOM_BRAINER_CHANGED,this.onBrainerChanged,this),l.msg.on(f.RoomPlayerStateChangedEvent.TYPES.MY_ROOM_PLAYER_STATE_CHANGED,this.onPlayerStateChanged,this),l.msg.on(f.RoomPlayerSyncedChangedEvent.TYPES.MY_ROOM_PLAYER_SYNCED_CHANGED,this.onPlayerSyncedChanged,this),l.msg.on(f.BroadcastEvent.TYPES.BROADCAST_IN_ROOM,this.onDataInRoomReceived,this),l.msg.on(f.BroadcastEvent.TYPES.BROADCAST_TO_ROOM,this.onDataToRoomReceived,this),l.msg.on(f.DataToRoommateEvent.TYPE,this.onDataToRoommateReceived,this),l.msg.on(f.DataToRoomDecisionmakerEvent.TYPE,this.onDataToDecisionmakerReceived,this),l.msg.gameroomService.listPlayersInRoom().then(function(t){t.forEach(function(t){e.mergePlayer(t,e._players),e.mergePlayer(t,e._playersIncludingLeft)})})):Promise.reject("Not in a gameroom."))},t.prototype.dispose=function(){l.msg.off(f.PlayerJoinedRoomEvent.TYPE,this.onPlayerJoined,this),l.msg.off(f.PlayerLeftRoomEvent.TYPE,this.onPlayerLeft,this),l.msg.gameroomService.off(a.GameroomService.EVENT.I_LEFT_ROOM,this.onILeftRoom,this),l.msg.off(f.RoomStatusChangedEvent.TYPES.MY_ROOM_STATUS_CHANGED,this.onRoomStatusChanged,this),l.msg.off(f.RoomBrainerChangedEvent.TYPES.MY_ROOM_BRAINER_CHANGED,this.onBrainerChanged,this),l.msg.off(f.RoomPlayerStateChangedEvent.TYPES.MY_ROOM_PLAYER_STATE_CHANGED,this.onPlayerStateChanged,this),l.msg.off(f.RoomPlayerSyncedChangedEvent.TYPES.MY_ROOM_PLAYER_SYNCED_CHANGED,this.onPlayerSyncedChanged,this),l.msg.off(f.BroadcastEvent.TYPES.BROADCAST_IN_ROOM,this.onDataInRoomReceived,this),l.msg.off(f.BroadcastEvent.TYPES.BROADCAST_TO_ROOM,this.onDataToRoomReceived,this),l.msg.off(f.DataToRoommateEvent.TYPE,this.onDataToRoommateReceived,this),l.msg.off(f.DataToRoomDecisionmakerEvent.TYPE,this.onDataToDecisionmakerReceived,this),this.scoreManager.dispose(),e.prototype.dispose.call(this)},t.prototype.leaveRoomAndDispose=function(){var e=this;return this.roomFull.room.code==l.msg.gameroomService.myRoomCode?l.msg.gameroomService.leaveRoom().catch(function(e){}).then(function(){e.dispose()}):(this.dispose(),Promise.resolve())},t.prototype.setMyPlayerState=function(e,t){return l.msg.gameroomService.setRoomPlayerState(e,t)},t.prototype.setMyPlayerSynced=function(e,t){return l.msg.gameroomService.setRoomPlayerSynced(e,t)},t.prototype.isPlayerSynced=function(e){return this.roomFull.getPlayerState(e.code,"synced")},t.prototype.areAllPlayersSynced=function(){var e=this;return!this.players.find(function(t){return!e.isPlayerSynced(t)})},t.prototype.sendDataInRoom=function(e){return l.msg.gameroomService.broadcastInRoom(e)},t.prototype.sendDataToRoommate=function(e,t){return l.msg.gameroomService.sendDataToRoommate(e,t)},Object.defineProperty(t.prototype,"isThisDecisionMaker",{get:function(){return l.msg.myPlayer&&this._roomFull.brainer==l.msg.myPlayer.code},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playersIncludingLeft",{get:function(){return this._playersIncludingLeft},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"roomFull",{get:function(){return this._roomFull},enumerable:!0,configurable:!0}),t.prototype.onILeftRoom=function(e){e==this.roomFull.room.code&&(this.dispatchEvent(new u.GMEvent(u.GMEvent.TYPES.I_LEFT_ROOM)),this.dispose())},t.prototype.setRoomState=function(e,t){return l.msg.gameroomService.setRoomState(e,t)},t.prototype.setRoomStateJson=function(e){return l.msg.gameroomService.setRoomStateJson(e)},t.prototype.lockRoomAndSyncPlayerState=function(e,t,n){t===void 0&&(t="_lockGmReady"),n===void 0&&(n=!0);var r=[];return this.isThisDecisionMaker&&(this.setRoomState(c.GameroomState.LOCKED),n&&r.push(l.msg.gameroomService.updateRoomBrainer())),r.push(this.syncPlayerState(t,e)),Promise.all(r)},t.prototype.syncPlayerState=function(e,t){var n=new v(this,e,t);return this.registerDataProcessor(n),n.start()},t.prototype.setFinalScore=function(e,t,n,r){return this.scoreManager.setFinalScore(e,t,n,r)},t.prototype.getFinalScore=function(e,t){return this.scoreManager.getFinalScore(e,t)},t.prototype.isFinalScoreSet=function(e,t){return this.scoreManager.isFinalScoreSet(e,t)},t.prototype.registerDataProcessor=function(e){var t=this;this._roomDataProcessors.push(e),e.onDisposed(function(){return o.removeElement(t._roomDataProcessors,e)})},t.prototype.onPlayerJoined=function(e){e.roomCode==this.roomFull.room.code&&(this.mergePlayer(e.player,this._players),this.mergePlayer(e.player,this._playersIncludingLeft),this.dispatchEvent(new u.GMPlayerJoinedEvent(e.player)),this.isThisDecisionMaker&&this._sendDataToWatchers(e.player.valueObject,u.GMDataReceivedEvent.ROUTE.ROOM_TO_WATCHERS,u.GMPlayerJoinedEvent.TYPE))},t.prototype.onPlayerLeft=function(e){var t=this._players.findIndex(function(t){return t.code==e.playerCode});t!=-1&&(this._players.splice(t,1),this.dispatchEvent(new u.GMPlayerLeftEvent(e.playerCode)),this.isThisDecisionMaker&&this._sendDataToWatchers(e.playerCode,u.GMDataReceivedEvent.ROUTE.ROOM_TO_WATCHERS,u.GMPlayerLeftEvent.TYPE))},t.prototype.onPlayerStateChanged=function(e){this.dispatchEvent(new u.GMPlayerStateChangedEvent(e.playerCode,e.key,e.value)),this.isThisDecisionMaker&&this._sendDataToWatchers({playerCode:e.playerCode,key:e.key,value:e.value},u.GMDataReceivedEvent.ROUTE.ROOM_TO_WATCHERS,u.GMPlayerStateChangedEvent.TYPE)},t.prototype.onPlayerSyncedChanged=function(e){this.dispatchEvent(new u.GMPlayerSyncedChangedEvent(e.playerCode,e.synced,e.brainerCode)),this.isThisDecisionMaker&&this._sendDataToWatchers({playerCode:e.playerCode,synced:e.synced,brainerCode:e.brainerCode},u.GMDataReceivedEvent.ROUTE.ROOM_TO_WATCHERS,u.GMPlayerSyncedChangedEvent.TYPE)},t.prototype.onRoomStatusChanged=function(e){this.dispatchEvent(new u.GMRoomStatusChangedEvent(e.zoneCode,e.roomCode,e.status)),this._roomFull&&this._roomFull.room.code==e.roomCode&&Object.assign(this._roomFull.status.valueObject,e.status.valueObject),this.isThisDecisionMaker&&this._sendDataToWatchers({roomCode:e.roomCode,status:e.status.valueObject},u.GMDataReceivedEvent.ROUTE.ROOM_TO_WATCHERS,u.GMRoomStatusChangedEvent.TYPE)},t.prototype.onBrainerChanged=function(e){this.dispatchEvent(new u.GMEvent(u.GMEvent.TYPES.BRAINER_CHANGED))},t.prototype.onDataInRoomReceived=function(e){if(e.data&&e.data.type&&this._roomDataProcessors.find(function(t){return t.processRoomData(e)}))return;this.dispatchEvent(new u.GMDataReceivedEvent(e.senderCode,e.data,u.GMDataReceivedEvent.ROUTE.BROADCAST_IN_ROOM))},t.prototype.onDataToRoomReceived=function(e){e.roomCode==this._roomFull.room.code&&(e.data&&e.data.route&&e.data.data!==undefined?this.dispatchEvent(new u.GMDataReceivedEvent(e.senderCode,e.data.data,e.data.route)):this.dispatchEvent(new u.GMDataReceivedEvent(e.senderCode,e.data,u.GMDataReceivedEvent.ROUTE.BROADCAST_TO_ROOM)))},t.prototype.onDataToRoommateReceived=function(e){if(e.roomCode==this._roomFull.room.code){var t=new u.GMDataReceivedEvent(e.senderCode,e.data,u.GMDataReceivedEvent.ROUTE.BETWEEN_ROOMMATES);this.dispatchEvent(t),e.response=t.response}},t.prototype.onDataToDecisionmakerReceived=function(e){if(e.roomCode==this._roomFull.room.code){var t=new u.GMDataReceivedEvent(e.senderCode,e.data,u.GMDataReceivedEvent.ROUTE.TO_DECISIONMAKER);this.dispatchEvent(t),e.response=t.response}},t.prototype.syncEventsManager=function(t){return this.on(u.GMDataReceivedEvent.TYPE,function(e){e.route==u.GMDataReceivedEvent.ROUTE.TO_DECISIONMAKER&&e.data.type=="CgEventManagerSync"&&(e.response={data:t.exportSyncJson()})}),e.prototype.syncEventsManager.call(this,t)},t}(h.AbstractRoomManager),t("GameroomManager",p),d=function(){function e(e){this.manager=e,this.disposeCallbacks=[]}return e.prototype.start=function(){var e=this;return new Promise(function(t,n){e.resolve=t,e.reject=n,e._start()})},e.prototype._start=function(){},e.prototype.processRoomData=function(e){return!1},e.prototype.onDisposed=function(e){this.disposeCallbacks.push(e)},e.prototype.dispose=function(){var e=this;this.disposeCallbacks.forEach(function(t){return t(e)})},e.prototype.doReject=function(e){this.dispose(),this.reject(e)},e}(),v=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.key=n,i.value=r,i}return r(t,e),t.prototype._start=function(){l.msg.on(f.RoomPlayerStateChangedEvent.TYPES.MY_ROOM_PLAYER_STATE_CHANGED,this.checkReady,this),l.msg.on(f.PlayerLeftRoomEvent.TYPE,this.checkReady,this),l.msg.gameroomService.on(a.GameroomService.EVENT.I_LEFT_ROOM,this.onLeftRoom,this),l.msg.gameroomService.setRoomPlayerState(this.key,this.value)},t.prototype.dispose=function(){l.msg.off(f.RoomPlayerStateChangedEvent.TYPES.MY_ROOM_PLAYER_STATE_CHANGED,this.checkReady,this),l.msg.off(f.PlayerLeftRoomEvent.TYPE,this.checkReady,this),l.msg.gameroomService.off(a.GameroomService.EVENT.I_LEFT_ROOM,this.onLeftRoom,this),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"allReady",{get:function(){var e=this;return!this.manager.players.find(function(t){return e.manager.roomFull.getPlayerState(t.code,e.key)!==e.value})},enumerable:!0,configurable:!0}),t.prototype.checkReady=function(){this.manager.players.length?this.allReady&&(this.dispose(),this.resolve()):this.doReject("no player in room.")},t.prototype.onLeftRoom=function(e){e==this.manager.roomFull.room.code&&this.doReject("I left the room.")},t}(d),m="_setRoomPlayerFinalScore",g=function(t){function n(e){var n=t.call(this,e)||this;return n.scoresByMode={},n}return r(n,t),n.prototype.start=function(){return Promise.resolve()},n.prototype.dispose=function(){t.prototype.dispose.call(this)},n.prototype.setFinalScore=function(e,t,n,r){var o=this.manager.playersIncludingLeft.find(function(e){return e.code==t});return o?this.isFinalScoreSet(e,o.user.username)?!1:(r=r||{},this.manager.sendDataInRoom({type:m,key:e,score:n,player:o.code,submitType:(r.submitType||s.KEEP_HIGHEST).value,timeRange:(r.timeRange||i.WEEKLY).value}),!0):!1},n.prototype.getFinalScore=function(e,t){var n=this.scoresByMode[e];return n&&n[t]},n.prototype.isFinalScoreSet=function(e,t){var n=this.scoresByMode[e];return n&&n.hasOwnProperty(t)},n.prototype.processRoomData=function(t){if(t.data.type==m){var n=this.manager.playersIncludingLeft.find(function(e){return e.code==t.data.player});return this._setScore(t.data.key,n,t.data.score),n.isMe&&e.GLT.commands.scoreService.submitScore(t.data.key,t.data.score,s.getByValue(t.data.submitType)),!0}return!1},n.prototype._setScore=function(e,t,n){var r=this.scoresByMode[e];r||(this.scoresByMode[e]=r={}),r[t.user.username]=n,this.manager.dispatchEvent(new u.GMFinalScoreSetEvent(e,t,n))},n}(d)}}}),System.register("Server/messages/MsgServer",["./vo/Gamezone","./services/ClientService","./../index","./services/PlayerService","./services/GameroomService","./vo/Player","./events/MsgServerEvent"],function(t,n){"use strict";function y(e,t){t===void 0&&(t=""),console.log("["+e+"] "+t)}function b(e,t){t===void 0&&(t=""),console.error("["+e+"] "+t)}function w(e,t){return new l.Player({code:"~offline_"+s.generateRandomString(10,!0),user:e,networkDelay:30,offline:1})}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l,c,h,p,d,v,m=n&&n.id,g=n&&n.id;return{setters:[function(e){i=e},function(e){o=e},function(e){u=e},function(e){a=e},function(e){f=e},function(e){l=e},function(e){p=e}],execute:function(){s=e.Base.utils.systemRandomGenerator,c=e.Base.utils.ArrayUtil,h=e.GLT.commands.clientService,d={myDataRunInternal:!0},v=function(t){function n(){var e=t.call(this)||this;return e._networkDelayList=[],e._allowMaxOfflineDuration=3e4,e._offlineStart=0,e._netChecker={id:0,start:0,duration:1},e}return r(n,t),Object.defineProperty(n.prototype,"myPlayer",{get:function(){return this.me},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"initialized",{get:function(){return this._status=="initialized"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"initializing",{get:function(){return this._status=="initializing"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"initializeFailed",{get:function(){return this._status=="initializeFailed"},enumerable:!0,configurable:!0}),n.prototype.initialize=function(t){var n=this;return this.initialized?Promise.reject("MsgServer is already initialized"):this.initializing?Promise.reject("MsgServer is currently initializing"):new Promise(function(r,i){n.initializePromise={resolve:r,reject:i},n.options=Object.assign({},d),t&&Object.assign(n.options,t),n.options.myDataRunInternal=n.options.myDataRunInternal||n.options.offline,n._version=n.options.version||e.Base.buildName,n._status||(n.on("submitCommand",n.submitCommand,n),n.gameroomService=new f.GameroomService,n.gameroomService.initialize(n,n.options),n.playerService=new a.PlayerService,n.playerService.initialize(n,n.options),n.clientService=new o.ClientService,n.clientService.initialize(n,n.options)),n._status="initializing",e.GLT.auth.onReady(function(t,r){if(n.options.offline){e.Base.wait(1).then(function(){return n.startOffline(t,r)});return}h.getMsgServerUrl(function(i){n.url=i,n.connect(t,r),u.client.off(e.GLT.Client.EVENT.AUTH_CHANGED,n.onAuthChanged,n),u.client.on(e.GLT.Client.EVENT.AUTH_CHANGED,n.onAuthChanged,n)},function(e){console.error(e),i(e)}).submit()})})},n.prototype.startOffline=function(t,n){u.client.off(e.GLT.Client.EVENT.AUTH_CHANGED,this.onAuthChanged,this),u.client.off(e.GLT.Client.EVENT.AUTH_CHANGED,this.onAuthChangedOffline,this),u.client.on(e.GLT.Client.EVENT.AUTH_CHANGED,this.onAuthChangedOffline,this),this.emitEvent(new p.MsgServerOfflineEvent(p.MsgServerOfflineEvent.TYPES.CONNECT_OFFLINE,this.options.showOfflineAlert)),this.onInitialized(w(t,n))},n.prototype.onInitialized=function(e){if(this.initializePromise){this._status="initialized",this.me=e;var t=this.initializePromise.resolve;this.initializePromise=null,this.emitEvent(new p.LoginEvent(e)),this.emit(p.SocketEvent.TYPES.NETWORK_DELAY_UPDATED,e.networkDelay),t(e)}},n.prototype.onInitializeFailed=function(e,t){if(this.initializePromise){this._status="initializeFailed";var n=this.initializePromise.reject;this.initializePromise=null,b(e,t),n(t)}},n.prototype.onAuthChangedOffline=function(e,t){this.userToken!=t&&(this.me=w(e,t))},n.prototype.onAuthChanged=function(e,t){this.userToken!=t&&(this.disconnect(),this.connect(e,t))},n.prototype.connect=function(e,t){if(this.userToken=t)this.socket?this.socket.open():(this.socket=io(this.url+"/game",{forceNew:!0}),this.setupListeners(e,this.socket))},n.prototype.disconnect=function(){this.socket&&this.socket.disconnect(),this.userToken=null},Object.defineProperty(n.prototype,"maxOfflineDurationAllowed",{get:function(){return this._allowMaxOfflineDuration},enumerable:!0,configurable:!0}),n.prototype.setMaxOfflineDurationAllowed=function(e){this._allowMaxOfflineDuration=e},n.prototype.setupListeners=function(t,n){var r=this;n.on("connect",function(){y("socket connected",r.url),r._offlineStart=0,r.emitEvent(new p.SocketEvent(p.SocketEvent.TYPES.CONNECT,r.socket)),r.login().then(function(t){y("msgServer logged in: "+t.user.username),r.onInitialized(t),r.keepAliveUpdate(),r.isLocalhost()||r.watchOffline(),e.Base.system.devMode&&r.playerService.setDevMode(!0)}).catch(function(e){r.onInitializeFailed("failed to login",e)})}),n.on("disconnect",function(){b("socket disconnected",""),r.stopWatchOffline(),r.me=null,r._keepAliveObj&&(r._keepAliveObj.dispose(),r._keepAliveObj=null),r.emitEvent(new p.SocketEvent(p.SocketEvent.TYPES.DISCONNECT,r.socket))}),n.on("error",function(e){b("socket error",e),r.emitEvent(new p.SocketErrorEvent(p.SocketErrorEvent.TYPES.ERROR,r.socket,e))}),n.on("connect_error",function(e){r.isLocalhost()?(n.disconnect(),r.startOffline(t,r.userToken)):(r.emitEvent(new p.SocketErrorEvent(p.SocketErrorEvent.TYPES.CONNECT_ERROR,r.socket,e)),r.onInitializeFailed("socket connect_error",e))}),n.on("connect_timeout",function(e){r.emitEvent(new p.SocketErrorEvent(p.SocketErrorEvent.TYPES.CONNECT_TIMEOUT,r.socket,e)),r.onInitializeFailed("socket connect_timeout",e)}),n.on("gltmsg",function(e,t,n){r.onGltmsg(e,t,{respond:n})})},n.prototype.isLocalhost=function(){return this.url&&this.url.startsWith("http://localhost:")},n.prototype.onGltmsg=function(e,t,n){var r=this["on_"+e];if(r){n.event=new p.DataReceivedEvent(p.DataReceivedEvent.TYPES.DATA_RECEIVED,e,t.slice()),t.push(n);try{r.apply(this,t)}catch(i){console.error("Error onGltmsg",i),this.emitEvent(new p.MsgErrorEvent(p.MsgErrorEvent.TYPES.ERROR_PROCESS_GLTMSG,e,i))}}else console.error("Unknown Message onGltmsg",{dataType:e,params:t}),this.emitEvent(new p.MsgErrorEvent(p.MsgErrorEvent.TYPES.UNKNOWN_MESSAGE,e,"unsupported message type: "+e))},Object.defineProperty(n.prototype,"forceKeepAlive",{get:function(){return this._keepAlive},set:function(e){this._keepAlive=e},enumerable:!0,configurable:!0}),n.prototype.keepAliveUpdate=function(){var t=this;this._keepAliveObj&&(this._keepAliveObj.dispose(),this._keepAliveObj=null),e.Base.system.currentFps>8||this._keepAlive?this.clientService.getPlayersCount().then(function(){t._keepAliveObj=e.Base.addDelayFunction(t,t.keepAliveUpdate,12e3),t.updateMyNetworkDelay()}):this._keepAliveObj=e.Base.addDelayFunction(this,this.keepAliveUpdate,1e3)},n.prototype.stopWatchOffline=function(){this._watchOffline&&this._watchOffline.dispose()},n.prototype.watchOffline=function(){this.stopWatchOffline();var t=!navigator.onLine;t?this._offlineStart?e.Base.time()-this._offlineStart>this._allowMaxOfflineDuration&&this.disconnect():this._offlineStart=e.Base.time():this._offlineStart&&(this._offlineStart=0),this._watchOffline=e.Base.addDelayFunction(this,this.watchOffline,100)},n.prototype._submitCommandStart=function(e){return this._netChecker.duration&&(this._netChecker.id++,this._netChecker.start=e,this._netChecker.duration=0),this._netChecker.id},n.prototype._addNetworkDelayData=function(e,t){this._netChecker.id==e&&(this._netChecker.duration=t),this._networkDelayList.push(t)},n.prototype.consideredUnwired=function(t){return this._netChecker.duration?!1:e.Base.time()-this._netChecker.start>t},n.prototype.updateMyNetworkDelay=function(){var e=this;if(this._networkDelayList.length>5){c.sortNumeric(this._networkDelayList),this._networkDelayList.pop(),this._networkDelayList.shift();var t=0;for(var n=0,r=this._networkDelayList;n<r.length;n++){var i=r[n];t+=i}var s=Math.round(t/this._networkDelayList.length),o=this.myPlayer;this._networkDelayList=[],s!=o.networkDelay&&this.playerService.updateNetworkDelay(s).then(function(t){o.networkDelay=t,e.emit(p.SocketEvent.TYPES.NETWORK_DELAY_UPDATED,o.networkDelay)})}},n.prototype.echo=function(t){return this.myPlayer&&this.myPlayer.offline?e.Base.wait(this.myPlayer.networkDelay).then(function(){return t}):this.submitCommandPromise(["echo",t])},n.prototype.getNetworkDelay=function(t){var n=this,r=e.Base.now();return this.echo(t||[]).then(function(t){t.push(e.Base.now()-r);if(t.length<5)return n.getNetworkDelay(t);c.sortNumeric(t,!0),t.pop(),t.shift();var i=0;for(var s=0,o=t;s<o.length;s++){var u=o[s];i+=u}return Math.round(i/t.length)})},n.prototype.login=function(){var e=this;return this.getNetworkDelay().then(function(t){return e.submitCommandPromise(["login",e.userToken,e._version,t])}).then(function(e){return new l.Player(e)})},n.prototype.submitCommand=function(e){if(!this.socket||!this.socket.connected)throw new Error("msgServer not connceted.");this.socket.emit.apply(this.socket,e)},n.prototype.submitCommandPromise=function(e){var t=this;return new Promise(function(n,r){e.push(function(e){e.error?r(e.error):n(e.data)}),t.submitCommand(e)})},n.prototype.emitEvent=function(e){this.emit(e.type,e)},n.prototype.on_broadcastInRoom=function(e,t,n,r){if(!this.options.myDataRunInternal||r.internal||e!=this.me.code)this.emitEvent(r.event),this.emitEvent(new p.BroadcastEvent(p.BroadcastEvent.TYPES.BROADCAST_IN_ROOM,e,t,n)),r.internal&&r.respond&&r.respond(1)},n.prototype.on_broadcastToRoom=function(e,t,n,r){if(!this.options.myDataRunInternal||r.internal||e!=this.me.code)this.emitEvent(r.event),this.emitEvent(new p.BroadcastEvent(p.BroadcastEvent.TYPES.BROADCAST_TO_ROOM,e,t,n)),r.internal&&r.respond&&r.respond(1)},n.prototype.on_broadcastToZone=function(e,t,n,r){if(!this.options.myDataRunInternal||r.internal||e!=this.me.code)this.emitEvent(r.event),this.emitEvent(new p.BroadcastEvent(p.BroadcastEvent.TYPES.BROADCAST_TO_ZONE,e,t,n)),r.internal&&r.respond&&r.respond(1)},n.prototype.on_broadcastInProject=function(e,t,n,r){if(!this.options.myDataRunInternal||r.internal||e!=this.me.code)this.emitEvent(r.event),this.emitEvent(new p.BroadcastEvent(p.BroadcastEvent.TYPES.BROADCAST_IN_PROJECT,e,t,n))},n.prototype.on_broadcastInGamelet=function(e,t,n,r){if(!this.options.myDataRunInternal||r.internal||e!=this.me.code)this.emitEvent(r.event),this.emitEvent(new p.BroadcastEvent(p.BroadcastEvent.TYPES.BROADCAST_IN_GAMELET,e,t,n))},n.prototype.on_playerJoinedRoom=function(e,t,n){this.emitEvent(n.event),this.emitEvent(new p.PlayerJoinedRoomEvent(e,t))},n.prototype.on_playerLeftRoom=function(e,t,n){this.emitEvent(n.event),this.emitEvent(new p.PlayerLeftRoomEvent(e,t))},n.prototype.on_roomCreated=function(e,t){this.emitEvent(t.event),this.emitEvent(new p.RoomCreatedEvent(e))},n.prototype.on_roomClosed=function(e,t,n){this.emitEvent(n.event),this.emitEvent(new p.RoomClosedEvent(e,t))},n.prototype.on_roomStatusChanged=function(e,t,n,r){this.emitEvent(r.event);if(t==this.gameroomService.myRoomCode){var i=new p.RoomStatusChangedEvent(p.RoomStatusChangedEvent.TYPES.MY_ROOM_STATUS_CHANGED,e,t,n),s=this.gameroomService.myRoomFull.status;s.valueObject=i.status.valueObject,this.gameroomService.myRoomFull.status=s,this.emitEvent(i)}this.emitEvent(new p.RoomStatusChangedEvent(p.RoomStatusChangedEvent.TYPES.ROOM_STATUS_CHANGED,e,t,n))},n.prototype.on_roomBrainerChanged=function(e,t,n){this.emitEvent(n.event),e==this.gameroomService.myRoomCode&&(this.gameroomService.myRoomFull.brainer=t,this.emitEvent(new p.RoomBrainerChangedEvent(p.RoomBrainerChangedEvent.TYPES.MY_ROOM_BRAINER_CHANGED,e,t))),this.emitEvent(new p.RoomBrainerChangedEvent(p.RoomBrainerChangedEvent.TYPES.ROOM_BRAINER_CHANGED,e,t))},n.prototype.on_roomPlayerStateChanged=function(e,t,n,r,i){this.emitEvent(i.event),e==this.gameroomService.myRoomCode&&(this.gameroomService.myRoomFull.setPlayerState(t,n,r),this.emitEvent(new p.RoomPlayerStateChangedEvent(p.RoomPlayerStateChangedEvent.TYPES.MY_ROOM_PLAYER_STATE_CHANGED,e,t,n,r))),this.emitEvent(new p.RoomPlayerStateChangedEvent(p.RoomPlayerStateChangedEvent.TYPES.ROOM_PLAYER_STATE_CHANGED,e,t,n,r))},n.prototype.on_roomPlayerStatesChanged=function(e,t,n,r){this.emitEvent(r.event);if(e==this.gameroomService.myRoomCode){if(n)for(var i in n)this.gameroomService.myRoomFull.setPlayerState(t,i,n[i]);else this.gameroomService.myRoomFull.clearPlayerStates(t);this.emitEvent(new p.RoomPlayerStatesChangedEvent(p.RoomPlayerStatesChangedEvent.TYPES.MY_ROOM_PLAYER_STATES_CHANGED,e,t,n))}this.emitEvent(new p.RoomPlayerStatesChangedEvent(p.RoomPlayerStatesChangedEvent.TYPES.ROOM_PLAYER_STATES_CHANGED,e,t,n))},n.prototype.on_roomPlayerSyncedChanged=function(e,t,n,r,i){this.emitEvent(i.event),e==this.gameroomService.myRoomCode&&(this.gameroomService.myRoomFull.setPlayerState(t,"synced",n),this.emitEvent(new p.RoomPlayerSyncedChangedEvent(p.RoomPlayerSyncedChangedEvent.TYPES.MY_ROOM_PLAYER_SYNCED_CHANGED,e,t,n,r))),this.emitEvent(new p.RoomPlayerSyncedChangedEvent(p.RoomPlayerSyncedChangedEvent.TYPES.ROOM_PLAYER_SYNCED_CHANGED,e,t,n,r))},n.prototype.on_zoneStatusChanged=function(e,t,n){var r=this.gameroomService.getListeningZoneAndStatus(e),s;r?(s=r.status,r.status.valueObject=t):s=new i.GamezoneStatus(t),this.emitEvent(n.event),this.emitEvent(new p.ZoneStatusChangedEvent(p.ZoneStatusChangedEvent.TYPES.ZONE_STATUS_CHANGED,e,s))},n.prototype.on_zonePlayerStateChanged=function(e,t,n,r,i,s){this.updateZoneBrainer(e,i),this.emitEvent(s.event),this.emitEvent(new p.ZonePlayerStateChangedEvent(p.ZonePlayerStateChangedEvent.TYPES.ZONE_PLAYER_STATE_CHANGED,e,t,n,r,i))},n.prototype.on_zonePlayerStatesChanged=function(e,t,n,r,i){this.updateZoneBrainer(e,r),this.emitEvent(i.event),this.emitEvent(new p.ZonePlayerStatesChangedEvent(p.ZonePlayerStatesChangedEvent.TYPES.ZONE_PLAYER_STATES_CHANGED,e,t,n,r))},n.prototype.updateZoneBrainer=function(e,t){var n=this.gameroomService.getListeningZoneAndStatus(e);n&&n.status._updateBrainer(t)},n.prototype.on_zonePlayerSyncedChanged=function(e,t,n,r,i){this.updateZoneBrainer(e,r),this.emitEvent(i.event),this.emitEvent(new p.ZonePlayerSyncedChangedEvent(p.ZonePlayerSyncedChangedEvent.TYPES.ZONE_PLAYER_SYNCED_CHANGED,e,t,n,r))},n.prototype.on_playerLeftZone=function(e,t,n){this.emitEvent(n.event),this.emitEvent(new p.PlayerLeftZoneEvent(e,t))},n.prototype.on_playerCheated=function(e,t){this.emitEvent(t.event),this.emitEvent(new p.PlayerCheatedEvent(e))},n.prototype.on_roomBrainerSet=function(e,t){this.gameroomService.myRoomCode==e&&(this.emitEvent(t.event),this.gameroomService.myRoomFull.brainer=this.myPlayer.code,t.respond&&t.respond(1))},n.prototype.on_dataToPlayer=function(e,t,n,r,i){if(!this.options.myDataRunInternal||i.internal||e!=this.me.code){this.emitEvent(i.event);var s=new p.DataToPlayerEvent(e,t,n,r);this.emitEvent(s),i.respond&&i.respond(s.response)}},n.prototype.on_dataToRoommate=function(e,t,n,r){if(!this.options.myDataRunInternal||r.internal||e!=this.me.code){this.emitEvent(r.event);var i=new p.DataToRoommateEvent(e,t,n);this.emitEvent(i),r.respond&&r.respond(i.response)}},n.prototype.on_dataToRoomDecisionmaker=function(e,t,n,r,i){if(!this.options.myDataRunInternal||i.internal||e!=this.me.code){this.emitEvent(i.event);var s=new p.DataToRoomDecisionmakerEvent(e,t,n,r);this.emitEvent(s),i.respond&&i.respond(s.response)}},n.prototype.on_monitorDataToPlayer=function(e,t,n){if(!this.options.myDataRunInternal||n.internal||e!=this.me.code){this.emitEvent(n.event);var r=new p.MonitorDataToPlayerEvent(e,t);this.emitEvent(r),n.respond&&n.respond(r.response)}},n}(PIXI.utils.EventEmitter),t("MsgServer",v)}}}),System.register("Server/events/actions/AwardStoreItem.action",["./../../utils/DialogQueue","./../definitions/ItemWeight.definition"],function(t,n){"use strict";function d(t,n,r,i){var s=t.getItem(!0);if(!s||s.count<=0)return Promise.resolve(!1);var o=n.find(function(e){return e.code==s.itemCode});return o?new Promise(function(a){e.GLT.commands.itemService.awardItem(o.code,s.count,function(t){console.log("item awarded: "+t.count),r.userItem=t,r.gameItem=o,r.count=s.count,e.Base.wait(i).then(function(){return u.dialogQueue.publicAwardStoreItemDialog(r)}),a(!0)},function(e){console.error("Award Item failed",e),d(t,n,r,i).then(function(e){return a(e)})}).submit()}):Promise.resolve(!1)}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l,c,h=n&&n.id,p=n&&n.id;return{setters:[function(e){u=e},function(e){a=e}],execute:function(){i=e.ReactMaterial.actions.BaseDialogAction,s=e.Base.utils.ObjectUtil,o=e.GLT.commands.vo.GameItem,f=e.Base.utils.LotteryBox,l=e.Base.utils.ArrayUtil,c=function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return r(n,t),Object.defineProperty(n.prototype,"playerId",{get:function(){return this.getString(this.json.playerId)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemWeights",{get:function(){var e=this;return this.json.itemWeights?this.json.itemWeights.map(function(t){return new a.ItemWeightDef(e,t)}):[]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this.getString(this.json.title)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"soundAlias",{get:function(){return this.getString(this.json.soundAlias)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"delayDialog",{get:function(){return this.getInt(this.json.delayDialog)},enumerable:!0,configurable:!0}),n.prototype.prepare=function(){var t=this,n=[],r={dialogId:this.dialogId,playerId:this.playerId,itemWeights:this.itemWeights.map(function(e){var t=e.toNormalizedJson();return t.itemCode&&l.addUniqueElement(n,t.itemCode),t}),title:this.title,soundAlias:this.soundAlias,delayDialog:this.delayDialog},i=null;return e.GLT.commands.itemService.listGameItemsByCodes(n,function(e){i=e.length&&e.map(function(e){return e.valueObject})}).submit().then(function(){return{items:i,json:s.removeKeysWithSameValue(r,t.json)}}).catch(function(e){return console.error("Cannot find the item to award player: "+r.itemCode,e),0})},n.prototype.getDialogOptions=function(e){var t=this.generateDialogOptions(e);return t.titleCloseButton=!1,t.onRootClick=function(e,t){t.close()},t},n.prototype.execute=function(e){if(e&&e.items){s.safeAssign(this.json,e.json);var t=e.items.map(function(e){return new o(e)}),n=new f;this.itemWeights.forEach(function(e){e.weight>0&&n.addItem(e,e.weight)});if(this.playerId=="*"||this.playerId==this.event.manager.socketClient.getMe().id)return d(n,t,{soundAlias:this.soundAlias,userItem:null,gameItem:null,count:0,options:this.getDialogOptions(this.dialogId)},this.delayDialog).then(function(){})}},n.TYPE="AwardStoreItem",n}(i),t("AwardStoreItemAction",c)}}}),System.register("Server/messages/managers/GamezoneManager",["./../events/GamezoneManagerEvent","./../events/MsgServerEvent","./../../index"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u=t&&t.id,a=t&&t.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e}],execute:function(){o=function(e){function t(t){var n=e.call(this)||this;return n._code=t,n._inZone=!1,n}return n(t,e),Object.defineProperty(t.prototype,"isThisDecisionMaker",{get:function(){return s.msg.myPlayer&&this._zoneAndStatus&&this._zoneAndStatus.status.brainer==s.msg.myPlayer.code},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoneAndStatus",{get:function(){return this._zoneAndStatus},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playersStates",{get:function(){return this._playersStates},enumerable:!0,configurable:!0}),t.prototype.enter=function(e){var t=this;return this._inZone||(this._inZone=!0,s.msg.on(i.ZonePlayerStateChangedEvent.TYPES.ZONE_PLAYER_STATE_CHANGED,this.onPlayerStateChanged,this),s.msg.on(i.ZonePlayerStatesChangedEvent.TYPES.ZONE_PLAYER_STATES_CHANGED,this.onPlayerStatesChanged,this),s.msg.on(i.PlayerLeftZoneEvent.TYPE,this.onPlayerLeft,this),s.msg.on(i.BroadcastEvent.TYPES.BROADCAST_TO_ZONE,this.onBroadcastToZone,this)),s.msg.gameroomService.listenToZone(this._code).then(function(n){return t._zoneAndStatus=n,t._inZone?s.msg.gameroomService.getZonePlayersStates(t._code).then(function(n){return t._inZone?(t._playersStates=n,s.msg.gameroomService.setZonePlayerStates(t._code,e).then(function(){return console.log("Entered zone: "+t._code),t._zoneAndStatus})):(t.leave(),Promise.reject("Left zone before receiving zone player states"))}):(t.leave(),Promise.reject("Left zone before receiving zone entering data"))})},t.prototype.leave=function(){this._inZone&&(this._inZone=!1,s.msg.off(i.ZonePlayerStateChangedEvent.TYPES.ZONE_PLAYER_STATE_CHANGED,this.onPlayerStateChanged,this),s.msg.off(i.ZonePlayerStatesChangedEvent.TYPES.ZONE_PLAYER_STATES_CHANGED,this.onPlayerStatesChanged,this),s.msg.off(i.PlayerLeftZoneEvent.TYPE,this.onPlayerLeft,this),s.msg.off(i.BroadcastEvent.TYPES.BROADCAST_TO_ZONE,this.onBroadcastToZone,this)),this._zoneAndStatus&&s.msg.gameroomService.stopListenToZone(this._code),this._zoneAndStatus=null,this._playersStates=null},Object.defineProperty(t.prototype,"zoneCode",{get:function(){return this._code},enumerable:!0,configurable:!0}),t.prototype.onBroadcastToZone=function(e){e.roomCode==this.zoneCode&&this.emit(r.GZBroadcastEvent.TYPE,new r.GZBroadcastEvent(e.senderCode,e.data))},t.prototype.onPlayerStateChanged=function(e){if(this._zoneAndStatus&&e.zoneCode==this._code&&this._playersStates){var t=this._playersStates.getPlayerStates(e.playerCode);this._playersStates.setPlayerState(e.playerCode,e.key,e.value),t||this.emit(r.GZPlayerEnterEvent.TYPE,new r.GZPlayerEnterEvent(e.playerCode)),this.emit(r.GZPlayerStatesChangedEvent.TYPE,new r.GZPlayerStatesChangedEvent(e.playerCode))}},t.prototype.onPlayerStatesChanged=function(e){if(this._zoneAndStatus&&e.zoneCode==this._code&&this._playersStates){var t=this._playersStates.getPlayerStates(e.playerCode);if(e.states)for(var n in e.states)this._playersStates.setPlayerState(e.playerCode,n,e.states[n]);else t&&this._playersStates.clearPlayerStates(e.playerCode);!t&&e.states&&this.emit(r.GZPlayerEnterEvent.TYPE,new r.GZPlayerEnterEvent(e.playerCode)),this.emit(r.GZPlayerStatesChangedEvent.TYPE,new r.GZPlayerStatesChangedEvent(e.playerCode))}},t.prototype.onPlayerLeft=function(e){this._zoneAndStatus&&e.zoneCode==this._code&&this._playersStates&&(this._playersStates.setPlayerStates(e.playerCode,null),this.emit(r.GZPlayerLeftEvent.TYPE,new r.GZPlayerLeftEvent(e.playerCode)))},t}(PIXI.utils.EventEmitter),e("GamezoneManager",o)}}}),System.register("Server/messages/managers/WatchroomManager",["./../events/GameroomManagerEvent","./../events/MsgServerEvent","./../vo/Player","./../../index","./AbstractRoomManager"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a,f=t&&t.id,l=t&&t.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e}],execute:function(){a=function(e){function t(t,n){n===void 0&&(n=u.GameroomType.CLOSE);var r=e.call(this,n)||this;return r._room=t,r.watchZoneCode=u.getWatchroomCode(r._room.code),r}return n(t,e),t.prototype.initialize=function(){var e=this;return o.msg.on(i.BroadcastEvent.TYPES.BROADCAST_TO_ZONE,this.onDataToZone,this),o.msg.gameroomService.listenToZone(this.watchZoneCode),o.msg.gameroomService.queryRoom(this._room.code).then(function(t){e._roomFull=t}),o.msg.gameroomService.listPlayersOfRoom(this._room.code).then(function(t){t.forEach(function(t){e.mergePlayer(t,e._players)})})},t.prototype.dispose=function(){o.msg.off(i.BroadcastEvent.TYPES.BROADCAST_TO_ZONE,this.onDataToZone,this),o.msg.gameroomService.stopListenToZone(this.watchZoneCode),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"isThisWatcher",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.onPlayerJoined=function(e){this.mergePlayer(e,this._players),this.dispatchEvent(new r.GMPlayerJoinedEvent(e))},t.prototype.onPlayerLeft=function(e){var t=this._players.findIndex(function(t){return t.code==e});t!=-1&&(this._players.splice(t,1),this.dispatchEvent(new r.GMPlayerLeftEvent(e)))},t.prototype.onPlayerStateChanged=function(e){this._roomFull.setPlayerState(e.playerCode,e.key,e.value),this.dispatchEvent(new r.GMPlayerStateChangedEvent(e.playerCode,e.key,e.value))},t.prototype.onPlayerSyncedChanged=function(e){this._roomFull.setPlayerState(e.playerCode,"synced",e.synced),this.dispatchEvent(new r.GMPlayerSyncedChangedEvent(e.playerCode,e.synced,e.brainerCode))},t.prototype.onRoomStatusChanged=function(e){this._roomFull.status.valueObject=e.status,this.dispatchEvent(new r.GMRoomStatusChangedEvent(e.zoneCode,e.roomCode,e.status))},t.prototype.sendDataToWatchers=function(e){this._sendDataToWatchers(e,r.GMDataReceivedEvent.ROUTE.WATCHER_TO_WATCHERS)},t.prototype.sendDataInRoom=function(e){return o.msg.gameroomService.broadcastToRoom(this._roomFull.room.code,{route:r.GMDataReceivedEvent.ROUTE.WATCHER_TO_ROOM,data:e})},t.prototype.onDataToZone=function(e){if(e.roomCode==this.watchZoneCode&&e.data&&e.data.route&&e.data.data!==undefined){if(e.data.route==r.GMDataReceivedEvent.ROUTE.ROOM_TO_WATCHERS){if(e.data.type==r.GMPlayerJoinedEvent.TYPE){this.onPlayerJoined(new s.Player(e.data.data));return}if(e.data.type==r.GMPlayerLeftEvent.TYPE){this.onPlayerLeft(e.data.data);return}if(e.data.type==r.GMPlayerStateChangedEvent.TYPE){this.onPlayerStateChanged(e.data.data);return}if(e.data.type==r.GMRoomStatusChangedEvent.TYPE){this.onRoomStatusChanged(e.data.data);return}if(e.data.type==r.GMPlayerSyncedChangedEvent.TYPE){this.onPlayerSyncedChanged(e.data.data);return}}this.dispatchEvent(new r.GMDataReceivedEvent(e.senderCode,e.data.data,e.data.route))}},t}(u.AbstractRoomManager),e("WatchroomManager",a)}}}),System.register("Server/utils/SpeederDetector",["./../index","./../messages/services/GameroomService"],function(t,n){"use strict";var r,i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(){function t(){r.msg.gameroomService.on(i.GameroomService.EVENT.SERVER_TIME,this.onServerTime,this)}return t.prototype.dispose=function(){r.msg.gameroomService.off(i.GameroomService.EVENT.SERVER_TIME,this.onServerTime,this)},t.prototype.restart=function(){this.startRecord=null},t.prototype.onServerTime=function(t){this.startRecord||(this.startRecord=new o(e.Base.now(),t)),this.latestRecord?this.latestRecord.reset(e.Base.now(),t):this.latestRecord=new o(e.Base.now(),t)},Object.defineProperty(t.prototype,"detectedTimeDiff",{get:function(){if(this.startRecord){var e=this.latestRecord.client-this.startRecord.client,t=this.latestRecord.server-this.startRecord.server;return e-t}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientDuration",{get:function(){return this.startRecord?this.latestRecord.client-this.startRecord.client:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverDuration",{get:function(){return this.startRecord?this.latestRecord.server-this.startRecord.server:0},enumerable:!0,configurable:!0}),t}(),t("SpeederDetector",s),o=function(){function e(e,t){this.client=e,this.server=t}return e.prototype.reset=function(e,t){this.client=e,this.server=t},e}()}}}),System.register("Server/events/actions/SetUserState.action",["./../../utils/CGEUserStateManager"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[function(e){s=e}],execute:function(){i=e.CgEventsEngine.CgAction,o=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"playerId",{get:function(){return this.getString(this.json.playerId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"category",{get:function(){return this.getString(this.json.category)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getString(this.json.key)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueType",{get:function(){return this.getString(this.json.valueType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.getString(this.json.value)},enumerable:!0,configurable:!0}),t.prototype.prepare=function(){var e=null;switch(this.valueType){case"string":e=this.value;break;case"number":e=this.getNumber(this.json.value);break;case"integer":e=this.getInt(this.json.value);break;case"boolean":e=this.getBoolean(this.json.value)}var t=this.event.manager.socketClient.getPlayer(this.playerId);if(t){var n={value:e};return s.CGEUserStateManager.getInstance(this.event.manager).setUserState(t.username,this.category,this.key,JSON.stringify(n)).then(function(){return n})}return 0},t.prototype.execute=function(e){},t.TYPE="SetUserState",t}(i),t("SetUserStateAction",o)}}}),System.register("Server/events/actions/GetUserState.action",["./../../utils/CGEUserStateManager"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[function(e){s=e}],execute:function(){i=e.CgEventsEngine.CgAction,o=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"playerId",{get:function(){return this.getString(this.json.playerId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"category",{get:function(){return this.getString(this.json.category)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getString(this.json.key)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"varname",{get:function(){return this.getString(this.json.varname)},enumerable:!0,configurable:!0}),t.prototype.prepare=function(){var e=this.event.manager.socketClient.getPlayer(this.playerId);if(e){var t=this.varname;return s.CGEUserStateManager.getInstance(this.event.manager).getUserState(e.username,this.category,this.key).then(function(e){return e?{varname:t,value:JSON.parse(e).value}:0})}return console.log("GetUserState failed: cannot find the playerId"),0},t.prototype.execute=function(e){e&&(console.log("GetUserState: "+e.value),e.varname&&this.setGlobalVar(e.varname,e.value,!1))},t.TYPE="GetUserState",t}(i),t("GetUserStateAction",o)}}}),System.register("Server/components/BroadcastAnnouncement",["./../messages/events/MsgServerEvent","./../index"],function(t,n){"use strict";function v(e){var t=(Date.now()-e)/6e4;if(t<1)return u("glt.time.inAMinute");if(t<2)return u("glt.time.aMinute");if(t<100)return u("glt.time.minutes",{minutes:Math.round(t)});var n=t/60;return n<36?u("glt.time.hours",{hours:Math.round(n)}):u("glt.time.days",{days:Math.round(n/24)})}function m(e){return React.createElement(MaterialUI.Slide,i({},e,{direction:"up"}))}function g(e){y(e,e.data.text)}function y(t,n){var r={event:t,text:n,time:Date.now()};l?l.onBroadcast(r):c=e.ReactMaterial.renderComponentWithStyle(f,h,{queue:[r]})}function b(){o.msg.on(s.BroadcastEvent.TYPES.BROADCAST_IN_PROJECT,function(e){g(e)}),o.msg.on(s.BroadcastEvent.TYPES.BROADCAST_IN_GAMELET,function(e){g(e)}),o.msg.on(s.MonitorDataToPlayerEvent.TYPE,function(e){g(e)}),o.msg.on(s.MsgServerOfflineEvent.TYPES.CONNECT_OFFLINE,function(e){e.data&&y(e,u("glt.message.connectOffline"))})}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},s,o,u,a,f,l,c,h,p=n&&n.id,d=n&&n.id;return t("listenToProjectBoradcast",b),{setters:[function(e){s=e},function(e){o=e}],execute:function(){u=e.Base.translation.translate,a=5e3,f=function(e){return{root:{"& .MuiSnackbarContent-message":{padding:0}},toPlayer:{color:"#EE0"},toGamelet:{color:"#0E0"},toProject:{color:"#0EE"},header:{display:"flex",alignItems:"center"},title:{flex:1},time:{color:"#aaa",fontSize:"smaller",marginLeft:"10px"},message:{color:"#eee",padding:"2px 0 0"}}},h=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.state={queue:r.props.queue,open:!1},l=r,r}return r(n,t),n.prototype.componentDidMount=function(){this.handleExit(),this.autoClose()},n.prototype.componentWillUnmount=function(){l=null,c=null},n.prototype.onBroadcast=function(e){this.state.queue.push(e),this.setState({queue:this.state.queue})},n.prototype.autoClose=function(){if(l!=this)return;if(this.state.open&&this.state.current&&this.state.queue.length){var t=Date.now()-this.state.current.time;t>a&&this.handleClose()}e.Base.addDelayFunction(this,this.autoClose,500)},n.prototype.handleClose=function(){this.setState({open:!1})},n.prototype.handleExit=function(){if(this.state.queue.length){var t=this.state.queue.shift();this.setState({current:t,queue:this.state.queue,open:!0})}else c&&e.React.unmountRootComponent(c)},n.prototype.renderMessage=function(e){if(!e)return React.createElement("span",{id:"message-id"},"_undefined_data_");var t=this.props.classes,n="toPlayer";return e.event.type==s.BroadcastEvent.TYPES.BROADCAST_IN_PROJECT?n="toProject":e.event.type==s.BroadcastEvent.TYPES.BROADCAST_IN_GAMELET&&(n="toGamelet"),React.createElement("div",{id:"message-id",className:t[n]},React.createElement("div",{className:t.header},React.createElement("span",{className:t.title},u("glt.annoucement.title."+n)),React.createElement("span",{className:t.time},v(e.time))),React.createElement("div",{className:t.message},e.text))},n.prototype.render=function(){var e=this,t=this.state.current;return React.createElement("div",{className:this.props.classes.root},React.createElement(MaterialUI.Snackbar,{key:t?""+t.time:undefined,anchorOrigin:{vertical:"bottom",horizontal:"center"},open:this.state.open,onClose:function(){return e.handleClose()},onExited:function(){return e.handleExit()},ContentProps:{"aria-describedby":"message-id"},TransitionComponent:m,message:this.renderMessage(t),action:[React.createElement(MaterialUI.IconButton,{key:"close","aria-label":"close",color:"inherit",onClick:function(){return e.handleClose()}},React.createElement(MaterialUI.Icon,null,"close"))]}))},n}(React.Component)}}}),System.register("Server/components/HighScoreBoard",[],function(t,n){"use strict";function f(t,n,r,i,u){var a=Object.assign({contentRenderer:function(e){return React.createElement(o,{scoreKey:t,timeRanges:r,orderType:n,count:i||10,dialog:e})},title:s("glt.hscores.title"),actionRenderer:function(){return null},titleCloseButton:!0,hideCancelButton:!0},u||{});return a.classes={root:"highScoreDialog",paper:"highScoreDialogPaper",message:"highScoreDialogMsg"},u&&u.classes&&(a.classes=Object.assign(a.classes,u.classes)),e.ReactMaterial.dialogs.openConfirmDialog(a)}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u=n&&n.id,a=n&&n.id;return t("showHighScoreBoard",f),{setters:[],execute:function(){i=e.GLT.commands.types.TimeRange,s=e.Base.translation.translate,o=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.state={loading:!0,userScoreList:null,total:0,page:0,timeRange:i.WEEKLY},r}return r(n,t),n.prototype.componentDidMount=function(){this.refreshScores(this.state.timeRange)},n.prototype.refreshScores=function(t){var n=this;e.GLT.commands.scoreService.getScoresTotal(this.props.scoreKey,t,e.GLT.client.lastUpdatedServerTimestamp,function(e){n.setState({total:e})},function(e){n.setState({userScoreList:null,loading:!1})}).submit().then(function(){return n.setPage(t,0)})},n.prototype.setTimeRange=function(e){this.state.timeRange==e?this.setState({timeRangeMenuAnchor:null}):(this.setState({timeRangeMenuAnchor:null,timeRange:e}),this.refreshScores(e))},Object.defineProperty(n.prototype,"countPerPage",{get:function(){return this.props.count||10},enumerable:!0,configurable:!0}),n.prototype.setPage=function(t,n){var r=this;this.setState({loading:!0,page:n});var i=this.rowsPerPage;return e.GLT.commands.scoreService.listScores(this.props.scoreKey,t,this.props.orderType,e.GLT.client.lastUpdatedServerTimestamp,n*i,i,function(e){r.setState({userScoreList:e,loading:!1})},function(e){r.setState({userScoreList:null,loading:!1})}).submit()},n.prototype.getUserTooltip=function(e){return e.user.nickname+" ( "+e.user.username+" )"},n.prototype.listTimeRanges=function(){var e=this,t=[i.DAILY,i.WEEKLY,i.MONTHLY,i.HISTORY];if(this.props.timeRanges&&this.props.timeRanges.length){var n=t.filter(function(t){return e.props.timeRanges.indexOf(t)!=-1});n.length&&(t=n)}return t},n.prototype.renderPlayerRow=function(e,t){var n=new Date(t.time),r=n.getUTCFullYear()+"/"+("0"+(n.getUTCMonth()+1)).slice(-2)+"/"+("0"+n.getUTCDate()).slice(-2),i=("0"+n.getUTCHours()).slice(-2)+":"+("0"+n.getUTCMinutes()).slice(-2)+":"+("0"+n.getUTCSeconds()).slice(-2);return React.createElement(MaterialUI.TableRow,{key:"rank"+e},React.createElement(MaterialUI.TableCell,{size:"small",align:"right"},e),React.createElement(MaterialUI.TableCell,{size:"small"},React.createElement(MaterialUI.Tooltip,{TransitionComponent:MaterialUI.Zoom,title:this.getUserTooltip(t)},React.createElement("div",{className:"userInfoCell"},React.createElement("img",{src:t.user.iconUrl}),React.createElement("div",{className:"nickname"},t.user.nickname)))),React.createElement(MaterialUI.TableCell,{size:"small",align:"right"},t.score),React.createElement(MaterialUI.TableCell,{size:"small"},React.createElement(MaterialUI.Tooltip,{TransitionComponent:MaterialUI.Zoom,title:r+" "+i},React.createElement("div",null,r))))},n.prototype.renderPlayerRows=function(){var e=this;if(this.state.loading)return React.createElement(MaterialUI.TableRow,null,React.createElement(MaterialUI.TableCell,{size:"small"}),React.createElement(MaterialUI.TableCell,{size:"small"},React.createElement(MaterialUI.CircularProgress,{size:36,thickness:5})),React.createElement(MaterialUI.TableCell,{size:"small"}),React.createElement(MaterialUI.TableCell,{size:"small"}));if(this.state.userScoreList&&this.state.userScoreList.scores.length){var t=this.state.userScoreList.rankStart;return this.state.userScoreList.scores.map(function(n){return e.renderPlayerRow(t++,n)})}return React.createElement(MaterialUI.TableRow,null,React.createElement(MaterialUI.TableCell,{size:"small"}),React.createElement(MaterialUI.TableCell,{size:"small"},"NO DATA"),React.createElement(MaterialUI.TableCell,{size:"small"}),React.createElement(MaterialUI.TableCell,{size:"small"}))},n.prototype.openTimeRangeMenu=function(e){this.setState({timeRangeMenuAnchor:e.currentTarget})},n.prototype.renderTimeRange=function(){var e=this;return React.createElement(MaterialUI.Select,{className:"timeRangeSelect",value:this.state.timeRange.value,onChange:function(t){return e.setTimeRange(i.getByValue(t.target.value))}},this.listTimeRanges().map(function(e){return React.createElement(MaterialUI.MenuItem,{key:e.value,value:e.value},s("glt.hscores.timeRange."+e.value))}))},Object.defineProperty(n.prototype,"rowsPerPage",{get:function(){return this.props.count||10},enumerable:!0,configurable:!0}),n.prototype.render=function(){var e=this;return React.createElement("div",{className:"hscoreBoard"},React.createElement(MaterialUI.Table,null,React.createElement(MaterialUI.TableHead,null,React.createElement(MaterialUI.TableRow,null,React.createElement(MaterialUI.TableCell,{size:"small"},s("glt.hscores.rank")),React.createElement(MaterialUI.TableCell,{size:"small"},s("glt.hscores.player")),React.createElement(MaterialUI.TableCell,{size:"small"},s("glt.hscores.score")),React.createElement(MaterialUI.TableCell,{size:"small"},s("glt.hscores.time")))),React.createElement(MaterialUI.TableBody,null,this.renderPlayerRows())),React.createElement(MaterialUI.DialogActions,null,this.renderTimeRange(),React.createElement("div",{className:"spacer"}),React.createElement(MaterialUI.TablePagination,{rowsPerPageOptions:[this.rowsPerPage],component:"div",count:this.state.total,rowsPerPage:this.rowsPerPage,page:this.state.page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,n){return e.setPage(e.state.timeRange,n)}})))},n}(React.Component),t("HighScoreBoard",o)}}}),System.register("Server/components/SubmitScoreDialog",["./HighScoreBoard"],function(t,n){"use strict";function h(t,n,r,i,s,o,u){var a={root:o?"submitScoreSnackbarRoot":"submitScoreDialogRoot",paper:"submitScorePaper"};u=u||{},u.classes&&(a=Object.assign(a,u.classes));var l=Object.assign({contentRenderer:function(e){return React.createElement(f,{scoreKey:n,score:r,submitType:i,closeAfterSubmit:o,orderType:s,classes:a,dialog:e})},title:!o&&t,actionRenderer:function(){return null},preventAccidentalClose:!0,hideCancelButton:!0},u);return l.classes=a,e.ReactMaterial.dialogs.openConfirmDialog(l)}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l=n&&n.id,c=n&&n.id;return t("showSubmitScoreDialog",h),{setters:[function(e){s=e}],execute:function(){i=e.Base.utils.IntUtil,o=e.GLT.commands.scoreService,u=e.Base.translation.translate,a={PREPARING:"preparing",SUBMITTED:"submitted",NEED_LOGIN:"needLogin",NEED_REGISTER:"needRegister",SUBMITTING:"submiting",LOGINING:"logining",SKIP_SUBMIT:"skipSubmit",ERROR:"error"},f=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.state={status:a.PREPARING,loading:!0},r}return r(n,t),n.prototype.componentDidMount=function(){var t=this;e.GLT.auth.onReady(function(n){n.guest?(t.authListener=e.GLT.auth.onAuth(function(e){e.guest||t.submitScore()}),t.setState({loading:!1,status:n.isLocalGuest()?a.NEED_LOGIN:a.NEED_REGISTER})):t.submitScore()})},n.prototype.componentWillUnmount=function(){this.authListener&&this.authListener.dispose()},n.prototype.submitScore=function(){var t=this;this.setState({loading:!0,status:a.SUBMITTING}),o.submitScore(this.props.scoreKey,this.props.score,this.props.submitType,function(n){t.setState({loading:!1,status:a.SUBMITTED}),t.props.closeAfterSubmit&&e.Base.wait(1e3).then(function(){return t.props.dialog.close()})},function(e){t.setState({loading:!1,status:a.ERROR})}).submit()},n.prototype.onButtonCancel=function(){this.setState({status:a.SKIP_SUBMIT})},n.prototype.onButtonConfirm=function(){this.props.dialog.handleConfirm()},n.prototype.onButtonSignin=function(t){var n=this;this.setState({loading:!0,status:a.LOGINING}),e.GLT.auth.loginUser(t).then(function(e){e.isLocalGuest()?n.setState({loading:!1,status:a.NEED_LOGIN}):e.guest?n.setState({loading:!1,status:a.NEED_REGISTER}):n.setState({loading:!1,status:n.state.status})}).catch(function(e){n.setState({loading:!1,status:a.NEED_LOGIN})})},n.prototype.onButtonReSignin=function(t){var n=this;this.setState({loading:!0,status:a.LOGINING}),e.GLT.auth.logout().then(function(){n.onButtonSignin(t)})},n.prototype.onButtonHighscores=function(e){s.showHighScoreBoard(this.props.scoreKey,this.props.orderType)},n.prototype.renderActions=function(){var e=this,t=this.props.classes&&this.props.classes.actions||"submitScoreDialogActions",n=this.props.dialog.props;if(this.state.status==a.NEED_LOGIN)return React.createElement(MaterialUI.DialogActions,{className:t},React.createElement(MaterialUI.Tooltip,{title:u("glt.submitScore.cancelButton")},React.createElement(MaterialUI.Button,{onClick:function(){return e.onButtonCancel()}},React.createElement(MaterialUI.Icon,null,"clear"))),React.createElement(MaterialUI.Button,{variant:"contained",color:"primary",onClick:function(t){return e.onButtonSignin(t)}},u("glt.submitScore.signIn")));if(this.state.status==a.NEED_REGISTER)return React.createElement(MaterialUI.DialogActions,{className:t},React.createElement(MaterialUI.Tooltip,{title:u("glt.submitScore.cancelButton")},React.createElement(MaterialUI.Button,{onClick:function(){return e.onButtonCancel()}},React.createElement(MaterialUI.Icon,null,"clear"))),React.createElement(MaterialUI.Button,{variant:"contained",color:"primary",onClick:function(t){return e.onButtonReSignin(t)}},u("glt.submitScore.resignIn")));if(this.state.status==a.SUBMITTED)return React.createElement(MaterialUI.DialogActions,{className:t},React.createElement(MaterialUI.Button,{variant:"text",onClick:function(t){return e.onButtonHighscores(t)}},u("glt.submitScore.highscoreButton")),React.createElement(MaterialUI.Button,{variant:"contained",color:"primary",onClick:function(){return e.onButtonConfirm()}},n.confirmLabel||u("glt.submitScore.doneButton")));if(this.state.status==a.SKIP_SUBMIT)return React.createElement(MaterialUI.DialogActions,{className:t},React.createElement(MaterialUI.Button,{variant:"text",onClick:function(t){return e.onButtonHighscores(t)}},u("glt.submitScore.highscoreButton")),React.createElement(MaterialUI.Button,{variant:"contained",color:"primary",onClick:function(){return e.onButtonConfirm()}},n.confirmLabel||u("glt.submitScore.doneSkipButton")))},n.prototype.render=function(){var e=this.props.dialog.props,t=this.props.classes&&this.props.classes.message||"submitScoreDialogMessage",n;return this.state.status!=a.SUBMITTED&&this.state.status!=a.SKIP_SUBMIT||!e.message?n=u("glt.submitScore.yourScore",{score:i.formatAddComma(this.props.score)}):n=e.message,this.props.closeAfterSubmit?React.createElement("div",{className:"submitScoreDialog"},React.createElement(MaterialUI.DialogContent,{className:t},React.createElement("div",{className:"submitScoreMessage"},React.createElement("div",null,n),React.createElement("div",{className:"submitScoreStatus "+this.state.status},u("glt.submitScore."+this.state.status))))):React.createElement("div",{className:"submitScoreDialog"},React.createElement(MaterialUI.DialogContent,{className:t},this.state.loading?React.createElement(MaterialUI.CircularProgress,{className:"loadingBox",size:36,thickness:5}):null,React.createElement("div",{className:"submitScoreMessage"},React.createElement("div",null,n),React.createElement("div",{className:"submitScoreStatus "+this.state.status},u("glt.submitScore."+this.state.status)))),this.renderActions())},n}(React.Component),t("SubmitScoreDialog",f)}}}),System.register("Server/components/AuthPanel",["./BadgeListDialog","./../index","./LocaleMenu"],function(t,n){"use strict";function p(){return{loginPanel:{width:"100%",height:"100%","& button":{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"larger",letterSpacing:1,boxShadow:"0 3px 9px black"},"& .userBox":{boxShadow:"0 1px 3px rgba(0,0,0,0.5)"}},authPanel:{position:"absolute",right:5,top:5,zIndex:1e4,"& .userBox, & .loginBox, & .loadingBox":{boxShadow:"0 1px 3px rgba(0,0,0,0.5)"},"& .userBox, & .loadingBox":{backgroundColor:"#ddd",padding:2,borderRadius:3,display:"flex",cursor:"pointer"},"& .userBox":{"&:hover":{backgroundColor:"#fff"},"& img":{width:32,height:32}},"& .loginBox":{backgroundColor:"rgba(255,255,255,0.33)",padding:5,borderRadius:"50%",display:"flex",cursor:"pointer",color:"rgba(255, 255, 255, 0.6)","&:hover":{backgroundColor:"rgba(255,255,255,0.5)",color:"#fff"},"& > div":{margin:"4px 4px"}}},menuRoot:{zIndex:"10005 !important"},menuPaper:{backgroundColor:"rgba(80,80,80,0.8)",padding:"5px 0","& > li":{color:"#eee",padding:"8px 20px"}},subMenu:{"& > li":{color:"#eee",padding:"8px 20px 8px 0"}}}}function d(t){if(f)$(f).css("display","block"),t&&l&&!t.mustLogin!=!l.state.mustLogin&&l.setState({mustLogin:t.mustLogin});else{t=t||{};var n=t.getInstance;t.getInstance=function(e){l=e,n&&n(e)},f=e.ReactMaterial.renderComponentWithStyle(p(),a,t)}return f}function v(e){var t="loginPanelOn",n=$(document.body);e?n.hasClass(t)||n.addClass(t):n.hasClass(t)&&n.removeClass(t)}function m(e){f&&$(f).css("display","none")}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l,c=n&&n.id,h=n&&n.id;return t("showAuthPanel",d),t("hideAuthPanel",m),{setters:[function(e){i=e},function(e){o=e},function(e){u=e}],execute:function(){s=e.Base.translation.translate,a=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.panelRef=React.createRef(),r.userBoxRef=React.createRef(),r.state={loading:!0,mustLogin:r.props.mustLogin,menuOpen:!1},r}return r(n,t),n.prototype.componentDidMount=function(){var t=this,n=this.panelRef.current;n.parentElement.style.zIndex="10000",e.GLT.auth.onReady(function(e){t.setState({loading:!1,user:e})}),this.authListener=e.GLT.auth.onAuth(function(e){t.setState({loading:!1,user:e})}),this.validatingListener=e.GLT.auth.onAuthValidating(function(){t.setState({loading:!0})}),this.props.getInstance&&this.props.getInstance(this)},n.prototype.componentWillUnmount=function(){this.authListener.dispose(),this.validatingListener.dispose()},n.prototype.onButtonSignin=function(t){this.state.user.isLocalGuest()?e.GLT.auth.loginUser(t,this.props):e.GLT.auth.userProfile(t,this.props)},n.prototype.onButtonUserBox=function(e){this.setState({menuOpen:!0})},n.prototype.closeMenu=function(){this.setState({menuOpen:!1})},n.prototype.onButtonProfile=function(e){this.closeMenu(),this.onButtonSignin(e)},n.prototype.onButtonLogout=function(t){this.closeMenu(),e.GLT.auth.logout()},n.prototype.onButtonBadges=function(t){this.closeMenu(),i.showBadgeList(e.GLT.client.user.username)},n.prototype.renderUserBox=function(){var t=this;return this.props.renderUserBox?this.props.renderUserBox():React.createElement("div",null,React.createElement("div",{className:"userBox",onClick:function(e){return t.onButtonUserBox(e)},ref:this.userBoxRef},React.createElement(MaterialUI.Tooltip,{TransitionComponent:MaterialUI.Zoom,title:s("glt.signedIn",{nickname:this.state.user.nickname})},React.createElement("img",{src:this.state.user.iconUrl}))),React.createElement(MaterialUI.Popover,{open:this.state.menuOpen,anchorEl:this.userBoxRef.current,className:this.props.classes.menuRoot,classes:{paper:this.props.classes.menuPaper},onClose:function(e){return t.closeMenu()},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},React.createElement(MaterialUI.MenuItem,{onClick:function(e){return t.onButtonProfile(e)}},s("glt.userBox.profile")),React.createElement(MaterialUI.MenuItem,{onClick:function(e){return t.onButtonBadges(e)}},s("glt.userBox.myBadges")),o.client.isGM()&&React.createElement(MaterialUI.MenuItem,{style:{color:"#0FF"},component:MaterialUI.Link,href:"/gm/tools",target:"gmtools-"+e.Base.projectCode},s("glt.userBox.gmTools")),React.createElement(u.LocaleMenu,{classes:this.props.classes}),React.createElement(MaterialUI.MenuItem,{onClick:function(e){return t.onButtonLogout(e)}},s("glt.userBox.logout"))))},n.prototype.renderLoginBox=function(){var e=this;return this.props.renderLoginBox?this.props.renderLoginBox():React.createElement("div",{className:"loginBox",onClick:function(t){return e.onButtonSignin(t)}},React.createElement(MaterialUI.Tooltip,{TransitionComponent:MaterialUI.Zoom,title:s("glt.signIn")},React.createElement(MaterialUI.Icon,null,"exit_to_app")))},n.prototype.renderLoading=function(){return this.props.renderLoading?this.props.renderLoading():React.createElement("div",{className:"loadingBox"},React.createElement(MaterialUI.CircularProgress,{size:24,thickness:5}))},n.prototype.renderLoginPanel=function(){var e=this;return this.props.renderLoginPanel?this.props.renderLoginPanel(function(t){return e.onButtonSignin(t)}):React.createElement(MaterialUI.Button,{onClick:function(t){return e.onButtonSignin(t)},variant:"contained",color:"primary"},s("glt.signIn"))},n.prototype._renderPanel=function(e){return v(e),e?this.renderLoginPanel():this.state.loading?this.renderLoading():!this.state.user||this.state.user.isLocalGuest()?this.renderLoginBox():this.renderUserBox()},n.prototype.render=function(){var e=!this.state.loading&&this.state.mustLogin&&(!this.state.user||this.state.user.isLocalGuest());return React.createElement("div",{className:e?this.props.classes.loginPanel:this.props.classes.authPanel,ref:this.panelRef},this._renderPanel(e))},n}(React.Component),t("AuthPanel",a)}}}),System.register("Server/components/gmtools/GMToolsDialog",["./ClientUserManage","./ManageHistory","./ManageUserData"],function(t,n){"use strict";function d(t){var n=MaterialUI.withStyles(c)(l),r=Object.assign({contentRenderer:function(e){return React.createElement(n,{dialog:e})},actionRenderer:function(){return null},titleCloseButton:!0,hideCancelButton:!0},t||{});return e.ReactMaterial.dialogs.openAlertDialog(r)}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},s,o,u,a,f,l,c,h=n&&n.id,p=n&&n.id;return t("showGMToolsDialog",d),{setters:[function(e){o=e},function(e){u=e},function(e){a=e}],execute:function(){s=e.Base.translation.translate,f={MANAGE_USERS:"manageUsers",MANAGE_HISTORY:"manageHistory"},l=function(t){function n(e){var n=t.call(this,e)||this;return n.openMainMenu=function(e){n.setState({mainMenu:{el:e.currentTarget}})},n.closeMenus=function(){n.setState({mainMenu:null})},n.onRequestHistory=function(e){n.closeAll(),n.setState({panel:{name:f.MANAGE_HISTORY,params:{refUser:e}}})},n.state={panel:{name:f.MANAGE_USERS,params:{}}},n}return r(n,t),n.prototype.closeAll=function(){this.setState({mainMenu:null})},n.prototype.onMainMenuBtn=function(e){this.closeAll(),this.setState({panel:{name:e,params:{}}})},n.prototype.render=function(){var t=this,n=this.props.classes;return e.GLT.client.isGM()?React.createElement("div",{className:n.root},React.createElement(MaterialUI.AppBar,null,React.createElement(MaterialUI.Toolbar,{variant:"dense"},React.createElement(MaterialUI.IconButton,{color:"inherit",edge:"start",onClick:this.openMainMenu},React.createElement(MaterialUI.Icon,null,"menu")),React.createElement(MaterialUI.Typography,{variant:"h6"},s("glt.gmTools.title",{code:e.Base.projectCode})))),this.state.panel.name==f.MANAGE_USERS&&React.createElement(o.ClientUserManage,i({classes:n,onRequestHistory:this.onRequestHistory},this.state.panel.params)),this.state.panel.name==f.MANAGE_HISTORY&&React.createElement(u.ManageHistory,i({classes:n},this.state.panel.params)),React.createElement(MaterialUI.Popover,{open:!!this.state.mainMenu,anchorEl:this.state.mainMenu&&this.state.mainMenu.el,onClose:this.closeMenus},React.createElement(MaterialUI.MenuItem,{onClick:function(){return t.onMainMenuBtn(f.MANAGE_USERS)}},s("glt.gmTools.btnManageUsers")),React.createElement(MaterialUI.MenuItem,{onClick:function(){return t.onMainMenuBtn(f.MANAGE_HISTORY)}},s("glt.gmTools.btnManageHistory")))):React.createElement("div",{className:n.root},s("glt.gmTools.tip.gmOnly"))},n}(React.Component),t("GMToolsDialog",l),c={root:{display:"flex",flexDirection:"column",position:"absolute",top:60,bottom:0,left:0,right:0},panel:{},listUsersWithSameIP:{position:"absolute",top:0,bottom:0,left:0,right:0,background:"white",transform:"translateX(-100%)",transition:"transform 0.2s ease","&.transIn":{transform:"translateX(0)"},"& .listHead":{display:"flex",alignItems:"center","& .listTitle":{display:"flex",alignItems:"center","& .listTitleUser":{display:"flex",alignItems:"center","& .ipCode":{display:"flex",flexDirection:"column",fontSize:12,fontFamily:"monospace"}},"& img":{width:32,height:32,borderRadius:3,margin:"0 6px"}}}},searchRoot:{flex:1,display:"flex",flexDirection:"column"},searchInput:{flex:1,margin:"5px 20px 0","&.invis":{visibility:"hidden"},"& .MuiOutlinedInput-adornedEnd":{paddingRight:0},"& .error":{color:"red"}},searchInputs:{display:"flex",alignItems:"center",margin:"5px 20px 0","& > *":{marginRight:10},"& .gm":{display:"flex",alignItems:"center","& img":{width:32,height:32,borderRadius:3,margin:"-8px 5px -8px 0"},"& .name":{maxWidth:120,whiteSpace:"nowarp",overflow:"hidden",textOverflow:"ellipsis"}}},searchResult:{margin:"0 10px","& .userRecordsRoot":{width:"100%"},"& .headUsername":{paddingLeft:50},"& .usernameIcon":{display:"inline-flex",alignItems:"center","& img":{width:32,height:32,margin:"0 6px",borderRadius:3}},"& .MuiTableBody-root .MuiTableCell-root":{padding:"0 8px"},"& .MuiTableBody-root .MuiTableRow-root:hover":{background:"#eee"},"& .btnSuspend":{color:"#a00"},"& .suspendDays":{textAlign:"right",paddingRight:8},"& .timestamp":{textAlign:"left"},"& .meta":{fontSize:12,wordBreak:"break-all",color:"#999",minHeight:28,display:"flex",alignItems:"center"},"& .logins":{textAlign:"right",paddingRight:8},"& .ipCode":{fontSize:12,fontFamily:"monospace"},"& .actions":{textAlign:"right"},"& .searchBrief":{display:"flex",alignItems:"center",margin:15},"& .gmAction":{color:"#666","& .negative":{color:"#C00"},"& .positive":{color:"#090"}}},menuItem:{"& .gm":{display:"flex",alignItems:"center","& img":{width:32,height:32,marginRight:6,borderRadius:3}}},manageUserData:Object.assign({position:"absolute",top:0,bottom:0,left:0,right:0,background:"white",transform:"translateX(-100%)",transition:"transform 0.2s ease","&.transIn":{transform:"translateX(0)"},"& .listHead":{display:"flex",alignItems:"center","& .listTitle":{display:"flex",alignItems:"center","& .listTitleUser":{display:"flex",alignItems:"center"},"& img":{width:32,height:32,borderRadius:3,margin:"0 6px"}}}},a.getManageUserDataStyles())}}}}),System.register("Server/messages/events/GameroomManagerEvent",[],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a,f,l,c=t&&t.id,h=t&&t.id;return{setters:[],execute:function(){r=function(){function e(e){this.type=e}return e.TYPES={DISPOSED:"disposed",BRAINER_CHANGED:"brainerChanged",I_LEFT_ROOM:"ILeftRoom"},e}(),e("GMEvent",r),i=function(e){function t(n){var r=e.call(this,t.TYPE)||this;return r.player=n,r}return n(t,e),t.TYPE="playerJoined",t}(r),e("GMPlayerJoinedEvent",i),s=function(e){function t(n){var r=e.call(this,t.TYPE)||this;return r.playerCode=n,r}return n(t,e),t.TYPE="playerLeft",t}(r),e("GMPlayerLeftEvent",s),o=function(e){function t(n,r,i){var s=e.call(this,t.TYPE)||this;return s.playerCode=n,s.key=r,s.value=i,s}return n(t,e),t.TYPE="playerStateChanged",t}(r),e("GMPlayerStateChangedEvent",o),u=function(e){function t(n,r,i){var s=e.call(this,t.TYPE)||this;return s.playerCode=n,s.synced=r,s.brainerCode=i,s}return n(t,e),t.TYPE="playerSyncedChanged",t}(r),e("GMPlayerSyncedChangedEvent",u),a=function(e){function t(n,r,i){var s=e.call(this,t.TYPE)||this;return s.zoneCode=n,s.roomCode=r,s.status=i,s}return n(t,e),t.TYPE="roomStatusChanged",t}(r),e("GMRoomStatusChangedEvent",a),f=function(e){function t(n,r,i){var s=e.call(this,t.TYPE)||this;return s.senderCode=n,s.data=r,s.route=i,s.response=1,s}return n(t,e),t.TYPE="dataReceived",t.ROUTE={BROADCAST_IN_ROOM:"broadcastInRoom",BROADCAST_TO_ROOM:"broadcastToRoom",BETWEEN_ROOMMATES:"betweenRoommates",TO_DECISIONMAKER:"toDecisionmaker",WATCHER_TO_ROOM:"watcherToRoom",ROOM_TO_WATCHERS:"roomToWatchers",WATCHER_TO_WATCHERS:"roomToWatchers"},t}(r),e("GMDataReceivedEvent",f),l=function(e){function t(t,n,r){var i=e.call(this,f.TYPE)||this;return i.scoreKey=t,i.player=n,i.score=r,i}return n(t,e),t.TYPE="finalScoreSet",t}(r),e("GMFinalScoreSetEvent",l)}}}),System.register("Server/utils/DialogQueue",["./../components/BadgeDialog","./../components/UserItemDialog"],function(t,n){"use strict";function f(e,t){e.options=e.options||{};var n=e.options.onClose;e.options.onClose=function(e,r){n&&n(e,r),t()}}var r,i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(){function t(){this._queue=[]}return t.prototype.push=function(e){this._queue.push(e),this._queue.length==1&&this.showNext()},t.prototype.showNext=function(){var t=this;if(this._queue.length){var n=this._queue[0];n.showDialog().then(function(){return e.Base.wait(500)}).then(function(){t._queue.shift(),t.showNext()})}},t.prototype.pushAwardGameBadgeDialog=function(t){this.push({showDialog:function(){return new Promise(function(n){f(t,n),r.showAwardBadgeDialog(t.gameBadge,t.options),t.soundAlias&&e.Base.resourceManager.playSound(t.soundAlias)})}})},t.prototype.publicAwardStoreItemDialog=function(t){this.push({showDialog:function(){return new Promise(function(n){f(t,n),i.showAwardUserItemDialog(t.userItem,t.gameItem,t.count,t.options),t.soundAlias&&e.Base.resourceManager.playSound(t.soundAlias)})}})},t}(),t("DialogQueue",s),t("dialogQueue",o=new s)}}}),System.register("Server/events/SocketClient",["./../index","./../messages/events/GameroomManagerEvent"],function(e,t){"use strict";function a(e){return{id:e.code,username:e.user.username,name:e.user.nickname,iconUrl:e.user.iconUrl,guest:e.user.guest,isMe:e.isMe()}}var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o=t&&t.id,u=t&&t.id;return e("playerToCgEventsPlayer",a),{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(e){function t(t){var n=e.call(this)||this;return n.roomManager=t,n.broadcastEventEmitter=new PIXI.utils.EventEmitter,n.decisionMakerEventEmitter=new PIXI.utils.EventEmitter,n.roommateEventEmitter=new PIXI.utils.EventEmitter,n.playerMap={},n.roomManager.on(i.GMDataReceivedEvent.TYPE,n.onDataReceived,n),n.me=a(r.msg.myPlayer),n}return n(t,e),t.prototype.getMe=function(){return this.me},t.prototype.getPlayer=function(e){if(e==this.me.id)return this.me;var t=this.playerMap[e];if(!t){var n=this.roomManager.players.find(function(t){return t.code==e});n&&(t=this.playerMap[e]=a(n))}return t},t.prototype.listPlayers=function(){var e=this;return this.roomManager.players.map(function(t){return e.getPlayer(t.code)})},t.prototype.onDataReceived=function(e){if(e.data.type=="_cgevtData"){this.emit(t.EVENT.ON_CGEVT_DATA,e);if(e.route==i.GMDataReceivedEvent.ROUTE.BROADCAST_IN_ROOM)this.broadcastEventEmitter.emit(e.data.topic,e.data.data,e.senderCode);else if(e.route==i.GMDataReceivedEvent.ROUTE.TO_DECISIONMAKER){var n={};this.decisionMakerEventEmitter.emit(e.data.topic,e.data.data,e.senderCode,n),e.response=n}else if(e.route==i.GMDataReceivedEvent.ROUTE.BETWEEN_ROOMMATES){var n={};this.roommateEventEmitter.emit(e.data.topic,e.data.data,e.senderCode,n),e.response=n}else e.route==i.GMDataReceivedEvent.ROUTE.ROOM_TO_WATCHERS&&this.broadcastEventEmitter.emit(e.data.topic,e.data.data,e.senderCode)}},t.prototype.isDecisionMaker=function(){return this.roomManager.isThisDecisionMaker},t.prototype.broadcast=function(e,t){if(this.roomManager.isThisWatcher)return;var n={type:"_cgevtData",topic:e,data:t};this.roomManager.sendDataInRoom(n),this.roomManager.sendDataToWatchers(n)},t.prototype.sendDataToDecisionMaker=function(e,t){if(this.roomManager.isThisWatcher)return;return this.roomManager.sendDataToRoomDecisionmaker({type:"_cgevtData",topic:e,data:t})},t.prototype.sendDataToRoommate=function(e,t,n){if(this.roomManager.isThisWatcher)return;return this.roomManager.sendDataToRoommate(e,{type:"_cgevtData",topic:t,data:n})},t.prototype.onBroadcastData=function(e,t,n){this.broadcastEventEmitter.on(e,t,n)},t.prototype.offBroadcastData=function(e,t,n){this.broadcastEventEmitter.off(e,t,n)},t.prototype.onDecisionMakerData=function(e,t,n){this.decisionMakerEventEmitter.on(e,t,n)},t.prototype.offDecisionMakerData=function(e,t,n){this.decisionMakerEventEmitter.off(e,t,n)},t.prototype.onRoommateData=function(e,t,n){this.roommateEventEmitter.on(e,t,n)},t.prototype.offRoommateData=function(e,t,n){this.roommateEventEmitter.off(e,t,n)},t.prototype.dispose=function(){this.broadcastEventEmitter.removeAllListeners(),this.decisionMakerEventEmitter.removeAllListeners(),this.roommateEventEmitter.removeAllListeners(),this.roomManager.off(i.GMDataReceivedEvent.TYPE,this.onDataReceived,this),this.roomManager.dispose()},t.EVENT={ON_CGEVT_DATA:"onCgevtData"},t}(PIXI.utils.EventEmitter),e("SocketClient",s)}}}),System.register("Server/translations/trans.zh",[],function(t,n){"use strict";var r,i,s=n&&n.id,o=n&&n.id;return{setters:[],execute:function(){r=e.Base.locales.LANG,t("tw_trans_zh",i=1),e.Base.translation.getTranslation(r.ZH).importJson({signIn:"\u767b\u5165",signedIn:"\u5df2\u767b\u5165 {{nickname}}",close:"\u95dc\u9589",error:"\u7cdf\u7cd5...",processing:"\u8655\u7406\u4e2d...",confirm:"\u78ba\u8a8d",cancel:"\u53d6\u6d88",loadMore:"\u8f09\u5165\u66f4\u591a",message:{connectOffline:"\u60a8\u76ee\u524d\u9032\u884c\u7684\u662f\u96e2\u7dda\u904a\u6232\u3002"},hscores:{title:"\u9ad8\u5206\u6392\u884c\u699c",rank:"\u6392\u540d",player:"\u73a9\u5bb6",score:"\u5206\u6578",time:"\u6642\u9593",timeRange:{Daily:"\u4eca\u65e5",Weekly:"\u672c\u9031",Monthly:"\u672c\u6708",History:"\u6b77\u53f2"}},submitScore:{yourScore:"\u4f60\u7372\u5f97\u4e86 {{score}} \u5206",preparing:"\u6e96\u5099\u4e2d",submiting:"\u5206\u6578\u4e0a\u50b3\u4e2d",submitted:"\u5206\u6578\u5df2\u4e0a\u50b3",needLogin:"\u5c1a\u672a\u767b\u5165",needRegister:"\u8a2a\u5ba2\u7121\u6cd5\u8a18\u9304\u5206\u6578",logining:"\u7b49\u5f85\u767b\u5165\u4e2d",signIn:"\u767b\u5165\u4e26\u4e0a\u50b3\u5206\u6578",resignIn:"\u91cd\u65b0\u767b\u5165\u4e26\u4e0a\u50b3\u5206\u6578",doneButton:"\u592a\u68d2\u4e86!",cancelButton:"\u7b97\u4e86",doneSkipButton:"\u7e7c\u7e8c",skipSubmit:"\u5206\u6578\u4e0d\u4e0a\u50b3\u4e86",highscoreButton:"\u6392\u884c\u699c",error:"\u5594\u4e0d! \u4f3a\u670d\u5668\u51fa\u4e8b\u4e86!"},badgeList:{title:{my:"\u6211\u7684\u52f3\u7ae0",other:"{{user}} \u7684\u52f3\u7ae0",guest:"\u8a2a\u5ba2\u7684\u52f3\u7ae0"},emptyList:"...\u627e\u4e0d\u5230\u52f3\u7ae0\u53ef\u4ee5\u79c0..."},itemStore:{title:"\u9053\u5177\u5546\u5e97",noAddFund:"\u5132\u503c\u529f\u80fd\u5c1a\u672a\u958b\u653e\u3002",owned:"\u5df2\u64c1\u6709",expiresOn:"{{date}} \u5230\u671f",myDeposits:"\u6211\u7684\u5b58\u6b3e",addFunds:"\u589e\u52a0\u8cc7\u91d1",purchase:"\u8cfc\u8cb7",alreadyOwned:"\u5df2\u7d93\u64c1\u6709\u4e86",maxLimitReached:"\u5df2\u9054\u6301\u6709\u6578\u91cf\u4e0a\u9650",subtotal:"\u5c0f\u8a08",yourFund:"\u4f60\u7684\u8cc7\u91d1",useFund:"\u4f7f\u7528\u8cc7\u91d1",insuficientFunds:"\u8cc7\u91d1\u4e0d\u8db3",total:"\u7e3d\u8a08",payWith:"\u4f7f\u7528",defaultCategory:"(\u9810\u8a2d)",empty:"\u76ee\u524d\u6c92\u6709\u8ca9\u8ce3\u4efb\u4f55\u5546\u54c1\u3002",itemNotFound:"\u9019\u662f\u4e00\u500b\u96b1\u85cf\u9053\u5177\uff0c\u6216\u6b64\u9053\u5177\u5df2\u88ab\u958b\u767c\u8005\u522a\u9664\u4e86\u3002",gltDollarNotSupport:"\u9019\u500b\u904a\u6232\u76ee\u524d\u4e0d\u652f\u63f4\u560e\u59c6\u5e63\u7684\u4f7f\u7528\u3002",refillGltDollar:"\u88dc\u5145\u560e\u59c6\u5e63",expirableDays:"\u4f7f\u7528\u671f: {{days}}\u5929",expirableOneDay:"\u4f7f\u7528\u671f: \u4e00\u5929",unitPrice:"\u55ae\u50f9",buyAgainOff:"\u518d\u6b21\u8cfc\u8cb7\u6298\u6263",discount:{value:"{{scale}}\u6298",tooltip:"{{name}}\u7279\u50f9: \u73fe\u5728 ${{price}}"},purchased:{title:"\u4ea4\u6613\u5b8c\u6210",message:"\u8b1d\u8b1d\u60a8\u7684\u8cfc\u8cb7!"},gameDollar:{name:"\u904a\u6232\u5e63"},gltDollar:{name:"\u560e\u59c6\u5e63"},gltPoint:{name:"\u560e\u59c6\u9ede\u6578"}},transactions:{title:"\u4ea4\u6613\u8a18\u9304",table:{category:"\u4ea4\u6613",gameItem:"\u6b66\u5668\u9053\u5177",itemCount:"\u6578\u91cf"}},backpack:{title:"\u6211\u7684\u80cc\u5305",btnStore:"\u5546\u5e97",empty:"\u76ee\u524d\u80cc\u5305\u4e2d\u6c92\u6709\u4efb\u4f55\u9053\u5177\u3002",close:"\u80cc\u5305\u88ab\u9396\u4f4f\uff0c\u958b\u4e0d\u4e86\u3002",menu:{refill:"\u88dc\u5145"}},userBox:{profile:"\u500b\u4eba\u6a94\u6848",logout:"\u767b\u51fa",myBadges:"\u6211\u7684\u52f3\u7ae0",gmTools:"GM\u7ba1\u7406\u5de5\u5177",language:"\u8a9e\u8a00"},annoucement:{title:{toProject:"\u904a\u6232\u5ee3\u64ad",toGamelet:"\u560e\u59c6\u5ee3\u64ad",toPlayer:"\u500b\u4eba\u901a\u77e5"}},time:{inAMinute:"\u4e00\u5206\u9418\u5167",aMinute:"\u4e00\u5206\u9418\u524d",minutes:"{{minutes}}\u5206\u9418\u524d",hours:"{{hours}}\u5c0f\u6642\u524d",days:"{{days}}\u5929\u524d"},time2:{aMinute:"\u4e00\u5206\u9418",minutes:"{{minutes}}\u5206\u9418",hours:"{{hours}}\u5c0f\u6642",days:"{{days}}\u5929",years:"{{years}}\u5e74"},title:{badgeAwarded:"\u7372\u9812\u52f3\u7ae0",itemAwarded:"\u7372\u5f97\u7269\u54c1"},gmTools:{title:"\u7ba1\u7406\u54e1\u5de5\u5177: {{code}}",labelSearchPlayer:"\u641c\u5c0b\u73a9\u5bb6",labelSearchStart:"\u958b\u59cb\u65e5\u671f",labelSearchEnd:"\u7d50\u675f\u65e5\u671f",labelSearchTime:"\u65e5\u671f",labelSearchForward:"\u5411\u4e4b\u5f8c\u641c\u5c0b",labelSearchBackward:"\u5411\u5148\u524d\u641c\u5c0b",labelSearchGM:"\u7ba1\u7406\u54e1",labelSearchUser:"\u91dd\u5c0d\u73a9\u5bb6",labelGMAction:"\u7ba1\u7406\u52d5\u4f5c",labelScores:"\u5206\u6578\u8b8a\u52d5",gmActionSet:{all:"\u6240\u6709\u52d5\u4f5c",user:"\u73a9\u5bb6\u76f8\u95dc",article:"\u8a0e\u8ad6\u5340\u76f8\u95dc"},allGM:"\u6240\u6709\u7ba1\u7406\u54e1",labelNote:"\u8a3b\u8a18",labelDays:"\u5929\u6578",searchedCount:"\u5df2\u627e\u5230 {{count}} \u7b46\u8cc7\u6599",tip:{gmOnly:"GM\u5c08\u7528",twoCharMin:"\u81f3\u5c11\u9700\u8f38\u5165\u5169\u500b\u5b57\u5143",searching:"\u641c\u5c0b\u4e2d...",result:"\u627e\u5230{{count}}\u7b46\u8cc7\u6599"},table:{username:"\u5e33\u865f",nickname:"\u66b1\u7a31",suspended:"\u505c\u6b0a",start:"\u958b\u59cb",end:"\u7d50\u675f",records:"\u767b\u5165\u6b21\u6578",v4c:"IPv4\u4ee3\u78bc",v6c:"IPv6\u4ee3\u78bc",time:"\u6642\u9593",action:"\u52d5\u4f5c",gm:"GM",user:"\u73a9\u5bb6",note:"\u8a3b\u8a18",scoreMode:"\u985e\u5225",score:"\u5206\u6578",paramInt:"\u53c3\u6578",paramStr:"\u5b57\u4e32",meta:"\u5176\u4ed6"},tab:{user_scores:"\u5206\u6578",user_badges:"\u52f3\u7ae0",user_actions:"\u52d5\u4f5c\u8a18\u9304"},titleSuspendDays:"\u589e\u52a0\u505c\u6b0a\u5929\u6578",titleUnsuspendDays:"\u6e1b\u5c11\u505c\u6b0a\u5929\u6578",btnListIpRecords:"\u73a9\u5bb6IP\u8a18\u9304",btnListSameIpUsers:"\u76f8\u540cIP\u5e33\u865f",titleSameIPUsers:"\u76f8\u540cIP\u5e33\u865f",titleManagerUserData:"\u7ba1\u7406\u73a9\u5bb6\u8a18\u9304",titleUserIpRecords:"\u73a9\u5bb6IP\u8a18\u9304",titleRemoveBadge:"\u522a\u9664\u52f3\u7ae0",btnManageUsers:"\u73a9\u5bb6\u7ba1\u7406\u54e1",btnManageHistory:"\u7ba1\u7406\u8a18\u9304",btnManageHistoryUser:"\u9019\u500b\u73a9\u5bb6\u7684\u7ba1\u7406\u8a18\u9304",btnManageUserData:"\u7ba1\u7406\u73a9\u5bb6\u8a18\u9304",btnSubmitScore:"\u4e0a\u50b3\u5206\u6578",msgRemoveBadge:"\u522a\u9664\u52f3\u7ae0({{badge}})"}},"glt.")}}}),System.register("Server/messages/events/MsgServerEvent",["../vo/Gameroom","../vo/Player"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D=t&&t.id,P=t&&t.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){s=function(){function e(e){this.type=e}return e}(),e("MsgServerEvent",s),o=function(e){function t(t,n){var r=e.call(this,t)||this;return r.data=n,r}return n(t,e),t.TYPES={CONNECT_OFFLINE:"connectOffline"},t}(s),e("MsgServerOfflineEvent",o),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.socket=n,r}return n(t,e),t.TYPES={CONNECT:"connect",DISCONNECT:"disconnect",NETWORK_DELAY_UPDATED:"networkDelayUpdated"},t}(s),e("SocketEvent",u),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.socket=n,i.error=r,i}return n(t,e),t.TYPES={ERROR:"error",CONNECT_ERROR:"connectError",CONNECT_TIMEOUT:"connectTimeout"},t}(s),e("SocketErrorEvent",a),f=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.msgType=n,i.error=r,i}return n(t,e),t.TYPES={UNKNOWN_MESSAGE:"unknownMessage",ERROR_PROCESS_GLTMSG:"errorProcessGltmsg",ERROR_PROCESS_CMD_RESPONSE:"errorProcessCmdResponse"},t}(s),e("MsgErrorEvent",f),l=function(e){function t(n){var r=e.call(this,t.TYPE)||this;return r.player=n,r}return n(t,e),t.TYPE="login",t}(s),e("LoginEvent",l),c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.dataType=n,i.rawData=r,i}return n(t,e),t.TYPES={DATA_RECEIVED:"dataReceived",RESPONSE_RECEIVED:"responseReceived"},t}(s),e("DataReceivedEvent",c),h=function(e){function t(t,n,r,i){var s=e.call(this,t)||this;return s.senderCode=n,s.roomCode=r,s.data=i,s}return n(t,e),t.TYPES={BROADCAST_IN_ROOM:"broadcastInRoom",BROADCAST_TO_ROOM:"broadcastToRoom",BROADCAST_TO_ZONE:"broadcastToZone",BROADCAST_IN_PROJECT:"broadcastInProject",BROADCAST_IN_GAMELET:"broadcastInGamelet"},t}(s),e("BroadcastEvent",h),p=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.senderCode=n,i.data=r,i.response=1,i}return n(t,e),t}(s),d=function(e){function t(n,r){return e.call(this,t.TYPE,n,r)||this}return n(t,e),t.TYPE="monitorDataToPlayer",t}(p),e("MonitorDataToPlayerEvent",d),v=function(e){function t(n,r,i,s){var o=e.call(this,t.TYPE,n,s)||this;return o.senderProjectCode=r,o.senderMsgVersion=i,o}return n(t,e),t.TYPE="dataToPlayer",t}(p),e("DataToPlayerEvent",v),m=function(e){function t(n,r,i){var s=e.call(this,t.TYPE,n,i)||this;return s.roomCode=r,s}return n(t,e),t.TYPE="dataToRoommate",t}(p),e("DataToRoommateEvent",m),g=function(e){function t(n,r,i,s){var o=e.call(this,t.TYPE,n,s)||this;return o.senderRoomCode=r,o.roomCode=i,o}return n(t,e),t.prototype.isFromMyRoom=function(){return this.senderRoomCode==this.roomCode},t.TYPE="dataToDecisionmaker",t}(p),e("DataToRoomDecisionmakerEvent",g),y=function(e){function t(n,r){var s=e.call(this,t.TYPE)||this;return s.roomCode=n,s.player=new i.Player(r),s}return n(t,e),t.TYPE="playerJoinedRoom",t}(s),e("PlayerJoinedRoomEvent",y),b=function(e){function t(n,r){var i=e.call(this,t.TYPE)||this;return i.roomCode=n,i.playerCode=r,i}return n(t,e),t.TYPE="playerLeftRoom",t}(s),e("PlayerLeftRoomEvent",b),w=function(e){function t(n){var i=e.call(this,t.TYPE)||this;return i.roomAndStatus=new r.GameroomAndStatus(n),i}return n(t,e),t.TYPE="roomCreated",t}(s),e("RoomCreatedEvent",w),E=function(e){function t(n,r){var i=e.call(this,t.TYPE)||this;return i.zoneCode=n,i.roomCode=r,i}return n(t,e),t.TYPE="roomClosed",t}(s),e("RoomClosedEvent",E),S=function(e){function t(t,n,i,s){var o=e.call(this,t)||this;return o.zoneCode=n,o.roomCode=i,o.status=new r.GameroomStatus(s),o}return n(t,e),t.TYPES={ROOM_STATUS_CHANGED:"roomStatusChanged",MY_ROOM_STATUS_CHANGED:"myRoomStatusChanged"},t}(s),e("RoomStatusChangedEvent",S),x=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.roomCode=n,i.brainerCode=r,i}return n(t,e),t.TYPES={ROOM_BRAINER_CHANGED:"roomBrainerChanged",MY_ROOM_BRAINER_CHANGED:"myRoomBrainerChanged"},t}(s),e("RoomBrainerChangedEvent",x),T=function(e){function t(t,n,r,i,s){var o=e.call(this,t)||this;return o.roomCode=n,o.playerCode=r,o.key=i,o.value=s,o}return n(t,e),t.TYPES={ROOM_PLAYER_STATE_CHANGED:"roomPlayerStateChanged",MY_ROOM_PLAYER_STATE_CHANGED:"myRoomPlayerStateChanged"},t}(s),e("RoomPlayerStateChangedEvent",T),N=function(e){function t(t,n,r,i){var s=e.call(this,t)||this;return s.roomCode=n,s.playerCode=r,s.states=i,s}return n(t,e),t.TYPES={ROOM_PLAYER_STATES_CHANGED:"roomPlayerStatesChanged",MY_ROOM_PLAYER_STATES_CHANGED:"myRoomPlayerStatesChanged"},t}(s),e("RoomPlayerStatesChangedEvent",N),C=function(e){function t(t,n,r,i,s){var o=e.call(this,t)||this;return o.roomCode=n,o.playerCode=r,o.synced=i,o.brainerCode=s,o}return n(t,e),t.TYPES={ROOM_PLAYER_SYNCED_CHANGED:"roomPlayerSyncedChanged",MY_ROOM_PLAYER_SYNCED_CHANGED:"myRoomPlayerSyncedChanged"},t}(s),e("RoomPlayerSyncedChangedEvent",C),k=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.zoneCode=n,i.status=r,i}return n(t,e),t.TYPES={ZONE_STATUS_CHANGED:"zoneStatusChanged"},t}(s),e("ZoneStatusChangedEvent",k),L=function(e){function t(t,n,r,i,s,o){var u=e.call(this,t)||this;return u.zoneCode=n,u.playerCode=r,u.key=i,u.value=s,u.brainerCode=o,u}return n(t,e),t.TYPES={ZONE_PLAYER_STATE_CHANGED:"zonePlayerStateChanged"},t}(s),e("ZonePlayerStateChangedEvent",L),A=function(e){function t(t,n,r,i,s){var o=e.call(this,t)||this;return o.zoneCode=n,o.playerCode=r,o.states=i,o.brainerCode=s,o}return n(t,e),t.TYPES={ZONE_PLAYER_STATES_CHANGED:"zonePlayerStatesChanged"},t}(s),e("ZonePlayerStatesChangedEvent",A),O=function(e){function t(t,n,r,i,s){var o=e.call(this,t)||this;return o.zoneCode=n,o.playerCode=r,o.synced=i,o.brainerCode=s,o}return n(t,e),t.TYPES={ZONE_PLAYER_SYNCED_CHANGED:"zonePlayerSyncedChanged"},t}(s),e("ZonePlayerSyncedChangedEvent",O),M=function(e){function t(n,r){var i=e.call(this,t.TYPE)||this;return i.zoneCode=n,i.playerCode=r,i}return n(t,e),t.TYPE="playerLeftZone",t}(s),e("PlayerLeftZoneEvent",M),_=function(e){function t(n){var r=e.call(this,t.TYPE)||this;return r.playerCode=n,r}return n(t,e),t.TYPE="playerCheated",t}(s),e("PlayerCheatedEvent",_)}}}),System.register("Server/translations/trans.en",[],function(t,n){"use strict";var r,i,s=n&&n.id,o=n&&n.id;return{setters:[],execute:function(){r=e.Base.locales.LANG,t("tw_trans_en",i=1),e.Base.translation.getTranslation(r.EN).importJson({signIn:"Sign In",signedIn:"Signed in as {{nickname}}",close:"Close",error:"Oops...",processing:"Processing...",confirm:"Confirm",cancel:"Cancel",loadMore:"Load more",message:{connectOffline:"You are currently in an offline game."},hscores:{title:"HIGH SCORES",rank:"RANK",player:"PLAYER",score:"SCORE",time:"TIME",timeRange:{Daily:"Today",Weekly:"This Week",Monthly:"This Month",History:"History"}},submitScore:{yourScore:"Your score: {{score}}",preparing:"Preparing",submiting:"Submitting",submitted:"Submitted",needLogin:"Not signed in",needRegister:"Only registered user can submit score.",signIn:"Sign in and Submit score",resignIn:"Sign in again and Submit score",logining:"Waiting for Signing in",doneButton:"Great!",cancelButton:"Skip",doneSkipButton:"Continue",skipSubmit:"Skip submitting",highscoreButton:"High Scores",error:"OH NO! Server is down!"},badgeList:{title:{my:"My Badges",other:"{{user}}'s Badges",guest:"Guest's Badge ?"},emptyList:"...Nothing to show..."},itemStore:{title:"ITEM STORE",noAddFund:"'Add Fund' is in development.",owned:"owned",expiresOn:"Expires on {{date}}",myDeposits:"My deposits",addFunds:"Add Funds",purchase:"Purchase",alreadyOwned:"Already owned",maxLimitReached:"Max limit reached",subtotal:"Subtotal",yourFund:"Your fund",useFund:"Use fund",insuficientFunds:"Insuficient Funds",total:"Total",payWith:"Pay with",defaultCategory:"(Default)",empty:"There is currently no item for sell.",itemNotFound:"This is a hidden item or deleted by the creator.",gltDollarNotSupport:"GLT Dollar is currently not supported in this game.",refillGltDollar:"Refill GLT Dollar",expirableDays:"Validity period: {{days}} days",expirableOneDay:"Validity period: one day",unitPrice:"Unit Price",buyAgainOff:"Buy Again Sale",discount:{value:"{{sale}}%Off",tooltip:"{{name}} Discount: NOW ${{price}}"},purchased:{title:"Purchase Completed",message:"Thank you!"},gameDollar:{name:"Game Dollar"},gltDollar:{name:"GLT Dollar"},gltPoint:{name:"GLT Point"}},transactions:{title:"Transaction History",table:{category:"Transaction",gameItem:"Item",itemCount:"Amount"}},backpack:{title:"My Backpack",btnStore:"Store",empty:"There is currently no item in the backpack.",close:"The backpack is currently locked\u3002",menu:{refill:"Refill"}},userBox:{profile:"Profile",logout:"Logout",myBadges:"My Badges",gmTools:"GM Tools",language:"Language"},annoucement:{title:{toProject:"Game Broadcast",toGamelet:"Gamelet Broadcast",toPlayer:"Personal Notification"}},time:{inAMinute:"< 1 min",aMinute:"1 min ago",minutes:"{{minutes}} mins ago",hours:"{{hours}} hours ago",days:"{{days}} days ago"},time2:{aMinute:"1 min",minutes:"{{minutes}} mins",hours:"{{hours}} hours",days:"{{days}} days",years:"{{years}} years"},title:{badgeAwarded:"Badge Awarded",itemAwarded:"Item Awarded"},gmTools:{title:"GM Tool: {{code}}",labelSearchPlayer:"Search player",labelSearchStart:"Start",labelSearchEnd:"End",labelSearchTime:"Time",labelSearchForward:"Forward",labelSearchBackward:"Backward",labelSearchGM:"GM",labelSearchUser:"Player",labelGMAction:"Action",labelScores:"Delta Scores",gmActionSet:{all:"All Actions",user:"Player Related",article:"Forum Related"},allGM:"ALL GM",labelNote:"Note",labelDays:"Days",searchedCount:"Found {{count}}",tip:{gmOnly:"GM only",twoCharMin:"Must search with minimum 2 characters.",searching:"Searching...",result:"Found {{count}}"},table:{username:"Username",nickname:"Nickname",suspended:"Suspended",start:"Start",end:"End",records:"Logins",v4c:"IPv4 Code",v6c:"IPv6 Code",time:"Time",action:"Action",gm:"GM",user:"Player",note:"Note",scoreMode:"Mode",score:"Score"},tab:{user_scores:"Scores",user_badges:"Badges",user_actions:"Actions"},titleSuspendDays:"+Suspend Days",titleUnsuspendDays:"Restore Suspended Days",btnListIpRecords:"List IP Records",btnListSameIpUsers:"Users with Same IP",titleSameIPUsers:"Same IP Users",titleManagerUserData:"Manage User Data",titleUserIpRecords:"User IP Records",titleRemoveBadge:"Remove Badge",btnManageUsers:"Manage Players",btnManageHistory:"Manage History",btnManageHistoryUser:"Manage History of This User",btnManageUserData:"Manage User Data",btnSubmitScore:"Submit Score",msgRemoveBadge:"Delete badge ({{badge}})"}},"glt.")}}}),System.register("Server/messages/managers/AbstractRoomManager",["./../../index","./../events/GameroomManagerEvent","./../../events/SocketClient"],function(t,n){"use strict";function h(e){return"#watch@"+e}function p(t,n){return n===void 0&&(n=0),t.sendDataToRoomDecisionmaker({type:"CgEventManagerSync"}).then(function(r){return r.data?r.data:n<20?e.Base.wait(300*(n+1)).then(function(){return p(t,n+1)}):Promise.reject("Not able to sync events data...")})}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l=n&&n.id,c=n&&n.id;return t("getWatchroomCode",h),{setters:[function(e){i=e},function(e){s=e},function(e){o=e}],execute:function(){u={},a=function(){function e(e){this._code=e,u[e]=this}return e.getByCode=function(e){return u[e]},Object.defineProperty(e.prototype,"code",{get:function(){return this._code},enumerable:!0,configurable:!0}),e.OPEN=new e("open"),e.CLOSE=new e("close"),e}(),t("GameroomType",a),f=function(e){function t(t){var n=e.call(this)||this;return n._roomType=t,n._players=[],n}return r(t,e),Object.defineProperty(t.prototype,"myPlayer",{get:function(){return i.msg.myPlayer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"roomType",{get:function(){return this._roomType},set:function(e){this._roomType=e||a.OPEN},enumerable:!0,configurable:!0}),t.prototype.dispatchEvent=function(e){this.emit(e.type,e,this)},t.prototype.initialize=function(){return Promise.reject("not implemented")},t.prototype.leaveRoomAndDispose=function(){return this.dispose(),Promise.resolve()},t.prototype.dispose=function(){this.dispatchEvent(new s.GMEvent(s.GMEvent.TYPES.DISPOSED)),this.removeAllListeners()},Object.defineProperty(t.prototype,"players",{get:function(){return this._players},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playersIncludingLeft",{get:function(){return this.players},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"roomFull",{get:function(){return this._roomFull},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isThisWatcher",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isThisDecisionMaker",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isThisRoomCreator",{get:function(){return i.msg.myPlayer&&this._roomFull.room.creator.code==i.msg.myPlayer.code},enumerable:!0,configurable:!0}),t.prototype.isPlayerCurrentlyInRoom=function(e){return!!this._players.find(function(t){return t.code==e})},t.prototype.isUserCurrentlyInRoom=function(e){return!!this._players.find(function(t){return t.user.username==e})},t.prototype.mergePlayer=function(e,t){var n=t.find(function(t){return t.code==e.code});return n?(Object.assign(n,e),n):(t.push(e),e)},t.prototype.setMyPlayerSynced=function(e,t){return Promise.reject("setMyPlayerSynced not implemented")},t.prototype.setRoomState=function(e,t){return Promise.reject("setRoomState not implemented")},t.prototype.setRoomStateJson=function(e){return Promise.reject("setRoomState not implemented")},t.prototype.setMyPlayerState=function(e,t){return Promise.reject("setMyPlayerState not implemented")},t.prototype.lockRoomAndSyncPlayerState=function(e,t,n){return t===void 0&&(t="_lockGmReady"),n===void 0&&(n=!0),Promise.reject("lockRoomAndSyncPlayerState not implemented")},t.prototype.syncPlayerState=function(e,t){return Promise.reject("syncPlayerState not implemented")},t.prototype.sendDataToRoommate=function(e,t){return Promise.reject("sendDataToRoommate not implemented")},t.prototype.sendDataInRoom=function(e){return Promise.reject("sendDataInRoom not implemented")},t.prototype.sendDataToRoomDecisionmaker=function(e){return i.msg.gameroomService.sendDataToRoomDecisionmaker(e,this._roomFull.room.code)},t.prototype.sendDataToWatchers=function(e){this._sendDataToWatchers(e,s.GMDataReceivedEvent.ROUTE.ROOM_TO_WATCHERS)},t.prototype._sendDataToWatchers=function(e,t,n){var r={route:t,data:e};n&&(r.type=n),i.msg.gameroomService.broadcastToZone(this.watchZoneCode,r)},t.prototype.syncEventsManager=function(e){return e.setSocketClient(new o.SocketClient(this)),p(this).then(function(t){console.log("on data CgEventManagerSync"),e.importSyncJson(t),e.setReady()})},t}(PIXI.utils.EventEmitter),t("AbstractRoomManager",f)}}}),System.register("Server/messages/vo/Gamezone",[],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l,c=n&&n.id,h=n&&n.id;return{setters:[],execute:function(){i=e.Base.utils.ArrayUtil,s=e.GLT.commands.vo.AbstractVo,o=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"code",{get:function(){return this._vo.code},enumerable:!0,configurable:!0}),t}(s),t("Gamezone",o),u=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"stateJson",{get:function(){return this._vo.stateJson},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"players",{get:function(){return this._vo.players},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"brainer",{get:function(){return this._vo.brainer},enumerable:!0,configurable:!0}),t.prototype._updateBrainer=function(e){this._vo.brainer=e},t}(s),t("GamezoneStatus",u),a=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onVoReset=function(){this._zone=null,this._status=null},Object.defineProperty(t.prototype,"zone",{get:function(){return this._zone||(this._zone=new o(this._vo.zone)),this._zone},set:function(e){this._zone=e,this._vo.zone=this._zone.valueObject},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._status||(this._status=new u(this._vo.status)),this._status},set:function(e){this._status=e,this._vo.status=this._status.valueObject},enumerable:!0,configurable:!0}),t}(s),t("GamezoneAndStatus",a),f=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getState=function(e){return this._vo[e]},t.prototype.setState=function(e,t){return this._vo[e]=t,this},t}(s),t("GamezonePlayerStates",f),l=function(e){function t(){var t=e!==null&&e.apply(this,arguments)||this;return t.playerStatesMap={},t}return r(t,e),t.prototype.getPlayerStates=function(e){if(this._vo[e]){var t=this.playerStatesMap[e];return t||(t=new f(this._vo[e]),this.playerStatesMap[e]=t),t}return null},t.prototype.setPlayerStates=function(e,t){return this.playerStatesMap[e]=t,this._vo[e]=t&&t.valueObject,this},t.prototype.setPlayerState=function(e,t,n){var r=this.getPlayerStates(e);return r||(r=new f({}),this.playerStatesMap[e]=r,this._vo[e]=r.valueObject),r.setState(t,n),this},t.prototype.clearPlayerStates=function(e){this.getPlayerStates(e)&&(delete this.playerStatesMap[e],delete this._vo[e])},t.prototype.listPlayerCodes=function(){return i.listKeysOfObject(this.playerStatesMap)},t}(s),t("GamezonePlayersStates",l)}}}),System.register("Server/messages/events/GamezoneManagerEvent",["./GameroomManagerEvent"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o,u,a=t&&t.id,f=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(e){function t(n){var r=e.call(this,t.TYPE)||this;return r.playerCode=n,r}return n(t,e),t.TYPE="playerEnter",t}(r.GMEvent),e("GZPlayerEnterEvent",i),s=function(e){function t(n){var r=e.call(this,t.TYPE)||this;return r.playerCode=n,r}return n(t,e),t.TYPE="playerLeft",t}(r.GMEvent),e("GZPlayerLeftEvent",s),o=function(e){function t(n){var r=e.call(this,t.TYPE)||this;return r.playerCode=n,r}return n(t,e),t}(r.GMEvent),e("GZPlayerStatesChangedEvent",o),u=function(e){function t(n,r){var i=e.call(this,t.TYPE)||this;return i.senderCode=n,i.data=r,i}return n(t,e),t.TYPE="broadcast",t}(r.GMEvent),e("GZBroadcastEvent",u)}}}),System.register("Server/messages/services/PlayerService",["./BaseService","./../vo/Player"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[function(e){i=e},function(e){s=e}],execute:function(){o=function(t){function n(){return t.call(this,"player")||this}return r(n,t),n.prototype.searchPlayers=function(e,t){return this.submitCommand("searchPlayers",[e,t]).then(function(e){return e.map(function(e){return new s.Player(e)})})},n.prototype.sendDataToPlayer=function(t,n){var r=this;return this.msgServer.myPlayer&&this.msgServer.myPlayer.code==t&&this.options.myDataRunInternal?new Promise(function(i){e.Base.addDelayFunction(r,r.sendDataInternallyForResponse,1,[r.name+".sendDataToPlayer","dataToPlayer",[t,e.Base.projectCode,r.msgServer.version,n],i])}):this.submitCommand("sendDataToPlayer",[t,n])},n.prototype.updateNetworkDelay=function(e){var t=this;return this.submitCommandAndUpdateNetworkDelay("updateNetworkDelay",[e]).then(function(e){return t.msgServer.myPlayer.networkDelay=e})},n.prototype.setDevMode=function(e){return this.submitCommand("setDevMode",[!!e])},n.prototype._gltReport=function(e,t){return this.submitCommand("gltReport",[e.zoneCode||null,e.paramInt||null,e.paramStr||null,e.meta||null,!!t])},n}(i.BaseService),t("PlayerService",o)}}}),System.register("Server/messages/services/GameroomService",["./../vo/GamezoneStatistics","./../vo/Player","./../vo/Gameroom","./../vo/Gamezone","./BaseService"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l=n&&n.id,c=n&&n.id;return{setters:[function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e},function(e){a=e}],execute:function(){f=function(t){function n(){var e=t.call(this,"gameroom")||this;return e._myZones={},e}return r(n,t),Object.defineProperty(n.prototype,"myRoomFull",{get:function(){return this._myRoomFull},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"myRoomCode",{get:function(){return this._myRoomFull&&this._myRoomFull.room.code},enumerable:!0,configurable:!0}),n.prototype.createRoom=function(e,t,r,i,s,u,a){var f=this;return this.submitCommand("createRoom",[e,t,i||"",r,(s||o.GameroomState.OPEN).value,u||{},!!a]).then(function(e){return f._myRoomFull=new o.GameroomFull(e),f.emit(n.EVENT.I_JOINED_ROOM,f._myRoomFull),f._myRoomFull})},n.prototype.joinRoom=function(e,t){var r=this;return this.submitCommand("joinRoom",[e,t]).then(function(e){return r._myRoomFull=new o.GameroomFull(e),r.emit(n.EVENT.I_JOINED_ROOM,r._myRoomFull),r._myRoomFull})},n.prototype.createOrJoinRoom=function(e,t,r,i,s,u,a){var f=this;return this.submitCommand("createOrJoinRoom",[e,t,i||"",r,(s||o.GameroomState.OPEN).value,u||{},!!a]).then(function(e){return f._myRoomFull=new o.GameroomFull(e),f.emit(n.EVENT.I_JOINED_ROOM,f._myRoomFull),f._myRoomFull})},n.prototype.leaveRoom=function(){var e=this;return this.submitCommand("leaveRoom",[this._myRoomFull?this._myRoomFull.room.code:""]).then(function(t){return e._myRoomFull&&e._myRoomFull.room.code==t&&(e._myRoomFull=null,e.emit(n.EVENT.I_LEFT_ROOM,t)),t})},n.prototype.queryRoom=function(e){return this.submitCommand("queryRoom",[e]).then(function(e){return new o.GameroomFull(e)})},n.prototype.listRooms=function(e,t,n){return this.submitCommand("listRooms",[e,t,n]).then(function(e){return e.map(function(e){return new o.GameroomAndStatus(e)})})},n.prototype.listPlayersInRoom=function(){return this.submitCommand("listPlayersInRoom",[]).then(function(e){return e.map(function(e){return new s.Player(e)})})},n.prototype.listPlayersOfRoom=function(e){return this.submitCommand("listPlayersOfRoom",[e]).then(function(e){return e.map(function(e){return new s.Player(e)})})},n.prototype.listenToZone=function(e){var t=this;return this.submitCommand("listenToZone",[e]).then(function(e){var n=new u.GamezoneAndStatus(e);return t._myZones[n.zone.code]=n,n})},n.prototype.stopListenToZone=function(e){var t=this;return this.submitCommand("stopListenToZone",[e]).then(function(n){return n&&delete t._myZones[e],n})},n.prototype.isListeningToZone=function(e){return!!this._myZones[e]},n.prototype.getListeningZoneAndStatus=function(e){return this._myZones[e]},n.prototype.setRoomState=function(e,t){var n=this;return this.submitCommand("setRoomState",[e.value,t],!0).then(function(e){return n._onRoomStatus(e)})},n.prototype.setRoomStateJson=function(e){var t=this;return this.submitCommand("setRoomStateJson",[e],!0).then(function(e){return t._onRoomStatus(e)})},n.prototype._onRoomStatus=function(e){return new o.GameroomStatus(e)},n.prototype.setRoomPlayerState=function(e,t){return this.submitCommand("setRoomPlayerState",[e,t])},n.prototype.setRoomPlayerStates=function(e){return this.submitCommand("setRoomPlayerStates",[e])},n.prototype.setRoomPlayerSynced=function(e,t){return this.submitCommand("setRoomPlayerSynced",[e,t])},n.prototype.updateRoomBrainer=function(){return this.submitCommand("updateRoomBrainer",[])},n.prototype.setZonePlayerState=function(e,t,n){return this.submitCommand("setZonePlayerState",[e,t,n])},n.prototype.setZonePlayerStates=function(e,t){return this.submitCommand("setZonePlayerStates",[e,t])},n.prototype.setZonePlayerSynced=function(e,t,n){return this.submitCommand("setZonePlayerSynced",[e,t,n])},n.prototype.getZonePlayerStates=function(e,t){return this.submitCommand("getZonePlayerStates",[e,t]).then(function(e){return new u.GamezonePlayerStates(e)})},n.prototype.getZonePlayersStates=function(e){return this.submitCommand("getZonePlayersStates",[e]).then(function(e){return new u.GamezonePlayersStates(e)})},n.prototype.setZoneStates=function(e,t){return this.submitCommand("setZoneStates",[e,t]).then(function(e){return new u.GamezoneStatus(e)})},n.prototype.getZoneStatistics=function(e){return this.submitCommand("getZoneStatistics",[e]).then(function(e){return new i.GamezoneStatistics(e)})},n.prototype.broadcastToRoom=function(t,r){var i=this,s=!0,o=null;return this.myRoomCode==t&&this.options.myDataRunInternal&&this.msgServer.myPlayer&&(o=new Promise(function(n){e.Base.addDelayFunction(i,i.sendDataInternally,1,["broadcastToRoom",[i.msgServer.myPlayer.code,t,r],n])}),s=this._myRoomFull.room.maxPlayers>1),s?this.submitCommandAndUpdateNetworkDelay("broadcastToRoom2",[t,r]).then(function(e){return i.emit(n.EVENT.SERVER_TIME,e.t),e.p}):o},n.prototype.broadcastInRoom=function(t){var r=this;if(!this._myRoomFull)return Promise.reject("Not aware in a gameroom.");var i=!0,s=null;return this.options.myDataRunInternal&&this.msgServer.myPlayer&&(i=this._myRoomFull.room.maxPlayers>1,s=new Promise(function(n){e.Base.addDelayFunction(r,r.sendDataInternally,1,["broadcastInRoom",[r.msgServer.myPlayer.code,r._myRoomFull.room.code,t],n])})),i?this.submitCommandAndUpdateNetworkDelay("broadcastInRoom2",[t]).then(function(e){return r.emit(n.EVENT.SERVER_TIME,e.t),e.p}):s},n.prototype.sendDataToRoommate=function(t,n){var r=this;return this.msgServer.myPlayer&&this.msgServer.myPlayer.code==t&&this._myRoomFull&&this.options.myDataRunInternal?new Promise(function(i){e.Base.addDelayFunction(r,r.sendDataInternallyForResponse,1,[r.name+".sendDataToRoommate","dataToRoommate",[t,r._myRoomFull.room.code,n],i])}):this.submitCommand("sendDataToRoommate",[t,n])},n.prototype.sendDataToRoomDecisionmaker=function(t,n){var r=this;if(!n){if(!this._myRoomFull)return Promise.reject("Not sure which room of the decisionmaker.");n=this._myRoomFull.room.code}return this.options.myDataRunInternal&&this._myRoomFull&&this._myRoomFull.room.code==n&&this.msgServer.myPlayer&&this.msgServer.myPlayer.code==this._myRoomFull.brainer?new Promise(function(n){e.Base.addDelayFunction(r,r.sendDataInternallyForResponse,1,[r.name+".sendDataToRoomDecisionmaker","dataToRoomDecisionmaker",[r.msgServer.myPlayer.code,r._myRoomFull.room.code,r._myRoomFull.room.code,t],n])}):this.submitCommand("sendDataToRoomDecisionmaker",[n,t])},n.prototype.broadcastToZone=function(t,r){var i=this;return this.options.myDataRunInternal&&this.isListeningToZone(t)&&this.msgServer.myPlayer&&new Promise(function(n){e.Base.addDelayFunction(i,i.sendDataInternally,1,["broadcastToZone",[i.msgServer.myPlayer.code,t,r],n])}),this.submitCommandAndUpdateNetworkDelay("broadcastToZone2",[t,r]).then(function(e){return i.emit(n.EVENT.SERVER_TIME,e.t),e.p})},n.EVENT={I_JOINED_ROOM:"iJoinedRoom",I_LEFT_ROOM:"iLeftRoom",SERVER_TIME:"serverTime"},n}(a.BaseService),t("GameroomService",f)}}}),System.register("Server/messages/services/ClientService",["./BaseService"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s=t&&t.id,o=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(e){function t(){var t=e.call(this,"client")||this;return t._onlinePlayersCount=0,t}return n(t,e),Object.defineProperty(t.prototype,"onlinePlayersCount",{get:function(){return this._onlinePlayersCount},enumerable:!0,configurable:!0}),t.prototype.getPlayersCount=function(){var e=this;return this.submitCommandAndUpdateNetworkDelay("getPlayersCount",[]).then(function(n){return e._onlinePlayersCount!=n&&(e._onlinePlayersCount=n,e.emit(t.EVENT.ONLINE_PLAYERS_COUNT_UPDATED,n)),n})},t.EVENT={ONLINE_PLAYERS_COUNT_UPDATED:"onlinePlayersCountUpdated"},t}(r.BaseService),e("ClientService",i)}}}),System.register("Server/utils/CGEUserStateManager",[],function(t,n){"use strict";var r,i,s,o,u,a=n&&n.id,f=n&&n.id;return{setters:[],execute:function(){r="_cgeUSM",i={setState:"setUserState",getState:"getUserState"},s=function(){function e(e){this.manager=e,this.allUserStates={}}return e.getInstance=function(t){var n=t[r];return n||(n=new e(t),t[r]=n),n},e.prototype._getUserStates=function(e){var t=this.allUserStates[e];return t||(t=new o(this,e),this.allUserStates[e]=t),t},e.prototype.getUserState=function(e,t,n){return this._getUserStates(e).getState(t,n)},e.prototype.setUserState=function(e,t,n,r){return this._getUserStates(e).setState(t,n,r)},e}(),t("CGEUserStateManager",s),o=function(){function t(e,t){this.manager=e,this.username=t,this.states={}}return t.prototype.getState=function(t,n){var r=this,i=u.generateRootKey(t,n);return this.states[i]?Promise.resolve(this.states[i].value):e.GLT.commands.stateService.getState(this.username,t,n,function(e){var i=new u(r.manager,t,n,e&&e.value);r.states[i.rootKey]=i}).submit().then(function(){return r.states[i].value})},t.prototype.setState=function(t,n,r){var i=this,s=u.generateRootKey(t,n),o=this.states[s];return o&&o.value===r?Promise.resolve():e.GLT.commands.stateService.setState(this.username,t,n,r,function(e){var r=new u(i.manager,t,n,e&&e.value);i.states[r.rootKey]=r}).submit()},t}(),u=function(){function e(e,t,n,r){this.manager=e,this.category=t,this.key=n,this.value=r}return e.generateRootKey=function(e,t){return e+"/|\\"+t},Object.defineProperty(e.prototype,"rootKey",{get:function(){return e.generateRootKey(this.category,this.key)},enumerable:!0,configurable:!0}),e}()}}}),System.register("Server/events/definitions/ItemWeight.definition",[],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o=n&&n.id,u=n&&n.id;return{setters:[],execute:function(){i=e.CgEventsEngine.CgDefinition,s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"itemCode",{get:function(){return this.getString(this.json.itemCode)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this.getInt(this.json.count)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weight",{get:function(){return this.getNumber(this.json.weight)},enumerable:!0,configurable:!0}),t.prototype.toNormalizedJson=function(){return{itemCode:this.itemCode,count:this.count,weight:this.weight}},t.TYPE="ItemWeight",t}(i),t("ItemWeightDef",s)}}}),System.register("Server/components/LocaleMenu",[],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[],execute:function(){i=e.Base.locales.LANG,s=e.Base.translation.translate,o=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.menuRef=React.createRef(),r.state={menuOpen:!1,languages:r.props.languages||[i.EN,i.ZH]},r}return r(n,t),n.prototype.closeMenu=function(){this.setState({menuOpen:!1})},n.prototype.onButtonOpen=function(){this.setState({menuOpen:!0})},n.prototype.setLanguage=function(e){this.closeMenu();var t=window.location.href;if(t.match(/(&|\?)locale=.*?(&|$)/))t=t.replace(/(&|\?)locale=.*?(&|$)/,"$1locale="+e.code+"$2");else{var n=t.indexOf("?");n==-1?t+="?":n<t.length-1&&(t+="&"),t+="locale="+e.code}window.location.href=t},n.prototype.render=function(){var t=this;return React.createElement("div",{ref:this.menuRef,className:this.props.classes.subMenu},React.createElement(MaterialUI.MenuItem,{onClick:function(e){return t.onButtonOpen()}},React.createElement(MaterialUI.Icon,null,"arrow_left"),s("glt.userBox.language"),":",e.Base.translation.getSelectedLanguage().nativeName),React.createElement(MaterialUI.Popover,{open:this.state.menuOpen,anchorEl:this.menuRef.current,className:this.props.classes.menuRoot,classes:{paper:this.props.classes.menuPaper},onClose:function(e){return t.closeMenu()},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"}},this.state.languages.map(function(e){return React.createElement(MaterialUI.MenuItem,{key:e.code,onClick:function(n){return t.setLanguage(e)}},e.nativeName)})))},n}(React.Component),t("LocaleMenu",o)}}}),System.register("Server/components/BadgeListDialog",[],function(t,n){"use strict";function l(t,n){var r=MaterialUI.withStyles(u)(o);n=n||{},!n.message&&delete n.message,!n.title&&delete n.title;var a=e.GLT.client.isMe(t),f=a?e.GLT.client.user.guest?"guest":"my":t?"other":"guest",l=Object.assign({title:s("glt.badgeList.title."+f,{user:""}),message:React.createElement(r,{username:t,badgeImgHeight:n.badgeImgHeight||48}),messageType:i.NODE,titleCloseButton:!0,hideConfirmButton:!0},n);if(f=="other"){var c=l.getInstance;l.getInstance=function(n){c&&c(n),e.GLT.commands.userService.getUser(t,function(e){n.setState({title:s("glt.badgeList.title."+f,{user:e.nickname})})}).submit()}}return l.classes={root:"listBadgeDialog",paper:"listBadgeDialogPaper",message:"listBadgeDialogMsg"},n&&n.classes&&(l.classes=Object.assign(l.classes,n.classes)),e.ReactMaterial.dialogs.openAlertDialog(l)}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a=n&&n.id,f=n&&n.id;return t("showBadgeList",l),{setters:[],execute:function(){i=e.ReactMaterial.dialogs.ConfirmDialogMessageType,s=e.Base.translation.translate,o=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.state={},r}return r(n,t),n.prototype.componentWillMount=function(){var t=this;this.props.username?e.GLT.commands.badgeService.listUserBadgesByUser(this.props.username,function(e){t.setState({userBadges:e})}).submit():this.setState({userBadges:[]})},n.prototype.renderUserBadge=function(e){return React.createElement("div",{key:e.gameBadge.code,className:this.props.classes.item},React.createElement(MaterialUI.Tooltip,{TransitionComponent:MaterialUI.Zoom,title:e.gameBadge.name,placement:"top",classes:{popper:"tooltipPopper"}},React.createElement("img",{src:e.gameBadge.iconUrl,height:this.props.badgeImgHeight})))},n.prototype.render=function(){var e=this;return this.state.userBadges?this.state.userBadges.length?React.createElement("div",{className:this.props.classes.list},this.state.userBadges.map(function(t){return e.renderUserBadge(t)})):React.createElement("div",null,s("glt.badgeList.emptyList")):React.createElement("div",null,React.createElement(MaterialUI.CircularProgress,{color:"secondary"}))},n}(React.Component),t("BadgeListDialogContent",o),u=function(e){return{list:{display:"flex",flexWrap:"wrap",maxWidth:600},item:{}}}}}}),System.register("Server/components/gmtools/ManageHistory",["./../../index","./../../utils/filters"],function(t,n){"use strict";function m(e){return e.nickname+" ("+e.username+")"}function g(e){var t=[];e.paramInt!==undefined&&t.push(e.paramInt.toString()),e.paramStr&&t.push(e.paramStr);var n=u.getByCode(e.action);return React.createElement("div",null,React.createElement("span",{className:n.negative?"negative":"positive"},n.name),React.createElement("span",null,"(",t.join(", "),")"))}function y(){return p&&p.expire>e.Base.time()?Promise.resolve(p.list):new Promise(function(t,n){e.GLT.commands.gmService.listGameMasters(function(n){p={list:n.slice(),expire:e.Base.time()+o.ONE_MINUTE},t(n)},function(e){n(e)}).submit()})}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l,c,h,p,d=n&&n.id,v=n&&n.id;return{setters:[function(e){s=e},function(e){a=e}],execute:function(){i=e.Base.translation.translate,o=e.Base.utils.MathUtil,u=e.GLT.commands.types.GMAction,f="-all-",l=function(){function e(e,t){this.code=e,this.actions=t}return Object.defineProperty(e.prototype,"name",{get:function(){return i("glt.gmTools.gmActionSet."+this.code)},enumerable:!0,configurable:!0}),e}(),c=[new l("all",[u.SUSPEND_USER,u.UNSUSPEND_USER,u.CLOSE_ARTICLE,u.OPEN_ARTICLE,u.SET_ARTICLE_STATUS,u.SUBMIT_SCORE,u.REMOVE_BADGE,u.AWARD_BADGE]),new l("user",[u.SUSPEND_USER,u.UNSUSPEND_USER,u.SUBMIT_SCORE,u.REMOVE_BADGE,u.AWARD_BADGE]),new l("article",[u.CLOSE_ARTICLE,u.OPEN_ARTICLE,u.SET_ARTICLE_STATUS])],h=function(t){function n(n,r){var o=t.call(this,n,r)||this;o.today=new Date(s.client.estimatedServerTimestamp),o.onSearchGmChange=function(e){var t=o.state.search;t.gmUsername=e.target.value,o.setState({search:t})},o.onSearchTimeChange=function(e){var t=o.state.search;t.time=e.target.value,o.setState({search:t})},o.onSearchDirectionChange=function(e){var t=o.state.search;t.direction=e.target.value,o.setState({search:t})},o.onSearchUserChange=function(e){var t=o.state.search;t.username=e.target.value,o.setState({search:t})},o.onSearchGMActionChange=function(e){var t=o.state.search,n=e.target.value;t.actionSet=c.find(function(e){return e.code==n})||c[0],o.setState({search:t})},o.onBtnSearch=function(){o.startSearch(o.state.search,!0)},o.startSearch=function(t,n){var r=n?[]:o.state.recordList;o.setState({loading:!0,recordList:r}),e.GLT.commands.gmService.listGmRecords(t.username,t.gmUsername==f?"":t.gmUsername,t.actionSet.actions,new Date(Date.parse(t.time+" 23:59:59")),t.direction=="backward",r.length,t.length,function(e){o.setState({loading:!1,recordList:e,hasMore:e.length>=t.length})},function(t){o.setState({loading:!1}),e.GLT.components.showAlert(i("glt.error"),t,i("glt.close"))}).submit()},o.onBtnLoadMore=function(){o.startSearch(o.state.search,!1)},o.closeMenus=function(){o.setState({recordMenu:null})},o.onBtnUserHistory=function(){var e=o.state.recordMenu&&o.state.recordMenu.record;o.closeMenus();if(e){var t=o.state.search;t.username=e.user.username,o.setState({search:t}),o.startSearch(t,!0)}};var u=o.today.getFullYear()+"-"+(o.today.getMonth()+1)+"-"+o.today.getDate();return o.state={gmList:[s.client.user],search:{gmUsername:f,actionSet:c[0],time:u,direction:"backward",username:o.props.refUser?o.props.refUser.username:"",length:100},hasMore:!1,recordList:[]},o}return r(n,t),n.prototype.componentDidMount=function(){var e=this;y().then(function(t){var n=s.client.user;t=t.filter(function(e){return e.username!=n.username}),t.unshift(n),e.setState({gmList:t})}),this.state.search.username&&this.startSearch(this.state.search,!0)},n.prototype.openRecordMenu=function(e,t){this.setState({recordMenu:{record:e,el:t.currentTarget}})},n.prototype.renderRecordRow=function(t,n){var r=this;return React.createElement(MaterialUI.TableRow,{key:"record"+n},React.createElement(MaterialUI.TableCell,{className:"timestamp"},a.timeToString(t.time)),React.createElement(MaterialUI.TableCell,{className:"gm"},React.createElement("a",{className:"usernameIcon",href:e.GLT.getUserUrl(t.gm),target:"_blank",title:m(t.gm)},React.createElement("img",{src:t.gm.iconUrl}))),React.createElement(MaterialUI.TableCell,{className:"gmAction"},g(t)),React.createElement(MaterialUI.TableCell,null,t.user&&React.createElement("a",{className:"usernameIcon",href:e.GLT.getUserUrl(t.user),target:"_blank",title:m(t.user)},React.createElement("img",{src:t.user.iconUrl}),t.user.nickname)),React.createElement(MaterialUI.TableCell,{className:"note"},t.note),React.createElement(MaterialUI.TableCell,{className:"actions"},React.createElement(MaterialUI.IconButton,{onClick:function(e){return r.openRecordMenu(t,e)}},React.createElement(MaterialUI.Icon,null,"more_vert"))))},n.prototype.render=function(){var e=this,t=this.props.classes;return React.createElement("div",{className:t.searchRoot},React.createElement("div",{className:t.searchInputs},React.createElement(MaterialUI.TextField,{label:i("glt.gmTools.labelSearchTime"),type:"date",value:this.state.search.time,onChange:this.onSearchTimeChange,variant:"outlined",InputLabelProps:{shrink:!0}}),React.createElement(MaterialUI.Select,{value:this.state.search.direction,onChange:this.onSearchDirectionChange,variant:"outlined"},React.createElement(MaterialUI.MenuItem,{className:t.menuItem,value:"backward"},i("glt.gmTools.labelSearchBackward")),React.createElement(MaterialUI.MenuItem,{className:t.menuItem,value:"forward"},i("glt.gmTools.labelSearchForward"))),React.createElement(MaterialUI.FormControl,{variant:"outlined"},React.createElement(MaterialUI.InputLabel,null,i("glt.gmTools.labelSearchGM")),React.createElement(MaterialUI.Select,{label:i("glt.gmTools.labelSearchGM"),value:this.state.search.gmUsername,onChange:this.onSearchGmChange},React.createElement(MaterialUI.MenuItem,{className:t.menuItem,value:f},i("glt.gmTools.allGM")),this.state.gmList.map(function(e){return React.createElement(MaterialUI.MenuItem,{className:t.menuItem,value:e.username,key:e.username},React.createElement("div",{className:"gm",title:e.username},React.createElement("img",{src:e.iconUrl}),React.createElement("div",{className:"name"},e.nickname)))}))),React.createElement(MaterialUI.FormControl,{variant:"outlined"},React.createElement(MaterialUI.InputLabel,null,i("glt.gmTools.labelGMAction")),React.createElement(MaterialUI.Select,{label:i("glt.gmTools.labelGMAction"),value:this.state.search.actionSet.code,onChange:this.onSearchGMActionChange},c.map(function(e){return React.createElement(MaterialUI.MenuItem,{className:t.menuItem,value:e.code,key:e.code},e.name)}))),React.createElement(MaterialUI.TextField,{label:i("glt.gmTools.labelSearchUser"),type:"text",value:this.state.search.username,onChange:this.onSearchUserChange,variant:"outlined"}),React.createElement(MaterialUI.IconButton,{onClick:this.onBtnSearch},React.createElement(MaterialUI.Icon,null,"search"))),React.createElement("div",{className:this.props.classes.searchResult},React.createElement(MaterialUI.Table,null,React.createElement(MaterialUI.TableHead,null,React.createElement(MaterialUI.TableRow,null,React.createElement(MaterialUI.TableCell,null,i("glt.gmTools.table.time")),React.createElement(MaterialUI.TableCell,null,i("glt.gmTools.table.gm")),React.createElement(MaterialUI.TableCell,null,i("glt.gmTools.table.action")),React.createElement(MaterialUI.TableCell,null,i("glt.gmTools.table.user")),React.createElement(MaterialUI.TableCell,null,i("glt.gmTools.table.note")),React.createElement(MaterialUI.TableCell,null))),React.createElement(MaterialUI.TableBody,null,this.state.recordList.map(function(t,n){return e.renderRecordRow(t,n)}))),React.createElement("div",{className:"searchBrief"},!this.state.loading&&React.createElement("div",null,i("glt.gmTools.searchedCount",{count:this.state.recordList.length})),this.state.loading?React.createElement(MaterialUI.CircularProgress,{size:36,thickness:5}):this.state.hasMore&&React.createElement(MaterialUI.Button,{onClick:this.onBtnLoadMore},"MORE"))),React.createElement(MaterialUI.Popover,{open:!!this.state.recordMenu,anchorEl:this.state.recordMenu&&this.state.recordMenu.el,onClose:this.closeMenus},React.createElement(MaterialUI.MenuItem,{onClick:this.onBtnUserHistory},i("glt.gmTools.btnManageHistoryUser"))))},n}(React.Component),t("ManageHistory",h)}}}),System.register("Server/components/gmtools/ClientUserManage",["./ClientUserList","./ListUsersWithSameIP","./ListIpRecords","./ManageUserData"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l=n&&n.id,c=n&&n.id;return{setters:[function(e){s=e},function(e){o=e},function(e){u=e},function(e){a=e}],execute:function(){i=e.Base.translation.translate,f=function(t){function n(n){var r=t.call(this,n)||this;return r.openRecordMenu=function(e,t,n){r.setState({recordMenu:{el:n.currentTarget,record:t,user:e}})},r.openUserMenu=function(e,t){r.setState({userMenu:{el:t.currentTarget,user:e}})},r.closeMenus=function(){r.setState({userMenu:null,recordMenu:null})},r.onSearchTermChange=function(e){r.setState({searchTerm:e.target.value})},r.onKeyUp=function(e){e.keyCode==13&&r.startSearch()},r.onBtnManageUserData=function(){var t=r.state.userMenu&&r.state.userMenu.user;r.closeAll(),e.Base.wait(30).then(function(){t&&(r.setState({listFadein:!1,manageUserData:{user:t}}),e.Base.wait(30).then(function(){return r.setState({listFadein:!0})}))})},r.onBtnListIpRecords=function(){var t=r.state.userMenu&&r.state.userMenu.user;r.closeAll(),e.Base.wait(30).then(function(){t&&(r.setState({listFadein:!1,listIPRecords:{user:t}}),e.Base.wait(30).then(function(){return r.setState({listFadein:!0})}))})},r.onBtnListSameIps=function(){var t=r.state.recordMenu&&Object.assign({},r.state.recordMenu);r.closeAll(),e.Base.wait(30).then(function(){t&&(r.setState({listFadein:!1,listUsersWithSameIP:{refUser:t.user,refRecord:t.record}}),e.Base.wait(30).then(function(){return r.setState({listFadein:!0})}))})},r.onBtnListSameIpUsers=function(){var t=r.state.userMenu&&r.state.userMenu.user;r.closeAll(),e.Base.wait(30).then(function(){t&&(r.setState({listFadein:!1,listUsersWithSameIP:{refUser:t}}),e.Base.wait(30).then(function(){return r.setState({listFadein:!0})}))})},r.onRequestHistory=function(){var e=r.state.userMenu&&r.state.userMenu.user;r.closeAll(),r.props.onRequestHistory&&r.props.onRequestHistory(e)},r.hideSubLists=function(){r.setState({listUsersWithSameIP:null,listIPRecords:null,manageUserData:null})},r.state={searchTerm:"",searchTip:"",searchTipClass:"",userList:[]},r}return r(n,t),n.prototype.closeAll=function(){this.setState({userMenu:null,recordMenu:null,listUsersWithSameIP:null,listIPRecords:null,manageUserData:null})},n.prototype.startSearch=function(){var t=this;this.state.searchTerm.length<2?this.setState({searchTip:i("glt.gmTools.tip.twoCharMin"),searchTipClass:"error"}):(this.setState({searchTip:i("glt.gmTools.tip.searching"),searchTipClass:"",userList:[]}),e.GLT.commands.gmService.searchUser(this.state.searchTerm,0,100,function(e){t.setState({searchTip:i("glt.gmTools.tip.result",{count:e.length}),searchTipClass:"",userList:e})},function(e){t.setState({searchTip:e,searchTipClass:"error"})}).submit())},n.prototype.render=function(){var e=this,t=this.props.classes,n=this.state.listUsersWithSameIP||this.state.listIPRecords||this.state.manageUserData;return React.createElement("div",null,React.createElement("div",{className:t.searchRoot},React.createElement(MaterialUI.FormControl,{variant:"outlined",className:t.searchInput+(n?" invis":"")},React.createElement(MaterialUI.InputLabel,{htmlFor:"gmtools-search-player"},i("glt.gmTools.labelSearchPlayer")),React.createElement(MaterialUI.OutlinedInput,{autoFocus:!0,onKeyUp:this.onKeyUp,label:i("glt.gmTools.labelSearchPlayer"),id:"gmtools-search-player",type:"text",value:this.state.searchTerm,onChange:this.onSearchTermChange,endAdornment:React.createElement(MaterialUI.InputAdornment,{position:"end"},React.createElement(MaterialUI.IconButton,{onClick:function(){return e.startSearch()}},React.createElement(MaterialUI.Icon,null,"search")))}),React.createElement(MaterialUI.FormHelperText,{className:this.state.searchTipClass},this.state.searchTip)),React.createElement(s.ClientUserList,{userList:this.state.userList,classes:t,onBtnMore:this.openUserMenu})),this.state.manageUserData&&React.createElement("div",{className:t.manageUserData+(this.state.listFadein?" transIn":"")},React.createElement("div",{className:"listHead"},React.createElement(MaterialUI.IconButton,{onClick:this.hideSubLists},React.createElement(MaterialUI.Icon,null,"arrow_back")),React.createElement("div",{className:"listTitle"},i("glt.gmTools.titleManagerUserData"),React.createElement("div",{className:"listTitleUser",title:this.state.manageUserData.user.username},React.createElement("img",{src:this.state.manageUserData.user.iconUrl}),this.state.manageUserData.user.nickname))),React.createElement(a.ManageUserData,{refUser:this.state.manageUserData.user,classes:t})),this.state.listUsersWithSameIP&&React.createElement("div",{className:t.listUsersWithSameIP+(this.state.listFadein?" transIn":"")},React.createElement("div",{className:"listHead"},React.createElement(MaterialUI.IconButton,{onClick:this.hideSubLists},React.createElement(MaterialUI.Icon,null,"arrow_back")),React.createElement("div",{className:"listTitle"},i("glt.gmTools.titleSameIPUsers"),React.createElement("div",{className:"listTitleUser",title:this.state.listUsersWithSameIP.refUser.username},React.createElement("img",{src:this.state.listUsersWithSameIP.refUser.iconUrl}),this.state.listUsersWithSameIP.refRecord?"":this.state.listUsersWithSameIP.refUser.nickname,this.state.listUsersWithSameIP.refRecord&&React.createElement("div",{className:"ipCode"},React.createElement("div",null,this.state.listUsersWithSameIP.refRecord.v4c),React.createElement("div",null,this.state.listUsersWithSameIP.refRecord.v6c))))),React.createElement(o.ListUsersWithSameIP,{classes:t,onBtnMore:this.openUserMenu,refUser:this.state.listUsersWithSameIP.refUser,refRecord:this.state.listUsersWithSameIP.refRecord})),this.state.listIPRecords&&React.createElement("div",{className:t.listUsersWithSameIP+(this.state.listFadein?" transIn":"")},React.createElement("div",{className:"listHead"},React.createElement(MaterialUI.IconButton,{onClick:this.hideSubLists},React.createElement(MaterialUI.Icon,null,"arrow_back")),React.createElement("div",{className:"listTitle"},i("glt.gmTools.titleUserIpRecords"),React.createElement("div",{className:"listTitleUser",title:this.state.listIPRecords.user.username},React.createElement("img",{src:this.state.listIPRecords.user.iconUrl}),this.state.listIPRecords.user.nickname))),React.createElement(u.ListIpRecords,{classes:t,onBtnMore:this.openRecordMenu,user:this.state.listIPRecords.user})),React.createElement(MaterialUI.Popover,{open:!!this.state.recordMenu,anchorEl:this.state.recordMenu&&this.state.recordMenu.el,onClose:this.closeMenus},React.createElement(MaterialUI.MenuItem,{onClick:this.onBtnListSameIps},i("glt.gmTools.btnListSameIpUsers"))),React.createElement(MaterialUI.Popover,{open:!!this.state.userMenu,anchorEl:this.state.userMenu&&this.state.userMenu.el,onClose:this.closeMenus},React.createElement(MaterialUI.MenuItem,{onClick:this.onBtnListIpRecords},i("glt.gmTools.btnListIpRecords")),React.createElement(MaterialUI.MenuItem,{onClick:this.onBtnListSameIpUsers},i("glt.gmTools.btnListSameIpUsers")),React.createElement(MaterialUI.MenuItem,{onClick:this.onBtnManageUserData},i("glt.gmTools.btnManageUserData")),React.createElement(MaterialUI.MenuItem,{onClick:this.onRequestHistory},i("glt.gmTools.btnManageHistoryUser"))))},n}(React.Component),t("ClientUserManage",f)}}}),System.register("Server/components/ItemStoreDialog",["./../itemStores/ItemStoreManager","./ItemCheckout","./TransactionHistoryDialog"],function(t,n){"use strict";function m(t,n){var r=MaterialUI.withStyles(h)(c);return t=t||{},t.itemStoreManager||(t.itemStoreManager=new s.DefaultItemStoreManager),n=Object.assign({contentRenderer:function(e){return React.createElement(r,i({dialog:e},t))},title:f("glt.itemStore.title"),actionRenderer:function(){return null},titleCloseButton:!0,hideCancelButton:!0},n||{}),e.ReactMaterial.dialogs.openConfirmDialog(n,{paper:{overflow:"hidden","& .dialog-title-root h2":{placeContent:"center"}}})}function g(e){var t=[],n={};for(var r=0,i=e;r<i.length;r++){var s=i[r],o=s.category||"",u=n[o];u||(u=new p(o,t.length),n[o]=u,t.push(u)),u.items.push(s)}return t.length||t.push(new p("",t.length)),t}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},s,o,u,a,f,l,c,h,p,d=n&&n.id,v=n&&n.id;return t("showItemStore",m),{setters:[function(e){s=e},function(e){o=e},function(e){l=e}],execute:function(){u=e.Base.utils.IntUtil,a=e.GLT.commands.vo.GameItem,f=e.Base.translation.translate,c=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.btnTransactions=function(){l.showTransactionHistory({itemStoreManager:r.props.itemStoreManager})},r.state={},r}return r(n,t),n.prototype.componentDidMount=function(){var e=this;this.props.itemStoreManager.loadData().then(function(t){var n=s.filterItemsForStore(t.gameItems,t.userItems),r=g(n.gameItems);e.setState({userItems:n.userItems,categories:r,currentCategory:r[0],wallet:t.wallet})})},n.prototype.renderDeposits=function(){var t=this;if(!this.state.wallet)return null;var n=f("glt.itemStore.gameDollar.name");this.state.wallet.userScores.forEach(function(e){var r=t.props.itemStoreManager.getCurrencyName(e.scoreMode);n+="\n- "+r+" "+u.formatAddComma(e.score)+" x "+e.scoreMode.toDollarRate});var r=React.createElement("div",{className:this.props.classes.multiline},n);return React.createElement("div",{className:this.props.classes.currencyRoot},React.createElement(MaterialUI.Typography,null,f("glt.itemStore.myDeposits")),React.createElement(MaterialUI.Tooltip,{title:r},React.createElement("div",{className:this.props.classes.currency+" own"},React.createElement("img",{src:e.Base.getAppResourceFileUrl("Server.gameDollar")}),u.formatAddComma(this.state.wallet.gameDollars))),React.createElement(MaterialUI.Tooltip,{title:f("glt.itemStore.gltDollar.name")},React.createElement("div",{className:this.props.classes.currency+" own"},React.createElement("img",{src:e.Base.getAppResourceFileUrl("Server.gltDollar")}),u.formatAddComma(this.state.wallet.gltDollars))),this.state.wallet.gltPoints?React.createElement(MaterialUI.Tooltip,{title:f("glt.itemStore.gltPoint.name")},React.createElement("div",{className:this.props.classes.currency+" own"},React.createElement("img",{src:e.Base.getAppResourceFileUrl("Server.gltPoint")}),u.formatAddComma(this.state.wallet.gltPoints))):null,React.createElement("div",{className:"spacer"}),React.createElement(MaterialUI.Tooltip,{title:f("glt.transactions.title")},React.createElement(MaterialUI.IconButton,{className:"btn-history",onClick:this.btnTransactions},React.createElement(MaterialUI.Icon,null,"receipt_long"))))},n.prototype.renderOwnedDiv=function(e,t){if(t&&t.count>0){var n=u.formatAddComma(t.count),r=React.createElement("div",{className:"label count"},"x ",React.createElement("span",null,n));return React.createElement("div",{className:"owned"},React.createElement("div",{className:"label"},f("glt.itemStore.owned")),r)}},n.prototype.createDollarBar=function(t,n,r){var i=null,s=n.replace(/^g/,"G"),o="priceIn"+s,a=t[o],l=t[o+"Origin"];if(l&&l>a){var c=Math.round(100-a/l*100),h=Math.round(a/l*100);h%10==0&&(h/=10),i=React.createElement("div",{className:"sale"},React.createElement("div",{className:"tri"}),React.createElement("div",{className:"label"},f("glt.itemStore.discount.value",{sale:c,scale:h}))),r.push(f("glt.itemStore.discount.tooltip",{name:f("glt.itemStore."+n+".name"),origin:u.formatAddComma(l),price:u.formatAddComma(a)})),a=l}return React.createElement("div",{key:n,className:this.props.classes.currency+" price"},React.createElement("img",{src:e.Base.getAppResourceFileUrl("Server."+n)}),React.createElement("span",{className:"value"},u.formatAddComma(a)),i)},n.prototype.renderGameItem=function(e){var t=this,n=[],r=this.state.userItems.find(function(t){return t.itemCode==e.code}),i=[this.props.itemStoreManager.getItemName(e)],s=r&&r.count>0;return s&&(e.expirable?i.push(""+f("glt.itemStore.expiresOn",{date:r.expireTime.toLocaleDateString()})):i.push(f("glt.itemStore.owned")+" x "+u.formatAddComma(r.count))),e.priceInGameDollar>0&&n.push(this.createDollarBar(e,"gameDollar",i)),e.priceInGltDollar>0&&n.push(this.createDollarBar(e,"gltDollar",i)),React.createElement(MaterialUI.Tooltip,{key:e.code,title:i.join("\n"),classes:{tooltip:this.props.classes.multiline}},React.createElement("div",{className:this.props.classes.gameItem+(s?" owned":""),onMouseEnter:function(n){return t.onOverGameItem(e)},onClick:function(n){return t.onClickGameItem(e)}},React.createElement("div",{className:"imgHolder"},React.createElement("img",{className:"itemIcon",src:e.iconUrl}),this.renderOwnedDiv(e,r)),n))},n.prototype.onOverGameItem=function(e){this.props.onMouseOverItem&&this.props.onMouseOverItem(e)},n.prototype.onClickGameItem=function(e){var t=this,n=this.state.userItems.find(function(t){return t.itemCode==e.code});o.showItemCheckout(e,{wallet:this.state.wallet,userItem:n||null,itemStoreManager:this.props.itemStoreManager,onPurchaseComplete:function(n,r){var i=t.state.userItems,s=i.findIndex(function(t){return t.itemCode==e.code});s==-1?i.push(n):i[s]=n,t.setState({userItems:i,wallet:r}),t.props.onPurchaseComplete&&t.props.onPurchaseComplete(n,i,r)}}),this.props.onMouseClickItem&&this.props.onMouseClickItem(e)},n.prototype.renderCategories=function(){var e=this;if(!this.state.categories||this.state.categories.length<=1)return;return React.createElement("div",{className:this.props.classes.categories},this.state.categories.map(function(t){return e.renderCategory(t)}))},n.prototype.renderCategory=function(e){var t=this,n=e==this.state.currentCategory,r=e.items[0],i=r&&this.props.itemStoreManager.getCategoryName(r);return i=i||f("glt.itemStore.defaultCategory"),React.createElement("div",{className:this.props.classes.category+(n?" selected":" unselected"),key:"cat"+e.index},React.createElement(MaterialUI.Typography,{className:"catButton",onClick:function(n){return t.selectCategory(e)}},i))},n.prototype.selectCategory=function(e){e!=this.state.currentCategory&&this.setState({currentCategory:e})},n.prototype.renderGameItems=function(){var e=this;return this.state.currentCategory?this.state.currentCategory.items.length?React.createElement("div",{className:this.props.classes.gameItems},this.state.currentCategory.items.map(function(t){return e.renderGameItem(t)})):React.createElement("div",{className:this.props.classes.gameItems+" empty"},f("glt.itemStore.empty")):React.createElement("div",{className:this.props.classes.gameItems,style:{padding:"10px 20px"}},React.createElement(MaterialUI.CircularProgress,{color:"primary"}))},n.prototype.render=function(){return React.createElement("div",{className:this.props.classes.root},this.renderDeposits(),this.renderCategories(),this.renderGameItems())},n}(React.Component),t("ItemStoreDialog",c),h=function(e){return{root:{display:"flex",flexDirection:"column",overflow:"hidden",maxWidth:1340},currencyRoot:{display:"flex",flexWrap:"wrap",margin:"5px 15px",alignItems:"center","& .btn-history":{marginLeft:3,padding:8}},currency:{display:"flex",alignItems:"center",background:"#369",borderRadius:3,color:"#FFF",padding:"1px 4px 1px 0",minWidth:70,fontFamily:'Roboto, Helvetica, Arial, "sans-serif"',"& img":{margin:"0 3px"},"&.own":{background:"#699",margin:"0 3px 0 7px"},"&.price":{marginTop:3,flex:1,fontSize:14,display:"flex",padding:0,"& img":{height:17},"& .value":{flex:1},"& .sale":{display:"flex",marginRight:-1,"& .tri":{width:1,height:0,borderLeft:"6px solid transparent",borderBottom:"20px solid #F00",marginRight:-1},"& .label":{background:"#F00",padding:"0 3px 0 2px",fontSize:13,borderRight:"2px dotted #FFF",display:"flex",alignItems:"center",fontWeight:"bold"}}}},gameItems:{display:"flex",flexWrap:"wrap",alignItems:"flex-start",overflow:"auto",padding:"5px 10px",margin:"5px 0","&.empty":{placeContent:"center",marginBottom:10,color:"#666"}},gameItem:{display:"flex",flexDirection:"column",padding:5,border:"2px solid #666",borderRadius:5,margin:8,cursor:"pointer",transition:"transform 0.2s ease","&.owned":{background:"linear-gradient(45deg, #093, white)","& .label.count":{fontFamily:'Roboto, Helvetica, Arial, "sans-serif"'}},"& img.itemIcon":{width:140},"&:hover":{transform:"scale(1.04)",boxShadow:"0 2px 5px rgba(0,0,0,0.3)"},"& .imgHolder":{display:"flex",placeContent:"center",position:"relative",minHeight:50},"& .imgHolder .owned":{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",color:"#FFF",display:"flex",alignItems:"center",placeContent:"space-between",padding:"0 3px 0 12px",borderTopLeftRadius:20,minHeight:16},"& .imgHolder .owned .label":{fontSize:13,fontVariant:"small-caps"},"& .imgHolder .owned .infoIcon":{fontSize:12,borderRadius:"50%",fontWeight:"bold",background:"#eee",color:"#333",width:16,textAlign:"center",transform:"scale(0.8)"}},multiline:{whiteSpace:"pre-wrap"},categories:{display:"flex",alignItems:"flex-end",borderBottom:"1px solid #999",margin:"2px 10px 0",padding:"0 8px"},category:{border:"1px solid transparent",margin:"0 2px -1px",paddingBottom:4,"& .catButton":{padding:"5px 8px",minWidth:50,textAlign:"center"},"&.selected":{border:"1px solid #999",borderBottom:"1px solid #FFF",borderTopLeftRadius:10,borderTopRightRadius:3},"&.unselected .catButton":{background:"#ddd",color:"#689",cursor:"pointer",borderRadius:2},"&.unselected .catButton:hover":{background:"#ccc",color:"#333"}}}},p=function(){function e(e,t){this.name=e,this.index=t,this.items=[]}return e.prototype.duplicates=function(e){if(this.items.length){var t=this.items[0];for(var n=0;n<e;++n){var r=Object.assign({},t.valueObject);r.code+=""+n;var i=new a(r);this.items.push(i)}}},e}()}}}),System.register("Server/components/BadgeDialog",[],function(t,n){"use strict";function o(t,n){n&&(!n.message&&delete n.message,!n.title&&delete n.title);var r=Object.assign({title:t.name,messageImageUrl:t.iconUrl,message:t.description.replace(/\n/g,"<br/>"),messageType:"html",hideCancelButton:!0,hideConfirmButton:!0,titleCloseButton:!0,transition:{"class":MaterialUI.Grow,duration:1e3}},n||{});return r.classes={root:"awardBadgeDialog",paper:"awardBadgeDialogPaper",message:"awardBadgeDialogMsg"},n&&n.classes&&(r.classes=Object.assign(r.classes,n.classes)),e.ReactMaterial.dialogs.openAlertDialog(r)}function u(t,n){var i=t.description,s=Object.assign({title:r("glt.title.badgeAwarded"),message:React.createElement(MaterialUI.Tooltip,{title:i,classes:{popper:"tooltipPopper tooltipPre"}},React.createElement("div",{style:{maxWidth:160,textAlign:"center"}},React.createElement("img",{width:"100%",src:t.iconUrl}),React.createElement("div",null,t.name))),messageType:"node",hideCancelButton:!0,hideConfirmButton:!0,titleCloseButton:!0,transition:{"class":MaterialUI.Grow,duration:1e3}},n||{});return s.classes={root:"awardBadgeDialog",paper:"awardBadgeDialogPaper",message:"awardBadgeDialogMsg"},n&&n.classes&&(s.classes=Object.assign(s.classes,n.classes)),e.ReactMaterial.dialogs.openAlertDialog(s)}var r,i=n&&n.id,s=n&&n.id;return t("showBadgeDialog",o),t("showAwardBadgeDialog",u),{setters:[],execute:function(){r=e.Base.translation.translate}}}),System.register("Server/components/gmtools/ManageUserData",[],function(t,n){"use strict";function p(){return{"& .tabs":{background:"#ddd"},"& .badge img":{maxWidth:64,maxHeight:64},"& .updateArrow":{margin:"0 15px",color:"#666"},"& .badges":{display:"flex",flexWrap:"wrap"},"& .badge":{position:"relative","& .btn-remove":{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",placeContent:"center",opacity:0,background:"rgba(0,0,0,0.3)",color:"#FFF",cursor:"pointer","&:hover":{opacity:1},"& .btnbg":{background:"#c00",borderRadius:"50%",display:"flex"}}},dialogs:{"& .inputReview":{marginLeft:20,marginBottom:10,display:"flex",alignItems:"center"}}}}function d(t){return new Promise(function(n){e.ReactMaterial.dialogs.openInputDialog({value:"0",valueType:"number",confirmLabel:o("glt.confirm"),cancelLabel:o("glt.cancel"),title:t,inputLabel:o("glt.gmTools.labelScores"),onConfirm:function(e){n(parseInt(e))},onClose:function(){n(0)}})})}function v(t){return new Promise(function(n){e.ReactMaterial.dialogs.openInputDialog({value:"",valueType:"text",confirmLabel:o("glt.confirm"),cancelLabel:o("glt.cancel"),title:t,inputLabel:"* "+o("glt.gmTools.labelNote"),fullWidth:!0,onConfirm:function(e){n(e)},onClose:function(){n(null)}})})}function m(t,n){return new Promise(function(r){e.ReactMaterial.dialogs.openConfirmDialog({message:n,confirmLabel:o("glt.confirm"),cancelLabel:o("glt.cancel"),title:t,fullWidth:!0,onConfirm:function(){r(!0)},onClose:function(){r(!1)}})})}function g(t){e.GLT.components.hideLoading(),e.GLT.components.showAlert(o("glt.error"),t,o("glt.close"))}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l,c=n&&n.id,h=n&&n.id;return t("getManageUserDataStyles",p),{setters:[],execute:function(){i=e.GLT.commands.gmService,s=e.GLT.commands.types.TimeRange,o=e.Base.translation.translate,u=e.Base.utils.IntUtil,a=e.GLT.commands.types.OrderByTime,f=["scores","badges","actions"],l=function(t){function n(n){var r=t.call(this,n)||this;return r.onTabChanged=function(e,t){r.setState({currTab:t,loading:!0}),r["load_"+t]()},r.openSubmitScoreDialog=function(){r.closeMenus();var t=r.state.scoreMenu&&r.state.scoreMenu.score;if(t){var n=r.props.refUser,a=o("glt.gmTools.labelScores")+" > "+t.scoreMode.name;d(a).then(function(f){if(f)return v(o("glt.gmTools.labelNote")).then(function(l){if(l!=null){var c=t.score;e.GLT.components.showLoading(),i.submitScoreByGM(n,t.scoreMode.key,f,l,!0,function(h){e.GLT.components.hideLoading(),m("",React.createElement("div",{className:r.props.classes.dialogs},React.createElement("div",null,a),React.createElement("div",{className:"inputReview"},u.formatAddComma(c),React.createElement(MaterialUI.Icon,{className:"updateArrow"},"forward"),u.formatAddComma(h.getUserScore(s.HISTORY).score)),React.createElement("div",null,o("glt.gmTools.labelNote")),React.createElement("div",{className:"inputReview"},l))).then(function(e){e&&i.submitScoreByGM(n,t.scoreMode.key,f,l,!1,function(e){var n=e.getUserScore(s.HISTORY);t.valueObject=Object.assign(t.valueObject,n.valueObject),r.setState({scores:r.state.scores})},g).submit()})},g).submit()}})})}},r.loadMoreUserRecords=function(){r.setState({loading:!0}),r.loadActions()},r.closeMenus=function(){r.setState({scoreMenu:null})},r.state={loading:!1,currTab:"scores"},r}return r(n,t),n.prototype.componentDidMount=function(){this.onTabChanged(null,this.state.currTab)},n.prototype.load_scores=function(){var e=this;i.listAllUserScoresByUser(this.props.refUser,s.HISTORY,function(t){e.setState({scores:t,loading:!1})},g).submit()},n.prototype.render_scores=function(){var e=this;if(this.state.scores)return React.createElement(MaterialUI.Table,null,React.createElement(MaterialUI.TableHead,null,React.createElement(MaterialUI.TableRow,null,React.createElement(MaterialUI.TableCell,null,o("glt.gmTools.table.scoreMode")),React.createElement(MaterialUI.TableCell,null,o("glt.gmTools.table.score")),React.createElement(MaterialUI.TableCell,null,o("glt.gmTools.table.time")),React.createElement(MaterialUI.TableCell,null))),React.createElement(MaterialUI.TableBody,null,this.state.scores.map(function(t,n){return e.render_score_row(t,n)})))},n.prototype.render_score_row=function(e,t){var n=this;return React.createElement(MaterialUI.TableRow,{key:"score"+t},React.createElement(MaterialUI.TableCell,null,e.scoreMode.name),React.createElement(MaterialUI.TableCell,null,e.score),React.createElement(MaterialUI.TableCell,{className:"timestamp"},e.time.toLocaleDateString()),React.createElement(MaterialUI.TableCell,{className:"actions"},React.createElement(MaterialUI.IconButton,{onClick:function(t){return n.onBtnSubmitScore(e,t)}},React.createElement(MaterialUI.Icon,null,"more_vert"))))},n.prototype.onBtnSubmitScore=function(e,t){this.closeMenus(),this.setState({scoreMenu:{el:t.currentTarget,score:e}})},n.prototype.load_badges=function(){var t=this;e.GLT.commands.badgeService.listUserBadgesByUser(this.props.refUser.username,function(e){t.setState({badges:e,loading:!1})},function(t){e.GLT.components.showAlert(o("glt.error"),t,o("glt.close"))}).submit()},n.prototype.render_badges=function(){var e=this;if(this.state.badges)return React.createElement("div",{className:"badges"},this.state.badges.map(function(t){return e.renderBadge(t.gameBadge,t.count)}))},n.prototype.renderBadge=function(e,t){var n=this;return React.createElement("div",{key:e.code,className:"badge"},React.createElement("img",{src:e.iconUrl}),React.createElement("div",{className:"btn-remove",onClick:function(t){return n.openRemoveBadgeDialog(e)}},React.createElement("div",{className:"btnbg"},React.createElement(MaterialUI.Icon,null,"clear"))))},n.prototype.openRemoveBadgeDialog=function(t){var n=this;v(o("glt.gmTools.msgRemoveBadge",{badge:t.name})).then(function(r){r!=null&&(e.GLT.components.showLoading(),i.removeUserBadgeByGM(n.props.refUser,t.code,r,function(){e.GLT.components.hideLoading();var r=n.state.badges.filter(function(e){return e.gameBadge.code!=t.code});n.setState({badges:r})},g).submit())})},n.prototype.render_actions=function(){var e=this;if(this.state.actions)return React.createElement("div",{className:"userRecordsRoot"},React.createElement(MaterialUI.Table,null,React.createElement(MaterialUI.TableHead,null,React.createElement(MaterialUI.TableRow,null,React.createElement(MaterialUI.TableCell,null,o("glt.gmTools.table.time")),React.createElement(MaterialUI.TableCell,null,o("glt.gmTools.table.action")),React.createElement(MaterialUI.TableCell,null,o("glt.gmTools.table.paramInt")),React.createElement(MaterialUI.TableCell,null,o("glt.gmTools.table.paramStr")),React.createElement(MaterialUI.TableCell,null,o("glt.gmTools.table.meta")))),React.createElement(MaterialUI.TableBody,null,this.state.actions.map(function(t,n){return e.render_action_row(t,n)}))),!this.state.noMoreActions&&!this.state.loading&&React.createElement(MaterialUI.Button,{variant:"contained",color:"primary",onClick:this.loadMoreUserRecords},o("glt.loadMore")))},n.prototype.render_action_row=function(e,t){return React.createElement(MaterialUI.TableRow,{key:"action"+t},React.createElement(MaterialUI.TableCell,{className:"timestamp"},e.time.toLocaleString()),React.createElement(MaterialUI.TableCell,null,e.action),React.createElement(MaterialUI.TableCell,null,typeof e.paramInt=="number"?e.paramInt:""),React.createElement(MaterialUI.TableCell,null,e.paramStr||""),React.createElement(MaterialUI.TableCell,{className:"meta"},JSON.stringify(e.meta)))},n.prototype.load_actions=function(){this.loadActions()},n.prototype.loadActions=function(){var t=this,n=1;e.GLT.commands.gmService.listUserRecords(this.props.refUser.username,null,a.TIME_DESC,this.state.actions?this.state.actions.length:0,100,function(e){var r=t.state.actions?t.state.actions:[];r=r.concat(e),t.setState({actions:r,loading:!1,noMoreActions:e.length<n})},function(t){e.GLT.components.showAlert(o("glt.error"),t,o("glt.close"))}).submit()},n.prototype.renderTabContent=function(){return this.state.loading?React.createElement(MaterialUI.CircularProgress,{size:36,thickness:5}):this["render_"+this.state.currTab]()},n.prototype.render=function(){return React.createElement("div",null,React.createElement(MaterialUI.Tabs,{value:this.state.currTab,onChange:this.onTabChanged,className:"tabs",indicatorColor:"primary"},f.map(function(e){return React.createElement(MaterialUI.Tab,{key:e,label:o("glt.gmTools.tab.user_"+e),value:e})})),React.createElement("div",{className:this.props.classes.searchResult},this.renderTabContent()),React.createElement(MaterialUI.Popover,{open:!!this.state.scoreMenu,anchorEl:this.state.scoreMenu&&this.state.scoreMenu.el,onClose:this.closeMenus},React.createElement(MaterialUI.MenuItem,{onClick:this.openSubmitScoreDialog},o("glt.gmTools.btnSubmitScore"))))},n}(React.Component),t("ManageUserData",l)}}}),System.register("Server/components/UserItemDialog",[],function(t,n){"use strict";function o(t,n,i,s){var o=n.description,u=Object.assign({title:r("glt.title.itemAwarded"),message:React.createElement(MaterialUI.Tooltip,{title:o,classes:{popper:"tooltipPopper tooltipPre"}},React.createElement("div",{style:{maxWidth:200,textAlign:"center"}},React.createElement("img",{width:"100%",src:n.iconUrl}),React.createElement("div",{className:"itemChangedData",style:{display:"flex",alignItems:"center"}},React.createElement("span",null,n.name+" x "+i),React.createElement(MaterialUI.Icon,null,"forward"),React.createElement("span",null,t.count)))),messageType:"node",hideCancelButton:!0,hideConfirmButton:!0,titleCloseButton:!0,transition:{"class":MaterialUI.Grow,duration:1e3}},s||{});return u.classes={root:"awardBadgeDialog awardItemDialog",paper:"awardBadgeDialogPaper",message:"awardBadgeDialogMsg"},s&&s.classes&&(u.classes=Object.assign(u.classes,s.classes)),e.ReactMaterial.dialogs.openAlertDialog(u)}var r,i=n&&n.id,s=n&&n.id;return t("showAwardUserItemDialog",o),{setters:[],execute:function(){r=e.Base.translation.translate,e.Base.addInlineStyles("\n.awardItemDialog .awardBadgeDialogPaper {\n    background-color: rgba(200,255,255,0.8) !important;\n    box-shadow: 0 0 30px cyan, 0 0 20px green !important;\n}\n.awardItemDialog .itemChangedData {\n	display: flex;\n	align-item: center;\n	justify-content: center;\n}\n.awardItemDialog .itemChangedData .MuiIcon-root {\n	color: #099;\n	margin: 0 8px;\n	font-size: 20px;\n}\n.awardBadgeDialog .dialog-title-root {\n	padding: 8px 20px 0 !important;\n}\n.tooltipPre {\n	white-space: pre-wrap;\n}\nbody.loginPanelOn > .pace {\n	display: none;\n}\n")}}}),System.register("Server/messages/vo/GamezoneStatistics",[],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o=n&&n.id,u=n&&n.id;return{setters:[],execute:function(){i=e.GLT.commands.vo.AbstractVo,s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"code",{get:function(){return this._vo.code},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"players",{get:function(){return this._vo.players},enumerable:!0,configurable:!0}),t.prototype.getRoomStateStatistics=function(e){return this._vo.rooms[e.name]},Object.defineProperty(t.prototype,"allRoomStateStatistics",{get:function(){return this._vo.rooms.all},enumerable:!0,configurable:!0}),t}(i),t("GamezoneStatistics",s)}}}),System.register("Server/messages/services/BaseService",["./../events/MsgServerEvent","./../offlines/OfflineServer"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[function(e){i=e},function(e){s=e}],execute:function(){o=function(t){function n(e){var n=t.call(this)||this;return n.name=e,n}return r(n,t),n.prototype.initialize=function(e,t){this.msgServer=e,this.options=t},n.prototype.sendDataInternally=function(e,t,n){var r={respond:n,internal:!0};this.msgServer.onGltmsg.apply(this.msgServer,[e,t,r])},n.prototype.sendDataInternallyForResponse=function(t,n,r,i){var s=this;this.sendDataInternally(n,r,function(n){e.Base.wait(1).then(function(){return s.processResponse(t,i,n)})})},n.prototype.processResponse=function(e,t,n){this.msgServer.emitEvent(new i.DataReceivedEvent(i.DataReceivedEvent.TYPES.RESPONSE_RECEIVED,e,n)),t(n)},n.prototype.submitCommandAndUpdateNetworkDelay=function(t,n){var r=this,i=e.Base.time(),s=this.msgServer._submitCommandStart(i);return this.submitCommand(t,n).then(function(t){return r.msgServer._addNetworkDelayData(s,e.Base.time()-i),t})},n.prototype.submitCommand=function(e,t,n){var r=this;if(!this.msgServer.myPlayer)return Promise.reject("error.notConnected");if(this.msgServer.myPlayer.offline)return s.offlineServer.submitCommand(this.name,e,t);var o=this.name+"."+e,u=!1;return(new Promise(function(i,s){r.msgServer.emit("submitCommand",[r.name,e,t,function(e){e.error?(n?console.log("[Error response] "+o+": "+e.error,e.error):console.error("[Error response] "+o+": "+e.error,e.error),u=!0,s(e.error)):(r.processResponse(o,i,e.data),i(e.data))}])})).catch(function(t){throw u||console.error("Error on command response "+o,t),r.msgServer.emitEvent(new i.MsgErrorEvent(i.MsgErrorEvent.TYPES.ERROR_PROCESS_CMD_RESPONSE,r.name+"."+e,t)),t})},n}(PIXI.utils.EventEmitter),t("BaseService",o)}}}),System.register("Server/itemStores/ItemStoreManager",["./ItemMenuItem"],function(t,n){"use strict";function v(e){return f?e.forEach(function(e){f.find(function(t){return t.code==e.code})||f.push(e)}):f=e,f}function m(e,t){var n=t.map(function(e){return e.itemCode}),r=[];return e.forEach(function(e){b(e,n)&&r.push(e)}),{gameItems:r,userItems:t}}function g(e){e&&(h[e]=!0)}function y(e){e&&(h[e]=!1)}function b(t,n){return h[t.code]?!1:t.status==s.PUB.value?!0:t.status==s.PUB_TO_OWNER.value?n.indexOf(t.code)!=-1:t.status==s.DEV.value?e.Base.system.devMode&&t.code.indexOf(e.Base.projectCode+".")==0:!1}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l,c,h,p=n&&n.id,d=n&&n.id;return t("filterItemsForStore",m),t("hideItemInStore",g),t("revealItemInStore",y),{setters:[function(e){i=e}],execute:function(){s=e.GLT.commands.types.ItemStatus,o=e.GLT.commands.vo.UserWallet,u=e.Base.translation.translate,a=function(){function e(){}return e.RENDER_BACKPACK_ITEM="renderBackpackItem",e}(),t("ItemStoreEventType",a),l=function(){function e(e){this.gameItems=e}return e.TYPE="gameItemsLoaded",e}(),t("GameItemsLoadedEvent",l),c=function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.userItemOverlays={},e}return r(n,t),n.prototype.loadData=function(){var t=this,n={wallet:null,userItems:null},r=[],i=e.GLT.client.user,s=!i||i.guest;return s?(n.wallet=new o({user:i.valueObject,userScores:[],gltDollars:0,gltPoints:0}),n.userItems=[]):r.push(e.GLT.commands.userService.getWallet(function(e){e.userScores.sort(function(e,t){return t.scoreMode.toDollarRate-e.scoreMode.toDollarRate}),n.wallet=e}),e.GLT.commands.itemService.listUserItems(0,1e3,function(e){n.userItems=e})),f||r.push(e.GLT.commands.itemService.listGameItems(function(e){v(e),t.emitGameItemsLoadedEvent(f)})),r.length?e.GLT.client.submitCommands(r).then(function(){return{wallet:n.wallet,gameItems:f,userItems:n.userItems}}):Promise.resolve({wallet:n.wallet,gameItems:f,userItems:n.userItems})},n.prototype.getBackpackItemOverlay=function(e){return e&&this.userItemOverlays[e.itemCode]},n.prototype.getBackpackItemTooltip=function(e,t){return t},n.prototype.renderBackpackItemOverlay=function(e,t){e&&(this.userItemOverlays[e]=t,this.emit(a.RENDER_BACKPACK_ITEM,e,t))},n.prototype.removeAllBackpackItemOverlay=function(){var e=this,t=Object.keys(this.userItemOverlays);this.userItemOverlays={},t.length&&t.forEach(function(t){return e.renderBackpackItemOverlay(t,null)})},n.prototype.getItemName=function(e){return e.name},n.prototype.getCategoryName=function(e){return e.category},n.prototype.getCurrencyName=function(e){return e.name},n.prototype.listItemMenuOnBackpack=function(e,t,n){var r=[];if(!e.expirable&&!n.disableStore&&(e.status==s.PUB.value||e.status==s.PUB_TO_OWNER.value)){var o=new i.ItemMenuRefill(u("glt.backpack.menu.refill"),t.count>=e.limitPerUser);r.push(o)}return r},n.prototype.emitGameItemsLoadedEvent=function(e){this.emit(l.TYPE,new l(e.slice()))},n}(PIXI.utils.EventEmitter),t("DefaultItemStoreManager",c),h={}}}}),System.register("Server/components/ItemCheckout",["./../itemStores/ItemStoreManager","./../utils/PayMaker"],function(t,n){"use strict";function g(){f&&(f.dispose(),f=null)}function y(t,n,r){var o=MaterialUI.withStyles(d)(p);n=n||{},n.itemStoreManager||(n.itemStoreManager=new s.DefaultItemStoreManager);var u=Object.assign({contentRenderer:function(e){return React.createElement(o,i({dialog:e,gameItem:t},n))},title:t?n.itemStoreManager.getItemName(t):a("glt.error"),actionRenderer:function(){return null},titleCloseButton:!0,hideCancelButton:!0},r||{});return e.ReactMaterial.dialogs.openConfirmDialog(u,{paper:{width:t?"90%":"initial",maxWidth:800,"& .dialog-title-root h2":{placeContent:"center",fontWeight:"bold"}}})}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},s,o,u,a,f,l,c,h,p,d,v=n&&n.id,m=n&&n.id;return t("showItemCheckout",y),{setters:[function(e){s=e},function(e){o=e}],execute:function(){u=e.Base.utils.IntUtil,a=e.Base.translation.translate,l=e.Base.system.devMode?!0:undefined,c=0,h=12e3,p=function(t){function n(n,r){var i=t.call(this,n,r)||this;return i.onWindowFocus=function(){e.Base.time()>c&&!i.state.loadingWallet&&i.loadWallet()},i.purchaseGltDollar=function(){e.GLT.auth.purchaseGltDollar()},i.state={loadingWallet:!0,qty:1,payMethod:i.onlyGltDollar()?"gltDollar":"gameDollar"},i.props.gameItem&&i.load(),window.addEventListener("focus",i.onWindowFocus),i}return r(n,t),n.prototype.componentWillUnmount=function(){window.removeEventListener("focus",this.onWindowFocus),g()},n.prototype.onlyGltDollar=function(){return this.props.gameItem&&this.props.gameItem.priceInGameDollar==0&&this.props.gameItem.priceInGameDollarOrigin==0&&this.props.gameItem.priceInGltDollar>0},n.prototype.load=function(){var t=this,n=this.props.gameItem,r={},i=[];this.props.wallet?r.wallet=this.props.wallet:i.push(e.GLT.commands.userService.getWallet(function(e){r.wallet=e})),this.props.userItem===undefined?i.push(e.GLT.commands.itemService.getUserItem(n.code,function(e){r.userItem=e})):r.userItem=this.props.userItem,l===undefined?i.push(e.GLT.commands.clientService.isAllowGltDollar(function(e){l=e,r.allowGltDollar=e})):r.allowGltDollar=l,n.buyAgainOff>0&&i.push(e.GLT.commands.transactionService.listPurchaseItemTransactions(n.code,0,1,function(e){e&&e.length&&(r.buyAgainOff=n.buyAgainOff)})),e.GLT.client.submitCommands(i).then(function(){var n=t.props.gameItem.limitPerUser;r.userItem&&(n-=r.userItem.count),r.qty=n>0?1:0,r.loadingWallet=!1,c=e.Base.time()+h,t.setState(r)})},n.prototype.loadWallet=function(){var t=this;this.setState({loadingWallet:!0}),e.GLT.commands.userService.getWallet(function(n){c=e.Base.time()+h,t.setState({wallet:n,loadingWallet:!1})}).submit()},n.prototype.selectPayMethod=function(e){this.setState({payMethod:e})},n.prototype.renderCurrencyTab=function(t){var n=this,r=this.props.gameItem,i=t,s=t.replace(/^g/,"G"),o="priceIn"+s,f=r[o],l=r[o+"Origin"];if(f<=0)return React.createElement("div",{className:"tabItem invis"});var c=["tabItem",t,this.state.payMethod==t?"active":"deactive"],h=null;return l&&l>f&&(h=React.createElement("div",{className:"currency origin"},React.createElement("img",{src:e.Base.getAppResourceFileUrl("Server."+t)}),u.formatAddComma(l))),this.state.buyAgainOff&&(f-=Math.floor(f*this.state.buyAgainOff/100)),React.createElement("div",{className:c.join(" ")},React.createElement("div",{className:"tabButton",onClick:function(e){return n.selectPayMethod(t)}},React.createElement(MaterialUI.Typography,{className:"title"},a("glt.itemStore.payWith")),h,React.createElement("div",{className:"currency"},React.createElement("img",{src:e.Base.getAppResourceFileUrl("Server."+t)}),u.formatAddComma(f))))},n.prototype.renderCheckoutPanel=function(){var e=this.props.gameItem.priceInGameDollar<=0||this.props.gameItem.priceInGltDollar<=0;return React.createElement("div",{className:this.props.classes.checkout+" "+this.state.payMethod},React.createElement("div",{className:this.props.classes.tab+" "+(e?"single":"multiple")},this.renderCurrencyTab("gameDollar"),this.renderCurrencyTab("gltDollar")),this.renderCheckoutTabContent())},n.prototype.renderCheckoutTabContent=function(){if(this.state.loadingWallet)return React.createElement("div",{className:"tabContent"},React.createElement(MaterialUI.CircularProgress,null));if(this.state.payMethod=="gameDollar")return this.renderPayGameDollarPanel();if(this.state.payMethod=="gltDollar")return this.renderPayGltDollarPanel()},n.prototype.purchaseWithGameDollar=function(e){var t=this.generatePrice(this.props.gameItem.priceInGameDollar),n=[],r=function(t){var r=i.state.wallet.userScores.find(function(e){return e.scoreMode.key==t});n.push({k:t,v:e[t],n:i.props.itemStoreManager.getCurrencyName(r.scoreMode),s:r.scoreMode.toDollarRate})},i=this;for(var s in e)r(s);var o={item:this.props.gameItem.code,name:this.props.itemStoreManager.getItemName(this.props.gameItem),icon:this.props.gameItem.iconUrl,count:this.state.qty};o.gamePays={price:t.finalUnitPrice,fund:this.state.wallet.gameDollars,pays:n},this.purchase(o)},n.prototype.renderPayGameDollarPanel=function(){var t=this,n=this.generatePrice(this.props.gameItem.priceInGameDollar),r=this.getMaxToSelect(),i,s=[];if(r){if(n.buyAgainOff){var f=Math.round(n.buyAgainOff),l=Math.round(100-n.buyAgainOff);l%10==0&&(l/=10),s.push(React.createElement(MaterialUI.Typography,{className:"row full unitPrice",key:"row"+s.length},React.createElement("span",{className:"label"},a("glt.itemStore.unitPrice")),React.createElement("span",{className:"value"},u.formatAddComma(n.unitPrice)))),s.push(React.createElement(MaterialUI.Typography,{className:"row full buyAgainOff",key:"row"+s.length},React.createElement("span",{className:"label"},a("glt.itemStore.buyAgainOff")),React.createElement("span",{className:"value"},a("glt.itemStore.discount.value",{sale:f,scale:l})," = -",u.formatAddComma(n.offAmount))))}s.push(React.createElement(MaterialUI.Typography,{className:"row full",key:"row"+s.length},React.createElement("span",{className:"label"},a("glt.itemStore.subtotal")),React.createElement("span",null,u.formatAddComma(n.finalUnitPrice)," x ",this.state.qty," = ",u.formatAddComma(n.priceTotal))))}s.push(React.createElement(MaterialUI.Typography,{className:"row",key:"row"+s.length},React.createElement("span",{className:"label"},a("glt.itemStore.yourFund"),":"),React.createElement("img",{src:e.Base.getAppResourceFileUrl("Server.gameDollar")}),React.createElement("span",null,u.formatAddComma(this.state.wallet.gameDollars))));if(r){var c=(new o.PayMaker(this.state.wallet.userScores)).makePay(n.priceTotal);if(c){var h=0;for(var p=0,d=this.state.wallet.userScores;p<d.length;p++){var v=d[p],m=c[v.scoreMode.key];m&&(h+=m*v.scoreMode.toDollarRate,s.push(React.createElement("div",{className:"row indent full",key:"row"+s.length},React.createElement(MaterialUI.Typography,null,React.createElement("span",null,this.props.itemStoreManager.getCurrencyName(v.scoreMode)),React.createElement("span",null,"(x"),React.createElement("span",null,v.scoreMode.toDollarRate),React.createElement("span",null,")")),React.createElement("div",{className:"value"},React.createElement("span",null,m>0?"-":"+"),React.createElement("span",null,u.formatAddComma(Math.abs(m)))))))}s.push(React.createElement(MaterialUI.Typography,{className:"row right hr",key:"row"+s.length},React.createElement("span",{className:"label"},a("glt.itemStore.total")),React.createElement("img",{src:e.Base.getAppResourceFileUrl("Server.gameDollar")}),React.createElement("span",null,u.formatAddComma(h)))),i=React.createElement("div",{className:"row right actions"},React.createElement(MaterialUI.Button,{variant:"contained",color:"primary",onClick:function(e){return t.purchaseWithGameDollar(c)}},React.createElement(MaterialUI.Typography,null,a("glt.itemStore.purchase"))))}else i=React.createElement("div",{className:"row right actions"},React.createElement(MaterialUI.Typography,null,a("glt.itemStore.insuficientFunds")))}else i=React.createElement("div",{className:"row right actions"},React.createElement(MaterialUI.Typography,null,a("glt.itemStore."+(this.props.gameItem.expirable?"alreadyOwned":"maxLimitReached"))));return React.createElement("div",{className:"tabContent"},s,React.createElement("div",{className:"row spacer"}),i)},n.prototype.generatePrice=function(e){var t=this.state.buyAgainOff,n=e,r=t?Math.floor(n*t/100):0;r==0&&(t=0);var i=Math.max(1,n-r);return{buyAgainOff:t,unitPrice:n,offAmount:r,finalUnitPrice:i,priceTotal:i*this.state.qty}},n.prototype.renderPayGltDollarPanel=function(){var t=this;if(!this.state.allowGltDollar)return React.createElement("div",{className:"tabContent"},React.createElement(MaterialUI.Typography,{className:"row full"},a("glt.itemStore.gltDollarNotSupport")));var n=this.generatePrice(this.props.gameItem.priceInGltDollar),r=this.getMaxToSelect(),i=[],s;if(r){if(n.buyAgainOff){var o=Math.round(n.buyAgainOff),f=Math.round(100-n.buyAgainOff);f%10==0&&(f/=10),i.push(React.createElement(MaterialUI.Typography,{className:"row full unitPrice",key:"row"+i.length},React.createElement("span",{className:"label"},a("glt.itemStore.unitPrice")),React.createElement("span",{className:"value"},u.formatAddComma(n.unitPrice)))),i.push(React.createElement(MaterialUI.Typography,{className:"row full buyAgainOff",key:"row"+i.length},React.createElement("span",{className:"label"},a("glt.itemStore.buyAgainOff")),React.createElement("span",{className:"value"},a("glt.itemStore.discount.value",{sale:o,scale:f})," = -",u.formatAddComma(n.offAmount))))}i.push(React.createElement(MaterialUI.Typography,{className:"row full",key:"row"+i.length},React.createElement("span",{className:"label"},a("glt.itemStore.subtotal")),React.createElement("span",null,u.formatAddComma(n.finalUnitPrice)," x ",this.state.qty," = ",u.formatAddComma(n.priceTotal))))}var l=Math.min(this.state.wallet.gltPoints,n.priceTotal),c=n.priceTotal-l;return i.push(React.createElement(MaterialUI.Typography,{className:"row",key:"row"+i.length},React.createElement("span",{className:"label"},a("glt.itemStore.yourFund")),React.createElement("img",{src:e.Base.getAppResourceFileUrl("Server.gltDollar")}),React.createElement("span",null,u.formatAddComma(this.state.wallet.gltDollars)),React.createElement("span",{className:"plus"},"+"),React.createElement("img",{src:e.Base.getAppResourceFileUrl("Server.gltPoint")}),React.createElement("span",null,u.formatAddComma(this.state.wallet.gltPoints)))),r?this.state.wallet.gltDollars+this.state.wallet.gltPoints>=n.priceTotal?(i.push(React.createElement("div",{className:"row right hr",key:"row"+i.length},React.createElement(MaterialUI.Typography,{className:"row label",key:"row"+i.length},a("glt.itemStore.useFund")),React.createElement(MaterialUI.Typography,{className:c?"useValue":"invis"},React.createElement("img",{src:e.Base.getAppResourceFileUrl("Server.gltDollar")}),React.createElement("span",null,u.formatAddComma(c))))),this.state.wallet.gltPoints&&i.push(React.createElement("div",{className:"row right",key:"row"+i.length},React.createElement(MaterialUI.Typography,{className:l?"useValue":"invis"},React.createElement("img",{src:e.Base.getAppResourceFileUrl("Server.gltPoint")}),React.createElement("span",null,u.formatAddComma(l))))),s=React.createElement("div",{className:"row full actions"},this.renderPurchaseGltDollarBtn(),React.createElement(MaterialUI.Button,{variant:"contained",color:"primary",onClick:function(e){return t.purchaseWithGameletDollar(c,l)}},React.createElement(MaterialUI.Typography,null,a("glt.itemStore.purchase"))))):s=React.createElement("div",{className:"row full actions"},this.renderPurchaseGltDollarBtn(),React.createElement(MaterialUI.Typography,null,a("glt.itemStore.insuficientFunds"))):s=React.createElement("div",{className:"row right actions"},React.createElement(MaterialUI.Typography,null,a("glt.itemStore."+(this.props.gameItem.expirable?"alreadyOwned":"maxLimitReached")))),React.createElement("div",{className:"tabContent"},i,React.createElement("div",{className:"row spacer"}),s)},n.prototype.renderPurchaseGltDollarBtn=function(){return React.createElement(MaterialUI.Button,{className:"btn-refill-gltdollar",onClick:this.purchaseGltDollar},React.createElement(MaterialUI.Icon,null,"bolt"),React.createElement(MaterialUI.Typography,null,a("glt.itemStore.refillGltDollar")))},n.prototype.purchaseWithGameletDollar=function(e,t){var n=this.generatePrice(this.props.gameItem.priceInGltDollar),r={item:this.props.gameItem.code,name:this.props.itemStoreManager.getItemName(this.props.gameItem),icon:this.props.gameItem.iconUrl,count:this.state.qty};r.gltPays={price:n.finalUnitPrice,fund:{dollars:this.state.wallet.gltDollars,points:this.state.wallet.gltPoints},pays:{dollars:e,points:t}},this.purchase(r)},n.prototype.purchase=function(t){var n=this;e.GLT.components.showLoading(a("glt.processing")),e.GLT.auth.purchaseItem(t).then(function(t){var r=n.state.wallet;if(t.deposits)for(var i in t.deposits)r.updateUserScore(i,t.deposits[i]);return typeof t.gltDollars=="number"&&(r.gltDollars=t.gltDollars),typeof t.gltPoints=="number"&&(r.gltPoints=t.gltPoints),n.props.onPurchaseComplete&&n.props.onPurchaseComplete(t.userItem,r),e.GLT.components.showAlert(a("glt.itemStore.purchased.title"),a("glt.itemStore.purchased.message"),a("glt.close")),!0}).catch(function(t){return t=="canceled"?!1:(e.GLT.components.showAlert(a("glt.error"),t,a("glt.close")),!0)}).then(function(t){e.GLT.components.hideLoading(),t&&n.props.dialog.close(!0)})},n.prototype.adjustQty=function(e){this.setState({qty:this.updateQty(this.state.qty+e)})},n.prototype.updateQty=function(e){var t=this.getMaxToSelect();return t>0?Math.max(1,Math.min(t,e)):0},n.prototype.getMaxToSelect=function(){var e=this.props.gameItem.limitPerUser;return this.state.userItem&&(e-=this.state.userItem.count),Math.max(0,e)},n.prototype.renderCountSelect=function(){if(!this.props.gameItem.expirable)return React.createElement("div",{className:"countSelectRoot"},React.createElement("div",{className:"label"},"Qty"),this.renderButtonCount("add",1),React.createElement("div",null,this.state.qty),this.renderButtonCount("remove",-1),React.createElement("div",{className:"label"+(this.state.qty>=this.getMaxToSelect()?"":" invis")},"max"))},n.prototype.delayAdjustQty=function(t,n){n===void 0&&(n=1e3),this.adjustQty(t);var r=n==1e3?250:Math.max(60,n-15);f=e.Base.addDelayFunction(this,this.delayAdjustQty,n,[t,r])},n.prototype.renderButtonCount=function(e,t){var n=this,r=function(e){g(),n.delayAdjustQty(t)},i=function(e){g()},s=!1;return t>0?s=this.state.qty>=this.getMaxToSelect():s=this.state.qty<=1,React.createElement(MaterialUI.IconButton,{disabled:s,className:e,onPointerDown:r,onPointerUp:i},React.createElement(MaterialUI.Icon,null,e))},n.prototype.renderOwnedDiv=function(){if(this.state.userItem&&this.state.userItem.count>0)return this.props.gameItem.expirable?React.createElement("div",{className:"owned"},a("glt.itemStore.owned"),", ",a("glt.itemStore.expiresOn",{date:this.state.userItem.expireTime.toLocaleDateString()})):React.createElement("div",{className:"owned"},a("glt.itemStore.owned")," x ",u.formatAddComma(this.state.userItem.count))},n.prototype.renderExpireTime=function(){var e=this.props.gameItem,t=this.props.userItem;if(e.expirable&&!(t&&t.count>0)){var n="glt.itemStore."+(e.validDays>1?"expirableDays":"expirableOneDay");return React.createElement(MaterialUI.Typography,{className:"expirable"},a(n,{days:e.validDays}))}},n.prototype.render=function(){return this.props.gameItem?React.createElement("div",{className:this.props.classes.root},React.createElement("div",{className:this.props.classes.item},React.createElement("div",{className:"itemInfo"},React.createElement("div",{className:"itemImageAndCount"},React.createElement("div",{className:"itemImage"},React.createElement("img",{src:this.props.gameItem.iconUrl})),this.renderOwnedDiv()),this.renderCountSelect()),React.createElement(MaterialUI.Typography,{className:"desc"},this.props.gameItem.description),this.renderExpireTime()),this.renderCheckoutPanel()):React.createElement("div",{className:this.props.classes.root},a("glt.itemStore.itemNotFound"))},n}(React.Component),t("ItemCheckout",p),d=function(e){return{root:{padding:"6px 20px 20px",display:"flex","& .label":{margin:"0 3px",color:"#666",fontSize:"smaller"},"& .invis":{visibility:"hidden"},"& .plus":{fontWeight:100,margin:"0 3px 0 5px",fontFamily:"monospace"}},item:{display:"flex",flexDirection:"column",alignItems:"center",flex:"1 0 40%","& .itemInfo":{display:"flex",alignItems:"center",placeContent:"center",marginBottom:15},"& .itemImageAndCount":{display:"flex",alignItems:"center",flexDirection:"column"},"& .itemImage":{display:"flex",padding:5,maxWidth:"100%",border:"1px solid #333",borderRadius:5,boxShadow:"0 2px 6px rgba(0,0,0,0.3)"},"& .itemImage img":{width:"100%"},"& .desc":{maxWidth:"100%",fontSize:15,maxHeight:"calc(100vh - 320px)",overflow:"auto",whiteSpace:"pre-line",paddingRight:5,boxSizing:"border-box"},"& .countSelectRoot":{display:"flex",flexDirection:"column",alignItems:"center",marginLeft:5},"& .countSelectRoot button":{padding:10},"& .countSelectRoot button.add":{color:"#09F"},"& .countSelectRoot button.remove":{color:"#C60"},"& .countSelectRoot button.Mui-disabled":{color:"#ccc"},"& .owned":{fontSize:"smaller",color:"#666",marginTop:8},"& .expirable":{color:"#666",background:"#eee",padding:"5px 15px",lineHeight:"1em",marginTop:10,borderRadius:3,fontSize:14}},checkout:{flex:"1 0 60%",display:"flex",flexDirection:"column",paddingLeft:15,boxSizing:"border-box","& .tabContent":{flex:1,display:"flex",flexDirection:"column",background:"#ddd",borderRadius:5,padding:10,boxSizing:"border-box","& img":{margin:"0 3px"},"& .row.spacer":{flex:1},"& .row":{display:"flex",alignItems:"center"},"& .row.full":{placeContent:"space-between"},"& .row.right":{placeContent:"flex-end"},"& .row.indent":{paddingLeft:20},"& .row.hr":{borderTop:"1px dotted #999",marginTop:6,paddingTop:8},"& .row.actions":{marginTop:15},"& .value":{fontFamily:'Roboto, Helvetica, Arial, "sans-serif"'},"& .useValue":{display:"flex",alignItems:"center",placeContent:"flex-end",minWidth:60},"& .btn-refill-gltdollar":{color:"dodgerblue",padding:"6px 12px","&:hover":{color:"#fff",background:"deepskyblue"}},"& .unitPrice .value":{opacity:.6},"& .buyAgainOff .value":{opacity:.6,color:"#0A0"}},"&.gameDollar .tabContent":{borderTopLeftRadius:0},"&.gltDollar .tabContent":{borderTopRightRadius:0}},tab:{display:"flex","& .tabItem":{padding:"0 8px 8px","&.invis":{visibility:"hidden",flex:1}},"&.multiple .tabItem":{flex:1,padding:"0 8px 8px"},"&.single .tabItem .tabButton > *":{margin:3},"& .tabItem .tabButton":{borderRadius:5,padding:5,display:"flex",alignItems:"center"},"&.multiple .tabItem .tabButton":{flexDirection:"column"},"& .currency":{display:"inline-flex",alignItems:"center",lineHeight:"1em",fontFamily:'Roboto, Helvetica, Arial, "sans-serif"',position:"relative",padding:"0 5px","&.origin::after":{borderBottom:"2px solid #D00",content:'" "',position:"absolute",left:0,top:"42%",width:"100%",transform:"rotate(5deg)"}},"& .currency img":{marginRight:2},"& .tabItem.active":{borderTopLeftRadius:5,borderTopRightRadius:5,background:"#ddd"},"& .tabItem.active .title":{color:"#666"},"& .tabItem.deactive .tabButton":{background:"#FA0",color:"#eee",cursor:"pointer"},"& .tabItem.deactive.gameDollar .tabButton":{background:"linear-gradient(0, #D70, #FA3)"},"& .tabItem.deactive.gltDollar .tabButton":{background:"linear-gradient(0, #06B, #0AF)"}}}}}}}),System.register("Server/components/BackpackDialog",["./../itemStores/ItemStoreManager","./ItemStoreDialog"],function(t,n){"use strict";function y(){v=null}function b(){v&&v.div&&(e.React.unmountRootComponent(v.div),y())}function w(e,t){if(v&&v.dialog){var n=v.dialog.refs&&v.dialog.refs.dialogElement;return n&&(e?$(n).css("display","block"):(v.backpack&&v.backpack.closeItemMenu(),$(n).css("display","none")),v.backpack&&v.backpack.importStates(t)),!0}return!1}function E(){if(v&&v.dialog){var e=v.dialog.refs&&v.dialog.refs.dialogElement;return e&&e.style.display!="none"}return!1}function S(e){v&&v.backpack&&(v.backpack.importStates(e),v.backpack.refresh())}function x(){w(!1)}function T(t,n){b();var r=MaterialUI.withStyles(d)(p);t=t||{},t.itemStoreManager||(t.itemStoreManager=new o.DefaultItemStoreManager);var s=new PIXI.utils.EventEmitter,a=function(){u.showItemStore({itemStoreManager:t.itemStoreManager,onPurchaseComplete:function(e,n,r){s.emit("itemPurchased",e,n,r),t.onPurchaseComplete&&t.onPurchaseComplete(e,n,r)},onMouseOverItem:t.onMouseOverItem,onMouseClickItem:t.onMouseClickItem})},f;return n=n||{},n.title=React.createElement(MaterialUI.Typography,{className:"titleBar"},React.createElement("span",{className:"title"},n.title||c("glt.backpack.title")),t.disableStore?null:React.createElement(MaterialUI.Button,{onClick:a},React.createElement(MaterialUI.Icon,null,"store"),React.createElement("span",null,c("glt.backpack.btnStore")))),n=Object.assign({contentRenderer:function(e){return React.createElement(r,i({dialog:e,instance:v,emitter:s},t))},transition:{"class":MaterialUI.Fade,duration:200},getMountedInstance:function(e){v&&f==v.div&&(v.dialog=e)},actionRenderer:function(){return null},titleCloseButton:!0,hideCancelButton:!0},n),t.replaceCloseWithToggle&&(n.preventAccidentalClose=!0,n.onEscapeKeyDown=x,n.onBackdropClick=x,n.onButtonClose=function(e){e.preventDefault(),w(!1)}),v={},f=v.div=e.ReactMaterial.dialogs.openConfirmDialog(n,{paper:{overflow:"hidden","& .titleBar":{display:"flex",alignItems:"flex-end",flex:1,marginRight:14},"& .titleBar > *":{margin:"0 8px"},"& .titleBar .title":{flex:1,fontWeight:"bold",fontSize:"larger",textAlign:"center"},"& .titleBar button":{padding:3,border:"1px solid #aaa"}}}),$(f).css("display","none"),f}function N(e,t,n){var r,i=t[0];for(var s in e){r=e[s];break}for(var o=0;o<n;++o){var u=Object.assign({},r.valueObject);u.code=r.code+o;var a=new l(u);e[a.code]=a;var c=Object.assign({},i.valueObject);c.itemCode=a.code;var h=new f(c);t.push(h)}return t}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},s,o,u,a,f,l,c,h,p,d,v,m=n&&n.id,g=n&&n.id;return t("hideBackpack",b),t("toggleBackpack",w),t("isBackpackVisible",E),t("refreshBackpack",S),t("showBackpack",T),{setters:[function(e){o=e},function(e){u=e}],execute:function(){s=e.Base.utils.ObjectUtil,a=e.Base.utils.IntUtil,f=e.GLT.commands.vo.UserItem,l=e.GLT.commands.vo.GameItem,c=e.Base.translation.translate,h=function(){function e(e,t,n){this.gameItem=e,this.userItem=t,this.itemStoreManager=n}return e.prototype.closeBackpack=function(){this._closeBackpack=!0},Object.defineProperty(e.prototype,"needCloseBackpack",{get:function(){return this._closeBackpack},enumerable:!0,configurable:!0}),e}(),t("UserItemMenuEvent",h),p=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.gameItemMap={},r.closeItemMenu=function(e){r.setState({itemMenu:null})},r.onItemButtonMain=function(){var e=r.state.itemMenu;if(e&&e.menuItems.length){var t=void 0;e.menuItems.length==1?t=e.menuItems[0]:t=e.menuItems.find(function(e){return e.isDefault}),r.clickItemMenuItem(t)}},r.state={userItemsOverlay:{},backpackClose:!!e.backpackClose},r}return r(n,t),n.prototype.refresh=function(){this.setState({userItemsOverlay:this.state.userItemsOverlay})},n.prototype.componentDidMount=function(){var t=this;v&&this.props.instance==v&&(v.backpack=this),this.props.itemStoreManager.loadData().then(function(e){e.gameItems.forEach(function(e){t.gameItemMap[e.code]=e}),t.setState({userItems:e.userItems})}),e.GLT.client.on(e.GLT.Client.EVENT.USER_ITEM_CHANGED,this.onUserItemChanged,this),this.props.itemStoreManager.on(o.ItemStoreEventType.RENDER_BACKPACK_ITEM,this.onRenderBackpackItem,this),this.props.emitter.on("itemPurchased",this.onItemPurchased,this)},n.prototype.componentWillUnmount=function(){this.props.emitter.off("itemPurchased",this.onItemPurchased,this),this.props.itemStoreManager.off(o.ItemStoreEventType.RENDER_BACKPACK_ITEM,this.onRenderBackpackItem,this),e.GLT.client.off(e.GLT.Client.EVENT.USER_ITEM_CHANGED,this.onUserItemChanged,this),this.props.instance==v&&y()},n.prototype.onItemPurchased=function(e,t,n){this.setState({userItems:t})},n.prototype.onUserItemChanged=function(e){var t=this.state.userItems,n=t&&t.find(function(t){return t.itemCode==e.itemCode});n&&(n.valueObject=s.safeAssign(n.valueObject,e.valueObject),this.setState({userItems:t}))},n.prototype.openItemMenu=function(e,t,n){var r=this.props.itemStoreManager.listItemMenuOnBackpack(t,n,this.props);r&&r.length&&this.setState({itemMenu:{anchorEl:e.currentTarget,menuItems:r,gameItem:t,userItem:n}})},n.prototype.onRenderBackpackItem=function(e,t){var n=this.state.userItemsOverlay;n[e]=t,this.setState({userItemsOverlay:n})},n.prototype.getItemTooltip=function(e,t){var n=this.props.itemStoreManager.getItemName(e);return e.expirable?n+="\n"+c("glt.itemStore.expiresOn",{date:t.expireTime.toLocaleDateString()}):n+="\n"+c("glt.itemStore.owned")+" x "+a.formatAddComma(t.count),n=this.props.itemStoreManager.getBackpackItemTooltip(t,n)||"",n=React.createElement("div",{className:this.props.classes.multiline},n),n},n.prototype.renderUserItem=function(e){var t=this,n=this.gameItemMap[e.itemCode];if(n&&e.count>0){var r=this.state.itemMenu&&this.state.itemMenu.userItem==e,i=this.state.userItemsOverlay[e.itemCode]||this.props.itemStoreManager.getBackpackItemOverlay(e),s=undefined;return i&&(s=React.createElement("div",{className:"overlay"},i)),React.createElement(MaterialUI.Tooltip,{key:n.code,title:this.getItemTooltip(n,e)},React.createElement("div",{className:this.props.classes.gameItem+(r?" focused":""),onMouseEnter:function(r){return t.onMouseOverItem(r,n,e)},onClick:function(r){return t.onMouseClickItem(r,n,e)}},React.createElement("div",{className:"imgHolder"},React.createElement("img",{className:"itemIcon",src:n.iconUrl}),React.createElement("div",{className:"owned"},"x",e.count),s)))}},n.prototype.onMouseOverItem=function(t,n,r){this.props.onMouseOverItem&&this.props.onMouseOverItem(n,r),!t.defaultPrevented&&!e.Base.system.isTouchDevice()&&this.openItemMenu(t,n,r)},n.prototype.onMouseLeaveItem=function(t){e.Base.system.isTouchDevice()||this.closeItemMenu(t)},n.prototype.onMouseClickItem=function(e,t,n){this.props.onMouseClickItem&&this.props.onMouseClickItem(t,n),e.defaultPrevented||this.openItemMenu(e,t,n)},n.prototype.clickItemMenuItem=function(e){var t=this.state.itemMenu;if(t&&e&&!e.disabled){var n=new h(t.gameItem,t.userItem,this.props.itemStoreManager);e.execute(n),n.needCloseBackpack&&(this.props.replaceCloseWithToggle?w(!1):this.props.dialog.close())}},n.prototype.buttonMainStyles=function(){if(this.state.itemMenu&&this.state.itemMenu.anchorEl){var e=this.state.itemMenu.anchorEl,t=e.clientWidth+8,n=e.clientHeight+8;return{width:t,height:n}}return{}},n.prototype.importStates=function(e){e&&!s.isEmpty(e)&&e.backpackClose!==undefined&&e.backpackClose!=this.state.backpackClose&&this.setState(e)},n.prototype.renderGameItems=function(){var e=this;if(this.state.userItems){if(this.state.backpackClose)return React.createElement("div",{className:this.props.classes.gameItems+" empty"},c("glt.backpack.close"));if(this.state.userItems.length==0)return React.createElement("div",{className:this.props.classes.gameItems+" empty"},c("glt.backpack.empty"));var t=null;return this.state.itemMenu&&this.state.itemMenu.menuItems.length&&(t=React.createElement("div",{className:"menuParent"},React.createElement(MaterialUI.MenuList,null,this.state.itemMenu.menuItems.map(function(t,n){return React.createElement(MaterialUI.Tooltip,{key:"itemMenu"+n,TransitionComponent:MaterialUI.Fade,TransitionProps:{timeout:0},title:t.tooltip},React.createElement("div",null,React.createElement(MaterialUI.MenuItem,{disabled:t.disabled,onClick:function(n){return e.clickItemMenuItem(t)}},t.label)))})),React.createElement("div",{className:"empty",onMouseEnter:function(t){return e.onMouseLeaveItem(t)}}))),React.createElement("div",{className:this.props.classes.gameItems},this.state.userItems.map(function(t){return e.renderUserItem(t)}),React.createElement(MaterialUI.Popover,{className:this.props.classes.itemMenu,anchorEl:this.state.itemMenu&&this.state.itemMenu.anchorEl,keepMounted:!0,open:!!this.state.itemMenu,onClose:this.closeItemMenu,getContentAnchorEl:null,TransitionComponent:MaterialUI.Fade,transitionDuration:20,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClick:this.closeItemMenu},React.createElement("div",{className:"paperBody",onMouseLeave:function(t){return e.onMouseLeaveItem(t)}},React.createElement(MaterialUI.Tooltip,{TransitionComponent:MaterialUI.Fade,TransitionProps:{timeout:0},placement:"right-start",title:this.state.itemMenu?this.getItemTooltip(this.state.itemMenu.gameItem,this.state.itemMenu.userItem):""},React.createElement("div",{className:"btnMain",style:this.buttonMainStyles(),onClick:this.onItemButtonMain})),t)))}return React.createElement("div",{className:this.props.classes.gameItems,style:{padding:"10px 20px"}},React.createElement(MaterialUI.CircularProgress,{color:"primary"}))},n.prototype.render=function(){return React.createElement("div",{className:this.props.classes.root},this.renderGameItems())},n}(React.Component),t("Backpack",p),d=function(e){return{root:{display:"flex",flexDirection:"column",overflow:"hidden",maxWidth:860},gameItems:{display:"flex",flexWrap:"wrap",alignItems:"flex-start",overflow:"auto",padding:"5px 10px",margin:"5px 0",minHeight:5,"&.empty":{marginBottom:10,color:"#666",placeContent:"center"}},gameItem:{display:"flex",flexDirection:"column",padding:3,border:"2px solid #666",borderRadius:4,margin:4,cursor:"pointer","& img.itemIcon":{width:64},"&:hover, &.focused":{transform:"scale(1.04)",boxShadow:"0 2px 5px rgba(0,0,0,0.3)",transition:"transform 0.1s linear"},"& .imgHolder":{display:"flex",placeContent:"center",position:"relative",minHeight:32},"& .imgHolder .owned":{position:"absolute",bottom:0,right:0,background:"rgba(0,0,0,0.6)",color:"#FFF",display:"flex",alignItems:"center",placeContent:"flex-end",padding:"0 3px 0 12px",borderTopLeftRadius:20,minHeight:16,fontSize:12,fontVariant:"small-caps"},"& .imgHolder .overlay":{position:"absolute",left:0,top:0,color:"#FFF",display:"flex",alignItems:"flex-start",fontSize:12,width:"100%",height:"100%"}},multiline:{whiteSpace:"pre"},itemMenu:{"& .MuiPaper-root":{display:"flex",alignItems:"flex-start",background:"none",boxShadow:"none",marginLeft:-2,marginTop:-2},"& .MuiList-root":{padding:0,background:"rgba(24,24,24,0.8)",boxShadow:"0 5px 10px rgba(0,0,0,0.2)",borderRadius:3},"& .MuiMenuItem-root":{color:"#ccc",minHeight:32,lineHeight:"1em"},"& .MuiMenuItem-root:hover":{color:"#eee",textShadow:"0 1px 2px black",background:"#3a3a3a",borderRadius:3},"& .paperBody":{display:"flex",flexDirection:"column",alignItems:"flex-start",pointerEvents:"none"},"& .menuParent":{minWidth:80,display:"flex",flexDirection:"column",marginTop:-2,pointerEvents:"all","& .empty":{flex:1}},"& .icon":{marginRight:3},"& .btnMain":{cursor:"pointer",marginRight:1,borderRadius:4,background:"rgba(128,255,255,0.2)",border:"2px solid black",boxSizing:"border-box",pointerEvents:"all"},"& .btnMain:hover":{background:"rgba(168,255,255,0.2)"}}}}}}}),System.register("Server/components/TransactionHistoryDialog",["./../itemStores/ItemStoreManager","./../index","./../utils/filters"],function(t,n){"use strict";function g(t){return e.Base.getAppResourceFileUrl(t)}function y(t,n){var r=MaterialUI.withStyles(d)(p);return t=t||{},t.itemStoreManager||(t.itemStoreManager=new s.DefaultItemStoreManager),n=Object.assign({contentRenderer:function(e){return React.createElement(r,i({dialog:e},t))},title:o("glt.transactions.title"),actionRenderer:function(){return null},titleCloseButton:!0,hideCancelButton:!0},n||{}),e.ReactMaterial.dialogs.openConfirmDialog(n,{paper:{overflow:"hidden","& .dialog-title-root h2":{placeContent:"center"}}})}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},s,o,u,a,f,l,c,h,p,d,v=n&&n.id,m=n&&n.id;return t("showTransactionHistory",y),{setters:[function(e){s=e},function(e){u=e},function(e){l=e}],execute:function(){o=e.Base.translation.translate,a=e.GLT.commands.transactionService,f=e.GLT.commands.types.TransactionCategory,c=e.Base.utils.IntUtil,h=30,p=function(t){function n(e,n){var r=t.call(this,e,n)||this;r.today=new Date(u.client.estimatedServerTimestamp),r.onBtnLoadMore=function(){r.startSearch(!1)},r.onBtnSearch=function(){r.startSearch(!0)},r.onSearchTimeChange=function(e){var t=r.state.search;t.time=e.target.value,r.setState({search:t})},r.onSearchDirectionChange=function(e){var t=r.state.search;t.direction=e.target.value,r.setState({search:t})};var i=r.today.getFullYear()+"-"+(r.today.getMonth()+1)+"-"+r.today.getDate();return r.state={search:{time:i,direction:"backward"},hasMore:!1,transactions:[]},r}return r(n,t),n.prototype.componentDidMount=function(){this.startSearch(!0)},n.prototype.startSearch=function(t){var n=this,r=t?[]:this.state.transactions;this.setState({loading:!0,transactions:r});var i=this.state.search;a.listTransactions(new Date(Date.parse(i.time+" 23:59:59")),[f.BUY_ITEM],i.direction=="backward",r.length,h,function(e){n.setState({loading:!1,transactions:e,hasMore:e.length>=h})},function(t){n.setState({loading:!1}),e.GLT.components.showAlert(o("glt.error"),t,o("glt.close"))}).submit()},n.prototype.renderTransCategory=function(e,t,n){var r=e[t];return React.createElement(MaterialUI.Typography,{key:t,className:"trans "+(r>0?"deposit":"withdraw")},React.createElement("img",{src:g("Server."+n)}),r>0?"+":"-",c.formatAddComma(Math.abs(r)))},n.prototype.renderRow=function(e,t){var n=[];return e.gameDollar&&n.push(this.renderTransCategory(e,"gameDollar","gameDollar")),e.gameletDollar&&n.push(this.renderTransCategory(e,"gameletDollar","gltDollar")),e.gameletPoint&&n.push(this.renderTransCategory(e,"gameletPoint","gltPoint")),React.createElement(MaterialUI.TableRow,{key:"trans"+t},React.createElement(MaterialUI.TableCell,{className:"timestamp"},React.createElement(MaterialUI.Tooltip,{title:l.timeToString(e.time)},React.createElement(MaterialUI.Typography,null,l.dateToString(e.time)))),React.createElement(MaterialUI.TableCell,{className:"category"},n),React.createElement(MaterialUI.TableCell,{className:"gameItem"},e.gameItem?e.gameItem.name:""),React.createElement(MaterialUI.TableCell,{className:"itemCount"},e.gameItem?"x "+e.gameItemCount:""))},n.prototype.render=function(){var e=this,t=this.props.classes;return React.createElement("div",null,React.createElement("div",{className:t.searchInputs},React.createElement(MaterialUI.TextField,{label:o("glt.gmTools.labelSearchTime"),type:"date",value:this.state.search.time,onChange:this.onSearchTimeChange,variant:"outlined",InputLabelProps:{shrink:!0}}),React.createElement(MaterialUI.Select,{value:this.state.search.direction,onChange:this.onSearchDirectionChange,variant:"outlined"},React.createElement(MaterialUI.MenuItem,{className:t.menuItem,value:"backward"},o("glt.gmTools.labelSearchBackward")),React.createElement(MaterialUI.MenuItem,{className:t.menuItem,value:"forward"},o("glt.gmTools.labelSearchForward"))),React.createElement(MaterialUI.IconButton,{onClick:this.onBtnSearch},React.createElement(MaterialUI.Icon,null,"search"))),React.createElement("div",{className:this.props.classes.searchResult},React.createElement(MaterialUI.Table,null,React.createElement(MaterialUI.TableHead,null,React.createElement(MaterialUI.TableRow,null,React.createElement(MaterialUI.TableCell,{className:"timestamp"},o("glt.gmTools.table.time")),React.createElement(MaterialUI.TableCell,{className:"category"},o("glt.transactions.table.category")),React.createElement(MaterialUI.TableCell,{className:"gameItem"},o("glt.transactions.table.gameItem")),React.createElement(MaterialUI.TableCell,{className:"itemCount"},o("glt.transactions.table.itemCount")))),React.createElement(MaterialUI.TableBody,null,this.state.transactions.map(function(t,n){return e.renderRow(t,n)}))),React.createElement("div",{className:"searchBrief"},!this.state.loading&&React.createElement("div",null,o("glt.gmTools.searchedCount",{count:this.state.transactions.length})),this.state.loading?React.createElement(MaterialUI.CircularProgress,{size:36,thickness:5}):this.state.hasMore&&React.createElement(MaterialUI.Button,{onClick:this.onBtnLoadMore},"MORE"))))},n}(React.Component),t("TransactionHistoryDialog",p),d={root:{},searchInputs:{display:"flex",alignItems:"center",margin:"15px 15px 0","& > *":{marginRight:10}},searchResult:{margin:"0 15px 15px","& .MuiTableBody-root .MuiTableCell-root":{padding:"3px 8px"},"& .MuiTableBody-root .MuiTableRow-root:hover":{background:"#eee"},"& .timestamp":{textAlign:"left"},"& .category":{textAlign:"center","& img":{height:18}},"& .gameItem":{textAlign:"center"},"& .itemCount":{textAlign:"left"},"& .searchBrief":{display:"flex",alignItems:"center",margin:15},"& .trans":{display:"flex",alignItems:"center",minWidth:100,"&.deposit":{placeContent:"flex-start",color:"green"},"&.withdraw":{placeContent:"flex-end",color:"red"}}}}}}}),System.register("Server/utils/filters",[],function(e,t){"use strict";function i(e){var t=e.toString();while(t.length<2)t="0"+t;return t}function s(e){return o(e)+" "+i(e.getHours())+":"+i(e.getMinutes())+":"+i(e.getSeconds())}function o(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}var n=t&&t.id,r=t&&t.id;return e("timeToString",s),e("dateToString",o),{setters:[],execute:function(){}}}),System.register("Server/components/gmtools/ClientUserList",["./../../index"],function(t,n){"use strict";function f(e){var t=e/6e4;if(t<2)return i("glt.time2.aMinute");if(t<100)return i("glt.time2.minutes",{minutes:Math.round(t)});var n=t/60;if(n<36)return i("glt.time2.hours",{hours:Math.round(n)});var r=n/24;if(r<720)return i("glt.time2.days",{days:Math.round(r)});var s=r/365.24;return i("glt.time2.years",{days:Math.round(s)})}function l(t){return new Promise(function(n){e.ReactMaterial.dialogs.openInputDialog({value:"3",valueType:"number",confirmLabel:i("glt.confirm"),cancelLabel:i("glt.cancel"),title:t,inputLabel:i("glt.gmTools.labelDays"),onConfirm:function(e){var t=parseInt(e);t>0&&n(t)},onClose:function(){n(0)}})})}function c(t){return l(t).then(function(n){return n?new Promise(function(r){e.ReactMaterial.dialogs.openInputDialog({value:"",valueType:"text",confirmLabel:i("glt.confirm"),cancelLabel:i("glt.cancel"),title:t+" = "+n,inputLabel:"* "+i("glt.gmTools.labelNote"),fullWidth:!0,onConfirm:function(e){e&&r({days:n,note:e})},onClose:function(){r(null)}})}):null})}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[function(e){s=e}],execute:function(){i=e.Base.translation.translate,o=function(t){function n(e){var n=t.call(this,e)||this;return n.state={updateRequest:0},n}return r(n,t),n.prototype.onBtnSuspend=function(t){var n=this;c(i("glt.gmTools.titleSuspendDays")).then(function(r){r&&(e.GLT.components.showLoading(),e.GLT.commands.gmService.suspendUser(t,r.days,r.note,function(){e.GLT.components.hideLoading(),n.setState({updateRequest:n.state.updateRequest+1})},function(t){e.GLT.components.hideLoading(),e.GLT.components.showAlert(i("glt.error"),t,i("glt.close"))}).submit())})},n.prototype.onBtnUnsuspend=function(t){var n=this;c(i("glt.gmTools.titleUnsuspendDays")).then(function(r){r&&(e.GLT.components.showLoading(),e.GLT.commands.gmService.unsuspendUser(t,r.days,r.note,function(){e.GLT.components.hideLoading(),n.setState({updateRequest:n.state.updateRequest+1})},function(t){e.GLT.components.hideLoading(),e.GLT.components.showAlert(i("glt.error"),t,i("glt.close"))}).submit())})},n.prototype.renderUserRow=function(t){var n=this,r="";return t.suspended&&(r=f(t.suspendTime.getTime()-s.client.estimatedServerTimestamp)),React.createElement(MaterialUI.TableRow,{key:t.username},React.createElement(MaterialUI.TableCell,null,React.createElement("a",{className:"usernameIcon",href:e.GLT.getUserUrl(t),target:"_blank"},React.createElement("img",{src:t.iconUrl}),t.username)),React.createElement(MaterialUI.TableCell,null,t.nickname),React.createElement(MaterialUI.TableCell,{className:"suspendDays"},r),React.createElement(MaterialUI.TableCell,{className:"actions"},React.createElement(MaterialUI.IconButton,{onClick:function(){return n.onBtnUnsuspend(t)},disabled:!t.suspended},React.createElement(MaterialUI.Icon,null,"power")),React.createElement(MaterialUI.IconButton,{onClick:function(){return n.onBtnSuspend(t)},className:"btnSuspend"},React.createElement(MaterialUI.Icon,null,"power_off")),this.props.onBtnMore&&React.createElement(MaterialUI.IconButton,{onClick:function(e){return n.props.onBtnMore(t,e)}},React.createElement(MaterialUI.Icon,null,"more_vert"))))},n.prototype.render=function(){var e=this;return React.createElement("div",{className:this.props.classes.searchResult},React.createElement(MaterialUI.Table,null,React.createElement(MaterialUI.TableHead,null,React.createElement(MaterialUI.TableRow,null,React.createElement(MaterialUI.TableCell,{className:"headUsername"},i("glt.gmTools.table.username")),React.createElement(MaterialUI.TableCell,null,i("glt.gmTools.table.nickname")),React.createElement(MaterialUI.TableCell,{className:"suspendDays"},i("glt.gmTools.table.suspended")),React.createElement(MaterialUI.TableCell,null))),React.createElement(MaterialUI.TableBody,null,this.props.userList.map(function(t){return e.renderUserRow(t)}))))},n}(React.Component),t("ClientUserList",o)}}}),System.register("Server/components/gmtools/ListUsersWithSameIP",["./ClientUserList"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[function(e){s=e}],execute:function(){i=e.Base.translation.translate,o=function(t){function n(n,r){var s=t.call(this,n,r)||this;return s.onUserList=function(e){s.setState({loading:!1,userList:e})},s.onListError=function(t){s.setState({loading:!1}),e.GLT.components.showAlert(i("glt.error"),t,i("glt.close"))},s.state={userList:[]},s}return r(n,t),n.prototype.componentDidMount=function(){this.setState({loading:!0,userList:[]}),this.props.refRecord?e.GLT.commands.gmService.listUsersWithSameIP(this.props.refRecord,0,100,this.onUserList,this.onListError).submit():e.GLT.commands.gmService.listUsersWithSameIPByUser(this.props.refUser.username,0,100,this.onUserList,this.onListError).submit()},n.prototype.render=function(){return React.createElement("div",null,this.state.loading?React.createElement(MaterialUI.CircularProgress,{size:36,thickness:5}):React.createElement(s.ClientUserList,{userList:this.state.userList,classes:this.props.classes,onBtnMore:this.props.onBtnMore}))},n}(React.Component),t("ListUsersWithSameIP",o)}}}),System.register("Server/components/gmtools/ListIpRecords",[],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u=n&&n.id,a=n&&n.id;return{setters:[],execute:function(){i=e.Base.translation.translate,s=e.Base.utils.IntUtil,o=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.state={recordList:[]},r}return r(n,t),n.prototype.componentDidMount=function(){var t=this;this.setState({recordList:[],loading:!0}),e.GLT.commands.gmService.listUserIPRecords(this.props.user.username,0,100,function(e){t.setState({loading:!1,recordList:e})},function(n){t.setState({loading:!1}),e.GLT.components.showAlert(i("glt.error"),n,i("glt.close"))}).submit()},n.prototype.renderRecordRow=function(e,t){var n=this;return React.createElement(MaterialUI.TableRow,{key:"record"+t},React.createElement(MaterialUI.TableCell,{className:"timestamp"},e.startTime.toLocaleDateString()),React.createElement(MaterialUI.TableCell,{className:"timestamp"},e.endTime.toLocaleDateString()),React.createElement(MaterialUI.TableCell,{className:"logins"},s.formatAddComma(e.records)),React.createElement(MaterialUI.TableCell,{className:"ipCode"},e.v4c),React.createElement(MaterialUI.TableCell,{className:"ipCode"},e.v6c),React.createElement(MaterialUI.TableCell,{className:"actions"},this.props.onBtnMore&&React.createElement(MaterialUI.IconButton,{onClick:function(t){return n.props.onBtnMore(n.props.user,e,t)}},React.createElement(MaterialUI.Icon,null,"more_vert"))))},n.prototype.renderTable=function(){var e=this;return React.createElement(MaterialUI.Table,null,React.createElement(MaterialUI.TableHead,null,React.createElement(MaterialUI.TableRow,null,React.createElement(MaterialUI.TableCell,{className:"timestamp"},i("glt.gmTools.table.start")),React.createElement(MaterialUI.TableCell,{className:"timestamp"},i("glt.gmTools.table.end")),React.createElement(MaterialUI.TableCell,{className:"logins"},i("glt.gmTools.table.records")),React.createElement(MaterialUI.TableCell,null,i("glt.gmTools.table.v4c")),React.createElement(MaterialUI.TableCell,null,i("glt.gmTools.table.v6c")),React.createElement(MaterialUI.TableCell,null))),React.createElement(MaterialUI.TableBody,null,this.state.recordList.map(function(t,n){return e.renderRecordRow(t,n)})))},n.prototype.render=function(){return React.createElement("div",{className:this.props.classes.searchResult},this.state.loading?React.createElement(MaterialUI.CircularProgress,{size:36,thickness:5}):this.renderTable())},n}(React.Component),t("ListIpRecords",o)}}}),System.register("Server/messages/offlines/OfflineServer",["./../../index","./GameroomOfflineService","./PlayerOfflineService","./ClientOfflineService"],function(t,n){"use strict";var r,i,s,o,u,a,f=n&&n.id,l=n&&n.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e}],execute:function(){u=function(){function t(){this.services={},this.services.client=new o.ClientOfflineService,this.services.player=new s.PlayerOfflineService,this.services.gameroom=new i.GameroomOfflineService}return t.prototype.submitCommand=function(t,n,i){var s=this;return e.Base.wait(r.msg.myPlayer.networkDelay).then(function(){var e=s.services[t],r=e[n];return r.apply(e,i)})},t}(),t("offlineServer",a=new u)}}}),System.register("Server/itemStores/ItemMenuItem",["./../components/ItemCheckout"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s,o=t&&t.id,u=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(){function e(e,t,n,r){r===void 0&&(r=""),this.label=e,this.disabled=t,this.isDefault=n,this.tooltip=r}return e.prototype.execute=function(e){},e}(),e("ItemMenuItem",i),s=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.execute=function(e){r.showItemCheckout(e.gameItem,{userItem:e.userItem,itemStoreManager:e.itemStoreManager})},t}(i),e("ItemMenuRefill",s)}}}),System.register("Server/utils/PayMaker",[],function(e,t){"use strict";var n,r=t&&t.id,i=t&&t.id;return{setters:[],execute:function(){n=function(){function e(e){var t=this;this.userScores=e,this._toDollarMap={},e.forEach(function(e){t._toDollarMap[e.scoreMode.key]=e.scoreMode.toDollarRate})}return e.prototype.makePay=function(e){var t=this;this.userScores.sort(function(e,t){return t.scoreMode.toDollarRate-e.scoreMode.toDollarRate});var n=this._makePay(e,this.userScores,!1);return this._getPaysTotal(n)<e?null:(this.userScores.forEach(function(e,r){return t.saveLargerCurrency(n,e,t.userScores.slice(r+1))}),n)},e.prototype.saveLargerCurrency=function(e,t,n){if(!n.length)return;var r=e[t.scoreMode.key];if(!r)return;n.forEach(function(n){var i=t.scoreMode.toDollarRate/n.scoreMode.toDollarRate;if(i%1===0){var s=n.score-(e[n.scoreMode.key]||0),o=Math.round(Math.min(r,Math.floor(s/i)));o>0&&(r-=o,e[t.scoreMode.key]=r,e[n.scoreMode.key]+=Math.round(o*i))}})},e.prototype._makePay=function(e,t,n){if(t.length){var r=t[0],i=Math.floor(e/r.scoreMode.toDollarRate);n||(i=Math.min(r.score,i));var s=this._makePay(e-i*r.scoreMode.toDollarRate,t.slice(1),n);s[r.scoreMode.key]=i;var o=this._getPaysTotal(s);if(!n&&o<e){i++;if(i>r.score)return{};s={},s[r.scoreMode.key]=i;var u=this._makePay(i*r.scoreMode.toDollarRate-e,t.slice(1),!0);for(var a in u)s[a]=-u[a]}return s}return{}},e.prototype._getPaysTotal=function(e){var t=0;for(var n in e)t+=e[n]*this._toDollarMap[n];return t},e}(),e("PayMaker",n)}}}),System.register("Server/messages/offlines/GameroomOfflineService",["./../vo/GamezoneStatistics","./../../index","./../vo/Gameroom","./../vo/Gamezone","./BaseOfflineService","./../vo/Player"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l,c,h,p=n&&n.id,d=n&&n.id;return{setters:[function(e){i=e},function(e){u=e},function(e){a=e},function(e){f=e},function(e){l=e},function(e){c=e}],execute:function(){s=e.Base.utils.ObjectUtil,o=e.Base.utils.systemRandomGenerator,h=function(e){function t(){var t=e!==null&&e.apply(this,arguments)||this;return t._zones={},t}return r(t,e),t.prototype._getZoneData=function(e){var t=this._zones[e];return t||(this._zones[e]=t={playersStates:new f.GamezonePlayersStates({}),status:new f.GamezoneStatus({})}),t},t.prototype.createRoom=function(e,t,n,r,i,u,f){if(this.myRoomFull)throw new Error("Create room failed: already in a gameroom");var l=new a.GameroomFull({playerStates:{}});return l.brainer=this.myPlayer.code,l.room=new a.Gameroom({code:"~offline_"+o.generateRandomString(10,!0),name:t,zoneCode:e,maxPlayers:r,allowGuest:f}),l.room.creator=new c.Player(this._cloneVo(this.myPlayer)),l.status=new a.GameroomStatus({state:i,players:1,stateJson:s.deepCloneObject(u)}),l.valueObject},t.prototype.joinRoom=function(e,t){throw this.myRoomFull?new Error("Join room failed: already in a gameroom"):new Error("Join room failed: the gameroom does not exist.")},t.prototype.createOrJoinRoom=function(e,t,n,r,i,s,o){if(this.myRoomFull)throw new Error("Create or join room failed: already in a gameroom");return this.createRoom(e,t,r,n,i,s,o)},t.prototype.leaveRoom=function(e){if(this.myRoomCode==e)return e;throw new Error("Leave room failed: the gameroom does not exist.")},t.prototype.queryRoom=function(e){if(this.myRoomCode!=e)throw new Error("The gameroom does not exist");return this._cloneVo(u.msg.gameroomService.myRoomFull)},t.prototype.listRooms=function(e){return this.myRoomZoneCode!=e?[]:[this._cloneVo(this.myRoomFull)]},t.prototype.listPlayersInRoom=function(){if(this.myRoomFull)return[this._cloneVo(this.myPlayer)];throw new Error("Not in a gameroom")},t.prototype.listPlayersOfRoom=function(e){if(this.myRoomCode==e)return[this._cloneVo(this.myPlayer)];throw new Error("The gameroom does not exist")},t.prototype.setRoomState=function(e,t){var n=this.myRoomFull;if(n){var r=new a.GameroomStatus(this._cloneVo(n.status));return r.valueObject.state=e,s.safeAssign(r.stateJson,t),u.msg.onGltmsg("roomStatusChanged",[n.room.zoneCode,n.room.code,r.valueObject],{internal:!0}),r.valueObject}throw new Error("Not in a gameroom")},t.prototype.setRoomStateJson=function(e){var t=this.myRoomFull;if(t){var n=new a.GameroomStatus(this._cloneVo(t.status));return s.safeAssign(n.stateJson,e),u.msg.onGltmsg("roomStatusChanged",[t.room.zoneCode,t.room.code,n.valueObject],{internal:!0}),n.valueObject}throw new Error("Not in a gameroom")},t.prototype.setRoomPlayerState=function(e,t){var n=this.myRoomFull;return n?(u.msg.onGltmsg("roomPlayerStateChanged",[n.room.code,u.msg.myPlayer.code,e,t],{internal:!0}),!0):!1},t.prototype.setRoomPlayerSynced=function(e,t){var n=this.myRoomFull;return n?(u.msg.onGltmsg("roomPlayerSyncedChanged",[n.room.code,u.msg.myPlayer.code,e,u.msg.myPlayer.code],{internal:!0}),!0):!1},t.prototype.updateRoomBrainer=function(){if(this.myRoomFull)return this.myPlayer.code;throw new Error("Not in a gameroom")},t.prototype.getZoneStatistics=function(e){var t=new i.GamezoneStatistics({code:e,players:this.myRoomZoneCode==e?1:0,rooms:{open:{count:0,players:0},locked:{count:0,players:0},over:{count:0,players:0},all:{count:0,players:0}}});if(this.myRoomZoneCode==e){t.allRoomStateStatistics.count=1,t.allRoomStateStatistics.players=1;var n=a.GameroomState.getByValue(this.myRoomFull.status.state.value);t.getRoomStateStatistics(n).count=1,t.getRoomStateStatistics(n).players=1}return t.valueObject},t.prototype.listenToZone=function(e){var t=new f.Gamezone({code:e}),n=new a.GameroomStatus({state:a.GameroomState.OPEN,players:1,stateJson:{}}),r=new f.GamezoneAndStatus({zone:t.valueObject,status:n.valueObject});return r.valueObject},t.prototype.stopListenToZone=function(e){return!0},t.prototype.getZonePlayersStates=function(e){return this._getZoneData(e).playersStates.valueObject},t.prototype.setZonePlayerState=function(e,t,n){var r=this.myPlayer,i=this._getZoneData(e).playersStates;return i.setPlayerState(r.code,t,n),u.msg.onGltmsg("zonePlayerStateChanged",[e,u.msg.myPlayer.code,t,n,u.msg.myPlayer.code],{internal:!0}),!0},t.prototype.setZonePlayerStates=function(e,t){var n=this.myPlayer,r=this._getZoneData(e).playersStates;for(var i in t)r.setPlayerState(n.code,i,t[i]);return u.msg.onGltmsg("zonePlayerStatesChanged",[e,u.msg.myPlayer.code,t,u.msg.myPlayer.code],{internal:!0}),!0},t.prototype.setZonePlayerSynced=function(e,t,n){var r=this.myPlayer;return u.msg.onGltmsg("zonePlayerSyncedChanged",[e,r.code,t,r.code],{internal:!0}),r.code},t.prototype.getZonePlayerStates=function(e,t){var n=this._getZoneData(e).playersStates,r=n.getPlayerStates(t);return r?r.valueObject:null},t.prototype.setZoneStates=function(e,t){var n=this._getZoneData(e).status;for(var r in t)n.stateJson[r]=t[r];return u.msg.onGltmsg("zoneStatusChanged",[e,n.valueObject],{internal:!0}),n},t.prototype.broadcastToRoom=function(){return 1},t.prototype.broadcastToRoom2=function(){return{p:1,t:Date.now()}},t.prototype.broadcastInRoom=function(){return 1},t.prototype.broadcastInRoom2=function(){return{p:1,t:Date.now()}},t.prototype.sendDataToRoommate=function(){},t.prototype.sendDataToRoomDecisionmaker=function(){},t.prototype.broadcastToZone=function(){return 1},t.prototype.broadcastToZone2=function(){return{p:1,t:Date.now()}},t}(l.BaseOfflineService),t("GameroomOfflineService",h)}}}),System.register("Server/messages/offlines/PlayerOfflineService",["./BaseOfflineService"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s=t&&t.id,o=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.searchPlayers=function(e,t){return this.myPlayer.user.nickname.includes(e)||this.myPlayer.user.username.includes(e)?[this._cloneVo(this.myPlayer)]:[]},t.prototype.sendDataToPlayer=function(e,t){return 0},t.prototype.updateNetworkDelay=function(e){return this.myPlayer.networkDelay=e},t.prototype.gltReport=function(){return 0},t}(r.BaseOfflineService),e("PlayerOfflineService",i)}}}),System.register("Server/messages/offlines/ClientOfflineService",["./BaseOfflineService"],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i,s=t&&t.id,o=t&&t.id;return{setters:[function(e){r=e}],execute:function(){i=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getPlayersCount=function(){return 1},t}(r.BaseOfflineService),e("ClientOfflineService",i)}}}),System.register("Server/messages/offlines/BaseOfflineService",["./../../index"],function(t,n){"use strict";var r,i,s,o=n&&n.id,u=n&&n.id;return{setters:[function(e){r=e}],execute:function(){i=e.Base.utils.ObjectUtil,s=function(){function e(){}return Object.defineProperty(e.prototype,"myPlayer",{get:function(){return r.msg.myPlayer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"myRoomFull",{get:function(){return r.msg.gameroomService.myRoomFull},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"myRoomCode",{get:function(){return this.myRoomFull&&this.myRoomFull.room.code},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"myRoomZoneCode",{get:function(){return this.myRoomFull&&this.myRoomFull.room.zoneCode},enumerable:!0,configurable:!0}),e.prototype._cloneVo=function(e){return i.deepCloneObject(e.valueObject)},e.prototype._send=function(e,t,n){var i={respond:n,internal:!0};r.msg.onGltmsg(e,t,i)},e}(),t("BaseOfflineService",s)}}}),function(){CgLibs.bootLib("Server/index",["Server/index","Server/events/actions/ShowItemStore.action","Server/translations/index","Server/events/actions/ShowHighscoresBoard.action","Server/events/actions/ShowBackpack.action","Server/events/actions/ShowBadgeList.action","Server/events/actions/AwardBadge.action","Server/events/actions/SubmitScore.action","Server/events/actions/ShowAuthPanel.action","Server/events/actions/HideAuthPanel.action","Server/events/triggers/PlayerJoined.trigger","Server/events/triggers/PlayerLeft.trigger","Server/events/eventStarter","Server/messages/vo/Gameroom","Server/messages/vo/Player","Server/events/definitions/ServerConfig.definition","Server/messages/filters/PropFilter","Server/messages/managers/GameroomManager","Server/messages/MsgServer","Server/events/actions/AwardStoreItem.action","Server/messages/managers/GamezoneManager","Server/messages/managers/WatchroomManager","Server/utils/SpeederDetector","Server/events/actions/SetUserState.action","Server/events/actions/GetUserState.action","Server/components/BroadcastAnnouncement","Server/components/HighScoreBoard","Server/components/SubmitScoreDialog","Server/components/AuthPanel","Server/components/gmtools/GMToolsDialog","Server/messages/events/GameroomManagerEvent","Server/utils/DialogQueue","Server/events/SocketClient","Server/translations/trans.zh","Server/messages/events/MsgServerEvent","Server/translations/trans.en","Server/messages/managers/AbstractRoomManager","Server/messages/vo/Gamezone","Server/messages/events/GamezoneManagerEvent","Server/messages/services/PlayerService","Server/messages/services/GameroomService","Server/messages/services/ClientService","Server/utils/CGEUserStateManager","Server/events/definitions/ItemWeight.definition","Server/components/LocaleMenu","Server/components/BadgeListDialog","Server/components/gmtools/ManageHistory","Server/components/gmtools/ClientUserManage","Server/components/ItemStoreDialog","Server/components/BadgeDialog","Server/components/gmtools/ManageUserData","Server/components/UserItemDialog","Server/messages/vo/GamezoneStatistics","Server/messages/services/BaseService","Server/itemStores/ItemStoreManager","Server/components/ItemCheckout","Server/components/BackpackDialog","Server/components/TransactionHistoryDialog","Server/utils/filters","Server/components/gmtools/ClientUserList","Server/components/gmtools/ListUsersWithSameIP","Server/components/gmtools/ListIpRecords","Server/messages/offlines/OfflineServer","Server/itemStores/ItemMenuItem","Server/utils/PayMaker","Server/messages/offlines/GameroomOfflineService","Server/messages/offlines/PlayerOfflineService","Server/messages/offlines/ClientOfflineService","Server/messages/offlines/BaseOfflineService"])}()}};CgLibs.bootModule('Server')},function(){CgLibs.modules.ripples1={boot:function(e){System.register("ripples1/app",["./Constant","./index","./trans.en","./trans.zh"],function(t,n){"use strict";var r,i,s,o,u,a,f,l,c=n&&n.id,h=n&&n.id;return{setters:[function(e){r=e},function(e){i=e},function(e){s=e},function(e){o=e}],execute:function(){u=e.Base.resourceManager,a=e.Base.pixi,f=function(){function t(){var t=this;e.Base.showCGPreloader(),u.load().then(function(){e.Base.hideCGPreloader(),t.init(),i.showIndexPage()})}return t.prototype.init=function(){var t=e.Base.locales.getPreferedLanguage([e.Base.locales.LANG.EN,e.Base.locales.LANG.ZH]);e.Base.translation.setLanguage(t),a.initialize(r.Constant.STAGE_SIZE.width,r.Constant.STAGE_SIZE.height),a.renderer.backgroundColor=0},t}(),t("App",f),s.trans_en,o.trans_zh,t("APP",l=new f)}}}),System.register("ripples1/Constant",[],function(t,n){"use strict";var r,i,s,o=n&&n.id,u=n&&n.id;return{setters:[],execute:function(){r=e.Base.geom.Size,i=e.Base.geom.Point,s=function(){function e(){}return e.TOOLBAR_HEIGHT=48,e.PANEL_WIDTH=200,e.STAGE_SIZE=new r(1e3,550),e.FILTER_SIZE=.5,e.WAVE_SCALE=new i(2,10),e}(),t("Constant",s)}}}),System.register("ripples1/trans.en",[],function(t,n){"use strict";var r,i=n&&n.id,s=n&&n.id;return{setters:[],execute:function(){t("trans_en",r=1),e.Base.translation.getTranslation(e.Base.locales.LANG.EN).importJson({appTitle:"Ripple Effect",ripples:{title:"Ripples"},waves:{title:"Waves"},btn:{background:"Background"},label:{waterAlpha:"Opacity",waterHighlight:"Highlight",rainScale:"Rain Scale",waveLength:"Wave Length",waveForce:"Rain Weight",amplitude:"Amplitutde",damping:"Damping",waterLevel:"Water Level",surfaceThickness:"Surface Thickness"},waterConfig:"Water",rippleConfig:"Ripple",envConfig:"Environment"})}}}),System.register("ripples1/trans.zh",[],function(t,n){"use strict";var r,i=n&&n.id,s=n&&n.id;return{setters:[],execute:function(){t("trans_zh",r=1),e.Base.translation.getTranslation(e.Base.locales.LANG.ZH).importJson({appTitle:"\u6f23\u6f2a\u6548\u61c9",ripples:{title:"\u6ce2\u5149\u6f23\u6f2a"},waves:{title:"\u6c34\u6ce2\u5074\u5beb"},btn:{background:"\u4e0a\u50b3\u80cc\u666f"},label:{waterAlpha:"\u6c34\u7684\u900f\u660e\u5ea6",waterHighlight:"\u6c34\u7684\u53cd\u5149\u5ea6",rainScale:"\u96e8\u52e2",waveLength:"\u6f23\u6f2a\u6ce2\u9577",waveForce:"\u96e8\u6ef4\u91cd\u91cf",amplitude:"\u6f23\u6f2a\u632f\u5e45",damping:"\u6ce2\u7684\u50b3\u64ad\u529b",waterLevel:"\u6c34\u9762\u9ad8\u5ea6",surfaceThickness:"\u6c34\u9762\u539a\u5ea6"},waterConfig:"\u6c34\u9762\u8a2d\u5b9a",rippleConfig:"\u6f23\u6f2a\u8a2d\u5b9a",envConfig:"\u74b0\u5883\u8a2d\u5b9a"})}}}),System.register("ripples1/index",["./Constant","./games/Toolbar","./ripplesGame/RipplesGame","./wavesGame/WavesGame"],function(t,n){"use strict";function p(){return{root:{display:"flex",flexDirection:"column",height:"100%",padding:"8vh 0 0",boxSizing:"border-box","& .title":{textAlign:"center",fontSize:48,fontWeight:"bold",color:"#FFF",padding:15,background:"#0009",fontStyle:"italic",letterSpacing:5},"& .btnList":{width:300,margin:"auto",display:"flex",flexDirection:"column",placeContent:"center",flex:1,paddingBottom:"5vh","& button":{minWidth:150,margin:8,fontSize:18}},"& .footer":{display:"flex",placeContent:"center",alignItems:"center",color:"#333",fontVariant:"small-caps",background:"#FFF9",textDecoration:"none","& img":{margin:"5px 10px"},"&:hover":{background:"#EEE9"}}}}}function d(){l=e.ReactMaterial.renderComponentWithStyle(p(),f),e.Base.system.hideFps()}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l,c=n&&n.id,h=n&&n.id;return t("showIndexPage",d),{setters:[function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e}],execute:function(){a=e.Base.translation.translate,f=function(t){function n(n){var r=t.call(this,n)||this;return r.apps=[{code:"ripples",create:function(){return new o.RipplesGame}},{code:"waves",create:function(){return new u.WavesGame}}],r.state={},e.Base.pixi.updateRendererOptions({padding:{top:0,right:0,left:0,bottom:0}}),r.game=new o.RipplesGame("Ripples.coverbg"),r.game.config.waterColor="#2266ff",r.game.config.waterAlpha=.3,r.game.config.amplitude=80,r}return r(n,t),n.prototype.componentWillUnmount=function(){this.game.dispose()},n.prototype.onBtnApp=function(t){e.React.unmountRootComponent(l),s.showToolboxPage(t.code,t.create()),e.Base.pixi.updateRendererOptions({padding:{top:i.Constant.TOOLBAR_HEIGHT,right:i.Constant.PANEL_WIDTH,left:0,bottom:0}})},n.prototype.renderGameButton=function(e){var t=this;return React.createElement(MaterialUI.Button,{key:e.code,variant:"contained",color:"primary",disabled:!e.create,onClick:function(){return t.onBtnApp(e)}},a(e.code+".title"))},n.prototype.render=function(){var e=this;return React.createElement("div",{className:this.props.classes.root},React.createElement(MaterialUI.Typography,{className:"title"},a("appTitle")),React.createElement("div",{className:"btnList"},this.apps.map(function(t){return e.renderGameButton(t)})),React.createElement("a",{href:"https://github.com/lazy1106",className:"footer"},React.createElement(MaterialUI.Typography,null,"created by"),React.createElement("img",{src:"https://code.gamelet.com/gassets/asset/ripples1/ripples1.logo/291716_github_logo_socialnetwork_social_icon.png"}),React.createElement(MaterialUI.Typography,null,"github.com/lazy1106")))},n}(React.Component),t("Index",f)}}}),System.register("ripples1/ripplesGame/RipplesGame",["../Constant","../games/BaseGame","./Ripples","./RipplesUI"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l,c=n&&n.id,h=n&&n.id;return{setters:[function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e}],execute:function(){a=e.Base.pixi,f=e.Base.geom.Color,l=function(t){function n(n){n===void 0&&(n="Ripples.background_1");var r=t.call(this)||this;return r.waterContainer=new PIXI.Container,r.config={waterColor:"#00FF99",waterAlpha:.2,rainScale:.22,waveLength:10,waveForce:.5,amplitude:50,damping:.99,waterHighlight:1},r.nextRain=.01,r.amplitude=20,e.Base.pixi.stageResolutionPolicy=e.Base.pixis.Pixi.RESOLUTION_POLICY.NO_BORDER,a.root.addChild(r),r.addChild(r.waterContainer),r.loadBackground(n),r.createDisplacement(),r.createWater(),r.setupDisplacement(),e.Base.addDelayFunction(r,r.update,30),e.Base.addDelayFunction(r,r.addDrop,30),r.waterContainer.interactive=!0,r.waterContainer.on("pointerdown",r.onMouseDown,r),r.waterContainer.on("pointerup",r.onMouseUp,r),r}return r(n,t),n.prototype.onMouseDown=function(){this.mouseDown=!0},n.prototype.onMouseUp=function(){this.mouseDown=!1},n.prototype.setConfig=function(e){Object.assign(this.config,e)},n.prototype.setupDisplacement=function(){var e=1;this.waterContainer.filters=[new PIXI.filters.DisplacementFilter(this.displacement.sprite,e)];var t=e*-0.31;this.waterContainer.position.set(t,t)},n.prototype.renderAppUI=function(){return u.renderRipplesUI(this)},n.prototype.removeBackground=function(){var e=this.waterContainer.getChildByName("background");e&&(e.texture.destroy(!0),this.waterContainer.removeChild(e),e.destroy())},n.prototype.setBackground=function(t){var n=new PIXI.Sprite(t);if(n.width==1&&n.height==1){e.Base.addDelayFunction(this,this.setBackground,10,[t]);return}this.setupBackground(n),this.waterContainer.addChildAt(n,0)},n.prototype.loadBackground=function(t){var n=this,r=PIXI.Sprite.from(e.Base.getAppResourceFileUrl(t));r.width<=1?r.texture.baseTexture.once("loaded",function(){n.setupBackground(r)}):this.setupBackground(r),this.waterContainer.addChildAt(r,0)},n.prototype.setupBackground=function(e){var t=e.width/e.height;e.name="background",t>i.Constant.STAGE_SIZE.width/i.Constant.STAGE_SIZE.height?(e.height=i.Constant.STAGE_SIZE.height,e.width=e.height*t):(e.width=i.Constant.STAGE_SIZE.width,e.height=e.width/t),e.position.set((i.Constant.STAGE_SIZE.width-e.width)/2,(i.Constant.STAGE_SIZE.height-e.height)/2)},n.prototype.createDisplacement=function(){var e=i.Constant.STAGE_SIZE.width*i.Constant.FILTER_SIZE,t=i.Constant.STAGE_SIZE.height*i.Constant.FILTER_SIZE;this.ripples=new o.Ripples(e,t);var n=PIXI.BaseTexture.fromBuffer(new Float32Array(e*t*4),e,t);this.displacement={texture:n,sprite:new PIXI.Sprite(new PIXI.Texture(n)),bufferResource:n.resource},this.displacement.sprite.width=i.Constant.STAGE_SIZE.width,this.displacement.sprite.height=i.Constant.STAGE_SIZE.height,this.waterContainer.addChild(this.displacement.sprite)},n.prototype.createWater=function(){var e=i.Constant.STAGE_SIZE.width*i.Constant.FILTER_SIZE,t=i.Constant.STAGE_SIZE.height*i.Constant.FILTER_SIZE,n=PIXI.BaseTexture.fromBuffer(new Float32Array(e*t*4),e,t);this.water={texture:n,sprite:new PIXI.Sprite(new PIXI.Texture(n)),bufferResource:n.resource},this.water.sprite.width=i.Constant.STAGE_SIZE.width,this.water.sprite.height=i.Constant.STAGE_SIZE.height,this.waterContainer.addChild(this.water.sprite)},n.prototype.update=function(){if(this.disposed)return;var t=this.config;e.Base.addDelayFunction(this,this.update,1),this.ripples.update(this.config.damping),this.ripples.updateDisplacementBuffer(this.displacement.bufferResource.data,t.amplitude),this.ripples.updateWaterBuffer(this.water.bufferResource.data,new f(parseInt(t.waterColor.substring(1),16),t.waterAlpha),t.amplitude/50*t.waterHighlight),this.ripples.swapBuffers(),this.displacement.texture.update(),this.water.texture.update()},n.prototype.addDrop=function(){if(this.disposed)return;e.Base.addDelayFunction(this,this.addDrop,30),this.nextRain-=Math.pow(this.config.rainScale,2.5);while(this.nextRain<=0){this.nextRain+=1;var t=Math.random()*this.ripples.width,n=Math.random()*this.ripples.height;this.addRipple(t,n,this.config.waveForce,this.config.waveLength)}if(this.mouseDown){var r=a.mouse.getLocalPosition(this.waterContainer);this.addRipple(r.x*i.Constant.FILTER_SIZE,r.y*i.Constant.FILTER_SIZE,this.config.waveForce*.5,this.config.waveLength)}},n.prototype.addRipple=function(e,t,n,r){if(this.disposed)return;this.ripples.addRipple(e,t,n,r)},n}(s.BaseGame),t("RipplesGame",l)}}}),System.register("ripples1/wavesGame/WavesGame",["../Constant","../games/BaseGame","./WaterDrop","./WavesUI"],function(t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f,l,c,h,p=n&&n.id,d=n&&n.id;return{setters:[function(e){i=e},function(e){s=e},function(e){o=e},function(e){u=e}],execute:function(){a=e.Base.pixi,f=e.Base.resourceManager,l=e.Base.utils.MathUtil,c=e.Base.geom.Point,h=function(t){function n(n){n===void 0&&(n=500);var r=t.call(this)||this;return r.length=n,r.drops=[],r.mouseDown=!1,r.nextHandDrop=0,r.config={waterColor:"#00AAFF",waterAlpha:.2,rainScale:.3,waveLength:15,waveForce:.2,damping:.985,waterLevel:300,surfaceThickness:2},r.nextRain=.01,r.force=new c(0,0),e.Base.pixi.stageResolutionPolicy=e.Base.pixis.Pixi.RESOLUTION_POLICY.NO_BORDER,r.buffers=[new Float32Array(n),new Float32Array(n)],a.root.addChild(r),r.graphics=new PIXI.Graphics,r.addChild(r.graphics),r.waterLevel=r.config.waterLevel,r.createBackground(),f.addAppResource("Ripples.water_drop").load().then(function(){r.update(),e.Base.addDelayFunction(r,r.rainDrop,500),r.interactive=!0,r.on("pointerdown",r.onMouseDown,r),r.on("pointerup",r.onMouseUp,r)}),r}return r(n,t),n.prototype.removeBackground=function(){var e=this.getChildByName("background");e&&(e.texture.destroy(!0),this.removeChild(e),e.destroy())},n.prototype.setBackground=function(t){var n=new PIXI.Sprite(t);if(n.width==1&&n.height==1){e.Base.addDelayFunction(this,this.setBackground,10,[t]);return}this.setupBackground(n),this.addChildAt(n,0)},n.prototype.renderAppUI=function(){return u.renderWavesUI(this)},n.prototype.onMouseDown=function(){this.nextHandDrop=0,this.force.set(0,0),this.mouseDown=!0},n.prototype.onMouseUp=function(){this.mouseDown=!1},n.prototype.createBackground=function(){var t=PIXI.Sprite.from(e.Base.getAppResourceFileUrl("Ripples.platformer_background"));this.setupBackground(t),this.addChildAt(t,0)},n.prototype.setupBackground=function(e){var t=e.width/e.height;e.name="background",t>i.Constant.STAGE_SIZE.width/i.Constant.STAGE_SIZE.height?(e.height=i.Constant.STAGE_SIZE.height,e.width=e.height*t):(e.width=i.Constant.STAGE_SIZE.width,e.height=e.width/t),e.position.set((i.Constant.STAGE_SIZE.width-e.width)/2,(i.Constant.STAGE_SIZE.height-e.height)/2)},n.prototype.setConfig=function(e){Object.assign(this.config,e)},n.prototype.getAltitude=function(e,t){return t>=0&&t<e.length?e[t]:0},n.prototype.setAltitude=function(e,t,n){t>=0&&t<e.length&&(e[t]=n)},n.prototype.addDropWave=function(e,t){this.addRipple(e,.1+t*this.config.waveForce,this.config.waveLength)},n.prototype.addRipple=function(e,t,n){n===void 0&&(n=3),e=Math.round(e/i.Constant.WAVE_SCALE.x);var r=Math.PI*2,s=this.buffers[0];for(var o=-n;o<=n;++o){var u=Math.abs(o)/(n+1);if(u<1){var a=e+o,f=r*u,l=Math.cos(f);f>Math.PI&&(l=(l-1)/2),this.setAltitude(s,a,this.getAltitude(s,a)+l*t)}}},n.prototype.dispose=function(){this.drops.forEach(function(e){return e.stop()}),t.prototype.dispose.call(this)},n.prototype.update=function(){if(this.disposed)return;e.Base.addDelayFunction(this,this.update,30);var t=this.length,n=this.buffers[0],r=this.buffers[1],s=this.config.damping,o=0,u=!this.force.equalsXY(0,0);for(var f=0;f<t;++f){r[f]=this.getAltitude(n,f-1)+this.getAltitude(n,f+1)-r[f],r[f]*=s;if(u){var c=Math.abs(f-this.force.x);if(c<40){var h=c/40;h=(Math.cos(h*Math.PI)+1)/2,r[f]+=h*this.force.y}}o=Math.max(o,r[f])}this.draw(o),this.swapBuffers(),this.force.set(0,0);if(this.mouseDown&&e.Base.time()>this.nextHandDrop){var p=a.mouse.getLocalPosition(this);if(!this.isInWater(p.x,p.y))this.nextHandDrop=e.Base.time()+300,this.addDrop(p.x,p.y);else{this.force.x=p.x/i.Constant.WAVE_SCALE.x;var d=.1/Math.max(.2,this.config.damping-.9);this.config.damping>.9&&(d/=(this.config.damping-.8)/.05),this.force.y=l.numberFollowTarget(this.force.y,Math.max(0,p.y-this.waterLevel)*.02*d,d)}}},n.prototype.draw=function(t){var n=i.Constant.WAVE_SCALE,r=this.buffers[1],s=this.config,o=10,u=parseInt(s.waterColor.substring(1),16);this.waterLevel=l.numberFollowTarget(this.waterLevel,s.waterLevel,.2,1),this.graphics.y=this.waterLevel,t=Math.max(t*n.y,e.Base.pixi.fullscreenRect.bottom-this.graphics.y)+o,this.graphics.clear(),this.graphics.lineStyle(s.surfaceThickness,u,l.numberFollowTarget(s.waterAlpha,1,.5)),this.graphics.beginFill(u,s.waterAlpha),this.graphics.moveTo(-o,0);for(var a=0;a<this.length;++a)this.graphics.lineTo(a*n.x,r[a]*n.y);this.graphics.lineTo(this.length*n.x+o,t),this.graphics.lineTo(this.length*n.x+o,t),this.graphics.lineTo(-o,t),this.graphics.lineTo(-o,0),this.graphics.endFill()},n.prototype.swapBuffers=function(){var e=this.buffers[0];this.buffers[0]=this.buffers[1],this.buffers[1]=e},n.prototype.rainDrop=function(){if(this.disposed)return;this.nextRain-=Math.pow(this.config.rainScale,2.5);while(this.nextRain<0){this.nextRain+=1.5;var t=.05+Math.random()*.9;this.addDrop(t*this.length*i.Constant.WAVE_SCALE.x,10)}e.Base.addDelayFunction(this,this.rainDrop,30)},n.prototype.addDrop=function(e,t){var n=this.drops.find(function(e){return!e.sprite.parent});n||(n=new o.WaterDrop(this),this.drops.push(n)),n.start(e,t)},n.prototype.isInWater=function(e,t){e=Math.round(e/i.Constant.WAVE_SCALE.x),t=(t-this.graphics.y)/i.Constant.WAVE_SCALE.y;var n=this.buffers[1];return e>=0&&e<n.length?t>n[e]:!1},n}(s.BaseGame),t("WavesGame",h)}}}),System.register("ripples1/games/Toolbar",["../index","./BaseGame"],function(t,n){"use strict";function c(){return{toolbarRoot:{display:"flex",alignItems:"center",background:"#EEEEEE",color:"#333",boxShadow:"0 5px 10px #0009","& .title":{flex:1,fontSize:20,lineHeight:"1em"},"& .keyboard":{display:"flex",alignItems:"center"},"& .keyIcon":{"& img":{height:48}}}}}function h(t,n){a=e.ReactMaterial.renderComponentWithStyle(Object.assign(c(),n.uiStyles()),u,{appCode:t,app:n})}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a,f=n&&n.id,l=n&&n.id;return t("showToolboxPage",h),{setters:[function(e){i=e},function(e){s=e}],execute:function(){o=e.Base.translation.translate,u=function(t){function n(n){var r=t.call(this,n)||this;return r.btnBack=function(){r.props.app.dispose(),e.React.unmountRootComponent(a),i.showIndexPage()},r.state={refresh:0},r.props.app.on(s.BaseGame.EVENT.REFRESH_UI,r.refreshUI,r),r}return r(n,t),n.prototype.refreshUI=function(){this.setState({refresh:this.state.refresh+1})},n.prototype.render=function(){var e=this.props.classes;return React.createElement("div",{className:e.toolbarRoot},React.createElement(MaterialUI.IconButton,{onClick:this.btnBack},React.createElement(MaterialUI.Icon,null,"arrow_back")),React.createElement(MaterialUI.Typography,{className:"title"},o(this.props.appCode+".title")),this.props.app.renderAppUI(e))},n}(React.Component),t("Toolbar",u)}}}),System.register("ripples1/games/BaseGame",[],function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r,i=t&&t.id,s=t&&t.id;return{setters:[],execute:function(){r=function(e){function t(){return e.call(this)||this}return n(t,e),t.prototype.dispose=function(){this.emit(t.EVENT.DISPOSE),this.destroyed||this.destroy({children:!0})},t.prototype.renderAppUI=function(e){return null},t.prototype.uiStyles=function(){return{}},t.prototype.setConfig=function(e){},t.prototype.removeBackground=function(){},t.prototype.setBackground=function(e){},t.EVENT={REFRESH_UI:"refreshUI",DISPOSE:"dispose"},t}(PIXI.Container),e("BaseGame",r)}}}),System.register("ripples1/ripplesGame/Ripples",[],function(t,n){"use strict";var r,i,s,o=n&&n.id,u=n&&n.id;return{setters:[],execute:function(){r=e.Base.utils.MathUtil,i=e.Base.geom.Point,s=function(){function e(e,t){this.width=e,this.height=t,this.buffers=[new Float32Array(e*t),new Float32Array(e*t)]}return e.prototype.getStartIndex=function(e,t){return Math.round(e+t*this.width)},e.prototype.getAltitude=function(e,t){return t>=0&&t<e.length?e[t]:0},e.prototype.setAltitude=function(e,t,n,r){var i=this.getStartIndex(t,n);i>=0&&i<e.length&&(e[i]=r)},e.prototype.addRipple=function(e,t,n,r){r===void 0&&(r=3),e=Math.round(e),t=Math.round(t);var i=this.buffers[0],s=Math.PI*2;for(var o=-r;o<=r;++o)for(var u=-r;u<=r;++u){var a=Math.sqrt(o*o+u*u)/(r+1);if(a<1){var f=s*a,l=Math.cos(f);f>Math.PI&&(l=(l-1)/2),this.setAltitude(i,e+o,t+u,this.getAltitude(i,this.getStartIndex(e+o,t+u))+l*n)}}},e.prototype.addWave=function(e,t,n){n===void 0&&(n=3);var r=this.width,s=this.height,o=Math.PI;for(var u=0;u<s;++u)for(var a=0;a<r;++a){var f=e.distanceTo(new i(a,u)),l=f/(n+1);if(l<1){var c=t*(Math.cos(o*l)+1)/2;this.setAltitude(this.buffers[0],a,u,c),this.setAltitude(this.buffers[1],a,u,0)}}},e.prototype.updateDisplacementBuffer=function(e,t){var n=this.buffers[1],r=this.width,i=this.height,s=0;for(var o=0;o<i;++o)for(var u=0;u<r;++u){var a=this.getStartIndex(u,o);e[s++]=(this.getAltitude(n,a-1)-this.getAltitude(n,a+1))*t,e[s++]=(this.getAltitude(n,a-r)-this.getAltitude(n,a+r))*t,s+=2}},e.prototype.updateWaterBuffer=function(e,t,n){var i=this.buffers[1],s=this.width,o=this.height,u=0,a=t.red/255,f=t.green/255,l=t.blue/255;for(var c=0;c<o;++c)for(var h=0;h<s;++h){var p=this.getStartIndex(h,c),d=(this.getAltitude(i,p-1)-this.getAltitude(i,p+1)+this.getAltitude(i,p-s)-this.getAltitude(i,p+s))*n,v=Math.abs(d);d>0?(e[u++]=Math.min(1,r.numberFollowTarget(a,1,v)),e[u++]=Math.min(1,r.numberFollowTarget(f,1,v)),e[u++]=Math.min(1,r.numberFollowTarget(l,1,v))):(v*=.5,e[u++]=Math.max(0,r.numberFollowTarget(a,0,v)),e[u++]=Math.max(0,r.numberFollowTarget(f,0,v)),e[u++]=Math.max(0,r.numberFollowTarget(l,0,v))),e[u++]=Math.min(1,t.alpha+v)}},e.prototype.update=function(e){var t=this.width,n=this.height,r=t*n,i=this.buffers[0],s=this.buffers[1];for(var o=0;o<r;++o)s[o]=(this.getAltitude(i,o-1)+this.getAltitude(i,o+1)+this.getAltitude(i,o-t)+this.getAltitude(i,o+t))/2-s[o],s[o]*=e},e.prototype.swapBuffers=function(){var e=this.buffers[0];this.buffers[0]=this.buffers[1],this.buffers[1]=e},e}(),t("Ripples",s)}}}),System.register("ripples1/wavesGame/WaterDrop",[],function(t,n){"use strict";var r,i,s,o=n&&n.id,u=n&&n.id;return{setters:[],execute:function(){r=e.Base.resourceManager,i=e.Base.pixi,s=function(){function t(e){this.game=e,this.sprite=r.createPixiSprite("Ripples.water_drop"),this.velocity=0,this.sprite.scale.set(.25)}return t.prototype.start=function(t,n){this.velocity=0,this.sprite.position.set(t,n),this.sprite.alpha=0,this.game.addChild(this.sprite),e.Base.addUpdateFunction(this,this.update)},t.prototype.stop=function(){i.removeFromParent(this.sprite),e.Base.removeUpdateFunction(this,this.update)},t.prototype.update=function(e){this.sprite.alpha+=e*.005,this.velocity+=e*.001,this.sprite.y+=e*this.velocity,this.game.isInWater(this.sprite.x,this.sprite.y)&&(this.stop(),this.game.addDropWave(this.sprite.x,this.velocity))},t}(),t("WaterDrop",s)}}}),System.register("ripples1/ripplesGame/RipplesUI",["../games/GameUI"],function(t,n){"use strict";function f(e){var t=MaterialUI.withStyles(i.getGameUIStyles())(o);return React.createElement(t,{game:e})}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u=n&&n.id,a=n&&n.id;return t("renderRipplesUI",f),{setters:[function(e){i=e}],execute:function(){s=e.Base.translation.translate,o=function(e){function t(t){var n=e.call(this,t)||this,r=t.game.config;return n.state={config:Object.assign({},r)},n}return r(t,e),t.prototype.render=function(){return React.createElement("div",{className:this.props.classes.root},this.renderBackgroundButton(),React.createElement(MaterialUI.Typography,{className:"configTitle"},s("waterConfig")),this.renderColorPicker("waterColor"),this.renderSlider("waterAlpha",0,1,.05),React.createElement(MaterialUI.Typography,{className:"configTitle"},s("envConfig")),this.renderSlider("rainScale",0,3,.01),this.renderSlider("waveLength",0,20,1),this.renderSlider("waveForce",.1,2,.01),React.createElement(MaterialUI.Typography,{className:"configTitle"},s("rippleConfig")),this.renderSlider("amplitude",0,100,1),this.renderSlider("waterHighlight",0,5,.1),this.renderSlider("damping",.8,1,.001))},t}(i.GameUI),t("RipplesUI",o)}}}),System.register("ripples1/wavesGame/WavesUI",["../games/GameUI"],function(t,n){"use strict";function f(e){var t=MaterialUI.withStyles(i.getGameUIStyles())(o);return React.createElement(t,{game:e})}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u=n&&n.id,a=n&&n.id;return t("renderWavesUI",f),{setters:[function(e){i=e}],execute:function(){s=e.Base.translation.translate,o=function(e){function t(t){var n=e.call(this,t)||this;return n.state={config:Object.assign({},t.game.config)},n}return r(t,e),t.prototype.render=function(){return React.createElement("div",{className:this.props.classes.root},this.renderBackgroundButton(),React.createElement(MaterialUI.Typography,{className:"configTitle"},s("waterConfig")),this.renderColorPicker("waterColor"),this.renderSlider("waterAlpha",0,1,.05),this.renderSlider("surfaceThickness",0,10,1),this.renderSlider("waterLevel",20,550,1),React.createElement(MaterialUI.Typography,{className:"configTitle"},s("envConfig")),this.renderSlider("rainScale",0,3,.01),this.renderSlider("waveLength",0,100,1),this.renderSlider("waveForce",.1,2,.01),React.createElement(MaterialUI.Typography,{className:"configTitle"},s("rippleConfig")),this.renderSlider("damping",.8,.999,.001))},t}(i.GameUI),t("WavesUI",o)}}}),System.register("ripples1/games/GameUI",["../Constant","./AlertDialog"],function(t,n){"use strict";function l(){return{root:{position:"absolute",right:0,top:0,width:i.Constant.PANEL_WIDTH,bottom:0,background:"#EEE",display:"flex",flexDirection:"column",overflow:"auto","& .configTitle":{padding:10,background:"#333",color:"#EEE",marginBottom:10},"& .bgbox":{margin:"6px 0","& button":{width:"100%",height:36}},"& .colorPicker":{position:"relative",display:"flex",alignItems:"center",margin:"0 10px 10px","& .colorbox":{border:"3px solid #aaa",borderRadius:3,width:24,height:24,background:"#F00",cursor:"pointer"},"& .colorValue":{marginLeft:10},"& .react-colorful":{display:"none",position:"absolute",top:30,left:-30,zIndex:10,boxShadow:"1px 3px 6px #0006",borderRadius:10},"&.show .react-colorful":{display:"flex"}},"& .propEditor":{margin:"0 25px 10px 15px"},"& .uploadFileInput":{display:"none"}}}}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o,u,a=n&&n.id,f=n&&n.id;return t("getGameUIStyles",l),{setters:[function(e){i=e},function(e){s=e}],execute:function(){o=e.Base.translation.translate,u=function(t){function n(n){var r=t.call(this,n)||this;return r.showColorPicker=function(){r.setState({showColorPicker:!r.state.showColorPicker})},r.onBackgroundToLoad=function(e){var t=r.props.game;t.removeBackground();var n=e.target.files[0],i=new FileReader;i.onload=function(){var e=i.result;try{var n=PIXI.Texture.from(e);t.setBackground(n)}catch(r){s.showAlertDialog({title:"error",message:"unknownFormat"})}},i.onerror=function(){s.showAlertDialog({title:"error",message:"fileError"})},i.readAsDataURL(n)},r.selectBackgroundFile=function(){$("#backgroundUpload").val(null),$("#backgroundUpload").trigger("click")},e.Base.system.showFps({left:"unset",right:"220px",top:"15px",fontFamily:"Roboto",fontSize:"16px",textShadow:"none",color:"#666"}),r}return r(n,t),Object.defineProperty(n.prototype,"gameConfig",{get:function(){return this.state.config},enumerable:!0,configurable:!0}),n.prototype.onValueChange=function(e,t){var n=this.gameConfig;n[e]=t,this.setState({config:n}),this.props.game.setConfig(this.state.config)},n.prototype.renderSlider=function(e,t,n,r,i){var s=this;r===void 0&&(r=1);var u=this.state.config;return React.createElement("div",{className:"propEditor"},React.createElement(MaterialUI.Typography,null,o("label."+e)),React.createElement(MaterialUI.Slider,{min:t,max:n,step:r,marks:i,value:u[e],valueLabelDisplay:"auto",onChange:function(t,n){return s.onValueChange(e,n)}}))},n.prototype.renderColorPicker=function(e){var t=this,n=this.state.config;return React.createElement("div",{className:"colorPicker"+(this.state.showColorPicker?" show":"")},React.createElement("div",{className:"colorbox",onClick:this.showColorPicker,style:{background:n.waterColor}}),React.createElement(MaterialUI.Typography,{className:"colorValue"},n.waterColor),React.createElement(ReactColorful.HexColorPicker,{color:n.waterColor,onChange:function(n){return t.onValueChange(e,n)}}))},n.prototype.renderBackgroundButton=function(){return React.createElement("div",{className:"bgbox"},React.createElement(MaterialUI.Button,{onClick:this.selectBackgroundFile},React.createElement(MaterialUI.Icon,null,"insert_photo"),"\u00a0",o("btn.background")),React.createElement("input",{className:"uploadFileInput",type:"file",accept:".png,.gif,.jpg,.jpeg,.webp",id:"backgroundUpload",onChange:this.onBackgroundToLoad}))},n}(React.Component),t("GameUI",u)}}}),System.register("ripples1/games/AlertDialog",[],function(t,n){"use strict";function a(){return{root:{width:"100%",height:"100%",display:"flex",alignItems:"center",placeContent:"center","& .backdrop":{position:"absolute",left:0,right:0,width:"100%",height:"100%",background:"#0006"}},panel:{zIndex:10,background:"#eee",borderRadius:8,color:"#333",boxShadow:"2px 10px 20px #0009","& .titlebar":{display:"flex",alignItems:"center",padding:10,"& .title":{flex:1,fontSize:20,textAlign:"center"}},"& .body":{margin:"5px 50px 25px",textAlign:"center"}}}}function f(t){var n={div:null};return new Promise(function(r){n.div=e.ReactMaterial.renderComponentWithStyle(a(),s,Object.assign(t,{divRef:n,resolve:r}))})}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i,s,o=n&&n.id,u=n&&n.id;return t("showAlertDialog",f),{setters:[],execute:function(){i=e.Base.translation.translate,s=function(t){function n(n){var r=t.call(this,n)||this;return r.close=function(){e.React.unmountRootComponent(r.props.divRef.div),r.props.resolve()},r.state={},r}return r(n,t),n.prototype.render=function(){return React.createElement("div",{className:this.props.classes.root},React.createElement("div",{className:"backdrop",onClick:this.close}),React.createElement("div",{className:this.props.classes.panel},React.createElement("div",{className:"titlebar"},React.createElement(MaterialUI.Typography,{className:"title"},i(this.props.title||"error"))),React.createElement("div",{className:"body"},React.createElement(MaterialUI.Typography,null,i(this.props.message||"???")))))},n}(React.Component),t("AlertDialog",s)}}}),function(){CgLibs.bootLib("ripples1/app",["ripples1/app","ripples1/Constant","ripples1/trans.en","ripples1/trans.zh","ripples1/index","ripples1/ripplesGame/RipplesGame","ripples1/wavesGame/WavesGame","ripples1/games/Toolbar","ripples1/games/BaseGame","ripples1/ripplesGame/Ripples","ripples1/wavesGame/WaterDrop","ripples1/ripplesGame/RipplesUI","ripples1/wavesGame/WavesUI","ripples1/games/GameUI","ripples1/games/AlertDialog"])}()}};CgLibs.bootModule('ripples1')}];!function(n,i){var o=i.CgLibs=i.CgLibs||{},s=o.boot||function(n){},e=o.inits=o.inits||[],t=i.__cgSystemBoots||[];function r(n,i){n.shift()(),n.length?setTimeout(r,10,n,i):i()}function u(n){setTimeout(n,80)}e.push(function(n){n.homeUrl="",n.appLibs=[],function(n,i){for(var o in i){var s=i[o];s.url="resource/"+s.id.toString(36)+"/"}}(0,n.appResourcePack.resourceMap),function(n,i){for(var o in i){var s=i[o],e=s.url.indexOf("src/"),t=s.url.indexOf("?");s.url=s.url.substr(e,t-e)}}(0,n.srcUrlMap)});var c=o.loadAppLibs;o.loadAppLibs=function(n,i,s){c(n,i,function(){o.preProcesses=[u],function n(i,o){i.length?i.shift()(function(){n(i,o)}):o()}(o.preProcesses,function(){delete o.preProcesses,t.length?r(t,s):s()})})},s({"data":{"title":"ripples1","baseUrl":"/","engineUrl":"https://code.gamelet.com/gassets/engine/2qb7ud/","cdnUrl":"https://a.gamelet.online/","svrUrl":"https://gamelet.online","project":{"__initializer__":null,"__cloner__":null,"__isInitialized__":true},"htmlMeta":[],"build":{},"ideUrl":"https://code.gamelet.com/","CgCfg":"eyJwcm9qZWN0Q29kZSI6InJpcHBsZXMxIiwiZW52IjoicHJvZCIsImhvbWVVcmwiOiJodHRwczpcL1wvY29kZS5nYW1lbGV0LmNvbVwvIiwicGxheWVyVXJsIjoiaHR0cHM6XC9cL2NvZGUuZ2FtZWxldC5jb21cLyIsImNkblVybCI6Imh0dHBzOlwvXC9hLmdhbWVsZXQub25saW5lXC8iLCJzdnJVcmwiOiJodHRwczpcL1wvZ2FtZWxldC5vbmxpbmUiLCJkZXBvc2l0VXJsIjoiIiwiYXBwUmVzb3VyY2VQYWNrIjp7ImFsaWFzTWFwIjp7IkJhc2UiOnsicmVzb3VyY2VJZCI6MTk1NDAsInJlZnIiOnsiaWQiOjE5NzU1LCJ0eXBlIjoiYnVpbGRMaWIiLCJuYW1lIjoiQ2dFdmVudHNFbmdpbmUuYnVpbGQudjIuMy4yIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvZDNiOGVkMzM2MTViMWZlODY4NDUzYTQyNWU4N2U3MzlcLyIsImNkbiI6MX19LCJCYXNlLnBsdWdpbnMiOnsicmVzb3VyY2VJZCI6MTM0ODAsInJlZnIiOnsiaWQiOjE5NTQwLCJ0eXBlIjoiYnVpbGRMaWIiLCJuYW1lIjoiQmFzZS5idWlsZC52MS40LjQiLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC82ZTNjOWU5NjdhYzliZmY1MDI1OWMwZjYxNDBkMWZhOFwvIiwiY2RuIjoxfSwidGltZSI6MTYyNzA3Njc1NH0sIkNvcmRvdmEiOnsicmVzb3VyY2VJZCI6NzU0MSwicmVmciI6eyJpZCI6MTY0NjYsInR5cGUiOiJidWlsZExpYiIsIm5hbWUiOiJHTFQuYnVpbGQudjEuNi4xMSIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcLzFmYjZkOGE1YTdlOTNkNWNiNzk3YTYxM2I0MTZiZmRiXC8iLCJjZG4iOjF9fSwiQ29yZG92YS5lbXVCZWVwIjp7InJlc291cmNlSWQiOjE0NDEsInJlZnIiOnsiaWQiOjc1NDEsInR5cGUiOiJidWlsZExpYiIsIm5hbWUiOiJDb3Jkb3ZhLmJ1aWxkLnYxLjEuMCIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcLzhjYWE0YWViODU4NTVmMDBmZjQwNzVlNjZmNWZmOWUyXC8iLCJjZG4iOjF9LCJ0aW1lIjoxNTM2Nzc2NTU3fSwiUmVhY3QiOnsicmVzb3VyY2VJZCI6MTM0NzUsInJlZnIiOnsiaWQiOjEyNzMwLCJ0eXBlIjoiYnVpbGRMaWIiLCJuYW1lIjoiUmVhY3RNYXRlcmlhbC5idWlsZC52Mi4wLjYiLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC8wYjcxZmIxNTU5ZmJiNDQzY2QwMWQ1MDhhNjZlY2U5NlwvIiwiY2RuIjoxfX0sIlJlYWN0LnJlYWN0V2l0aERvbSI6eyJyZXNvdXJjZUlkIjozMDE0LCJyZWZyIjp7ImlkIjoxMzQ3NSwidHlwZSI6ImJ1aWxkTGliIiwibmFtZSI6IlJlYWN0LmJ1aWxkLnYzLjAuMiIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcL2E1Njc4ZjU1MWYxZWM0ZDY4ZDM3Y2ZhOTk1ZGJjYmQ2XC8iLCJjZG4iOjF9LCJ0aW1lIjoxNTY3Mjg5MjU0fSwiQ2dFdmVudHNFbmdpbmUiOnsicmVzb3VyY2VJZCI6MTk3NTUsInJlZnIiOnsiaWQiOjEyNzMwLCJ0eXBlIjoiYnVpbGRMaWIiLCJuYW1lIjoiUmVhY3RNYXRlcmlhbC5idWlsZC52Mi4wLjYiLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC8wYjcxZmIxNTU5ZmJiNDQzY2QwMWQ1MDhhNjZlY2U5NlwvIiwiY2RuIjoxfX0sIkNnRXZlbnRzRW5naW5lLmx6c3RyaW5nIjp7InJlc291cmNlSWQiOjcxNCwicmVmciI6eyJpZCI6MTk3NTUsInR5cGUiOiJidWlsZExpYiIsIm5hbWUiOiJDZ0V2ZW50c0VuZ2luZS5idWlsZC52Mi4zLjIiLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC9kM2I4ZWQzMzYxNWIxZmU4Njg0NTNhNDI1ZTg3ZTczOVwvIiwiY2RuIjoxfSwidGltZSI6MTUyNzI5MTQxM30sIkNnRXZlbnRzRW5naW5lLm1hdGhqcyI6eyJyZXNvdXJjZUlkIjoxNjQ5LCJyZWZyIjp7ImlkIjoxOTc1NSwidHlwZSI6ImJ1aWxkTGliIiwibmFtZSI6IkNnRXZlbnRzRW5naW5lLmJ1aWxkLnYyLjMuMiIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcL2QzYjhlZDMzNjE1YjFmZTg2ODQ1M2E0MjVlODdlNzM5XC8iLCJjZG4iOjF9LCJ0aW1lIjoxNTQxNDExMzQyfSwiUmVhY3RNYXRlcmlhbCI6eyJyZXNvdXJjZUlkIjoxMjczMCwicmVmciI6eyJpZCI6MTY0NjYsInR5cGUiOiJidWlsZExpYiIsIm5hbWUiOiJHTFQuYnVpbGQudjEuNi4xMSIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcLzFmYjZkOGE1YTdlOTNkNWNiNzk3YTYxM2I0MTZiZmRiXC8iLCJjZG4iOjF9fSwiUmVhY3RNYXRlcmlhbC5tYXRlcmlhbC1pY29uLWZvbnQiOnsicmVzb3VyY2VJZCI6OTI2LCJyZWZyIjp7ImlkIjoxMjczMCwidHlwZSI6ImJ1aWxkTGliIiwibmFtZSI6IlJlYWN0TWF0ZXJpYWwuYnVpbGQudjIuMC42IiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvMGI3MWZiMTU1OWZiYjQ0M2NkMDFkNTA4YTY2ZWNlOTZcLyIsImNkbiI6MX0sInRpbWUiOjE1Mjk3MDA0MTJ9LCJSZWFjdE1hdGVyaWFsLm1hdGVyaWFsLXVpIjp7InJlc291cmNlSWQiOjM0ODgsInJlZnIiOnsiaWQiOjEyNzMwLCJ0eXBlIjoiYnVpbGRMaWIiLCJuYW1lIjoiUmVhY3RNYXRlcmlhbC5idWlsZC52Mi4wLjYiLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC8wYjcxZmIxNTU5ZmJiNDQzY2QwMWQ1MDhhNjZlY2U5NlwvIiwiY2RuIjoxfSwidGltZSI6MTU4MDMzNTk3NH0sIlJlYWN0TWF0ZXJpYWwucmVhY3QtbWFya2Rvd24iOnsicmVzb3VyY2VJZCI6MzAxNywicmVmciI6eyJpZCI6MTI3MzAsInR5cGUiOiJidWlsZExpYiIsIm5hbWUiOiJSZWFjdE1hdGVyaWFsLmJ1aWxkLnYyLjAuNiIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcLzBiNzFmYjE1NTlmYmI0NDNjZDAxZDUwOGE2NmVjZTk2XC8iLCJjZG4iOjF9LCJ0aW1lIjoxNTY3NTI4MDA3fSwiUmVhY3RNYXRlcmlhbC5yb2JvdG8iOnsicmVzb3VyY2VJZCI6OTI3LCJyZWZyIjp7ImlkIjoxMjczMCwidHlwZSI6ImJ1aWxkTGliIiwibmFtZSI6IlJlYWN0TWF0ZXJpYWwuYnVpbGQudjIuMC42IiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvMGI3MWZiMTU1OWZiYjQ0M2NkMDFkNTA4YTY2ZWNlOTZcLyIsImNkbiI6MX0sInRpbWUiOjE1Mjk3MTM2NjF9LCJHTFQiOnsicmVzb3VyY2VJZCI6MTY0NjYsInJlZnIiOnsiaWQiOjE4OTc5LCJ0eXBlIjoiYnVpbGRMaWIiLCJuYW1lIjoiU2VydmVyLmJ1aWxkLnYxLjEwLjIxIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvNWU3NDVmMDc5ZTk3ZDI5YjliMWZmMWI5ODI4ZjY0MDZcLyIsImNkbiI6MX19LCJHTFQuY3J5cHRvIjp7InJlc291cmNlSWQiOjIwODgsInJlZnIiOnsiaWQiOjE2NDY2LCJ0eXBlIjoiYnVpbGRMaWIiLCJuYW1lIjoiR0xULmJ1aWxkLnYxLjYuMTEiLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC8xZmI2ZDhhNWE3ZTkzZDVjYjc5N2E2MTNiNDE2YmZkYlwvIiwiY2RuIjoxfSwidGltZSI6MTU0Njk0NjY0NH0sIkdMVC5ndWVzdEljb24iOnsicmVzb3VyY2VJZCI6ODAyLCJyZWZyIjp7ImlkIjoxNjQ2NiwidHlwZSI6ImJ1aWxkTGliIiwibmFtZSI6IkdMVC5idWlsZC52MS42LjExIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvMWZiNmQ4YTVhN2U5M2Q1Y2I3OTdhNjEzYjQxNmJmZGJcLyIsImNkbiI6MX0sInRpbWUiOjE2MjcxMjgwOTR9LCJHTFQucGFrbyI6eyJyZXNvdXJjZUlkIjozNjI0LCJyZWZyIjp7ImlkIjoxNjQ2NiwidHlwZSI6ImJ1aWxkTGliIiwibmFtZSI6IkdMVC5idWlsZC52MS42LjExIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvMWZiNmQ4YTVhN2U5M2Q1Y2I3OTdhNjEzYjQxNmJmZGJcLyIsImNkbiI6MX0sInRpbWUiOjE1ODE1MjcwODR9LCJTZXJ2ZXIiOnsicmVzb3VyY2VJZCI6MTg5NzksInJlZnIiOnsiaWQiOjE5ODIwLCJ0eXBlIjoiYnVpbGRBcHAiLCJuYW1lIjoicmlwcGxlczEuYnVpbGQudjIuMC4wIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvMGZkODU1YmZmNmIxYTI5ZThmZTM2MDJhNTBkODIyZmZcLyIsImNkbiI6MX19LCJTZXJ2ZXIuZ2FtZURvbGxhciI6eyJyZXNvdXJjZUlkIjozNTgyLCJyZWZyIjp7ImlkIjoxODk3OSwidHlwZSI6ImJ1aWxkTGliIiwibmFtZSI6IlNlcnZlci5idWlsZC52MS4xMC4yMSIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcLzVlNzQ1ZjA3OWU5N2QyOWI5YjFmZjFiOTgyOGY2NDA2XC8iLCJjZG4iOjF9LCJ0aW1lIjoxNTgxMDA2NDcxfSwiU2VydmVyLmdsdERvbGxhciI6eyJyZXNvdXJjZUlkIjozNTgxLCJyZWZyIjp7ImlkIjoxODk3OSwidHlwZSI6ImJ1aWxkTGliIiwibmFtZSI6IlNlcnZlci5idWlsZC52MS4xMC4yMSIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcLzVlNzQ1ZjA3OWU5N2QyOWI5YjFmZjFiOTgyOGY2NDA2XC8iLCJjZG4iOjF9LCJ0aW1lIjoxNTgxMDA2MzkzfSwiU2VydmVyLmdsdFBvaW50Ijp7InJlc291cmNlSWQiOjM1OTQsInJlZnIiOnsiaWQiOjE4OTc5LCJ0eXBlIjoiYnVpbGRMaWIiLCJuYW1lIjoiU2VydmVyLmJ1aWxkLnYxLjEwLjIxIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvNWU3NDVmMDc5ZTk3ZDI5YjliMWZmMWI5ODI4ZjY0MDZcLyIsImNkbiI6MX0sInRpbWUiOjE1ODExMTMxNDJ9LCJTZXJ2ZXIuc29ja2V0LWlvIjp7InJlc291cmNlSWQiOjIzMTMsInJlZnIiOnsiaWQiOjE4OTc5LCJ0eXBlIjoiYnVpbGRMaWIiLCJuYW1lIjoiU2VydmVyLmJ1aWxkLnYxLjEwLjIxIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvNWU3NDVmMDc5ZTk3ZDI5YjliMWZmMWI5ODI4ZjY0MDZcLyIsImNkbiI6MX0sInRpbWUiOjE1NTYwNzI1Nzl9LCJyaXBwbGVzMSI6eyJyZXNvdXJjZUlkIjoxOTgyMH0sIlJpcHBsZXMuYmFja2dyb3VuZF8xIjp7InJlc291cmNlSWQiOjE3MjU4LCJyZWZyIjp7ImlkIjoxOTgyMCwidHlwZSI6ImJ1aWxkQXBwIiwibmFtZSI6InJpcHBsZXMxLmJ1aWxkLnYyLjAuMCIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcLzBmZDg1NWJmZjZiMWEyOWU4ZmUzNjAyYTUwZDgyMmZmXC8iLCJjZG4iOjF9LCJ0aW1lIjoxNjQwMDAyNjAzfSwiUmlwcGxlcy5jb3ZlcmJnIjp7InJlc291cmNlSWQiOjE3MjU3LCJyZWZyIjp7ImlkIjoxOTgyMCwidHlwZSI6ImJ1aWxkQXBwIiwibmFtZSI6InJpcHBsZXMxLmJ1aWxkLnYyLjAuMCIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcLzBmZDg1NWJmZjZiMWEyOWU4ZmUzNjAyYTUwZDgyMmZmXC8iLCJjZG4iOjF9LCJ0aW1lIjoxNjQwMDAwOTE2fSwiUmlwcGxlcy5wbGF0Zm9ybWVyX2JhY2tncm91bmQiOnsicmVzb3VyY2VJZCI6MTcyNDIsInJlZnIiOnsiaWQiOjE5ODIwLCJ0eXBlIjoiYnVpbGRBcHAiLCJuYW1lIjoicmlwcGxlczEuYnVpbGQudjIuMC4wIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvMGZkODU1YmZmNmIxYTI5ZThmZTM2MDJhNTBkODIyZmZcLyIsImNkbiI6MX0sInRpbWUiOjE2Mzk5MjQ0MzF9LCJSaXBwbGVzLnJlYWN0LWNvbG9yZnVsIjp7InJlc291cmNlSWQiOjE3MjQ2LCJyZWZyIjp7ImlkIjoxOTgyMCwidHlwZSI6ImJ1aWxkQXBwIiwibmFtZSI6InJpcHBsZXMxLmJ1aWxkLnYyLjAuMCIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcLzBmZDg1NWJmZjZiMWEyOWU4ZmUzNjAyYTUwZDgyMmZmXC8iLCJjZG4iOjF9LCJ0aW1lIjoxNjM5OTQ2NTU1fSwiUmlwcGxlcy5zY2VuZV9mcmFtZSI6eyJyZXNvdXJjZUlkIjoxNzI0MywicmVmciI6eyJpZCI6MTk4MjAsInR5cGUiOiJidWlsZEFwcCIsIm5hbWUiOiJyaXBwbGVzMS5idWlsZC52Mi4wLjAiLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC8wZmQ4NTViZmY2YjFhMjllOGZlMzYwMmE1MGQ4MjJmZlwvIiwiY2RuIjoxfSwidGltZSI6MTYzOTkyNDkwNX0sIlJpcHBsZXMudGh1bWIiOnsicmVzb3VyY2VJZCI6MTcyNjQsInJlZnIiOnsiaWQiOjE5ODIwLCJ0eXBlIjoiYnVpbGRBcHAiLCJuYW1lIjoicmlwcGxlczEuYnVpbGQudjIuMC4wIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvMGZkODU1YmZmNmIxYTI5ZThmZTM2MDJhNTBkODIyZmZcLyIsImNkbiI6MX0sInRpbWUiOjE2NDAwMTYxMDJ9LCJSaXBwbGVzLndhdGVyX2Ryb3AiOnsicmVzb3VyY2VJZCI6MTcyNDcsInJlZnIiOnsiaWQiOjE5ODIwLCJ0eXBlIjoiYnVpbGRBcHAiLCJuYW1lIjoicmlwcGxlczEuYnVpbGQudjIuMC4wIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvMGZkODU1YmZmNmIxYTI5ZThmZTM2MDJhNTBkODIyZmZcLyIsImNkbiI6MX0sInRpbWUiOjE2Mzk5NTY0NDN9LCJyaXBwbGVzMS5sb2dvIjp7InJlc291cmNlSWQiOjE5ODE5LCJyZWZyIjp7ImlkIjoxOTgyMCwidHlwZSI6ImJ1aWxkQXBwIiwibmFtZSI6InJpcHBsZXMxLmJ1aWxkLnYyLjAuMCIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcLzBmZDg1NWJmZjZiMWEyOWU4ZmUzNjAyYTUwZDgyMmZmXC8iLCJjZG4iOjF9LCJ0aW1lIjoxNjU0MTA4MTg0fX0sInJlc291cmNlTWFwIjp7IjE5NTQwIjp7ImlkIjoxOTU0MCwidHlwZSI6ImJ1aWxkTGliIiwibmFtZSI6IkJhc2UuYnVpbGQudjEuNC40IiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvNmUzYzllOTY3YWM5YmZmNTAyNTljMGY2MTQwZDFmYThcLyIsImNkbiI6MSwibWV0YSI6eyJmaWxlcyI6WyJtb2R1bGVzLmpzIiwibW9kdWxlcy5kLnRzIiwiYXJjaGl2ZS56aXAiXSwibWFpbiI6Im1vZHVsZXMuanMiLCJyaWRzIjp7IkJhc2UucGx1Z2lucyI6eyJpZCI6MTM0ODAsInRpbWUiOjE2MjcwNzY3NTR9fSwicGNvZGUiOiJCYXNlIiwidmVyIjoiMS40LjQifSwiY3JlYXRlVGltZSI6MTY1MjAyODk3OH0sIjc1NDEiOnsiaWQiOjc1NDEsInR5cGUiOiJidWlsZExpYiIsIm5hbWUiOiJDb3Jkb3ZhLmJ1aWxkLnYxLjEuMCIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcLzhjYWE0YWViODU4NTVmMDBmZjQwNzVlNjZmNWZmOWUyXC8iLCJjZG4iOjEsIm1ldGEiOnsiZmlsZXMiOlsibW9kdWxlcy5qcyIsIm1vZHVsZXMuZC50cyIsImFyY2hpdmUuemlwIl0sIm1haW4iOiJtb2R1bGVzLmpzIiwicmlkcyI6eyJCYXNlIjp7ImlkIjoxOTU0MCwidGltZSI6MTU5Nzk0MTU3Nn0sIkNvcmRvdmEuZW11QmVlcCI6eyJpZCI6MTQ0MSwidGltZSI6MTUzNjc3NjU1N319LCJwY29kZSI6IkNvcmRvdmEiLCJ2ZXIiOiIxLjEuMCJ9LCJjcmVhdGVUaW1lIjoxNjEwMzA2Njc3fSwiMTM0NzUiOnsiaWQiOjEzNDc1LCJ0eXBlIjoiYnVpbGRMaWIiLCJuYW1lIjoiUmVhY3QuYnVpbGQudjMuMC4yIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvYTU2NzhmNTUxZjFlYzRkNjhkMzdjZmE5OTVkYmNiZDZcLyIsImNkbiI6MSwibWV0YSI6eyJmaWxlcyI6WyJtb2R1bGVzLmpzIiwibW9kdWxlcy5kLnRzIiwiYXJjaGl2ZS56aXAiXSwibWFpbiI6Im1vZHVsZXMuanMiLCJyaWRzIjp7IkJhc2UiOnsiaWQiOjE5NTQwLCJ0aW1lIjoxNjI3MDcxNTY2fSwiUmVhY3QucmVhY3RXaXRoRG9tIjp7ImlkIjozMDE0LCJ0aW1lIjoxNTY3Mjg5MjU0fX0sInBjb2RlIjoiUmVhY3QiLCJ2ZXIiOiIzLjAuMiJ9LCJjcmVhdGVUaW1lIjoxNjI3MDcxNTg3fSwiMTk3NTUiOnsiaWQiOjE5NzU1LCJ0eXBlIjoiYnVpbGRMaWIiLCJuYW1lIjoiQ2dFdmVudHNFbmdpbmUuYnVpbGQudjIuMy4yIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvZDNiOGVkMzM2MTViMWZlODY4NDUzYTQyNWU4N2U3MzlcLyIsImNkbiI6MSwibWV0YSI6eyJmaWxlcyI6WyJtb2R1bGVzLmpzIiwibW9kdWxlcy5kLnRzIiwiYXJjaGl2ZS56aXAiXSwibWFpbiI6Im1vZHVsZXMuanMiLCJyaWRzIjp7IkJhc2UiOnsiaWQiOjE5NTQwLCJ0aW1lIjoxNjI3MDcxNjk5fSwiQ2dFdmVudHNFbmdpbmUubHpzdHJpbmciOnsiaWQiOjcxNCwidGltZSI6MTUyNzI5MTQxM30sIkNnRXZlbnRzRW5naW5lLm1hdGhqcyI6eyJpZCI6MTY0OSwidGltZSI6MTU0MTQxMTM0Mn19LCJwY29kZSI6IkNnRXZlbnRzRW5naW5lIiwidmVyIjoiMi4zLjIifSwiY3JlYXRlVGltZSI6MTY1MzQyOTc5NX0sIjEyNzMwIjp7ImlkIjoxMjczMCwidHlwZSI6ImJ1aWxkTGliIiwibmFtZSI6IlJlYWN0TWF0ZXJpYWwuYnVpbGQudjIuMC42IiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvMGI3MWZiMTU1OWZiYjQ0M2NkMDFkNTA4YTY2ZWNlOTZcLyIsImNkbiI6MSwibWV0YSI6eyJmaWxlcyI6WyJtb2R1bGVzLmpzIiwibW9kdWxlcy5kLnRzIiwiYXJjaGl2ZS56aXAiXSwibWFpbiI6Im1vZHVsZXMuanMiLCJyaWRzIjp7IkNnRXZlbnRzRW5naW5lIjp7ImlkIjoxOTc1NSwidGltZSI6MTU5NzkzMjEwNH0sIlJlYWN0Ijp7ImlkIjoxMzQ3NSwidGltZSI6MTU5NzkzMjEwN30sIlJlYWN0TWF0ZXJpYWwubWF0ZXJpYWwtaWNvbi1mb250Ijp7ImlkIjo5MjYsInRpbWUiOjE1Mjk3MDA0MTJ9LCJSZWFjdE1hdGVyaWFsLm1hdGVyaWFsLXVpIjp7ImlkIjozNDg4LCJ0aW1lIjoxNTgwMzM1OTc0fSwiUmVhY3RNYXRlcmlhbC5yZWFjdC1tYXJrZG93biI6eyJpZCI6MzAxNywidGltZSI6MTU2NzUyODAwN30sIlJlYWN0TWF0ZXJpYWwucm9ib3RvIjp7ImlkIjo5MjcsInRpbWUiOjE1Mjk3MTM2NjF9fSwicGNvZGUiOiJSZWFjdE1hdGVyaWFsIiwidmVyIjoiMi4wLjYifSwiY3JlYXRlVGltZSI6MTYyNTUwMTczN30sIjE2NDY2Ijp7ImlkIjoxNjQ2NiwidHlwZSI6ImJ1aWxkTGliIiwibmFtZSI6IkdMVC5idWlsZC52MS42LjExIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvMWZiNmQ4YTVhN2U5M2Q1Y2I3OTdhNjEzYjQxNmJmZGJcLyIsImNkbiI6MSwibWV0YSI6eyJmaWxlcyI6WyJtb2R1bGVzLmpzIiwibW9kdWxlcy5kLnRzIiwiYXJjaGl2ZS56aXAiXSwibWFpbiI6Im1vZHVsZXMuanMiLCJyaWRzIjp7IkNvcmRvdmEiOnsiaWQiOjc1NDEsInRpbWUiOjE1OTc5NDE2NTh9LCJHTFQuY3J5cHRvIjp7ImlkIjoyMDg4LCJ0aW1lIjoxNTQ2OTQ2NjQ0fSwiR0xULmd1ZXN0SWNvbiI6eyJpZCI6ODAyLCJ0aW1lIjoxNjI3MTI4MDk0fSwiR0xULnBha28iOnsiaWQiOjM2MjQsInRpbWUiOjE1ODE1MjcwODR9LCJSZWFjdE1hdGVyaWFsIjp7ImlkIjoxMjczMCwidGltZSI6MTU5Nzk0MTY1NX19LCJwY29kZSI6IkdMVCIsInZlciI6IjEuNi4xMSJ9LCJjcmVhdGVUaW1lIjoxNjM2NzQ0MzY1fSwiMTg5NzkiOnsiaWQiOjE4OTc5LCJ0eXBlIjoiYnVpbGRMaWIiLCJuYW1lIjoiU2VydmVyLmJ1aWxkLnYxLjEwLjIxIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvNWU3NDVmMDc5ZTk3ZDI5YjliMWZmMWI5ODI4ZjY0MDZcLyIsImNkbiI6MSwibWV0YSI6eyJmaWxlcyI6WyJtb2R1bGVzLmpzIiwibW9kdWxlcy5kLnRzIiwiYXJjaGl2ZS56aXAiXSwibWFpbiI6Im1vZHVsZXMuanMiLCJyaWRzIjp7IkdMVCI6eyJpZCI6MTY0NjYsInRpbWUiOjE2MDQwODAyMjF9LCJTZXJ2ZXIuZ2FtZURvbGxhciI6eyJpZCI6MzU4MiwidGltZSI6MTU4MTAwNjQ3MX0sIlNlcnZlci5nbHREb2xsYXIiOnsiaWQiOjM1ODEsInRpbWUiOjE1ODEwMDYzOTN9LCJTZXJ2ZXIuZ2x0UG9pbnQiOnsiaWQiOjM1OTQsInRpbWUiOjE1ODExMTMxNDJ9LCJTZXJ2ZXIuc29ja2V0LWlvIjp7ImlkIjoyMzEzLCJ0aW1lIjoxNTU2MDcyNTc5fX0sInBjb2RlIjoiU2VydmVyIiwidmVyIjoiMS4xMC4yMSIsImdpdGVtcyI6Mn0sImNyZWF0ZVRpbWUiOjE2NTAzOTQ5MjZ9LCIxOTgyMCI6eyJpZCI6MTk4MjAsInR5cGUiOiJidWlsZEFwcCIsIm5hbWUiOiJyaXBwbGVzMS5idWlsZC52Mi4wLjAiLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC8wZmQ4NTViZmY2YjFhMjllOGZlMzYwMmE1MGQ4MjJmZlwvIiwiY2RuIjoxLCJtZXRhIjp7ImZpbGVzIjpbIm1vZHVsZXMuanMiLCJtb2R1bGVzLmQudHMiLCJhcmNoaXZlLnppcCJdLCJtYWluIjoibW9kdWxlcy5qcyIsInJpZHMiOnsiUmlwcGxlcy5iYWNrZ3JvdW5kXzEiOnsiaWQiOjE3MjU4LCJ0aW1lIjoxNjQwMDAyNjAzfSwiUmlwcGxlcy5jb3ZlcmJnIjp7ImlkIjoxNzI1NywidGltZSI6MTY0MDAwMDkxNn0sIlJpcHBsZXMucGxhdGZvcm1lcl9iYWNrZ3JvdW5kIjp7ImlkIjoxNzI0MiwidGltZSI6MTYzOTkyNDQzMX0sIlJpcHBsZXMucmVhY3QtY29sb3JmdWwiOnsiaWQiOjE3MjQ2LCJ0aW1lIjoxNjM5OTQ2NTU1fSwiUmlwcGxlcy5zY2VuZV9mcmFtZSI6eyJpZCI6MTcyNDMsInRpbWUiOjE2Mzk5MjQ5MDV9LCJSaXBwbGVzLnRodW1iIjp7ImlkIjoxNzI2NCwidGltZSI6MTY0MDAxNjEwMn0sIlJpcHBsZXMud2F0ZXJfZHJvcCI6eyJpZCI6MTcyNDcsInRpbWUiOjE2Mzk5NTY0NDN9LCJyaXBwbGVzMS5sb2dvIjp7ImlkIjoxOTgxOSwidGltZSI6MTY1NDEwODE4NH0sIlNlcnZlciI6eyJpZCI6MTg5NzksInRpbWUiOjE2Mzk3NTA2MDZ9fSwicGNvZGUiOiJyaXBwbGVzMSIsInZlciI6IjIuMC4wIn0sImNyZWF0ZVRpbWUiOjE2NTQxMDgyNzN9LCI3MTQiOnsiaWQiOjcxNCwidHlwZSI6ImpzbGliIiwibmFtZSI6Imx6LXN0cmluZy12MSIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcLzUwNTA4MGNkMDVkYzExMTJjM2U0NjYwMTliYWU2Mzc0XC8iLCJjZG4iOjEsIm1ldGEiOnsiZmlsZXMiOlsibHotc3RyaW5nLXYxXC9sei1zdHJpbmcuZC50cyIsImx6LXN0cmluZy12MVwvbHotc3RyaW5nLm1pbi5qcyIsImx6LXN0cmluZy12MVwvbHotc3RyaW5nLmpzIiwicmVhZG1lXzViMDhhMDg1ZTYwZjgubWQiXSwibWFpbiI6Imx6LXN0cmluZy12MVwvbHotc3RyaW5nLm1pbi5qcyIsImluZm8iOltdLCJkZXZKcyI6Imx6LXN0cmluZy12MVwvbHotc3RyaW5nLmpzIiwiZHRzIjoibHotc3RyaW5nLXYxXC9sei1zdHJpbmcuZC50cyIsInJlYWRtZSI6InJlYWRtZV81YjA4YTA4NWU2MGY4Lm1kIn0sImNyZWF0ZVRpbWUiOjE1MjcyOTE0MTN9LCI4MDIiOnsiaWQiOjgwMiwidHlwZSI6ImltYWdlIiwibmFtZSI6Imljb24ucG5nIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvM2Y2Yjg0YmE1YmE2Y2JmMzI2MjQzMzVlZDExZGQzMDVcLyIsImNkbiI6MSwibWV0YSI6eyJmaWxlcyI6WyJpY29uLnBuZyJdLCJtYWluIjoiaWNvbi5wbmciLCJpbmZvIjp7ImZpbGVTaXplIjoiM0tCIiwic2l6ZSI6eyJ3aWR0aCI6MTgwLCJoZWlnaHQiOjE4MH0sImJpdHMiOjgsIm1pbWUiOiJpbWFnZVwvcG5nIn0sInRodW1iIjoiaWNvbi5wbmcifSwiY3JlYXRlVGltZSI6MTUyODIxMzA2OH0sIjkyNiI6eyJpZCI6OTI2LCJ0eXBlIjoiZm9udCIsIm5hbWUiOiJtYXRlcmlhbC1pY29ucyIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcLzk2MzAxY2QwNzJlZWE1ZDY0YWI3YTY0NGExMWE5NTRjXC8iLCJjZG4iOjEsIm1ldGEiOnsiZmlsZXMiOlsiaWNvbmZvbnRcL21hdGVyaWFsLWljb25zLmNzcyIsImljb25mb250XC9NYXRlcmlhbEljb25zLVJlZ3VsYXIuZW90IiwiaWNvbmZvbnRcL01hdGVyaWFsSWNvbnMtUmVndWxhci53b2ZmMiIsImljb25mb250XC9NYXRlcmlhbEljb25zLVJlZ3VsYXIud29mZiIsImljb25mb250XC9NYXRlcmlhbEljb25zLVJlZ3VsYXIudHRmIl0sIm1haW4iOiJpY29uZm9udFwvbWF0ZXJpYWwtaWNvbnMuY3NzIiwiaW5mbyI6eyJmb250TmFtZXMiOlsiTWF0ZXJpYWwgSWNvbnMiXX19LCJjcmVhdGVUaW1lIjoxNTI5NzAwNDEyfSwiOTI3Ijp7ImlkIjo5MjcsInR5cGUiOiJmb250IiwibmFtZSI6IlJvYm90by1SZWd1bGFyLnR0ZiIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcLzU2NzNkYTUyYzk4YmI2Y2IzM2FkYTVhYWY2NDk3MDNlXC8iLCJjZG4iOjEsIm1ldGEiOnsiZmlsZXMiOlsiUm9ib3RvLVJlZ3VsYXIudHRmIl0sIm1haW4iOiJSb2JvdG8tUmVndWxhci50dGYiLCJpbmZvIjp7ImZvbnROYW1lIjoiUm9ib3RvIiwic3ViRmFtaWx5IjoiUmVndWxhciIsImZvcm1hdCI6InRydWV0eXBlIiwidmVyc2lvbiI6IlZlcnNpb24gMS4wMDAwMDsgMjAxMSIsIndlaWdodCI6NDAwLCJjb3B5cmlnaHQiOiJGb250IGRhdGEgY29weXJpZ2h0IEdvb2dsZSAyMDExIiwiZmlsZVNpemUiOiIxNTRLQiJ9fSwiY3JlYXRlVGltZSI6MTUyOTcxMzY2MX0sIjE0NDEiOnsiaWQiOjE0NDEsInR5cGUiOiJzb3VuZCIsIm5hbWUiOiJyaG9kZXNtYXNfX2xldmVsLXVwLTAyLm1wMyIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcLzMxMjc1NjJjZGQ0MWNlODA4NGU0MDY0ODA1OWE5MzFiXC8iLCJjZG4iOjEsIm1ldGEiOnsiZmlsZXMiOlsicmhvZGVzbWFzX19sZXZlbC11cC0wMi5tcDMiXSwibWFpbiI6InJob2Rlc21hc19fbGV2ZWwtdXAtMDIubXAzIiwiaW5mbyI6eyJmaWxlU2l6ZSI6IjMzS0IiLCJiaXRyYXRlIjoiMTkya2JwcyIsImR1cmF0aW9uIjoiMDowMSJ9fSwiY3JlYXRlVGltZSI6MTUzNjc3NjU1N30sIjE2NDkiOnsiaWQiOjE2NDksInR5cGUiOiJqc2xpYiIsIm5hbWUiOiJtYXRoanMtdjIiLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC8xMGQ0YzRhMTBmOTBiODBjOWU0Mzc0YjM1ODJmYWE2NFwvIiwiY2RuIjoxLCJtZXRhIjp7ImZpbGVzIjpbIm1hdGhqcy12MlwvaW5kZXguZC50cyIsIm1hdGhqcy12MlwvbWF0aC5taW4uanMiLCJtYXRoanMtdjJcL21hdGguanMiXSwibWFpbiI6Im1hdGhqcy12MlwvbWF0aC5taW4uanMiLCJpbmZvIjpbXSwiZGV2SnMiOiJtYXRoanMtdjJcL21hdGguanMiLCJkdHMiOiJtYXRoanMtdjJcL2luZGV4LmQudHMifSwiY3JlYXRlVGltZSI6MTU0MTQxMTM0Mn0sIjIwODgiOnsiaWQiOjIwODgsInR5cGUiOiJqc2xpYiIsIm5hbWUiOiJjcnlwdG8tanMtdjEiLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC83OWEzNjc2MGRlMzEwNDJiOTBkNzg0MjU2MzAxYjI3ZFwvIiwiY2RuIjoxLCJtZXRhIjp7ImZpbGVzIjpbImNyeXB0by1qcy12MVwvaW5kZXguZC50cyIsImNyeXB0by1qcy12MVwvY3J5cHRvLWpzLm1pbi5qcyIsImNyeXB0by1qcy12MVwvY3J5cHRvLWpzLmpzIiwicmVhZG1lXzVjMzQ4OTE1NzdiZjUubWQiXSwibWFpbiI6ImNyeXB0by1qcy12MVwvY3J5cHRvLWpzLm1pbi5qcyIsImluZm8iOltdLCJkZXZKcyI6ImNyeXB0by1qcy12MVwvY3J5cHRvLWpzLmpzIiwiZHRzIjoiY3J5cHRvLWpzLXYxXC9pbmRleC5kLnRzIiwicmVhZG1lIjoicmVhZG1lXzVjMzQ4OTE1NzdiZjUubWQifSwiY3JlYXRlVGltZSI6MTU0NjcyNDk2Mn0sIjIzMTMiOnsiaWQiOjIzMTMsInR5cGUiOiJqc2xpYiIsIm5hbWUiOiJzb2NrZXQtaW8tdjIiLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC84NmViMTAwMzQwMjRkOTI4MmQ3Njg1NGIwOWRkMWY3MlwvIiwiY2RuIjoxLCJtZXRhIjp7ImZpbGVzIjpbInNvY2tldC1pby12MlwvaW5kZXguZC50cyIsInNvY2tldC1pby12Mlwvc29ja2V0LmlvLm1pbi5qcyIsInNvY2tldC1pby12Mlwvc29ja2V0LmlvLmpzIiwicmVhZG1lXzVjYmZjODhlNzk1MjgubWQiXSwibWFpbiI6InNvY2tldC1pby12Mlwvc29ja2V0LmlvLm1pbi5qcyIsImluZm8iOltdLCJkZXZKcyI6InNvY2tldC1pby12Mlwvc29ja2V0LmlvLmpzIiwiZHRzIjoic29ja2V0LWlvLXYyXC9pbmRleC5kLnRzIiwicmVhZG1lIjoicmVhZG1lXzVjYmZjODhlNzk1MjgubWQifSwiY3JlYXRlVGltZSI6MTU1NjA3MjU3OX0sIjMwMTQiOnsiaWQiOjMwMTQsInR5cGUiOiJqc2xpYiIsIm5hbWUiOiJyZWFjdC13aXRoLWRvbS0xNi45LjAiLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC8yMDQ5ZmIyZTc2MTg2YjkwOTdhMzA2ZDM4ZjI2N2VhMFwvIiwiY2RuIjoxLCJtZXRhIjp7ImZpbGVzIjpbInJlYWN0LXdpdGgtZG9tLTE2LjkuMFwvaW5kZXguZC50cyIsInJlYWN0LXdpdGgtZG9tLTE2LjkuMFwvcmVhY3Qtd2l0aC1kb20ubWluLmpzIiwicmVhY3Qtd2l0aC1kb20tMTYuOS4wXC9yZWFjdC13aXRoLWRvbS5qcyIsInJlYWRtZV81ZDZhZWZiZjRkNzNlLm1kIl0sIm1haW4iOiJyZWFjdC13aXRoLWRvbS0xNi45LjBcL3JlYWN0LXdpdGgtZG9tLm1pbi5qcyIsImluZm8iOltdLCJkZXZKcyI6InJlYWN0LXdpdGgtZG9tLTE2LjkuMFwvcmVhY3Qtd2l0aC1kb20uanMiLCJkdHMiOiJyZWFjdC13aXRoLWRvbS0xNi45LjBcL2luZGV4LmQudHMiLCJyZWFkbWUiOiJyZWFkbWVfNWQ2YWVmYmY0ZDczZS5tZCJ9LCJjcmVhdGVUaW1lIjoxNTY3Mjg5MjU0fSwiMzAxNyI6eyJpZCI6MzAxNywidHlwZSI6ImpzbGliIiwibmFtZSI6InJlYWN0LW1hcmtkb3duLTQuMi4xIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvNWY4MzFmMTg0NDRmMmU4YWZmNzJmMGM3MzUzMmZmYThcLyIsImNkbiI6MSwibWV0YSI6eyJmaWxlcyI6WyJyZWFjdC1tYXJrZG93bi00LjIuMVwvaW5kZXguZC50cyIsInJlYWN0LW1hcmtkb3duLTQuMi4xXC9yZWFjdC1tYXJrZG93bi5taW4uanMiLCJyZWFkbWVfNWQ2ZTk0OTE1MjVmNy5tZCJdLCJtYWluIjoicmVhY3QtbWFya2Rvd24tNC4yLjFcL3JlYWN0LW1hcmtkb3duLm1pbi5qcyIsImluZm8iOltdLCJkZXZKcyI6InJlYWN0LW1hcmtkb3duLTQuMi4xXC9yZWFjdC1tYXJrZG93bi5taW4uanMiLCJkdHMiOiJyZWFjdC1tYXJrZG93bi00LjIuMVwvaW5kZXguZC50cyIsInJlYWRtZSI6InJlYWRtZV81ZDZlOTQ5MTUyNWY3Lm1kIn0sImNyZWF0ZVRpbWUiOjE1Njc1MjgwMDd9LCIzNDg4Ijp7ImlkIjozNDg4LCJ0eXBlIjoianNsaWIiLCJuYW1lIjoicmVhY3QtbWF0ZXJpYWwtdWktNC45LjBhIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvMmUyMWFkNTdiOTFiODIyZTJlMGUxYzgyYWMzOWMzMDhcLyIsImNkbiI6MSwibWV0YSI6eyJmaWxlcyI6WyJyZWFjdC1tYXRlcmlhbC11aS00LjkuMGFcL2luZGV4LmQudHMiLCJyZWFjdC1tYXRlcmlhbC11aS00LjkuMGFcL3JlYWN0LW1hdGVyaWFsLXVpLm1pbi5qcyIsInJlYWN0LW1hdGVyaWFsLXVpLTQuOS4wYVwvcmVhY3QtbWF0ZXJpYWwtdWkuanMiLCJyZWFkbWVfNWUzMjAzNmE2NTI5My5tZCJdLCJtYWluIjoicmVhY3QtbWF0ZXJpYWwtdWktNC45LjBhXC9yZWFjdC1tYXRlcmlhbC11aS5taW4uanMiLCJpbmZvIjp7ImZpbGVTaXplIjoiMTQ1N0tCIn0sImRldkpzIjoicmVhY3QtbWF0ZXJpYWwtdWktNC45LjBhXC9yZWFjdC1tYXRlcmlhbC11aS5qcyIsImR0cyI6InJlYWN0LW1hdGVyaWFsLXVpLTQuOS4wYVwvaW5kZXguZC50cyIsInJlYWRtZSI6InJlYWRtZV81ZTMyMDM2YTY1MjkzLm1kIn0sImNyZWF0ZVRpbWUiOjE1ODAzMzU5NzR9LCIzNTgxIjp7ImlkIjozNTgxLCJ0eXBlIjoiaW1hZ2UiLCJuYW1lIjoiZ2x0X2RvbGxhci5wbmciLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC83NDIyZDg0ODQ5YWIxNmQ5NzA0ZGVhZGRjZjQ0MDVkM1wvIiwiY2RuIjoxLCJtZXRhIjp7ImZpbGVzIjpbImdsdF9kb2xsYXIucG5nIl0sIm1haW4iOiJnbHRfZG9sbGFyLnBuZyIsImluZm8iOnsiZmlsZVNpemUiOiIxLjlLQiIsImJpdHMiOjgsIm1pbWUiOiJpbWFnZVwvcG5nIiwic2l6ZSI6eyJ3aWR0aCI6MjAsImhlaWdodCI6MjB9fSwidGh1bWIiOiJnbHRfZG9sbGFyLnBuZyJ9LCJjcmVhdGVUaW1lIjoxNTgxMDAzMjE0fSwiMzU4MiI6eyJpZCI6MzU4MiwidHlwZSI6ImltYWdlIiwibmFtZSI6ImNvaW4ucG5nIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvZThhN2JmNjVlZGVmZjdiMDZkOGRkNzhjZjVlMmJkMGFcLyIsImNkbiI6MSwibWV0YSI6eyJmaWxlcyI6WyJjb2luLnBuZyJdLCJtYWluIjoiY29pbi5wbmciLCJpbmZvIjp7ImZpbGVTaXplIjoiMi41S0IiLCJiaXRzIjo4LCJtaW1lIjoiaW1hZ2VcL3BuZyIsInNpemUiOnsid2lkdGgiOjIwLCJoZWlnaHQiOjIwfX0sInRodW1iIjoiY29pbi5wbmcifSwiY3JlYXRlVGltZSI6MTU4MTAwNjQ3MX0sIjM1OTQiOnsiaWQiOjM1OTQsInR5cGUiOiJpbWFnZSIsIm5hbWUiOiJnbHRfcG9pbnQucG5nIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvOTRhODI1Mzc5MmY5ZTdjZjAwODJkZGViYTk0ODYxMmVcLyIsImNkbiI6MSwibWV0YSI6eyJmaWxlcyI6WyJnbHRfcG9pbnQucG5nIl0sIm1haW4iOiJnbHRfcG9pbnQucG5nIiwiaW5mbyI6eyJmaWxlU2l6ZSI6IjJLQiIsImJpdHMiOjgsIm1pbWUiOiJpbWFnZVwvcG5nIiwic2l6ZSI6eyJ3aWR0aCI6MjAsImhlaWdodCI6MjB9fSwidGh1bWIiOiJnbHRfcG9pbnQucG5nIn0sImNyZWF0ZVRpbWUiOjE1ODExMTMxNDJ9LCIzNjI0Ijp7ImlkIjozNjI0LCJ0eXBlIjoianNsaWIiLCJuYW1lIjoicGFrb18xLjAuMTEiLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC8wYWE0ODZlODc1NTM4Nzc1MTcxZGM0ZDM5MDJlNjc0ZFwvIiwiY2RuIjoxLCJtZXRhIjp7ImZpbGVzIjpbInBha29fMS4wLjExXC9pbmRleC5kLnRzIiwicGFrb18xLjAuMTFcL3Bha28ubWluLmpzIiwicGFrb18xLjAuMTFcL3Bha28uanMiLCJyZWFkbWVfNWU0NDMwMzcyYTA3Ny5tZCJdLCJtYWluIjoicGFrb18xLjAuMTFcL3Bha28ubWluLmpzIiwiaW5mbyI6eyJmaWxlU2l6ZSI6IjI2MUtCIn0sImRldkpzIjoicGFrb18xLjAuMTFcL3Bha28uanMiLCJkdHMiOiJwYWtvXzEuMC4xMVwvaW5kZXguZC50cyIsInJlYWRtZSI6InJlYWRtZV81ZTQ0MzAzNzJhMDc3Lm1kIn0sImNyZWF0ZVRpbWUiOjE1ODE1MjcwODR9LCIxMzQ4MCI6eyJpZCI6MTM0ODAsInR5cGUiOiJqc2xpYiIsIm5hbWUiOiJiYXNlLXBsdWdpbnMtdjE1IiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvZWI1ZDQ0NTY5ZTg1NmU3ZDVhNzEyZWU0ZWU5Mjc2MjRcLyIsImNkbiI6MSwibWV0YSI6eyJmaWxlcyI6WyJiYXNlLXBsdWdpbnMtdjE1XC9iYXNlLXBsdWdpbnMuZC50cyIsImJhc2UtcGx1Z2lucy12MTVcL2xmX2NvcmUuanMubWVtIiwiYmFzZS1wbHVnaW5zLXYxNVwvYmFzZS1wbHVnaW5zLm1pbi5qcyIsImJhc2UtcGx1Z2lucy12MTVcL2Jhc2UtcGx1Z2lucy5qcyIsInJlYWRtZV82MGZiMzg5ODQ5Njc0Lm1kIl0sIm1haW4iOiJiYXNlLXBsdWdpbnMtdjE1XC9iYXNlLXBsdWdpbnMubWluLmpzIiwiaW5mbyI6eyJmaWxlU2l6ZSI6IjQxODJLQiJ9LCJkZXZKcyI6ImJhc2UtcGx1Z2lucy12MTVcL2Jhc2UtcGx1Z2lucy5qcyIsImR0cyI6ImJhc2UtcGx1Z2lucy12MTVcL2Jhc2UtcGx1Z2lucy5kLnRzIiwicmVhZG1lIjoicmVhZG1lXzYwZmIzODk4NDk2NzQubWQifSwiY3JlYXRlVGltZSI6MTYyNzA3Njc1NH0sIjE3MjQyIjp7ImlkIjoxNzI0MiwidHlwZSI6ImltYWdlIiwibmFtZSI6InBVTnJPNS5wbmciLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC8xNWQ5ZDUyMzFkM2U4YjA4OGI1MzM0MWZjNDYxZTkzNVwvIiwiY2RuIjoxLCJtZXRhIjp7ImZpbGVzIjpbInRodW1iXzYxYmY0MmNmMzVmYWEuanBnIiwicFVOck81LnBuZyJdLCJtYWluIjoicFVOck81LnBuZyIsImluZm8iOnsiZmlsZVNpemUiOiIxNDNLQiIsImJpdHMiOjgsIm1pbWUiOiJpbWFnZVwvcG5nIiwic2l6ZSI6eyJ3aWR0aCI6MTI4MCwiaGVpZ2h0Ijo2NDB9fSwidGh1bWIiOiJ0aHVtYl82MWJmNDJjZjM1ZmFhLmpwZyJ9LCJjcmVhdGVUaW1lIjoxNjM5OTI0NDMxfSwiMTcyNDMiOnsiaWQiOjE3MjQzLCJ0eXBlIjoiaW1hZ2UiLCJuYW1lIjoicG5nZWdnKDEpLnBuZyIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcL2U5MGNmM2IxZDNjYzk2YTI2MGNiYWJkMmUxZDA5NmEzXC8iLCJjZG4iOjEsIm1ldGEiOnsiZmlsZXMiOlsidGh1bWJfNjFiZjQ0YTk2ZTQwMS5qcGciLCJwbmdlZ2coMSkucG5nIl0sIm1haW4iOiJwbmdlZ2coMSkucG5nIiwiaW5mbyI6eyJmaWxlU2l6ZSI6Ijc1NEtCIiwiYml0cyI6OCwibWltZSI6ImltYWdlXC9wbmciLCJzaXplIjp7IndpZHRoIjoxMDI0LCJoZWlnaHQiOjY4Nn19LCJ0aHVtYiI6InRodW1iXzYxYmY0NGE5NmU0MDEuanBnIn0sImNyZWF0ZVRpbWUiOjE2Mzk5MjQ5MDV9LCIxNzI0NiI6eyJpZCI6MTcyNDYsInR5cGUiOiJqc2xpYiIsIm5hbWUiOiJyZWFjdC1jb2xvcmZ1bC12MCIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcLzFhNDE5MTU0MzBhMTBlZWQ5MTc2MTYyNzkxZDkwN2FjXC8iLCJjZG4iOjEsIm1ldGEiOnsiZmlsZXMiOlsicmVhY3QtY29sb3JmdWwtdjBcL2luZGV4LmQudHMiLCJyZWFjdC1jb2xvcmZ1bC12MFwvcmVhY3QtY29sb3JmdWwubWluLmpzIl0sIm1haW4iOiJyZWFjdC1jb2xvcmZ1bC12MFwvcmVhY3QtY29sb3JmdWwubWluLmpzIiwiaW5mbyI6eyJmaWxlU2l6ZSI6IjEzS0IifSwiZGV2SnMiOiJyZWFjdC1jb2xvcmZ1bC12MFwvcmVhY3QtY29sb3JmdWwubWluLmpzIiwiZHRzIjoicmVhY3QtY29sb3JmdWwtdjBcL2luZGV4LmQudHMifSwiY3JlYXRlVGltZSI6MTYzOTk0NjU1NX0sIjE3MjQ3Ijp7ImlkIjoxNzI0NywidHlwZSI6ImltYWdlIiwibmFtZSI6IndhdGVyZHJvcC5wbmciLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC84N2ZjZjBhYmRkODFhZjU1YjkyNzYxYTdkOWMyM2MyZFwvIiwiY2RuIjoxLCJtZXRhIjp7ImZpbGVzIjpbIndhdGVyZHJvcC5wbmciXSwibWFpbiI6IndhdGVyZHJvcC5wbmciLCJpbmZvIjp7ImZpbGVTaXplIjoiMy40S0IiLCJiaXRzIjo4LCJtaW1lIjoiaW1hZ2VcL3BuZyIsInNpemUiOnsid2lkdGgiOjUwLCJoZWlnaHQiOjUwfX0sInRodW1iIjoid2F0ZXJkcm9wLnBuZyJ9LCJjcmVhdGVUaW1lIjoxNjM5OTU2NDQzfSwiMTcyNTciOnsiaWQiOjE3MjU3LCJ0eXBlIjoiaW1hZ2UiLCJuYW1lIjoic2FuZF9zaGVsbHMuanBnIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvZTExZDJkZWZjMjVjNmVlYWY5ZWZkMWM4YmJhNDAyYjdcLyIsImNkbiI6MSwibWV0YSI6eyJmaWxlcyI6WyJ0aHVtYl82MWMwNmQ5NDQ1ODI4LmpwZyIsInNhbmRfc2hlbGxzLmpwZyJdLCJtYWluIjoic2FuZF9zaGVsbHMuanBnIiwiaW5mbyI6eyJmaWxlU2l6ZSI6IjE4MEtCIiwiYml0cyI6OCwibWltZSI6ImltYWdlXC9qcGVnIiwic2l6ZSI6eyJ3aWR0aCI6MTAyNCwiaGVpZ2h0Ijo2NDB9fSwidGh1bWIiOiJ0aHVtYl82MWMwNmQ5NDQ1ODI4LmpwZyJ9LCJjcmVhdGVUaW1lIjoxNjQwMDAwOTE2fSwiMTcyNTgiOnsiaWQiOjE3MjU4LCJ0eXBlIjoiaW1hZ2UiLCJuYW1lIjoic3RvbmVzLTUxMjAxN18xMjgwX3NtYWxsZXIuanBnIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvZDAxZTk3OGJlMDQxZWUyNjJlNWFiMzMwOTM4MTkyOTZcLyIsImNkbiI6MSwibWV0YSI6eyJmaWxlcyI6WyJ0aHVtYl82MWMwNzQyYjk5ZTBiLmpwZyIsInN0b25lcy01MTIwMTdfMTI4MF9zbWFsbGVyLmpwZyJdLCJtYWluIjoic3RvbmVzLTUxMjAxN18xMjgwX3NtYWxsZXIuanBnIiwiaW5mbyI6eyJmaWxlU2l6ZSI6IjIzMUtCIiwiYml0cyI6OCwibWltZSI6ImltYWdlXC9qcGVnIiwic2l6ZSI6eyJ3aWR0aCI6MTAyNCwiaGVpZ2h0Ijo3Njh9fSwidGh1bWIiOiJ0aHVtYl82MWMwNzQyYjk5ZTBiLmpwZyJ9LCJjcmVhdGVUaW1lIjoxNjQwMDAyNjAzfSwiMTcyNjQiOnsiaWQiOjE3MjY0LCJ0eXBlIjoiaW1hZ2UiLCJuYW1lIjoieW91dHViZV90aHVtYi5qcGciLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC85MTFjOGNjMGFlNzY2YTIyYWUzZmE4Yjk0YmQ0MzU1N1wvIiwiY2RuIjoxLCJtZXRhIjp7ImZpbGVzIjpbInRodW1iXzYxYzBhOGU2ODhmNDIuanBnIiwieW91dHViZV90aHVtYi5qcGciXSwibWFpbiI6InlvdXR1YmVfdGh1bWIuanBnIiwiaW5mbyI6eyJmaWxlU2l6ZSI6IjE5OUtCIiwiYml0cyI6OCwibWltZSI6ImltYWdlXC9qcGVnIiwic2l6ZSI6eyJ3aWR0aCI6MTI4MCwiaGVpZ2h0Ijo3MjB9fSwidGh1bWIiOiJ0aHVtYl82MWMwYThlNjg4ZjQyLmpwZyJ9LCJjcmVhdGVUaW1lIjoxNjQwMDE2MTAyfSwiMTk4MTkiOnsiaWQiOjE5ODE5LCJ0eXBlIjoiaW1hZ2UiLCJuYW1lIjoiMjkxNzE2X2dpdGh1Yl9sb2dvX3NvY2lhbG5ldHdvcmtfc29jaWFsX2ljb24ucG5nIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvOTZhODY2NWYwMTQ0NmM2YjVjNWVkYjYzNDFjOGE0ZjBcLyIsImNkbiI6MSwibWV0YSI6eyJmaWxlcyI6WyIyOTE3MTZfZ2l0aHViX2xvZ29fc29jaWFsbmV0d29ya19zb2NpYWxfaWNvbi5wbmciXSwibWFpbiI6IjI5MTcxNl9naXRodWJfbG9nb19zb2NpYWxuZXR3b3JrX3NvY2lhbF9pY29uLnBuZyIsImluZm8iOnsiZmlsZVNpemUiOiIxLjVLQiIsImJpdHMiOjgsIm1pbWUiOiJpbWFnZVwvcG5nIiwic2l6ZSI6eyJ3aWR0aCI6NDgsImhlaWdodCI6NDh9fSwidGh1bWIiOiIyOTE3MTZfZ2l0aHViX2xvZ29fc29jaWFsbmV0d29ya19zb2NpYWxfaWNvbi5wbmcifSwiY3JlYXRlVGltZSI6MTY1NDEwODE4NH19fSwiYXBwTGlicyI6W3siaWQiOjE5NTQwLCJ0eXBlIjoiYnVpbGRMaWIiLCJuYW1lIjoiQmFzZS5idWlsZC52MS40LjQiLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC82ZTNjOWU5NjdhYzliZmY1MDI1OWMwZjYxNDBkMWZhOFwvIiwiY2RuIjoxLCJtZXRhIjp7ImZpbGVzIjpbIm1vZHVsZXMuanMiLCJtb2R1bGVzLmQudHMiLCJhcmNoaXZlLnppcCJdLCJtYWluIjoibW9kdWxlcy5qcyIsInJpZHMiOnsiQmFzZS5wbHVnaW5zIjp7ImlkIjoxMzQ4MCwidGltZSI6MTYyNzA3Njc1NH19LCJwY29kZSI6IkJhc2UiLCJ2ZXIiOiIxLjQuNCJ9LCJjcmVhdGVUaW1lIjoxNjUyMDI4OTc4fSx7ImlkIjo3NTQxLCJ0eXBlIjoiYnVpbGRMaWIiLCJuYW1lIjoiQ29yZG92YS5idWlsZC52MS4xLjAiLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC84Y2FhNGFlYjg1ODU1ZjAwZmY0MDc1ZTY2ZjVmZjllMlwvIiwiY2RuIjoxLCJtZXRhIjp7ImZpbGVzIjpbIm1vZHVsZXMuanMiLCJtb2R1bGVzLmQudHMiLCJhcmNoaXZlLnppcCJdLCJtYWluIjoibW9kdWxlcy5qcyIsInJpZHMiOnsiQmFzZSI6eyJpZCI6MTk1NDAsInRpbWUiOjE1OTc5NDE1NzZ9LCJDb3Jkb3ZhLmVtdUJlZXAiOnsiaWQiOjE0NDEsInRpbWUiOjE1MzY3NzY1NTd9fSwicGNvZGUiOiJDb3Jkb3ZhIiwidmVyIjoiMS4xLjAifSwiY3JlYXRlVGltZSI6MTYxMDMwNjY3N30seyJpZCI6MTM0NzUsInR5cGUiOiJidWlsZExpYiIsIm5hbWUiOiJSZWFjdC5idWlsZC52My4wLjIiLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC9hNTY3OGY1NTFmMWVjNGQ2OGQzN2NmYTk5NWRiY2JkNlwvIiwiY2RuIjoxLCJtZXRhIjp7ImZpbGVzIjpbIm1vZHVsZXMuanMiLCJtb2R1bGVzLmQudHMiLCJhcmNoaXZlLnppcCJdLCJtYWluIjoibW9kdWxlcy5qcyIsInJpZHMiOnsiQmFzZSI6eyJpZCI6MTk1NDAsInRpbWUiOjE2MjcwNzE1NjZ9LCJSZWFjdC5yZWFjdFdpdGhEb20iOnsiaWQiOjMwMTQsInRpbWUiOjE1NjcyODkyNTR9fSwicGNvZGUiOiJSZWFjdCIsInZlciI6IjMuMC4yIn0sImNyZWF0ZVRpbWUiOjE2MjcwNzE1ODd9LHsiaWQiOjE5NzU1LCJ0eXBlIjoiYnVpbGRMaWIiLCJuYW1lIjoiQ2dFdmVudHNFbmdpbmUuYnVpbGQudjIuMy4yIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvZDNiOGVkMzM2MTViMWZlODY4NDUzYTQyNWU4N2U3MzlcLyIsImNkbiI6MSwibWV0YSI6eyJmaWxlcyI6WyJtb2R1bGVzLmpzIiwibW9kdWxlcy5kLnRzIiwiYXJjaGl2ZS56aXAiXSwibWFpbiI6Im1vZHVsZXMuanMiLCJyaWRzIjp7IkJhc2UiOnsiaWQiOjE5NTQwLCJ0aW1lIjoxNjI3MDcxNjk5fSwiQ2dFdmVudHNFbmdpbmUubHpzdHJpbmciOnsiaWQiOjcxNCwidGltZSI6MTUyNzI5MTQxM30sIkNnRXZlbnRzRW5naW5lLm1hdGhqcyI6eyJpZCI6MTY0OSwidGltZSI6MTU0MTQxMTM0Mn19LCJwY29kZSI6IkNnRXZlbnRzRW5naW5lIiwidmVyIjoiMi4zLjIifSwiY3JlYXRlVGltZSI6MTY1MzQyOTc5NX0seyJpZCI6MTI3MzAsInR5cGUiOiJidWlsZExpYiIsIm5hbWUiOiJSZWFjdE1hdGVyaWFsLmJ1aWxkLnYyLjAuNiIsInVybCI6IlwvZ2Fzc2V0c1wvcmVzb3VyY2VcLzBiNzFmYjE1NTlmYmI0NDNjZDAxZDUwOGE2NmVjZTk2XC8iLCJjZG4iOjEsIm1ldGEiOnsiZmlsZXMiOlsibW9kdWxlcy5qcyIsIm1vZHVsZXMuZC50cyIsImFyY2hpdmUuemlwIl0sIm1haW4iOiJtb2R1bGVzLmpzIiwicmlkcyI6eyJDZ0V2ZW50c0VuZ2luZSI6eyJpZCI6MTk3NTUsInRpbWUiOjE1OTc5MzIxMDR9LCJSZWFjdCI6eyJpZCI6MTM0NzUsInRpbWUiOjE1OTc5MzIxMDd9LCJSZWFjdE1hdGVyaWFsLm1hdGVyaWFsLWljb24tZm9udCI6eyJpZCI6OTI2LCJ0aW1lIjoxNTI5NzAwNDEyfSwiUmVhY3RNYXRlcmlhbC5tYXRlcmlhbC11aSI6eyJpZCI6MzQ4OCwidGltZSI6MTU4MDMzNTk3NH0sIlJlYWN0TWF0ZXJpYWwucmVhY3QtbWFya2Rvd24iOnsiaWQiOjMwMTcsInRpbWUiOjE1Njc1MjgwMDd9LCJSZWFjdE1hdGVyaWFsLnJvYm90byI6eyJpZCI6OTI3LCJ0aW1lIjoxNTI5NzEzNjYxfX0sInBjb2RlIjoiUmVhY3RNYXRlcmlhbCIsInZlciI6IjIuMC42In0sImNyZWF0ZVRpbWUiOjE2MjU1MDE3Mzd9LHsiaWQiOjE2NDY2LCJ0eXBlIjoiYnVpbGRMaWIiLCJuYW1lIjoiR0xULmJ1aWxkLnYxLjYuMTEiLCJ1cmwiOiJcL2dhc3NldHNcL3Jlc291cmNlXC8xZmI2ZDhhNWE3ZTkzZDVjYjc5N2E2MTNiNDE2YmZkYlwvIiwiY2RuIjoxLCJtZXRhIjp7ImZpbGVzIjpbIm1vZHVsZXMuanMiLCJtb2R1bGVzLmQudHMiLCJhcmNoaXZlLnppcCJdLCJtYWluIjoibW9kdWxlcy5qcyIsInJpZHMiOnsiQ29yZG92YSI6eyJpZCI6NzU0MSwidGltZSI6MTU5Nzk0MTY1OH0sIkdMVC5jcnlwdG8iOnsiaWQiOjIwODgsInRpbWUiOjE1NDY5NDY2NDR9LCJHTFQuZ3Vlc3RJY29uIjp7ImlkIjo4MDIsInRpbWUiOjE2MjcxMjgwOTR9LCJHTFQucGFrbyI6eyJpZCI6MzYyNCwidGltZSI6MTU4MTUyNzA4NH0sIlJlYWN0TWF0ZXJpYWwiOnsiaWQiOjEyNzMwLCJ0aW1lIjoxNTk3OTQxNjU1fX0sInBjb2RlIjoiR0xUIiwidmVyIjoiMS42LjExIn0sImNyZWF0ZVRpbWUiOjE2MzY3NDQzNjV9LHsiaWQiOjE4OTc5LCJ0eXBlIjoiYnVpbGRMaWIiLCJuYW1lIjoiU2VydmVyLmJ1aWxkLnYxLjEwLjIxIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvNWU3NDVmMDc5ZTk3ZDI5YjliMWZmMWI5ODI4ZjY0MDZcLyIsImNkbiI6MSwibWV0YSI6eyJmaWxlcyI6WyJtb2R1bGVzLmpzIiwibW9kdWxlcy5kLnRzIiwiYXJjaGl2ZS56aXAiXSwibWFpbiI6Im1vZHVsZXMuanMiLCJyaWRzIjp7IkdMVCI6eyJpZCI6MTY0NjYsInRpbWUiOjE2MDQwODAyMjF9LCJTZXJ2ZXIuZ2FtZURvbGxhciI6eyJpZCI6MzU4MiwidGltZSI6MTU4MTAwNjQ3MX0sIlNlcnZlci5nbHREb2xsYXIiOnsiaWQiOjM1ODEsInRpbWUiOjE1ODEwMDYzOTN9LCJTZXJ2ZXIuZ2x0UG9pbnQiOnsiaWQiOjM1OTQsInRpbWUiOjE1ODExMTMxNDJ9LCJTZXJ2ZXIuc29ja2V0LWlvIjp7ImlkIjoyMzEzLCJ0aW1lIjoxNTU2MDcyNTc5fX0sInBjb2RlIjoiU2VydmVyIiwidmVyIjoiMS4xMC4yMSIsImdpdGVtcyI6Mn0sImNyZWF0ZVRpbWUiOjE2NTAzOTQ5MjZ9LHsiaWQiOjE5ODIwLCJ0eXBlIjoiYnVpbGRBcHAiLCJuYW1lIjoicmlwcGxlczEuYnVpbGQudjIuMC4wIiwidXJsIjoiXC9nYXNzZXRzXC9yZXNvdXJjZVwvMGZkODU1YmZmNmIxYTI5ZThmZTM2MDJhNTBkODIyZmZcLyIsImNkbiI6MSwibWV0YSI6eyJmaWxlcyI6WyJtb2R1bGVzLmpzIiwibW9kdWxlcy5kLnRzIiwiYXJjaGl2ZS56aXAiXSwibWFpbiI6Im1vZHVsZXMuanMiLCJyaWRzIjp7IlJpcHBsZXMuYmFja2dyb3VuZF8xIjp7ImlkIjoxNzI1OCwidGltZSI6MTY0MDAwMjYwM30sIlJpcHBsZXMuY292ZXJiZyI6eyJpZCI6MTcyNTcsInRpbWUiOjE2NDAwMDA5MTZ9LCJSaXBwbGVzLnBsYXRmb3JtZXJfYmFja2dyb3VuZCI6eyJpZCI6MTcyNDIsInRpbWUiOjE2Mzk5MjQ0MzF9LCJSaXBwbGVzLnJlYWN0LWNvbG9yZnVsIjp7ImlkIjoxNzI0NiwidGltZSI6MTYzOTk0NjU1NX0sIlJpcHBsZXMuc2NlbmVfZnJhbWUiOnsiaWQiOjE3MjQzLCJ0aW1lIjoxNjM5OTI0OTA1fSwiUmlwcGxlcy50aHVtYiI6eyJpZCI6MTcyNjQsInRpbWUiOjE2NDAwMTYxMDJ9LCJSaXBwbGVzLndhdGVyX2Ryb3AiOnsiaWQiOjE3MjQ3LCJ0aW1lIjoxNjM5OTU2NDQzfSwicmlwcGxlczEubG9nbyI6eyJpZCI6MTk4MTksInRpbWUiOjE2NTQxMDgxODR9LCJTZXJ2ZXIiOnsiaWQiOjE4OTc5LCJ0aW1lIjoxNjM5NzUwNjA2fX0sInBjb2RlIjoicmlwcGxlczEiLCJ2ZXIiOiIyLjAuMCJ9LCJjcmVhdGVUaW1lIjoxNjU0MTA4MjczfV0sInRhcmdldE9yaWdpbiI6Imh0dHBzOlwvXC9jb2RlLmdhbWVsZXQuY29tIiwibXV0ZSI6MCwiYnVpbGROYW1lIjoicmlwcGxlczEuYnVpbGQudjIuMC4wIiwiZW5naW5lVmVyc2lvbiI6IjJxYjd1ZFwvIiwic2VydmVyVGltZSI6MTY1NDEwODQwMDY4NCwicHJvamVjdERvbWFpbiI6InJpcHBsZXMxLmdhbWVsZXQub25saW5lIiwic3VwcG9ydERldmVsb3BlclRvb2wiOmZhbHNlLCJsb2NhbGUiOiJ6aC1IYW50Iiwic3JjVXJsTWFwIjp7IkNHLnJpcHBsZXMxXC9SRUFETUUubWQiOnsidXJsIjoiXC9nYXNzZXRzXC9idWlsZF9maWxlXC9yaXBwbGVzMS5idWlsZC52Mi4wLjBcL3NyY1wvQ0cucmlwcGxlczFcL1JFQURNRS5tZD92PTI5OGZiODRmNTc4ZGJkYTgyM2I0MTZiNzdkYmZkNTY4In0sIkNHLlJlYWN0XC9zdHlsZXMuY3NzIjp7InVybCI6IlwvZ2Fzc2V0c1wvYnVpbGRfZmlsZVwvcmlwcGxlczEuYnVpbGQudjIuMC4wXC9zcmNcL0NHLlJlYWN0XC9zdHlsZXMuY3NzP3Y9NTFlOGY4OTUyMGNlMTM4MTIzMzZjZmViMWI5MzJjZjYifSwiQ0cuQ29yZG92YVwvY29uZmlnLmpzb24iOnsidXJsIjoiXC9nYXNzZXRzXC9idWlsZF9maWxlXC9yaXBwbGVzMS5idWlsZC52Mi4wLjBcL3NyY1wvQ0cuQ29yZG92YVwvY29uZmlnLmpzb24/dj1lNjIxODA1MjZmZDkzYzEzMGU3NmZjZGU5MmE1ZTc4ZCJ9LCJDRy5Db3Jkb3ZhXC9lbXVsYXRvci5jc3MiOnsidXJsIjoiXC9nYXNzZXRzXC9idWlsZF9maWxlXC9yaXBwbGVzMS5idWlsZC52Mi4wLjBcL3NyY1wvQ0cuQ29yZG92YVwvZW11bGF0b3IuY3NzP3Y9MjhjMTQ4OGQzZDUzNjEyOWNkMzNjYzJiZjkzODk4YzEifSwiQ0cuQ29yZG92YVwvcHJlbG9hZC5jc3MiOnsidXJsIjoiXC9nYXNzZXRzXC9idWlsZF9maWxlXC9yaXBwbGVzMS5idWlsZC52Mi4wLjBcL3NyY1wvQ0cuQ29yZG92YVwvcHJlbG9hZC5jc3M/dj1mZmU4ZDQzMDliNGIwZGRlYjJlYTE4MGE1NjJkOTU2ZiJ9LCJDRy5TZXJ2ZXJcL3N0eWxlcy5jc3MiOnsidXJsIjoiXC9nYXNzZXRzXC9idWlsZF9maWxlXC9yaXBwbGVzMS5idWlsZC52Mi4wLjBcL3NyY1wvQ0cuU2VydmVyXC9zdHlsZXMuY3NzP3Y9MDhlNDdjMDU0NTZjZDQ3ZmQyODEwOWY2MDEwNWViOTgifSwiQ0cuU2VydmVyXC9HTFRfUkVBRE1FLm1kIjp7InVybCI6IlwvZ2Fzc2V0c1wvYnVpbGRfZmlsZVwvcmlwcGxlczEuYnVpbGQudjIuMC4wXC9zcmNcL0NHLlNlcnZlclwvR0xUX1JFQURNRS5tZD92PTg0NmU0ODllNjZkNjY4MDgwMjI2ZGMyOTZiNDY2NWFiIn0sIkNHLlNlcnZlclwvTVNHX1JFQURNRS5tZCI6eyJ1cmwiOiJcL2dhc3NldHNcL2J1aWxkX2ZpbGVcL3JpcHBsZXMxLmJ1aWxkLnYyLjAuMFwvc3JjXC9DRy5TZXJ2ZXJcL01TR19SRUFETUUubWQ/dj1jOTdlOWY4ZmY0ZjI4ZjQwZmVhNjI3MjczMGQ5NjY1YiJ9LCJDRy5SZWFjdE1hdGVyaWFsXC9ldmVudHMuc2NoZW1hLmpzb24iOnsidXJsIjoiXC9nYXNzZXRzXC9idWlsZF9maWxlXC9yaXBwbGVzMS5idWlsZC52Mi4wLjBcL3NyY1wvQ0cuUmVhY3RNYXRlcmlhbFwvZXZlbnRzLnNjaGVtYS5qc29uP3Y9NjYxMWU0ZDgxZjFmYzNkZWE3NmUwN2E4YzNiZjRhM2MifSwiQ0cuU2VydmVyXC9ldmVudHMuc2NoZW1hLmpzb24iOnsidXJsIjoiXC9nYXNzZXRzXC9idWlsZF9maWxlXC9yaXBwbGVzMS5idWlsZC52Mi4wLjBcL3NyY1wvQ0cuU2VydmVyXC9ldmVudHMuc2NoZW1hLmpzb24/dj00MGU5MjFmMDFiMWVhYjhjY2MxMDA4MGI3ZjYzZDg3YSJ9LCJDRy5yaXBwbGVzMVwvQ0hBTkdFTE9HLm1kIjp7InVybCI6IlwvZ2Fzc2V0c1wvYnVpbGRfZmlsZVwvcmlwcGxlczEuYnVpbGQudjIuMC4wXC9zcmNcL0NHLnJpcHBsZXMxXC9DSEFOR0VMT0cubWQ/dj04OWEwM2E2NTFjNGU3NmZiNjc0MWY4MGY2NWI5YTI2NiJ9fX0="}}),i.CgApp.env.push("offsite")}($,window);